window.__require=function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({APIConstant:[function(t,e,i){"use strict";cc._RF.push(e,"6d98aWVPixM6oYZfQhdoDMo","APIConstant");e.exports={HOST:"https://sun.vin:8443/v1/",API_CONFIG:"config/list",API_CAPTCHA:"user/captcha",API_REGISTER:"user/register",API_REGISTER_SOCIAL:"user/register_social",API_LOGIN:"user/login",API_LOGIN_TOKEN:"user/info",API_INFO_UPDATE:"user/update",API_UPDATE_AVATAR:"user/avatar",API_UPDATE_NICKNAME:"user/update_nickname",API_NOTIFY_UPDATE:"user/notify",API_MONEY:"user/money",API_LOGOUT:"user/logout",API_CHANGE_PASSWORD:"user/change_pass",API_SUMMARY_MATCH:"user/summary_match",API_PLAYER_INFO:"user/get_info",API_GAME_INFO:"user/summary_match",API_PLAY_HISTORY:"user/get_play_history",API_GET_GIFTCODE:"user/get_giftcode",API_UPDATE_SOUND:"user/update_sound",API_UPDATE_INVITE:"user/update_invite",API_FORGOT_PASSWORD_EMAIL:"user/forgot_pass_by_email",API_VERIFY_PASSWORD:"user/verify_new_pass",API_VERIFY_OTP:"user/verify_otp",API_REGISTER_QUICK:"user/register_quick",API_SEND_OTP:"user/send_otp",API_SEND_OTP_FORGET_PASSWORD:"user/send_otp_forgotpass",API_SEND_OTP_LOGIN:"user/send_otp_login",API_SEND_OTP_LOGIN_SOCIAL:"user/send_otp_login_social",API_VERIFY_LOGIN_SECURITY:"user/verify_login_secure",API_SECURITY_GAME:"user/security_game",API_CANCEL_ACTIVE_PHONE:"user/cancel_active_phone",API_FRIEND_INFO:"friend/info",API_FRIEND_UPDATE:"friend/update",API_FRIEND_CONVERT:"friend/convert",API_FRIEND_HISTORY:"friend/history",API_FRIEND_TOP:"friend/top",API_TOP_BEST_MONEY_WIN:"top/best_money_win",API_TOP_BEST_GOLD_WIN:"top/best_gold_win",API_TOP_AWARD:"top/award",API_TOP:"top/list",API_RECHARGE_CARD:"card/recharge",API_AWARD_CARD:"award/withdraw",API_HISTORY_AWARD:"award/log_award",API_TRANSTER_MONEY_TO_GOLD:"transfer/convert",API_HISTORY_TRANSTER_MONEY_TO_GOLD:"transfer/log_convert_moneytogold",API_HISTORY_RECHARGE_GOLD:"user/recharge",API_RECHARGE_IAP:"iap/buy",API_CATEGORIES_LIST:"category/list",API_CATEGORIES_DETAIL:"category/detail",API_POST_LIST:"post/list",API_POST_DETAIL:"post/detail",API_MAIL:"message/allpage",API_MAIL_READED:"/api/message/readed",API_MAIL_DELETE:"/api/message/deleted",API_MESSAGE_LIST:"message/list",API_MESSAGE_READ:"message/read",API_MESSAGE_REMOVE:"message/remove",API_TAIXIU_HISTORY:"taixiu/history",API_TAIXIU_TOP:"taixiu/top",API_TAIXIU_CHAIN:"taixiu/chain",API_MINIPOKER_HISTORY:"minipoker/history",API_MINIPOKER_TOP:"minipoker/top",API_MINIBACAY_HISTORY:"mini3cay/history",API_MINIBACAY_TOP:"mini3cay/top",API_DIAMOND_HISTORY:"diamond/history",API_DIAMOND_TOP:"diamond/top",API_TRENDUOI_HISTORY:"hilo/history",API_TRENDUOI_TOP:"hilo/top",API_DIAMOND2_HISTORY:"diamond2/history",API_DIAMOND2_TOP:"diamond2/top",API_BAUCUA_HISTORY:"hooheyhow/history",API_BAUCUA_TOP:"hooheyhow/top",API_BAUCUA_TOP_WEEK:"hooheyhow/top_week",API_MINIGAME_LOTTERY_HISTORY:"minigame_lottery/history",API_BOM_HISTORY:"bom/history",API_WILD_HISTORY:"wild/history",API_EVENT_TOP:"top/vp",API_EVENT_TAN_LOC:"loc/log_tan_loc",API_EVENT_HU_LOC:"loc/log_hu_loc",API_LV_GET_TOP:"lv/top",API_SLOT_GET_TOP:"zoombies/top",API_SLOT_GET_HISTORY:"zoombies/history",API_SLOT3_GET_TOP:"one001/top",API_SLOT3_GET_HISTORY:"one001/history",API_SLOT2_GET_TOP:"dragon/top",API_SLOT2_GET_HISTORY:"dragon/history",API_SLOT4_GET_HISTORY:"classic1/history",API_SLOT4_GET_TOP:"classic1/top",API_SUCCESS:1},cc._RF.pop()},{}],API:[function(t,e,i){"use strict";cc._RF.push(e,"21071dpjSBMGqdCQ3xY9+0m","API");var n=t("./APIConstant"),o=t("../helper/Message"),s=t("../helper/Config"),a=(t("../prefab/mini-game/MiniGameConstant"),{getUrlByAPI:function(t){return n.HOST+t},getStringBodyByObject:function(t){var e=[];for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},executeGETMethod:function(t,e,i,n){t=t+"?"+this.getStringBodyByObject(e);var a=new XMLHttpRequest;return a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<300){var t=JSON.parse(a.responseText);"1"===t.status||1===t.status?i(t):n(t)}else 0===a.status||n({msg:o.TIME_OUT_LOADING})},a.open("GET",t,!0),a.timeout=1e3*s.XHR_TIMEOUT,cc.sys.isNative&&(a.setRequestHeader("User-Agent",this.getAgent()),a.setRequestHeader("Accept-Encoding","gzip,deflate")),a.send(),a},executePOSTMethod:function(t,e,i,n){var a=this.getStringBodyByObject(e),r=new XMLHttpRequest;return r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<400){var t=JSON.parse(r.responseText);"1"===t.status||1===t.status?i(t):n(t)}else 0===r.status||n({msg:o.TIME_OUT_LOADING})},r.open("POST",t,!0),r.timeout=1e3*s.XHR_TIMEOUT,r.setRequestHeader("content-type","application/x-www-form-urlencoded"),cc.sys.isNative&&(r.setRequestHeader("User-Agent",this.getAgent()),r.setRequestHeader("Accept-Encoding","gzip,deflate")),r.send(a),r},sendTokentoPays:function(t,e,i){var s=n.HOST_PAY+t,a=new XMLHttpRequest;return a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<300?"OK"===a.statusText?e():i():0===a.status||i({msg:o.TIME_OUT_LOADING}))},a.open("GET",s,!0),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.send(),a},getConfig:function(t,e,i){var o=this.getUrlByAPI(n.API_CONFIG);return this.executeGETMethod(o,t,e,i)},getCaptcha:function(t,e,i){var o=this.getUrlByAPI(n.API_CAPTCHA);return this.executeGETMethod(o,t,e,i)},login:function(t,e,i){var o=this.getUrlByAPI(n.API_LOGIN);return this.executePOSTMethod(o,t,e,i)},loginToken:function(t,e,i){var o=this.getUrlByAPI(n.API_LOGIN_TOKEN);return this.executeGETMethod(o,t,e,i)},register:function(t,e,i){var o=this.getUrlByAPI(n.API_REGISTER);return this.executePOSTMethod(o,t,e,i)},registerSocial:function(t,e,i){var o=this.getUrlByAPI(n.API_REGISTER_SOCIAL);return this.executePOSTMethod(o,t,e,i)},forgotPasswordEmail:function(t,e,i){var o=this.getUrlByAPI(n.API_FORGOT_PASSWORD_EMAIL);return this.executePOSTMethod(o,t,e,i)},verifyPassword:function(t,e,i){var o=this.getUrlByAPI(n.API_VERIFY_PASSWORD);return this.executePOSTMethod(o,t,e,i)},verifyOtp:function(t,e,i){var o=this.getUrlByAPI(n.API_VERIFY_OTP);return this.executePOSTMethod(o,t,e,i)},sendOtp:function(t,e,i){var o=this.getUrlByAPI(n.API_SEND_OTP);return this.executePOSTMethod(o,t,e,i)},sendOtpForgetPassword:function(t,e,i){var o=this.getUrlByAPI(n.API_SEND_OTP_FORGET_PASSWORD);return this.executePOSTMethod(o,t,e,i)},registerQuick:function(t,e,i){var o=this.getUrlByAPI(n.API_REGISTER_QUICK);return this.executePOSTMethod(o,t,e,i)},update:function(t,e,i){var o=this.getUrlByAPI(n.API_INFO_UPDATE);return this.executePOSTMethod(o,t,e,i)},updateNickname:function(t,e,i){var o=this.getUrlByAPI(n.API_UPDATE_NICKNAME);return this.executePOSTMethod(o,t,e,i)},changePassword:function(t,e,i){var o=this.getUrlByAPI(n.API_CHANGE_PASSWORD);return this.executePOSTMethod(o,t,e,i)},updateSoundGame:function(t,e,i){var o=this.getUrlByAPI(n.API_UPDATE_SOUND);return this.executePOSTMethod(o,t,e,i)},updateInviteGame:function(t,e,i){var o=this.getUrlByAPI(n.API_UPDATE_INVITE);return this.executePOSTMethod(o,t,e,i)},getListMessage:function(t,e,i){var o=this.getUrlByAPI(n.API_MESSAGE_LIST);return this.executeGETMethod(o,t,e,i)},readMessage:function(t,e,i){var o=this.getUrlByAPI(n.API_MESSAGE_READ);return this.executePOSTMethod(o,t,e,i)},removeMessage:function(t,e,i){var o=this.getUrlByAPI(n.API_MESSAGE_REMOVE);return this.executePOSTMethod(o,t,e,i)},logout:function(t,e,i){var o=this.getUrlByAPI(n.API_LOGOUT);return this.executePOSTMethod(o,t,e,i)},topBestMoneyWin:function(t,e,i){var o=this.getUrlByAPI(n.API_TOP_BEST_MONEY_WIN);return this.executeGETMethod(o,t,e,i)},topAward:function(t,e,i){var o=this.getUrlByAPI(n.API_TOP_AWARD);return this.executeGETMethod(o,t,e,i)},top:function(t,e,i){var o=this.getUrlByAPI(n.API_TOP);return this.executeGETMethod(o,t,e,i)},historyAward:function(t,e,i){var o=this.getUrlByAPI(n.API_HISTORY_AWARD);return this.executeGETMethod(o,t,e,i)},historyRechargeGold:function(t,e,i){var o=this.getUrlByAPI(n.API_HISTORY_TRANSTER_MONEY_TO_GOLD);return this.executeGETMethod(o,t,e,i)},historyRechargeMoney:function(t,e,i){var o=this.getUrlByAPI(n.API_HISTORY_RECHARGE_GOLD);return this.executeGETMethod(o,t,e,i)},getGameInfo:function(t,e,i){var o=this.getUrlByAPI(n.API_GAME_INFO);return this.executeGETMethod(o,t,e,i)},getMail:function(t,e,i){var o=this.getUrlByAPI(n.API_MAIL);return this.executeGETMethod(o,t,e,i)},readedMail:function(t,e,i){var o=this.getUrlByAPI(n.API_MAIL_READED);return this.executeGETMethod(o,t,e,i)},deleteMail:function(t,e,i){var o=this.getUrlByAPI(n.API_MAIL_DELETE);return this.executeGETMethod(o,t,e,i)},getPlayerInfo:function(t,e,i){var o=this.getUrlByAPI(n.API_PLAYER_INFO);return this.executeGETMethod(o,t,e,i)},scaleRecharge:function(t,e,i){var o=this.getUrlByAPI(n.API_SCALE_RECHARGE);return this.executePOSTMethod(o,t,e,i)},getTopLongVuong:function(t,e,i){var o=this.getUrlByAPI(n.API_LV_GET_TOP);return this.executeGETMethod(o,t,e,i)},rechargeCard:function(t,e,i){var o=this.getUrlByAPI(n.API_RECHARGE_CARD);return this.executePOSTMethod(o,t,e,i)},rechargeIAP:function(t,e,i){var o=this.getUrlByAPI(n.API_RECHARGE_IAP);return this.executePOSTMethod(o,t,e,i)},awardCard:function(t,e,i){var o=this.getUrlByAPI(n.API_AWARD_CARD);return this.executePOSTMethod(o,t,e,i)},updateAvatar:function(t,e,i){var o=this.getUrlByAPI(n.API_UPDATE_AVATAR);return this.executePOSTMethod(o,t,e,i)},transferMoneyToGold:function(t,e,i){var o=this.getUrlByAPI(n.API_TRANSTER_MONEY_TO_GOLD);return this.executePOSTMethod(o,t,e,i)},getPlayHistory:function(t,e,i){var o=this.getUrlByAPI(n.API_PLAY_HISTORY);return this.executeGETMethod(o,t,e,i)},getGiftCode:function(t,e,i){var o=this.getUrlByAPI(n.API_GET_GIFTCODE);return this.executePOSTMethod(o,t,e,i)},getTopTaiXiu:function(t,e,i){var o=this.getUrlByAPI(n.API_TAIXIU_TOP);return this.executeGETMethod(o,t,e,i)},getEventTop:function(t,e,i){var o=this.getUrlByAPI(n.API_EVENT_TOP);return this.executeGETMethod(o,t,e,i)},getChainTaiXiu:function(t,e,i){var o=this.getUrlByAPI(n.API_TAIXIU_CHAIN);return this.executeGETMethod(o,t,e,i)},getHistoryTaiXiu:function(t,e,i){var o=this.getUrlByAPI(n.API_TAIXIU_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopMiniPoker:function(t,e,i){var o=this.getUrlByAPI(n.API_MINIPOKER_TOP);return this.executeGETMethod(o,t,e,i)},getHistoryMiniPoker:function(t,e,i){var o=this.getUrlByAPI(n.API_MINIPOKER_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopMiniBaCay:function(t,e,i){var o=this.getUrlByAPI(n.API_MINIBACAY_TOP);return this.executeGETMethod(o,t,e,i)},getHistoryMiniBaCay:function(t,e,i){var o=this.getUrlByAPI(n.API_MINIBACAY_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopDiamond:function(t,e,i){var o=this.getUrlByAPI(n.API_DIAMOND_TOP);return this.executeGETMethod(o,t,e,i)},getHistoryDiamond:function(t,e,i){var o=this.getUrlByAPI(n.API_DIAMOND_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopDiamond2:function(t,e,i){var o=this.getUrlByAPI(n.API_DIAMOND2_TOP);return this.executeGETMethod(o,t,e,i)},getHistoryDiamond2:function(t,e,i){var o=this.getUrlByAPI(n.API_DIAMOND2_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopTrenDuoi:function(t,e,i){var o=this.getUrlByAPI(n.API_TRENDUOI_TOP);return this.executeGETMethod(o,t,e,i)},getHistoryTrenDuoi:function(t,e,i){var o=this.getUrlByAPI(n.API_TRENDUOI_HISTORY);return this.executeGETMethod(o,t,e,i)},getHistoryMiniGameLottery:function(t,e,i){var o=this.getUrlByAPI(n.API_MINIGAME_LOTTERY_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopBauCua:function(t,e,i){var o=this.getUrlByAPI(n.API_BAUCUA_TOP);return this.executeGETMethod(o,t,e,i)},getTopWeekBauCua:function(t,e,i){var o=this.getUrlByAPI(n.API_BAUCUA_TOP_WEEK);return this.executeGETMethod(o,t,e,i)},getHistoryBauCua:function(t,e,i){var o=this.getUrlByAPI(n.API_BAUCUA_HISTORY);return this.executeGETMethod(o,t,e,i)},getHistoryBom:function(t,e,i){var o=this.getUrlByAPI(n.API_BOM_HISTORY);return this.executeGETMethod(o,t,e,i)},getHistoryWild:function(t,e,i){var o=this.getUrlByAPI(n.API_WILD_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopSlot:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT_GET_TOP);return this.executeGETMethod(o,t,e,i)},getHistorySlot:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT_GET_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopSlot2:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT3_GET_TOP);return this.executeGETMethod(o,t,e,i)},getHistorySlot2:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT2_GET_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopSlot3:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT3_GET_TOP);return this.executeGETMethod(o,t,e,i)},getHistorySlot3:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT3_GET_HISTORY);return this.executeGETMethod(o,t,e,i)},getTopSlot4:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT4_GET_TOP);return this.executeGETMethod(o,t,e,i)},getHistorySlot4:function(t,e,i){var o=this.getUrlByAPI(n.API_SLOT4_GET_HISTORY);return this.executeGETMethod(o,t,e,i)},getOTPLogin:function(t,e,i){var o=this.getUrlByAPI(n.API_SEND_OTP_LOGIN);return this.executePOSTMethod(o,t,e,i)},getOTPLoginSocial:function(t,e,i){var o=this.getUrlByAPI(n.API_SEND_OTP_LOGIN_SOCIAL);return this.executePOSTMethod(o,t,e,i)},getOTPLoginSecurity:function(t,e,i){var o=this.getUrlByAPI(n.API_VERIFY_LOGIN_SECURITY);return this.executePOSTMethod(o,t,e,i)},securityGame:function(t,e,i){var o=this.getUrlByAPI(n.API_SECURITY_GAME);return this.executePOSTMethod(o,t,e,i)},cancelActivePhone:function(t,e,i){var o=this.getUrlByAPI(n.API_CANCEL_ACTIVE_PHONE);return this.executePOSTMethod(o,t,e,i)},infoFriend:function(t,e,i){var o=this.getUrlByAPI(n.API_FRIEND_INFO);return this.executeGETMethod(o,t,e,i)},updateFriend:function(t,e,i){var o=this.getUrlByAPI(n.API_FRIEND_UPDATE);return this.executeGETMethod(o,t,e,i)},convertFriend:function(t,e,i){var o=this.getUrlByAPI(n.API_FRIEND_CONVERT);return this.executeGETMethod(o,t,e,i)},historyFriend:function(t,e,i){var o=this.getUrlByAPI(n.API_FRIEND_HISTORY);return this.executeGETMethod(o,t,e,i)},topFriend:function(t,e,i){var o=this.getUrlByAPI(n.API_FRIEND_TOP);return this.executeGETMethod(o,t,e,i)},logTanLoc:function(t,e,i){var o=this.getUrlByAPI(n.API_EVENT_TAN_LOC);return this.executeGETMethod(o,t,e,i)},logHuLoc:function(t,e,i){var o=this.getUrlByAPI(n.API_EVENT_HU_LOC);return this.executeGETMethod(o,t,e,i)},getAgent:function(){return"Android"}});e.exports=a,cc._RF.pop()},{"../helper/Config":"Config","../helper/Message":"Message","../prefab/mini-game/MiniGameConstant":"MiniGameConstant","./APIConstant":"APIConstant"}],AgentItem2:[function(t,e,i){"use strict";cc._RF.push(e,"c6397+0ss1NxJYNOuOVfJIq","AgentItem2");t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,nameLabel:cc.Label,nickNameLabel:cc.Label,phoneLabel:cc.Label,addressLabel:cc.Label,fbNode:cc.Node,zaloNode:cc.Node,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e,i){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRecharge=t.GameRecharge,this.ShopTransferAgent=this.GameRecharge.Transfer.TransferAgent,this.ShopTransferContent=this.GameRecharge.Transfer.TransferContent,this.data=i,this.noLabel.string=e+1,this.nameLabel.string=i.name,this.nickNameLabel.string=i.nick_name,this.phoneLabel.string=i.phone,this.addressLabel.string=i.address,i.fanpage?this.fbNode.active=!0:this.fbNode.active=!1,i.zalo?this.zaloNode.active=!0:this.zaloNode.active=!1;var n=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=n},onLoad:function(){},onTransferClick:function(){this.GameCenterUI.hideAgentFormNode(!1),this.GameCenterUI.showShopNode(),this.GameRecharge.onTransferClick(),this.ShopTransferContent.showData(this.data.nick_name)},onFacebookClick:function(){cc.sys.openURL(this.data.fanpage)},onZaloClick:function(){cc.sys.openURL(this.data.zalo)},getData:function(){return this.data}}),cc._RF.pop()},{"../../helper/Constant":"Constant"}],AgentItem:[function(t,e,i){"use strict";cc._RF.push(e,"e427f6F7nxPf5Jgx3pfclO7","AgentItem"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bgNode:cc.Node,noLabel:cc.Label,nameLabel:cc.Label,nicknameLabel:cc.Label,phoneLabel:cc.Label,addressLabel:cc.Label,fbNode:cc.Node,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e,i){this.GameCenter=t,this.ShopTransferAgent=t.GameRecharge.Transfer.TransferAgent,this.ShopTransferContent=t.GameRecharge.Transfer.TransferContent,this.data=i,this.noLabel.string=e+1,this.nameLabel.string=i.name,this.nicknameLabel.string=i.nick_name,this.phoneLabel.string=i.phone,this.addressLabel.string=i.address,this.fbNode.active=!1,this.bgSprite.spriteFrame=this.offBgSpriteFrame},onLoad:function(){},onClick:function(){this.ShopTransferContent.showData(this.data.nick_name)},onFacebookClick:function(){cc.sys.openURL(this.data.fanpage)},getData:function(){return this.data},showBgNode:function(){this.bgSprite.spriteFrame=this.onBgSpriteFrame},hideBgNode:function(){this.bgSprite.spriteFrame=this.offBgSpriteFrame}}),cc._RF.pop()},{}],Agent:[function(t,e,i){"use strict";cc._RF.push(e,"67555wEBYxG4oHrzX4MbI1D","Agent"),cc.Class({extends:cc.Component,properties:{agentItem2Prefab:cc.Prefab,listAgentScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){this.listAgentScrollView.content.removeAllChildren(!0),this.GameCenter.shuffleListAgent();var t=this.GameCenter.getListAgent(),e=0;if(t)for(var i=0;i<t.length;i++)if(0===t[i].type){var n=cc.instantiate(this.agentItem2Prefab);n.getComponent("AgentItem2").init(this.GameCenter,e,t[i]),n.parent=this.listAgentScrollView.content,e++}}}),cc._RF.pop()},{}],AudioFireFish:[function(t,e,i){"use strict";cc._RF.push(e,"ad2d6D0IpZFyKoMA/W8Wi1O","AudioFireFish");var n=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{musicBackgroundGame:cc.AudioSource,clickAudioClip:{type:cc.AudioClip,default:null},fire1AudioClip:{type:cc.AudioClip,default:null},fire2AudioClip:{type:cc.AudioClip,default:null},fire3AudioClip:{type:cc.AudioClip,default:null},gemAudioClip:{type:cc.AudioClip,default:null},hitAudioClip:{type:cc.AudioClip,default:null},switchAudioClip:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.loadConfig()},loadConfig:function(){var t=cc.sys.localStorage.getItem(n.IS_SOUND);t="true"===t||!0===t||"false"!==t&&!1!==t,this.isSound=t,this.saveConfig()},setSoundClick:function(){this.setSound(!this.isSound)},setSound:function(t){1==t?t=!0:0==t&&(t=!1,this.stopAll()),this.isSound=t,this.saveConfig()},saveConfig:function(){cc.sys.localStorage.setItem(n.IS_SOUND,this.isSound)},stopAll:function(){this.musicBackgroundGame.stop()},pauseAll:function(){cc.audioEngine.pauseAllEffects()},resumeAll:function(){this.musicBackgroundGame.resume()},playMusicBackgroundGame:function(){this.loadConfig(),this.isSound&&this.musicBackgroundGame.play()},playClick:function(){this.isSound&&cc.audioEngine.playEffect(this.clickAudioClip,!1)},playFire1:function(){this.isSound&&cc.audioEngine.playEffect(this.fire1AudioClip,!1)},playFire2:function(){this.isSound&&cc.audioEngine.playEffect(this.fire2AudioClip,!1)},playFire3:function(){this.isSound&&cc.audioEngine.playEffect(this.fire3AudioClip,!1)},playGem:function(){this.isSound&&cc.audioEngine.playEffect(this.gemAudioClip,!1)},playHit:function(){this.isSound},playSwitch:function(){this.isSound&&cc.audioEngine.playEffect(this.switchAudioClip,!1)},playFireByGunType:function(t){switch(t){case 0:case 1:this.playFire1();break;case 2:case 3:this.playFire2();break;default:this.playFire3()}}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],Audio:[function(t,e,i){"use strict";cc._RF.push(e,"afe9arSqlJDBJ5Cc1NbcT2s","Audio");var n=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{alertAudioClip:{type:cc.AudioClip,default:null},clickAudioClip:{type:cc.AudioClip,default:null},joinGameAudioClip:{type:cc.AudioClip,default:null},outGameAudioClip:{type:cc.AudioClip,default:null},winAudioClip:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.loadConfig()},loadConfig:function(){var t=cc.sys.localStorage.getItem(n.IS_SOUND);t="true"===t||!0===t||"false"!==t&&!1!==t,this.isSound=t,this.saveConfig()},saveConfig:function(){cc.sys.localStorage.setItem(n.IS_SOUND,this.isSound)},setSoundClick:function(){this.setSound(!this.isSound)},setSound:function(t){this.isSound=t,this.saveConfig()},getSound:function(){return this.loadConfig(),this.isSound},playAlert:function(){this.isSound&&cc.audioEngine.playEffect(this.alertAudioClip,!1)},playClick:function(){this.isSound&&cc.audioEngine.playEffect(this.clickAudioClip,!1)},playJoinGame:function(){this.isSound&&cc.audioEngine.playEffect(this.outGameAudioClip,!1)},playOutGame:function(){this.isSound},playWin:function(){this.isSound&&cc.audioEngine.playEffect(this.winAudioClip,!1)}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],AvatarItem:[function(t,e,i){"use strict";cc._RF.push(e,"8fcd6u/w4tBhIP2VQMKOJ9p","AvatarItem"),cc.Class({extends:cc.Component,properties:{selectedNode:cc.Node,avatarSprite:cc.Sprite},onLoad:function(){},init:function(t,e){var i=this;this.GameCenter=t,this.UpdateAvatar=t.UpdateAvatar,this.avatar=e,this.url=e.content,cc.loader.load(this.url,function(t,e){if(e instanceof cc.Texture2D){var n=new cc.SpriteFrame(e,cc.Rect(0,0,90,128));i.avatarSprite.spriteFrame=n}}),this.selectAvatar(!1)},selectAvatar:function(t){this.selectedNode.active=t},isSelected:function(){return this.selectedNode.active},onClick:function(){this.UpdateAvatar.clearSelected(),this.selectAvatar(!0)}}),cc._RF.pop()},{}],AwardButtonCard:[function(t,e,i){"use strict";cc._RF.push(e,"d88a8Z8nHVLu7WR+WkMvPdo","AwardButtonCard"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node},init:function(t){this.GameCenter=t,this.GameRecharge=t.GameRecharge},onLoad:function(){this.initData()},initData:function(){var t=this.contentNode.getChildren();for(var e in t){var i=t[e].getComponent("AwardButtonItem"),n=i.shortName,o=this.getDataByName(n);o&&i.init(this.GameCenter,o)}},getDataByName:function(t){var e=this.GameCenter.getConfig().award_provider;for(var i in e)if(e[i].short_name===t)return e[i];return null}}),cc._RF.pop()},{}],AwardButtonItem:[function(t,e,i){"use strict";cc._RF.push(e,"02506QrMv1HJJtrr33RthTw","AwardButtonItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{shortName:"",bonusNode:cc.Node,noBonusNode:cc.Node,bonusLabel:cc.Label,beforeBonusValueLabel:cc.Label,valueLabel:cc.Label},onLoad:function(){},init:function(t,e){this.GameCenter=t,this.data=e,0===e.bonus?(this.bonusNode.active=!1,this.noBonusNode.active=!0):(this.bonusNode.active=!0,this.noBonusNode.active=!1),this.bonusLabel.string=" -"+100*e.bonus+"% ";var i=e.listAmount[0];if(i){var o=this.getMoneyByCardValue(i),s=o;this.beforeBonusValueLabel.string="  Gi\xe1 VIN: "+n.numberWithCommas(o/(1-e.bonus))+"  ",this.valueLabel.string=n.numberWithCommas(s)}},getMoneyByCardValue:function(t){var e=this.GameCenter.getConfig().award_config;for(var i in e)if(e[i].vnd===t)return e[i].money;return 0},onClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.GameRecharge.AwardCard.awardWithShortName(this.shortName)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],AwardCardRateItem:[function(t,e,i){"use strict";cc._RF.push(e,"f8f44lHw6tGWp36g/CEuX4e","AwardCardRateItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueCardLabel:cc.Label,valueMoneyLabel:cc.Label,bgSprite:cc.Sprite,bg1SpriteFrame:cc.SpriteFrame,bg2SpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e,i){this.GameCenter=t,this.data=e;var o=this.getMoneyByVnd();this.valueCardLabel.string=n.numberWithCommas(e.listAmount[1]),this.valueMoneyLabel.string=n.numberWithCommas(o),this.bgSprite.spriteFrame=i%2==0?this.bg1SpriteFrame:this.bg2SpriteFrame},initSale:function(t,e){this.data=t,this.valueCardLabel.string=n.numberWithCommas(t.vnd),this.valueMoneyLabel.string=n.numberWithCommas(t.money)},getMoneyByVnd:function(){var t=this.data.listAmount[0],e=this.GameCenter.getConfig().award_config;for(var i in e)if(e[i].vnd===t)return e[i].money;return 0}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],AwardCard:[function(t,e,i){"use strict";cc._RF.push(e,"0f71e7/LLtGEJos4SWcua+H","AwardCard");var n=t("../../../util/Util"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Constant"),a=t("../../../helper/Message"),r=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label,totalMoneyLabel:cc.Label,cardTypeDropDownList:r,cardValueDropDownList:r,awardCardRateItemPrefab:cc.Prefab,listCardRateNode:cc.Node,otpEditBox:cc.EditBox,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.initData()},onLoad:function(){this.initData()},onEnable:function(){this.initMoney(),this.clear()},initData:function(){var t=this.GameCenter.getConfig().telco,e=this.GameCenter.getConfig().award_config;this.initListTelco(t),this.initListValue(e),this.initListRate(e),this.initTotalMoney()},initListTelco:function(t){for(var e in this.cardTypeDropDownList.removeAllItem(),t){var i=t[e].name;this.cardTypeDropDownList.addItem(i,t[e]),this.cardTypeDropDownList.setCallback(this.resetTelcoData,this)}},initListValue:function(t){this.cardValueDropDownList.removeAllItem();var e=this.cardTypeDropDownList.getValue(),i=this.getDataAwardByName(e);if(i)for(var n in t)for(var o=0;o<i.listAmount.length;o++)if(t[n].vnd===i.listAmount[o]){var s=t[n].vnd;this.cardValueDropDownList.addItem(i.listAmount[o+1],s),this.cardValueDropDownList.setCallback(this.initTotalMoney,this);break}},initListRate:function(t){this.listCardRateNode.removeAllChildren(!0);var e=this.cardTypeDropDownList.getValue(),i=this.getDataAwardByName(e);if(i)for(var n=0,o=0;o<t.length;o++)for(var s=0;s<i.listAmount.length;s++)if(t[o].vnd===i.listAmount[s]){n++;var a=cc.instantiate(this.awardCardRateItemPrefab);a.getComponent("AwardCardRateItem").init(this.GameCenter,i,n),a.parent=this.listCardRateNode;break}},getDataAwardByName:function(t){var e=this.GameCenter.getConfig().award_provider;for(var i in e)if(e[i].name===t)return e[i];return null},getDataAwardByShortName:function(t){var e=this.GameCenter.getConfig().award_provider;for(var i in e)if(e[i].short_name===t)return e[i];return null},resetTelcoData:function(){var t=this.GameCenter.getConfig().award_config;this.initListValue(t),this.initListRate(t),this.initTotalMoney()},awardWithShortName:function(t){var e=this.getDataAwardByShortName(t).name;this.GameCenter.GameRecharge.showAwardCardNode(),this.cardTypeDropDownList.selectByValue(e)},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(s.REQUEST_GET_OTP)},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.cardValueDropDownList.getData(),e=this.cardTypeDropDownList.getValue(),i=this.otpEditBox.string;""!==i?this.awardCard(t,e,i):this.GameCenter.showDialogMessage(a.AWARD_TITLE,a.MISSING_INFO)},awardCard:function(t,e,i){this.GameCenter.showProcessingNode();var o={quantity:1,amount:t,type_card:n.getShortNameTelcoByName(e),otp:i};this.GameCenter.sendRequest.sendToZone(s.REQUEST_AWARD_CARD,o)},initMoney:function(){this.moneyLabel.string=o.numberWithCommas(this.GameCenter.getMoney())},initTotalMoney:function(){var t=this.cardValueDropDownList.getData();this.totalMoneyLabel.string=o.numberWithCommas(this.getMoneyByCardValue(t))},getMoneyByCardValue:function(t){var e=this.GameCenter.getConfig().award_config;for(var i in e)if(e[i].vnd===t)return e[i].money;return 0},clear:function(){this.initTotalMoney()},onBackClick:function(){this.GameCenter.GameRecharge.onAwardClick()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],AwardHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a062adjYpdAjqz8gvGKsEm9","AwardHistoryItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.nameLabel.string=String.format(o.AWARD_DESCRIBE,t.card_type),this.playBalanceLabel.string=n.numberWithCommas(t.total_money),this.remainBalanceLabel.string=n.numberWithCommas(t.after_money),this.noteLabel.string=t.status==s.STATUS_FAILURE?o.FAILURE:o.SUCCESS;var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],BaCayBetChicken:[function(t,e,i){"use strict";cc._RF.push(e,"bd2advU+TpKNbvnTlaCwQyM","BaCayBetChicken");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{betOnLabel:cc.Label,betOffLabel:cc.Label,betButtonOnNode:cc.Node,betButtonOffNode:cc.Node,betButtonNode:cc.Node},init:function(t){this.BaCay=t,this.BaCayConstant=t.BaCayConstant,this.BaCayConfig=t.BaCayConfig},onLoad:function(){},setBetChickenAmount:function(t){this.betOnLabel.string=n.numberWithCommas(t),this.betOffLabel.string=n.numberWithCommas(t)},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},enable:function(){this.betButtonNode.active=!0,this.betButtonOnNode.active=!0,this.betButtonOffNode.active=!1,this.show()},disable:function(){this.betButtonNode.active=!1,this.betButtonOnNode.active=!1,this.betButtonOffNode.active=!0,this.show()},reset:function(){this.setBetChickenAmount(0)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BaCayCard:[function(t,e,i){"use strict";cc._RF.push(e,"a071540DK9APqJVCKmrlmM5","BaCayCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;++i,Object.defineProperties(this,{point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],BaCayConfig:[function(t,e,i){"use strict";cc._RF.push(e,"f7e1bP1kEBPJZT6ZK2JfZzL","BaCayConfig");e.exports={MAX_PLAYERS:7,RATE_MIN_BET:1,RATE_MAX_BET:2,TIME_MOVE_MASTER:.25,TIME_BET_CHICKEN:.25,TIME_FLIP_CARD:.5,TIME_SCALE_BET_CHICKEN_LABEL:.2,TIME_OPEN_ALL_CARDS:8,SCALE_PLAYER_CARD:1,SCALE_CARD_MOVE_NODE:1.15,DISTANCE_TWO_CARD_MOVE_NODE:100,POSITION_PLAYER_SUM_X:130,POSITION_PLAYER_SUM_Y:-60},cc._RF.pop()},{}],BaCayConstant:[function(t,e,i){"use strict";cc._RF.push(e,"254b5iRER5MVosTonQD6Kxs","BaCayConstant");e.exports={ROOM_INFO:"ROOM_INFO",COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",STATISTIC:"STATISTIC",BET_AMOUNT:"BET_AMOUNT",CHANGE_HOME:"CHANGE_HOME",BET_CHICKEN:"BET_CHICKEN",BET_PRIVATE:"BET_PRIVATE",CONFIRM_BET_PRIVATE:"CONFIRM_BET_PRIVATE",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ALERT_SELL_KEY:"ALERT_SELL_KEY",ALERT_BUY_KEY:"ALERT_BUY_KEY",ADD_PLAYER:"ADD_PLAYER",REQUEST_BET_AMOUNT:"REQUEST_BET_AMOUNT",REQUEST_BET_CHICKEN:"REQUEST_BET_CHICKEN",REQUEST_BET_PRIVATE:"REQUEST_BET_PRIVATE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_KEY:"REQUEST_BUY_KEY",REQUEST_SELL_KEY:"REQUEST_SELL_KEY"},cc._RF.pop()},{}],BaCayHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"a527dejyLtF0a5/WH1x24p4","BaCayHandlerEffect");var n=t("./BaCayCard"),o=t("./BaCayConfig"),s=t("./BaCayPrivateBetState"),a=t("../../ui/form/FormMove"),r={init:function(t){this.BaCay=t,this.BaCayUI=t.BaCayUI,this.GameCommon=t.GameCommon,this.BaCayBetChicken=t.BaCayBetChicken,this.listPlayers=t.listPlayers,this.timeoutShowEffectResult=null},showEffectBetChicken:function(t,e){var i=cc.instantiate(this.BaCay.chipPrefab);i.parent=this.BaCay.chipNode,i.setPosition(t.node.getPosition()),i.getComponent("Balance").init(this.BaCay.isMoneyType),i.runAction(cc.sequence(cc.moveTo(o.TIME_BET_CHICKEN,this.BaCayBetChicken.node.getPosition()),cc.callFunc(function(){i.removeFromParent(!0),this.BaCayBetChicken.setBetChickenAmount(e)},this)))},showEffectGameFinish:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.initPrivateBetAllPlayers(t),this.initCardsAllPlayers(t),this.initBetAmountAllPlayers(t),this.BaCay.myPlayer.is_player&&this.showMoveCards(),e?this.timeoutShowEffectResult=setTimeout(function(){this.showEffectResult(t)}.bind(this),1e3*o.TIME_OPEN_ALL_CARDS):this.showEffectResult(t)},initPrivateBetAllPlayers:function(t){var e=t.players;for(var i in this.listPlayers)this.listPlayers[i].BaCayPlayer.hidePrivateBetNode();for(var n in e){var o=this.BaCay.getPlayerByUserId(e[n].user_id);if(o&&o.isItMe){var a=e[n].bet_private;for(var r in a){var c=a[r].user_id,h=a[r].amount,l=this.BaCay.getPlayerByUserId(c);l&&l.BaCayPlayer.setBetSpriteByStatus(s.SUCCESS,h)}}}},initCardsAllPlayers:function(t){if(t){var e=t.players;if(e)for(var i in e){var n=e[i].user_id,o=e[i].cards,s=this.BaCay.getPlayerByUserId(n);s&&this.initCardsForPlayer(s,o)}}},initCardsForPlayer:function(t,e){for(var i in t.cards=e,e){var n=this.instanceCard(e[i],!1);n.scale=o.SCALE_PLAYER_CARD,n.setPosition(50*i,0),n.parent=t.BaCayPlayer.playerCardsNode}},instanceCard:function(t,e){var i=cc.instantiate(this.BaCay.cardPrefab),o=i.getComponent("CardController"),s=new n(t);return o.init(s),o.reveal(e),i},initBetAmountAllPlayers:function(){for(var t in this.listPlayers)!this.listPlayers[t].is_home&&this.listPlayers[t].is_player&&0===this.listPlayers[t].bet_amount&&(this.listPlayers[t].BasePlayer.showChangeBalance(-this.BaCay.minBet),this.listPlayers[t].BaCayPlayer.showBetNode(this.BaCay.minBet))},showMoveCards:function(){this.BaCayUI.showMoveNode();var t=this.BaCay.myPlayer.cards;for(var e in t){var i=this.instanceCard(t[e],!0);i.scale=o.SCALE_CARD_MOVE_NODE,i.setPosition(0,0),i.addComponent(a),i.getComponent("FormMove").isChangeZIndex=!1,i.parent=this.BaCay.moveCardNode}},showEffectResult:function(t){this.BaCayUI.hideMoveNode(),this.flipCardsAllPlayers();var e=t.players;for(var i in e){var n=this.BaCay.getPlayerByUserId(e[i].user_id);if(n){var s=e[i].change_balance,a=e[i].change_balance_bet_chicken,r=e[i].sum;a>0&&this.showEffectWinChicken(n),n.BasePlayer.showChangeBalance(s),n.BasePlayer.showEffectByChangeBalance(s),n.BaCayPlayer.playerCardsNode.x>0?n.BasePlayer.showTextLight(r,!1,new cc.Vec2(o.POSITION_PLAYER_SUM_X,o.POSITION_PLAYER_SUM_Y)):n.BasePlayer.showTextLight(r,!1,new cc.Vec2(-o.POSITION_PLAYER_SUM_X,o.POSITION_PLAYER_SUM_Y)),n.isItMe&&s>0&&this.GameCommon.Audio.playWin()}}this.showTextEffectResult(t)},showEffectWinChicken:function(t){var e=cc.instantiate(this.BaCay.chipPrefab);e.parent=this.BaCay.chipNode,e.setPosition(this.BaCayBetChicken.node.getPosition()),e.getComponent("Balance").init(this.BaCay.isMoneyType),e.runAction(cc.sequence(cc.moveTo(o.TIME_BET_CHICKEN,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.BaCayBetChicken.setBetChickenAmount(0)},showTextEffectResult:function(t){var e=t.is_lost_all,i=t.is_win_all,n=this.BaCay.getHomePlayer();n&&(i&&n.BaCayPlayer.showWinAllEffect(),e&&n.BaCayPlayer.showPhatLuongEffect())},flipMyCards:function(){this.BaCay.myPlayer.BaCayPlayer.flipCards()},flipCardsAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BaCayPlayer.flipCards()},showPrivateBetAllPlayers:function(){if(!this.BaCay.myPlayer.is_home)for(var t in this.listPlayers){if(!this.listPlayers[t].isItMe&&this.listPlayers[t].is_player&&!this.listPlayers[t].is_home)this.listPlayers[t].BaCayPlayer.showPrivateBet(this.BaCay.minBet*o.RATE_MIN_BET,this.BaCay.minBet*o.RATE_MAX_BET),this.BaCay.addPrivateBetClick(this.listPlayers[t])}},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1),this.listPlayers[t].is_home=!1},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutShowEffectResult)}};e.exports=r,cc._RF.pop()},{"../../ui/form/FormMove":"FormMove","./BaCayCard":"BaCayCard","./BaCayConfig":"BaCayConfig","./BaCayPrivateBetState":"BaCayPrivateBetState"}],BaCayHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"294a5zOtAxIvZLpq+a9hlf5","BaCayHandlerRequest");var n=t("./BaCayConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.BaCay=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.BaCay.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.GOLD:this.BaCay.initGold(e);break;case o.MONEY:this.BaCay.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.COUNT_DOWN:this.BaCay.handleCountDown(e);break;case n.START_GAME:this.BaCay.handleStartGame(e);break;case n.STATISTIC:this.BaCay.handleStatistic(e);break;case n.BET_AMOUNT:this.BaCay.handleBetAmount(e);break;case n.CHANGE_HOME:this.BaCay.handleChangeHome(e);break;case n.BET_CHICKEN:this.BaCay.handleBetChicken(e);break;case n.BET_PRIVATE:this.BaCay.handleBetPrivate(e);break;case n.ALERT_SELL_KEY:this.BaCay.handleAlertSellKey(e);break;case n.ALERT_BUY_KEY:this.BaCay.handleAlertBuyKey(e);break;case n.PLAYERS_LEFT_ROOM:this.BaCay.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.BaCay.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.BaCay.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.BaCay.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./BaCayConstant":"BaCayConstant"}],BaCayPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"df80a3On9tDtLLDOR8HEXh8","BaCayPlayer");var n=t("./BaCayConfig"),o=t("./BaCayPrivateBetState"),s=t("../../helper/Message"),a=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chickenNode:cc.Node,privateMinBetNode:cc.Node,privateMaxBetNode:cc.Node,privateMinBetLabel:cc.Label,privateMaxBetLabel:cc.Label,notBetSpriteFrame:cc.SpriteFrame,inviteBetSpriteFrame:cc.SpriteFrame,sucessBetSpriteFrame:cc.SpriteFrame,playerCardsNode:cc.Node},onLoad:function(){this.isFlipCards=!1,this.cards=[],this.BasePlayer=this.node.getComponent("BasePlayer")},flipCards:function(){if(!this.isFlipCards){this.isFlipCards=!0;for(var t=this.playerCardsNode._children,e=0,i=t.length;e<i;e++){t[e].getComponent("CardController").revealWithAnimationFlip(!0,n.TIME_FLIP_CARD)}}},showWinAllEffect:function(){this.BasePlayer.hideWinLoseEffect(),this.BasePlayer.showWinEffect(s.BACAY_WIN_ALL)},showPhatLuongEffect:function(){this.BasePlayer.hideWinLoseEffect(),this.BasePlayer.showLoseEffect(s.BACAY_LOSE_ALL)},setBetSpriteByStatus:function(t,e){this.status=t,this.betMoney=e;var i=void 0;switch(t){case o.NOT_BET:i=this.notBetSpriteFrame;break;case o.SUCCESS:i=this.sucessBetSpriteFrame;break;case o.INVITE:i=this.inviteBetSpriteFrame}t===o.NOT_BET?(this.privateMinBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMaxBetNode.getComponent(cc.Sprite).spriteFrame=i):parseInt(this.privateMinValue)===e?(this.privateMinBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMinBetNode.active=!0,this.privateMaxBetNode.active=!1):parseInt(this.privateMaxValue)===e&&(this.privateMaxBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMinBetNode.active=!1,this.privateMaxBetNode.active=!0)},getBetStatus:function(){return this.status},getBetMoney:function(){return this.betMoney},showPrivateBet:function(t,e){this.setBetMinLabel(t),this.setBetMaxLabel(e),this.showprivateMinBetNode(),this.showprivateMaxBetNode()},hidePrivateBetNode:function(){this.hidePrivateMaxBetNode(),this.hidePrivateMinBetNode()},showprivateMinBetNode:function(){this.privateMinBetNode.active=!0},hidePrivateMinBetNode:function(){this.privateMinBetNode.active=!1},showprivateMaxBetNode:function(){this.privateMaxBetNode.active=!0},hidePrivateMaxBetNode:function(){this.privateMaxBetNode.active=!1},setBetMinLabel:function(t){this.privateMinValue=t,this.privateMinBetLabel.string=a.nFormatter(t)},setBetMaxLabel:function(t){this.privateMaxValue=t,this.privateMaxBetLabel.string=a.nFormatter(t)},setChicken:function(t){t?this.showChicken():this.hideChicken()},showChicken:function(){this.betChicken=!0,this.chickenNode.active=!0},hideChicken:function(){this.betChicken=!1,this.chickenNode.active=!1},reset:function(){this.isFlipCards=!1,this.betChicken=!1,this.hideChicken(),this.hidePrivateBetNode(),this.BasePlayer.hideText(),this.playerCardsNode.removeAllChildren(!0),this.setBetSpriteByStatus(o.NOT_BET,0)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","./BaCayConfig":"BaCayConfig","./BaCayPrivateBetState":"BaCayPrivateBetState"}],BaCayPrivateBetState:[function(t,e,i){"use strict";cc._RF.push(e,"2034e+hMr1I6ZR1O1/7k98J","BaCayPrivateBetState");e.exports={NOT_BET:"not_bet",SUCCESS:"success",INVITE:"invite"},cc._RF.pop()},{}],BaCayState:[function(t,e,i){"use strict";cc._RF.push(e,"62951t8dI9Mk5r1eZHzjY86","BaCayState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",BETTING:"BETTING",FINISH:"FINISH",setState:function(t){this.currentState=t},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setBetting:function(){this.currentState=this.BETTING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isBetting:function(){return this.currentState===this.BETTING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],BaCayUI:[function(t,e,i){"use strict";cc._RF.push(e,"06973gFZvlFNahQyw8xCw7L","BaCayUI"),cc.Class({extends:cc.Component,properties:{moveNode:cc.Node,sellKeyFormNode:cc.Node,buyKeyFormNode:cc.Node,betPrivateMinButtonNode:cc.Node,betPrivateMaxButtonNode:cc.Node,receivebetPrivateButtonNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){this._sellKeyDialogForm=this.sellKeyFormNode.getComponent("DialogForm"),this._buyKeyDialogForm=this.buyKeyFormNode.getComponent("DialogForm")},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showAllButton:function(){this.showBetPrivateMinButtonNode(),this.showBetPrivateMaxButtonNode(),this.showReceiveBetPrivateButtonNode()},hideAllButton:function(){this.hideBetPrivateMinButtonNode(),this.hideBetPrivateMaxButtonNode(),this.hideReceiveBetPrivateButtonNode()},showBetPrivateMinButtonNode:function(){this.betPrivateMinButtonNode.active=!0},hideBetPrivateMinButtonNode:function(){this.betPrivateMinButtonNode.active=!1},showBetPrivateMaxButtonNode:function(){this.betPrivateMaxButtonNode.active=!0},hideBetPrivateMaxButtonNode:function(){this.betPrivateMaxButtonNode.active=!1},showReceiveBetPrivateButtonNode:function(){this.receivebetPrivateButtonNode.active=!0},hideReceiveBetPrivateButtonNode:function(){this.receivebetPrivateButtonNode.active=!1},showMoveNode:function(){this.moveNode.active=!0},hideMoveNode:function(){this.moveNode.active=!1},showSellKeyForm:function(){this.sellKeyFormNode.active=!0},hideSellKeyForm:function(){this.sellKeyFormNode.active=!1},showBuyKeyForm:function(){this.buyKeyFormNode.active=!0},hideBuyKeyForm:function(){this.buyKeyFormNode.active=!1},reset:function(){this.hideSellKeyForm(),this.hideBuyKeyForm()}}),cc._RF.pop()},{}],BaCay:[function(t,e,i){"use strict";cc._RF.push(e,"a380b7clWNN6a/xQsuS0kJu","BaCay");var n=t("../../base/BaseController"),o=t("./BaCayConstant"),s=t("./BaCayConfig"),a=t("./BaCayUI"),r=t("./BaCayState"),c=t("./BaCayPrivateBetState"),h=t("./BaCayHandlerRequest"),l=t("./BaCayHandlerEffect"),u=t("./other/BaCayBetChicken"),d=t("../../ui/dialog/BetForm"),m=t("../../prefab/GameCommon"),f=t("../../object/RoomType"),p=t("../../helper/Constant"),_=t("../../helper/Message"),S=t("../../util/RandomUtil"),g=t("../../util/FormatUtil");cc.Class({extends:n,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,betPrivateMinButtonLabel:cc.Label,betPrivateMaxButtonLabel:cc.Label,moveNode:cc.Node,moveCardNode:cc.Node,chipNode:cc.Node,BaCayUI:a,BetForm:d,BaCayBetChicken:u,GameCommon:m},onLoad:function(){this._super(),this.setSceneName(p.SCENE_GAME_BACAY),this.sfsManager.setController(this),this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[p.MIN_BET].value),this.roomType=parseInt(this.room.variables[p.ROOM_TYPE].value),this.isMoneyType=this.roomType==f.MONEY_CODE,this.playersNode=this.BaCayUI.playersNode,this.isMoneyType||this.BaCayUI.disableAllPlaceHolder(),this.BaCayConstant=o,this.BaCayConfig=s,this.BaCayState=r,this.BaCayHandlerRequest=h,this.BaCayHandlerRequest.init(this),this.BaCayHandlerEffect=l,this.BaCayHandlerEffect.init(this),this.BaCayBetChicken.init(this),this.GameCommon.init(this),this.BetForm=this.GameCommon.BetForm,this.reset(),this.initBetForm(),this.initPlayers(),this.onPublicMessage=this.BaCayHandlerRequest.onPublicMessage.bind(this.BaCayHandlerRequest),this.onRoomVarsUpdate=this.BaCayHandlerRequest.onRoomVarsUpdate.bind(this.BaCayHandlerRequest),this.onUserVarsUpdate=this.BaCayHandlerRequest.onUserVarsUpdate.bind(this.BaCayHandlerRequest),this.onResponse=this.BaCayHandlerRequest.onResponse.bind(this.BaCayHandlerRequest),this.onPrivateBetMinBind=this.onPrivateBetMinClick.bind(this),this.onPrivateBetMaxBind=this.onPrivateBetMaxClick.bind(this),this.initButton(),this.initRoomInfo(),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners(),cc.bacay=this},onDestroy:function(){this.clearAllTimeout(),this.removeEventListeners()},initButton:function(){var t=String.format(_.BACAY_BET_PRIVATE_BUTTON,g.nFormatter(this.minBet*s.RATE_MIN_BET)),e=String.format(_.BACAY_BET_PRIVATE_BUTTON,g.nFormatter(this.minBet*s.RATE_MAX_BET));this.betPrivateMinButtonLabel.string=t,this.betPrivateMaxButtonLabel.string=e},initBetForm:function(){this.BetForm.setRound(this.minBet),this.BetForm.setMinValue(this.minBet*s.RATE_MIN_BET),this.BetForm.setMaxValue(this.minBet*s.RATE_MAX_BET)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.active=!1}this.initPlayersByListPlayers(e,n),this.initPlayersByListPlayers(i,n)},initPlayersByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i]):t[i].isItMe=!1,this.initPlayer(t[i])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.isItMe?0:this.getRandomPosition();t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("BaCayPlayer");t.BasePlayer=n,t.BaCayPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRoomMaster(t.is_home),n.setRequestLeftRoom(t.request_left_room),n.setPlayerName(t.nick_name),n.setBalance(t.balance),o.setChicken(t.bet_chicken),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.BaCayHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&!this.isMoneyType&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&this.isMoneyType&&n.BasePlayer.setBalance(i)},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.BaCayState.setState(e),this.BaCayState.isStop()?this.reset():this.BaCayState.isWaiting()?this.BaCayHandlerEffect.startCountDownAllPlayers(t):this.BaCayState.isBetting()?this.resumeStateBetting(t):this.BaCayState.isFinish()&&this.resumeStateFinish(t)},resumeStateBetting:function(t){for(var e=t.data.amount_chicken,i=t.data.players,n=0,o=i.length;n<o;n++){var s=i[n],a=s.bet_amount;if(0===a?s.isItMe&&!s.is_home&&this.GameCommon.showBetForm():s.BasePlayer.showBetNodeWithoutAnimation(a),s.isItMe){s.bet_chicken||!s.is_player?this.BaCayBetChicken.disable():this.BaCayBetChicken.enable();var r=s.bet_private;for(var h in this.BaCayHandlerEffect.showPrivateBetAllPlayers(),r){var l=r[h].user_id,u=r[h].amount,d=r[h].status,m=this.getPlayerByUserId(l);m&&d!==c.NOT_BET&&m.BaCayPlayer.setBetSpriteByStatus(d,u)}}}this.BaCayBetChicken.setBetChickenAmount(e),this.BaCayHandlerEffect.startCountDownAllPlayers(t),this.checkIsShowButton()&&this.BaCayUI.showAllButton()},resumeStateFinish:function(t){for(var e=t.data.amount_chicken,i=t.data.players,n=t.data.statistic,o=0,s=i.length;o<s;o++){var a=i[o],r=a.bet_amount;0!==r&&a.BasePlayer.showBetNodeWithoutAnimation(r)}this.BaCayBetChicken.setBetChickenAmount(e),this.BaCayBetChicken.disable(),this.BaCayHandlerEffect.showEffectGameFinish(n,!1)},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.BaCayState.setWaiting(),this.GameCommon.hideWaitingNode(),this.BaCayHandlerEffect.startCountDownAllPlayers(t)):(this.BaCayState.setStop(),this.BaCayHandlerEffect.stopCountDownAllPlayers())},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.BaCayState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.BaCayHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(_.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(_.IGNORE_REQUEST_LEFT_ROOM)},handleChangeHome:function(t){var e=t.data.user_id_new_home,i=this.getPlayerByUserId(e);this.BaCayHandlerEffect.clearRoomMasterAllPlayers(),i&&(i.is_home=!0,i.BasePlayer.setRoomMaster(!0)),this.BaCayUI.hideBuyKeyForm()},handleStartGame:function(t){this.myPlayer.is_home||this.GameCommon.showBetForm(),this.setViewersToPlayers(),this.BaCayState.setBetting(),this.BaCayBetChicken.enable(),this.BaCayHandlerEffect.showPrivateBetAllPlayers(),this.BaCayHandlerEffect.startCountDownAllPlayers(t),this.checkIsShowButton()&&this.BaCayUI.showAllButton()},handleBetAmount:function(t){var e=t.data.user_id,i=t.data.amount,n=this.getPlayerByUserId(e);n&&(n.bet_amount=i,n.BasePlayer.showChangeBalance(-i),n.BasePlayer.showBetNode(i),n.isItMe)},handleBetChicken:function(t){var e=t.data.user_id,i=t.data.amount_chicken,n=this.getPlayerByUserId(e);n&&(n.BasePlayer.showChangeBalance(-this.minBet),n.BaCayPlayer.showChicken(),this.BaCayHandlerEffect.showEffectBetChicken(n,i),n.isItMe&&this.BaCayBetChicken.disable())},handleBetPrivate:function(t){var e=t.data.amount,i=t.data.user_id,n=t.data.status,o=this.getPlayerByUserId(i);o&&o.BaCayPlayer.setBetSpriteByStatus(n,e)},handleAlertSellKey:function(t){this.BaCayUI.showSellKeyForm()},handleAlertBuyKey:function(t){this.myPlayer.is_player&&this.BaCayUI.showBuyKeyForm()},handleStatistic:function(t){this.BaCayState.setFinish(),this.BaCayBetChicken.disable(),this.GameCommon.hideBetForm(),this.BaCayHandlerEffect.stopCountDownAllPlayers(),this.BaCayHandlerEffect.showEffectGameFinish(t.data),this.setViewersToPlayers(),this.BaCayUI.hideAllButton()},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onConfirmBetClick:function(){this.GameCommon.Audio.playClick();var t={amount:this.BetForm.getBalanceSlider()};this.sendRequest.send(o.REQUEST_BET_AMOUNT,t),this.GameCommon.hideBetForm()},onBetChickenClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_BET_CHICKEN)},onBetPrivateMinClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers)if(!this.listPlayers[t].is_home&&!this.listPlayers[t].isItMe){var e={user_id:this.listPlayers[t].user_id,amount:this.minBet*s.RATE_MIN_BET};this.sendRequest.send(o.REQUEST_BET_PRIVATE,e)}this.BaCayUI.hideBetPrivateMinButtonNode(),this.BaCayUI.hideBetPrivateMaxButtonNode()},onBetPrivateMaxClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers)if(!this.listPlayers[t].is_home&&!this.listPlayers[t].isItMe){var e={user_id:this.listPlayers[t].user_id,amount:this.minBet*s.RATE_MAX_BET};this.sendRequest.send(o.REQUEST_BET_PRIVATE,e)}this.BaCayUI.hideBetPrivateMinButtonNode(),this.BaCayUI.hideBetPrivateMaxButtonNode()},onReveiceBetPrivateClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers){var e=this.listPlayers[t].BaCayPlayer;if(e.getBetStatus()===c.INVITE){var i={user_id:this.listPlayers[t].user_id,amount:e.getBetMoney()};this.sendRequest.send(o.REQUEST_BET_PRIVATE,i)}}},onFlipCardssClick:function(){this.GameCommon.Audio.playClick(),this.BaCayUI.hideMoveNode(),this.BaCayHandlerEffect.flipMyCards()},onConfirmSellKeyClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_SELL_KEY),this.BaCayUI.hideSellKeyForm()},onConfirmBuyKeyClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_BUY_KEY),this.BaCayUI.hideBuyKeyForm()},addPrivateBetClick:function(t){var e=t.node.getChildByName("private-bet-min-node"),i=t.node.getChildByName("private-bet-max-node");e.on(cc.Node.EventType.TOUCH_END,this.onPrivateBetMinBind,e),i.on(cc.Node.EventType.TOUCH_END,this.onPrivateBetMaxBind,i)},removePrivateBetClick:function(t){var e=t.node.getChildByName("private-bet-min-node"),i=t.node.getChildByName("private-bet-max-node");e.off(cc.Node.EventType.TOUCH_END,this.onPrivateBetMinBind,e),i.off(cc.Node.EventType.TOUCH_END,this.onPrivateBetMaxBind,i)},onPrivateBetMinClick:function(t){this.GameCommon.Audio.playClick(),this.BaCayState.isBetting()&&this.privateBetWithRate(t,s.RATE_MIN_BET),t.stopPropagation()},onPrivateBetMaxClick:function(t){this.GameCommon.Audio.playClick(),this.BaCayState.isBetting()&&this.privateBetWithRate(t,s.RATE_MAX_BET),t.stopPropagation()},privateBetWithRate:function(t,e){var i=t.currentTarget._parent.user_id,n=this.getPlayerByUserId(i),o=this.minBet*e;if(n){var s={user_id:i,amount:o};this.sendRequest.send(this.BaCayConstant.REQUEST_BET_PRIVATE,s)}},onInviteClick:function(){this.GameCommon.onInviteClick()},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkIsShowButton:function(){return this.myPlayer.is_player&&!this.myPlayer.is_home&&this.getNumberPlayers()>2},getNumberPlayers:function(){var t=0;for(var e in this.listPlayers)this.listPlayers[e].is_player&&t++;return t},getFirstPlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_player)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(S.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},getHomePlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_home)return this.listPlayers[t];return null},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.BaCayHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.BaCayBetChicken.hide(),this.BaCayBetChicken.reset(),this.BaCayUI.reset(),this.GameCommon.hideBetForm(!1),this.moveCardNode.removeAllChildren(!0),this.chipNode.removeAllChildren(!0),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].BaCayPlayer.reset(),this.listPlayers[t].cards=[],this.listPlayers[t].bet_chicken=!1,this.listPlayers[t].bet_amount=0;this.BaCayUI.hideAllButton()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","../../ui/dialog/BetForm":"BetForm","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./BaCayConfig":"BaCayConfig","./BaCayConstant":"BaCayConstant","./BaCayHandlerEffect":"BaCayHandlerEffect","./BaCayHandlerRequest":"BaCayHandlerRequest","./BaCayPrivateBetState":"BaCayPrivateBetState","./BaCayState":"BaCayState","./BaCayUI":"BaCayUI","./other/BaCayBetChicken":"BaCayBetChicken"}],Balance:[function(t,e,i){"use strict";cc._RF.push(e,"939d3OMLBhDV5pEaFjZ5hxD","Balance"),cc.Class({extends:cc.Component,properties:{balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t){this.balanceSprite.spriteFrame=t?this.moneySpriteFrame:this.goldSpriteFrame}}),cc._RF.pop()},{}],BaseBullet:[function(t,e,i){"use strict";cc._RF.push(e,"ff26bvR3jhLwoCsnHbIrSEd","BaseBullet"),cc.Class({extends:cc.Component,properties:{bulletSprite:cc.Sprite,bulletSpriteFrames:[cc.SpriteFrame],colliderCollision:cc.Collider},init:function(t,e,i){this.controller=t,this.type=e,this.Bullet=i,this.node.getComponent(cc.Animation).stop(),this.bulletSprite.spriteFrame=this.bulletSpriteFrames[e]},onLoad:function(){this.animation=this.node.getComponent(cc.Animation),this.clips=this.animation.getClips()},onEnable:function(){this.initSizeCollider(),this.isAction=!1,cc.director.getCollisionManager().enabled=!0},onDisable:function(){},initSizeCollider:function(){this.colliderCollision.size.width=this.node.width,this.colliderCollision.size.height=this.node.height},setBulletCallBackCollision:function(t){this.callBackCollision=t.bind(this.Bullet)},onCollisionEnter:function(t){this.callBackCollision(t)},onCollisionStay:function(t){},onCollisionExit:function(t){},getIdBullet:function(){return this.Bullet.getIdBullet()},onDestroy:function(){clearTimeout(this.timeout)},explosion:function(){var t=this.clips[this.type];if(t){var e=t._name;this.animation.play(e),this.timeout=setTimeout(function(){this.node&&this.controller.bulletPool.put(this.node)}.bind(this),1e3*t.duration)}}}),cc._RF.pop()},{}],BaseController:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"b366ddk2EJCt6ES5/aYalAy","BaseController");var s=t("../helper/Constant"),a=t("../helper/Config"),r=t("../lib/md5"),c=t("../object/Capcha");t("../util/Util");cc.Class((o(n={extends:cc.Component,properties:{},onLoad:function(){this.initBaseController()},initBaseController:function(){cc.V||(cc.V={}),this.initPrototype(),this.singletonVin(),this.singletonAPI(),this.singletonSFSManager()},initPrototype:function(){String.format||(String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})})},singletonVin:function(){cc.V||(cc.V={})},singletonAPI:function(){if(!cc.V.api){var e=t("../api/API");cc.V.api=e}this.api=cc.V.api},singletonSFSManager:function(){if(!cc.V.sfsManager){var e=t("../sfs/SFSManager");cc.V.sfsManager=e}this.sfsManager=cc.V.sfsManager,this.sfs=this.sfsManager.sfs,this.SFS2X=this.sfsManager.SFS2X,this.sendRequest=this.sfsManager.sendRequest},clearTempRequests:function(){for(cc.V.tempRequests||(cc.V.tempRequests=[]);cc.V.tempRequests.length>0;)cc.V.tempRequests.pop()},getDeviceID:function(){var t=cc.sys.localStorage.getItem(s.DEVICE_ID);t||(t=(new c).device_id,cc.sys.localStorage.setItem(s.DEVICE_ID,t));return t},getDeviveToken:function(){return cc.device_token},setMarketingCode:function(t){cc.sys.localStorage.setItem(s.MARKETING_CODE,t)},getMarketingCode:function(){return cc.sys.localStorage.getItem(s.MARKETING_CODE)||""},setConfig:function(t){cc.V.config=t},getConfig:function(){return cc.V.config}},"setConfig",function(t){cc.V.config=t}),o(n,"getConfig",function(){return cc.V.config}),o(n,"setListAgent",function(t){cc.V.list_agent=t}),o(n,"getListAgent",function(){return cc.V.list_agent}),o(n,"setOrbitFireFish",function(t){cc.V.orbit_firefish||(t?cc.V.orbit_firefish=t:cc.loader.loadRes("game-firefish/orbit/Orbit.json",cc.JsonAsset,function(t,e){cc.V.orbit_firefish=e.json}))}),o(n,"getOrbitFireFish",function(){return cc.V.orbit_firefish}),o(n,"shuffleListAgent",function(){for(var t=cc.V.list_agent,e=t.length;e>0;){var i=Math.floor(Math.random()*e),n=t[--e];t[e]=t[i],t[i]=n}return t}),o(n,"setGeneralConfig",function(t){cc.V.general_config=t}),o(n,"getGeneralConfig",function(){return cc.V.general_config}),o(n,"getVipPoint",function(){return cc.V.sfsManager.sfs.mySelf.variables.vip_point}),o(n,"setSecurityGame",function(t){cc.V.security_game=t}),o(n,"getUserLuckyWheelFree",function(){return cc.V.sfsManager.sfs.mySelf.variables.lucky_wheel_free.value}),o(n,"getSecurityGame",function(){return cc.V.security_game}),o(n,"setTimeLogin",function(t){cc.sys.localStorage.setItem(s.TIME_LOGIN,JSON.stringify(t))}),o(n,"getTimeLogin",function(){var t=cc.sys.localStorage.getItem(s.TIME_LOGIN);return t?t=JSON.parse(t):null}),o(n,"setGuide",function(t){cc.V.guide=t}),o(n,"getGuide",function(){return cc.V.guide}),o(n,"setPolicy",function(t){cc.V.policy=t}),o(n,"getPolicy",function(){return cc.V.policy}),o(n,"setConfigIap",function(t){cc.V.config_iap=t}),o(n,"getConfigIap",function(){return cc.V.config_iap}),o(n,"setLuckyWheel",function(t){cc.V.lucky_wheel=t}),o(n,"getLuckyWheel",function(){return cc.V.lucky_wheel}),o(n,"setQuest",function(t){cc.V.quest=t}),o(n,"getQuest",function(){return cc.V.quest}),o(n,"getLuckyWheel",function(){return cc.V.lucky_wheel}),o(n,"setFreeChip",function(t){cc.V.free_chip=t}),o(n,"getFreeChip",function(){return cc.V.free_chip}),o(n,"getTempData",function(){return cc.V.tempData||(cc.V.tempData={}),cc.V.tempData}),o(n,"setUser",function(t){cc.V.user=t}),o(n,"getUser",function(){return cc.V.user}),o(n,"setMoney",function(t){cc.V.user.money=t}),o(n,"setGold",function(t){cc.V.user.gold=t}),o(n,"getToken",function(){return cc.V.user.token}),o(n,"getUserId",function(){return cc.V.user.user_id}),o(n,"getSafeMoney",function(){return cc.V.sfsManager.sfs.mySelf.variables.safe_amount.value}),o(n,"getMoney",function(){return cc.V.sfsManager.sfs.mySelf.variables.money.value}),o(n,"getGold",function(){return cc.V.sfsManager.sfs.mySelf.variables.gold.value}),o(n,"getBalance",function(){return cc.V.sfsManager.sfs.mySelf.variables.balance.value}),o(n,"isAutoBuyIn",function(){return cc.V.sfsManager.sfs.mySelf.variables.is_auto_buy_in.value}),o(n,"getServerID",function(){return cc.V.sfsManager.sfs.mySelf.variables.server_id.value}),o(n,"setSceneName",function(t){cc.V.sceneName=t}),o(n,"getSceneName",function(){return cc.V.sceneName}),o(n,"setSceneGameSlot",function(t){cc.V.sceneGameSlot=t}),o(n,"isSenceGameSlot",function(){return cc.V.sceneGameSlot}),o(n,"setBulletSpeed",function(t){cc.V.config.bullet_speed=t}),o(n,"getBulletSpeed",function(){return cc.V.config.bullet_speed}),o(n,"setRoomInfo",function(t){cc.V.roomInfo=t}),o(n,"getRoomInfo",function(){return cc.V.roomInfo}),o(n,"getLastJoinedRoom",function(){return cc.V.sfsManager.sfs.lastJoinedRoom}),o(n,"getListUserInRoom",function(){var t=this.getLastJoinedRoom()._userManager._usersById.items,e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}),o(n,"getRoomName",function(){return cc.V.sfsManager.sfs.lastJoinedRoom.name||""}),o(n,"setShowEvent",function(t){cc.V.is_show_event=t}),o(n,"isShowEvent",function(){return cc.V.is_show_event}),o(n,"getDiamondLevel",function(){return cc.V.sfsManager.sfs.mySelf.variables.diamond_level.value}),o(n,"getDiamond",function(){return cc.V.sfsManager.sfs.mySelf.variables.diamond.value}),o(n,"setDiamondEvent",function(t){cc.V.diamond_event=t}),o(n,"getDiamondEvent",function(){return cc.V.diamond_event}),o(n,"setDiamondLevelEvent",function(t){cc.V.diamond_level=t}),o(n,"getDiamondLevelEvent",function(){return cc.V.diamond_level}),o(n,"setDiamondEventOpen",function(t){cc.V.diamond_event_open=t}),o(n,"getDiamondEventOpen",function(){return cc.V.diamond_event_open}),o(n,"setShowEvent",function(t){cc.V.is_show_event=t}),o(n,"isShowEvent",function(){return cc.V.is_show_event}),o(n,"getSFS",function(){return cc.V.sfsManager?cc.V.sfsManager.sfs:null}),o(n,"getSFSMySelf",function(){return cc.V.sfsManager.sfs.mySelf}),o(n,"getListUserByRoom",function(){var t=[];if(this.sfs){var e=this.sfs.lastJoinedRoom._userManager._usersByName.items;for(var i in e)e.hasOwnProperty(i)&&t.push(e[i])}return t}),o(n,"getTempRequests",function(){return cc.V.tempRequests||(cc.V.tempRequests=[]),cc.V.tempRequests}),o(n,"getGameName",function(){var t="",e=this.getRoomName().split("_");return e.length>1&&(t=e[1]),t}),o(n,"getRoomMinBet",function(){var t="",e=this.getRoomName().split("_");return e.length>1&&(t=e[1]),t}),o(n,"getTableId",function(){var t="",e=this.getRoomName().split("_");return e.length>3&&(t=e[3]),t}),o(n,"isScene",function(t){return this.getSceneName()===t}),o(n,"getRegisterCode",function(){return cc.sys.platform===cc.sys.DESKTOP_BROWSER?s.REGISTER_CODE_WEB:cc.sys.platform===cc.sys.ANDROID?s.REGISTER_CODE_GOOGLE_STORE:cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD?s.REGISTER_CODE_APPLE_STORE:s.REGISTER_CODE_WEB}),o(n,"getMarketingCode",function(){return cc.sys.localStorage.getItem(s.MARKETING_CODE)||""}),o(n,"isAndroid",function(){return cc.sys.platform===cc.sys.ANDROID}),o(n,"isIOS",function(){return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD}),o(n,"isConnected",function(){return this.getUser()&&cc.V.sfsManager&&cc.V.sfsManager.sfs&&cc.V.sfsManager.sfs.isConnected()}),o(n,"setAutoLogin",function(t){cc.sys.localStorage.setItem(s.AUTO_LOGIN,t)}),o(n,"isAutoLogin",function(){var t=cc.sys.localStorage.getItem(s.AUTO_LOGIN);return!!t&&"true"==t}),o(n,"getOSTypeCode",function(){return this.isAndroid()?1:this.isIOS()?0:void 0}),o(n,"setAccountType",function(t){cc.sys.localStorage.setItem(s.ACCOUNT_TYPE,t)}),o(n,"getAccountType",function(){return cc.sys.localStorage.getItem(s.ACCOUNT_TYPE)}),o(n,"setAccount",function(t,e){var i={username:t,password:e};cc.sys.localStorage.setItem(s.ACCOUNT,JSON.stringify(i))}),o(n,"getAccount",function(){var t=cc.sys.localStorage.getItem(s.ACCOUNT),e=cc.sys.localStorage.getItem(s.TIME_LOG_OUT);if(t){if(t=JSON.parse(t),!e)return t;if(e=parseInt(e),!((new Date).getTime()-e>=1e3*a.TIME_SAVE_ACCOUNT))return t;this.clearAccount()}return null}),o(n,"setAccountQuick",function(t,e){var i={username:t,password:e};cc.sys.localStorage.setItem(s.ACCOUNT_QUICK,JSON.stringify(i))}),o(n,"getAccountQuick",function(){var t=cc.sys.localStorage.getItem(s.ACCOUNT_QUICK);return t?t=JSON.parse(t):null}),o(n,"clearAccount",function(){cc.sys.localStorage.removeItem(s.ACCOUNT)}),o(n,"setListFavorites",function(t){cc.sys.localStorage.setItem(s.FAVORIES,JSON.stringify(t))}),o(n,"getListFavorites",function(){var t=cc.sys.localStorage.getItem(s.FAVORIES);if(t)try{return JSON.parse(t)}catch(t){return[]}return[]}),o(n,"addFavorite",function(t){for(var e=this.getListFavorites(),i=0,n=e.length;i<n;i++)if(e[i]===t){e.splice(i,1);break}e.push(t),e.length>10&&e.splice(10,1),this.setListFavorites(e)}),o(n,"getServiceConfig",function(){return cc.V.general_config.SERVICE_CONFIG}),o(n,"getTime",function(){return Math.floor(Date.now()/1e3)}),o(n,"getDK",function(t,e){var i=this.binaryAgent(this.getBinary());return r(t+e+i)}),o(n,"binaryAgent",function(t){var e="";return(t=(t=t.replace(/\s+/g,"")).match(/.{1,8}/g).join(" ")).split(" ").map(function(t){e+=String.fromCharCode(parseInt(t,2))}),e}),o(n,"getBinary",function(){var t="xmxxmxmxxmmxxmxmxmxxxmxxxmmmxxmxxmmmxmmmxmmxmxxxxmxmmxxmxmmmxxmmxmxmxmxxxmmmmxmxxmxxxmmmxmxmxxxxxmmmxxmmxmmmxmmmxmmmxxmxxxmmxxmmxmmxmxmmxmxxmxmxxmxxxmxmxmmxxmmxxmmmxmmmxxmmxmmmxmxmxxxxxmmxmxmxxmxmmxxxxmmmxxxmxmxmxxmxxmxmmxxmxmmmxxmmxmxxmxmxxmxxmmxmxmxxmmxxxmmmxmxxxxmmmxxxxxmmmxxxxxmmxmmxxmxxxmmxxmxmmxxxxmmxmxmxxmxxxmmmxmxmmxxxxmxmxmxmxmxxxmmmxxmmxmxxxmmxmxmxxmxmxmmmxxmmxmmmxmxmxmxxxmxxxxmxxmmxxmxxxxmmmxxmxmmmxxxxxmxxmxxxxmxmmxmxxmmxmmxmxmxmxmmmxmmmmxxmxxmmxmxmxxmmxxmxxmxmxxxm";return t=(t=t.replace(/x/g,"0")).replace(/m/g,"1")}),o(n,"checkSendEventDisconnect",function(){if(cc.S&&cc.V.sfsManager&&cc.V.sfsManager.sfs&&cc.V.sfsManager.sfs.isConnected()){var t=cc.V.last_send_time,e=!0;if(t)(new Date).getTime()-t<6e4&&(e=!1);e&&(cc.V.last_send_time=(new Date).getTime(),cc.V.sfsManager.sendRequest.sendNoPrefixToZone("REQUEST_PREVENT_DISCONNECT"))}}),o(n,"getServiceConfigByDevice",function(){return this.getServiceConfig().APK_FULL}),o(n,"getSign",function(t,e){var i=t+e+s.KEY;return r(i)}),o(n,"clearSFSManager",function(){var t=cc.V.general_config;cc.V.resume&&(cc.game.resume=cc.V.resume,cc.game.pause=cc.V.pause),cc.S={general_config:t},cc.V.sceneName=s.SCENE_LOGIN,cc.V.tempData={}}),n)),cc._RF.pop()},{"../api/API":"API","../helper/Config":"Config","../helper/Constant":"Constant","../lib/md5":"md5","../object/Capcha":"Capcha","../sfs/SFSManager":"SFSManager","../util/Util":"Util"}],BaseFish:[function(t,e,i){"use strict";cc._RF.push(e,"07182WxQJdLKpIbE5Imtzxp","BaseFish");var n=t("../../helper/FireFishConfig");cc.Class({extends:cc.Component,properties:{colliderCollision:cc.Collider},init:function(t,e){this.FireFishGame=t,this.fishManager=t.fishManager,this.Fish=e,this.node.opacity=255,this.initSwimAndDeadAnimationByType(this.Fish.type),this.initSizeCollider()},onLoad:function(){var t=this;this.isAction=!0;var e=this;this.onTouchEnd=function(i){e.FireFishGame.isLockFish()&&(t.Fish.setLockFish(!0),t.fishManager.removeAllEventClickFish())}},onEnable:function(){cc.director.getCollisionManager().enabled=!0,this.initSizeCollider()},onDisable:function(){this.removeEventClick()},addEventClick:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},removeEventClick:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},initSizeCollider:function(){var t=this.fishManager.getTypeFishChange(this.Fish.type),e=this.getFishConfigByType(t);e&&(console.log(this.colliderCollision),this.colliderCollision.size.width=e.size_with,this.colliderCollision.size.height=e.size_height,this.colliderCollision.offset.x=e.off_set_x,this.colliderCollision.offset.y=e.off_set_y,this.node.scale=-e.scale)},setFishCallBackCollision:function(t,e){this.callBackCollision=t.bind(e)},onCollisionEnter:function(t){this.callBackCollision(t)},onCollisionStay:function(t){},onCollisionExit:function(t){},initSwimAndDeadAnimationByType:function(t){this.animation=this.node.getComponent(cc.Animation);var e=this.animation.getClips();t=this.fishManager.getTypeFishChange(t);for(var i=0,n=e.length;i<n;i++){var o=e[i]._name;o.indexOf("Fish"+t+"SwimAnimation")>-1?(this.swimAnimation=e[i],this.swimAnimationName=o):o.indexOf("Fish"+t+"DeadAnimation")>-1&&(this.deadAnimation=e[i],this.deadAnimationName=o)}this.playSwimAnimation()},playSwimAnimation:function(){this.animation.play(this.swimAnimationName)},setLockFish:function(t){this.lockFish=t},isLockFish:function(){return this.lockFish},playDeadAnimation:function(){this.animation.play(this.deadAnimationName)},getFishConfigByType:function(t){var e=n.FISHS;for(var i in e)if(e[i].type==t)return e[i]},dead:function(){this.playDeadAnimation(),this.node.runAction(cc.sequence(cc.fadeOut(this.deadAnimation.duration),cc.callFunc(function(){this.node.destroy(),this.fishManager.removeFishInArray(this.Fish.id)},this)))}}),cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig"}],BasePlayer:[function(t,e,i){"use strict";cc._RF.push(e,"05628JT8HZNxqbNGOox9YYg","BasePlayer");var n=t("../../helper/Config"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,avatarDefaultSpriteFrame:cc.SpriteFrame,nameLabel:cc.Label,balanceLabel:cc.Label,countDownProgressBar:cc.ProgressBar,roomMasterNode:cc.Node,requestLeftRoomNode:cc.Node,chatNode:cc.Node,chatLabel:cc.Label,emotionSprite:cc.Sprite,winNode:cc.Node,winLabel:cc.Label,loseNode:cc.Node,loseLabel:cc.Label,textLightNode:cc.Node,textLightMaskNode:cc.Node,textLightLabel:cc.Label,textDarkNode:cc.Node,textDarkMaskNode:cc.Node,textDarkLabel:cc.Label,betNode:cc.Node,betLabel:cc.Label,betTypeSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,changeBalancePrefab:cc.Prefab,changeBalanceNode:cc.Node,emotionSpriteAtlas:cc.SpriteAtlas},onLoad:function(){this.isCountDown=!1,this.time=0,this.totalTime=0,this.betAmount=0,this.avatar="",this.balance=0,this.name="",this.timeoutChat=null,this.timeoutText=null,this.initBetX=this.betNode.x,this.initBetY=this.betNode.y,this.initEmotionX=this.emotionSprite.node.x,this.initEmotionY=this.emotionSprite.node.y,this.textLightLabel.node.scale=.85,this.textDarkLabel.node.scale=.85},onEnable:function(){this.clear(),this.changeBalanceNode.removeAllChildren(!0)},onDisable:function(){this.clearAllTimeout()},update:function(t){this.isCountDown&&(this.time+=t/this.totalTime,this.time>1&&(this.time=1),this.time<0&&(this.time=0),this.countDownProgressBar.progress=this.time)},startCountDown:function(t,e){e?(this.isCountDown=!0,this.totalTime=e,this.time=(e-t)/e,this.countDownProgressBar.progress=this.time):this.stopCountDown()},stopCountDown:function(){this.isCountDown=!1,this.time=0,this.totalTime=0,this.countDownProgressBar.progress=0},setBetType:function(t){this.betTypeSprite.spriteFrame=t?this.moneySpriteFrame:this.goldSpriteFrame},setAvatar:function(t){var e=this;this.avatar=t,this.avatarSprite.spriteFrame=this.avatarDefaultSpriteFrame,t&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var n=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=n}})},showChat:function(t){this.clearChat(),this.node.zIndex=1;var e=this.emotionSpriteAtlas.getSpriteFrame(t);e?this.showChatEmotion(e):this.showChatText(t)},showChatText:function(t){this.chatNode.active=!0,this.chatLabel.string=t,this.timeoutChat=setTimeout(function(){this.clearChat()}.bind(this),1e3*n.CHAT_GAME_TIME_OUT)},showChatEmotion:function(t){this.emotionSprite.node.active=!0,this.emotionSprite.spriteFrame=t,this.timeoutChat=setTimeout(function(){this.clearChat()}.bind(this),1e3*n.CHAT_GAME_TIME_OUT),this.initActionEmotion()},initActionEmotion:function(){this.emotionSprite.node.stopAllActions(),this.emotionSprite.node.setPosition(this.initEmotionX,this.initEmotionY),this.emotionSprite.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,this.initEmotionX,this.initEmotionY+15),cc.moveTo(.5,this.initEmotionX,this.initEmotionY))))},showChangeBalance:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!==t){e&&this.changeBalanceNode.removeAllChildren(!0),t>0&&this.changeBalanceNode.removeAllChildren(!0);var i=cc.instantiate(this.changeBalancePrefab),n=95;this.node.x<0&&(n*=-1),i.setPosition(n,45),i.parent=this.changeBalanceNode,i.getComponent("ChangeBalance").showChangeBalance(t)}},setBalance:function(t){this.balance=parseInt(t),this.balanceLabel.string=o.numberWithCommas(this.balance)},showEffectByChangeBalance:function(t){t>0?this.showWinEffect("TH\u1eaeNG"):t<0?this.showLoseEffect("THUA"):this.showLoseEffect("H\xd2A")},showBetNode:function(t){this.betAmount=t,this.betNode.active=!0,this.setBetLabel(t),this.betNode.stopAllActions(),this.betNode.x=this.initBetX,this.betNode.y=this.initBetY-50,this.betNode.opacity=0,this.betNode.runAction(cc.spawn(cc.moveTo(.5,this.initBetX,this.initBetY),cc.fadeIn(.5)))},showBetNodeWithoutAnimation:function(t){this.betNode.stopAllActions(),this.betAmount=t,this.betNode.active=!0,this.setBetLabel(t),this.betNode.x=this.initBetX,this.betNode.y=this.initBetY,this.betNode.opacity=255},hideBetNode:function(){this.betNode.active=!1},setBetLabel:function(t){this.betLabel.string=o.numberWithCommas(t)},setRequestLeftRoom:function(t){this.requestLeftRoomNode.active=t},isRequestLeftRoom:function(){return this.requestLeftRoomNode.active},setRoomMaster:function(t){this.roomMasterNode.active=t},setStatus:function(t){this.nameLabel.string=t},setPlayerName:function(t){this.name=t,this.nameLabel.string=t},resetPlayerName:function(){this.nameLabel.string=this.name},resetPlayerNameWithString:function(t){this.nameLabel.string===t&&(this.nameLabel.string=this.name)},resetPlayerNameExcept:function(t){this.nameLabel.string!==t&&(this.nameLabel.string=this.name)},showWinEffect:function(t){this.winNode.active=!0,this.winLabel.string=t},hideWinEffect:function(){this.winNode.active=!1},showLoseEffect:function(t){this.loseNode.active=!0,this.loseLabel.string=t},hideLoseEffect:function(){this.loseNode.active=!1},hideWinLoseEffect:function(){this.hideWinEffect(),this.hideLoseEffect()},showTextLight:function(t,e,i){clearTimeout(this.timeoutText),this.textLightNode.active=!0,this.textLightLabel.string=t,this.textDarkNode.active=!1,i?(this.textLightMaskNode.active=!1,this.textLightLabel.node.setPosition(i)):(this.textLightMaskNode.active=!0,this.textLightLabel.node.setPosition(0,0)),e&&(this.timeoutText=setTimeout(function(){this.hideText()}.bind(this),3e3))},hideTextLight:function(){this.textLightNode.active=!1,this.textLightLabel.string=""},showTextDark:function(t,e,i){clearTimeout(this.timeoutText),this.textDarkNode.active=!0,this.textDarkLabel.string=t,this.textLightNode.active=!1,i?(this.textDarkMaskNode.active=!1,this.textDarkLabel.node.setPosition(i)):(this.textDarkMaskNode.active=!0,this.textDarkLabel.node.setPosition(0,0)),e&&(this.timeoutText=setTimeout(function(){this.hideText()}.bind(this),3e3))},hideTextDark:function(){this.textDarkNode.active=!1,this.textDarkLabel.string=""},hideText:function(){this.hideTextLight(),this.hideTextDark()},getRemainTimeCountDown:function(){return this.totalTime*(1-this.time)},getTimeCountDown:function(){return this.totalTime},getTotalTimeCountDown:function(){return this.totalTime},clearChat:function(){clearTimeout(this.timeoutChat),this.chatNode.active=!1,this.chatLabel.string="",this.emotionSprite.node.active=!1,this.node.zIndex=0},clearAllTimeout:function(){clearTimeout(this.timeoutChat),clearTimeout(this.timeoutText)},clear:function(){this.clearChat()},reset:function(){this.setRequestLeftRoom(!1),this.stopCountDown(),this.hideWinEffect(),this.hideLoseEffect(),this.hideBetNode(),this.hideText()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],BaseScene:[function(t,e,i){"use strict";cc._RF.push(e,"1a09fganGJBXL+uad6P/ERO","BaseScene");var n=t("./BaseController");cc.Class({extends:n,properties:{miniGamePrefab:cc.Prefab,miniGameContainerNode:cc.Node},onLoad:function(){this._super()},onEnable:function(){this.initMiniGame()},initMiniGame:function(){this.sfs&&this.sfs.isConnected()&&this.createMinigameNode()},createMinigameNode:function(){var t=this.getPersistNode();if(t)t.parent=this.miniGameContainerNode,t.active=!0,this.MiniGame=t.getComponent("MiniGame"),this.MiniGame.init(this);else if(!this.MiniGame){var e=cc.instantiate(this.miniGamePrefab);this.MiniGame=e.getComponent("MiniGame"),this.MiniGame.init(this),e.parent=this.miniGameContainerNode}},loadPersistScene:function(t){this.MiniGame&&(this.MiniGame.node.parent=null,cc.game.addPersistRootNode(this.MiniGame.node),this.MiniGame.node.active=!1),cc.director.loadScene(t)},getPersistNode:function(){var t=cc.game._persistRootNodes;for(var e in t)if(t[e].name===this.miniGamePrefab.name)return t[e];return null}}),cc._RF.pop()},{"./BaseController":"BaseController"}],BauCuaBetItem:[function(t,e,i){"use strict";cc._RF.push(e,"b3d57cCitpAPZO4c3/pMfMr","BauCuaBetItem");var n=t("../../../util/FormatUtil"),o=t("../bau-cua/BauCuaConstant");cc.Class({extends:cc.Component,properties:{betLabel:cc.Label,selectedNode:cc.Node},onLoad:function(){},init:function(t,e){this.BauCua=t,this.bet=e,this.betLabel.string=n.nFormatter(e)},getBet:function(){return this.bet},onClick:function(){this.BauCua.BauCuaBet.selectItem(this),this.BauCua.getTempData()[o.BET_VALUE]=this.bet},select:function(){this.selectedNode.active=!0},unSelect:function(){this.selectedNode.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../bau-cua/BauCuaConstant":"BauCuaConstant"}],BauCuaBet:[function(t,e,i){"use strict";cc._RF.push(e,"7f22dSXE3VJU4YTS2BpU3AN","BauCuaBet");var n=t("../item/BauCuaBetItem"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{listBetItems:[n]},init:function(t){for(var e in this.BauCua=t,this.listBetItems)this.listBetItems[e].init(t,o.BAU_CUA_LIST_BET[e]),0==e&&this.selectItem(this.listBetItems[e])},onLoad:function(){},selectItem:function(t){for(var e in this.listBetItems)this.listBetItems[e]===t?(this.selectedItem=t,this.listBetItems[e].select()):this.listBetItems[e].unSelect()},selectItemByBet:function(t){for(var e in this.listBetItems)this.listBetItems[e].getBet()===t?(this.selectedItem=this.listBetItems[e],this.listBetItems[e].select()):this.listBetItems[e].unSelect()},unSelectedAllItem:function(){for(var t in this.listBetItems)this.listBetItems[t].unSelect()},getSelectedItem:function(){return this.selectedItem},getSelectedBet:function(){return this.getSelectedItem().getBet()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../item/BauCuaBetItem":"BauCuaBetItem"}],BauCuaConfig:[function(t,e,i){"use strict";cc._RF.push(e,"99733lvjgRDJJM3lRg8gjMS","BauCuaConfig");e.exports={NUMBER_HISTORY:20,TIME_SHAKE_PLATE:.05,TIME_SHOW_COIN:2.5,DISTANCE_MOVE_BOWL_X:-60,DISTANCE_MOVE_BOWL_Y:-60},cc._RF.pop()},{}],BauCuaConstant:[function(t,e,i){"use strict";cc._RF.push(e,"b1ae7wYgNRKn5+rPD0I//Sd","BauCuaConstant");e.exports={REQUEST_START:"START",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_BET:"BET",REQUEST_CHAT:"CHAT",ADD_EVENT:"hooheyhow.ADD_EVENT",REMOVE_EVENT:"hooheyhow.REMOVE_EVENT",GET_STATE:"hooheyhow.GET_STATE",BET:"hooheyhow.BET",CHAT:"hooheyhow.CHAT",IS_SHOW:"hooheyhow_is_show",IS_SHOW_CHAT:"hooheyhow_is_show_chat",POSITION:"hooheyhow_position",BET_VALUE:"hooheyhow_bet_value",GAME_STATE_WAITTING:0,GAME_STATE_BETTING:1,NUMBER_HISTORY:10,MONEY_TYPE:"hooheyhow_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"hooheyhow.GET_TOP"},cc._RF.pop()},{}],BauCuaHistories:[function(t,e,i){"use strict";cc._RF.push(e,"675166Lm25BrIgpOX47jMQn","BauCuaHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryBauCua(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("BauCuaHistoryItem").init(t[e],e)}}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],BauCuaHistoryGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"d610fMeOqJIlbKR4ka5yNBy","BauCuaHistoryGameItem"),cc.Class({extends:cc.Component,properties:{item1Sprite:cc.Sprite,item2Sprite:cc.Sprite,item3Sprite:cc.Sprite,itemsSpriteFrame:[cc.SpriteFrame]},onLoad:function(){},init:function(t){this.item1Sprite.spriteFrame=this.getSpriteFrameById(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameById(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameById(t[2])},getSpriteFrameById:function(t){return this.itemsSpriteFrame[t-1]}}),cc._RF.pop()},{}],BauCuaHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a7e0eaKtmNODKoAxP4KzN9Y","BauCuaHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,result1Sprite:cc.Sprite,result2Sprite:cc.Sprite,result3Sprite:cc.Sprite,itemsSpriteFrame:[cc.SpriteFrame],betLabel:cc.Label,getLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_money_bet),this.getLabel.string=n.numberWithCommas(t.total_money_win),this.initResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},initResult:function(t){t=JSON.parse(t),this.result1Sprite.spriteFrame=this.getSpriteFrameByValue(t[0]),this.result2Sprite.spriteFrame=this.getSpriteFrameByValue(t[1]),this.result3Sprite.spriteFrame=this.getSpriteFrameByValue(t[2])},getSpriteFrameByValue:function(t){return this.itemsSpriteFrame[t-1]}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BauCuaHistory:[function(t,e,i){"use strict";cc._RF.push(e,"5db3dm1S39BMrmK0lfma5mK","BauCuaHistory");var n=t("../item/BauCuaNumberItem"),o=t("./BauCuaConstant");cc.Class({extends:cc.Component,properties:{historyGameItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView,listNumberItems:[n]},init:function(t){this.BauCua=t;for(var e=0;e<this.listNumberItems.length;e++)this.listNumberItems[e].init(e+1)},onLoad:function(){},initHistory:function(t){var e=t.list_door,i=t.list_dice;if(e)for(var n in this.listNumberItems)for(var o in e)if(this.listNumberItems[n].getId()==e[o].door_id){this.listNumberItems[n].setNumber(e[o].count);break}if(i)for(var s in this.historyScrollView.content.removeAllChildren(!0),i)this.instanceItem(i[s])},addHistory:function(t){var e=this.historyScrollView.content.getChildren();for(var i in e.length>=o.NUMBER_HISTORY&&e[0].removeFromParent(!0),this.instanceItem(t),this.listNumberItems)for(var n in t)this.listNumberItems[i].getId()==t[n]&&this.listNumberItems[i].addNumber()},instanceItem:function(t){var e=cc.instantiate(this.historyGameItemPrefab);e.parent=this.historyScrollView.content,e.getComponent("BauCuaHistoryGameItem").init(t)}}),cc._RF.pop()},{"../item/BauCuaNumberItem":"BauCuaNumberItem","./BauCuaConstant":"BauCuaConstant"}],BauCuaItem:[function(t,e,i){"use strict";cc._RF.push(e,"a9410f+ZTVO9rFvVwvtS1pK","BauCuaItem");var n=t("../../../object/RoomType"),o=t("../bau-cua/BauCuaConstant"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{totalBetLabel:cc.Label,betLabel:cc.Label,betNode:cc.Node,selectedNode:cc.Node,xLabel:cc.Label,xNode:cc.Node},onLoad:function(){},init:function(t,e){this.BauCua=t,this.id=e},onClick:function(){var t={door_id:this.id,money_type:this.BauCua.isMoneyType?n.MONEY_CODE:n.GOLD_CODE,amount:this.BauCua.BauCuaBet.getSelectedBet()};this.BauCua.sendRequest.sendNoPrefixToZone(o.BET,t)},setTotalBet:function(t){this.totalBetLabel.string=s.nFormatter(t,2)},setBet:function(t){this.betNode.active=0!=t,this.betLabel.string=s.nFormatter(t,2)},isBet:function(){return this.betNode.active},showEffectByNumberWin:function(t){t>0&&(this.showSelect(),this.setX(t))},showSelect:function(){this.selectedNode.active=!0},hideSelect:function(){this.selectedNode.active=!1},setX:function(t){t>1&&(this.xLabel.string="x"+t,this.xNode.active=!0)},getId:function(){return this.id},reset:function(){this.betNode.active=!1,this.totalBetLabel.string=0,this.betLabel.string=0,this.xNode.active=!1,this.hideSelect(!0)}}),cc._RF.pop()},{"../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../bau-cua/BauCuaConstant":"BauCuaConstant"}],BauCuaNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"266ebZliEpA9Y9e+gbwZC3l","BauCuaNumberItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},onLoad:function(){},init:function(t){this.id=t},getId:function(){return this.id},setNumber:function(t){this.number=t,this.numberLabel.string=n.numberWithCommas(t)},addNumber:function(){this.number||(this.number=0),this.number=this.number+1,this.numberLabel.string=n.numberWithCommas(this.number)},getNumber:function(){return this.number}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BauCuaPlate:[function(t,e,i){"use strict";cc._RF.push(e,"f0f93JxUVJFW5x3VLNe771T","BauCuaPlate");var n=t("./BauCuaConfig");cc.Class({extends:cc.Component,properties:{bowlNode:cc.Node,xocNode:cc.Node,item1Sprite:cc.Sprite,item2Sprite:cc.Sprite,item3Sprite:cc.Sprite,animation:cc.Animation,listSpriteFrame:[cc.SpriteFrame]},init:function(t){this.BauCua=t},onLoad:function(){this.isOnLoad=!0,this.duration=this.animation.defaultClip.duration,this.bowlInitX=this.bowlNode.x,this.bowlInitY=this.bowlNode.y,this.timeEachShake=n.TIME_SHAKE_PLATE,this.timeShowCoin=n.TIME_SHOW_COIN,this.distanceMoveBowlX=n.DISTANCE_MOVE_BOWL_X,this.distanceMoveBowlY=n.DISTANCE_MOVE_BOWL_Y},onEnable:function(){this.reset()},onDisable:function(){clearTimeout(this.timeoutHideXoc)},shakePlate:function(t){this.reset(),this.node.active=!0,this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.xocNode.active=!0,this.xocNode.getComponent(cc.Animation).play(),clearTimeout(this.timeoutHideXoc),this.timeoutHideXoc=setTimeout(function(){this.xocNode.active=!1,this.bowlNode.runAction(cc.moveBy(this.timeShowCoin,this.distanceMoveBowlX,this.distanceMoveBowlY))}.bind(this),1e3*this.duration)},shakePlateBNoAnimation:function(t){this.reset(),this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.isOnLoad?this.bowlNode.setPosition(this.bowlInitX+this.distanceMoveBowlX,this.bowlInitY+this.distanceMoveBowlY):this.bowlNode.setPosition(n.DISTANCE_MOVE_BOWL_X+1,n.DISTANCE_MOVE_BOWL_Y-1)},getSpriteFrameByDice:function(t){return this.listSpriteFrame[t-1]},reset:function(){this.isOnLoad&&(this.bowlNode.stopAllActions(),this.bowlNode.setPosition(this.bowlInitX,this.bowlInitY),this.bowlNode.setPosition(1,-1),this.xocNode.active=!1)}}),cc._RF.pop()},{"./BauCuaConfig":"BauCuaConfig"}],BauCuaRank:[function(t,e,i){"use strict";cc._RF.push(e,"9fd7bashoJAyJOoVlDJlj33","BauCuaRank");t("../../../helper/Config");var n=t("../../../helper/Constant"),o=t("../../../helper/Message"),s=t("../../../util/FormatUtil"),a=t("../item/JackpotItem");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,loadingNode:cc.Node,currentWeekNode:cc.Node,lastWeekNode:cc.Node,JackpotItem:a,listTopNicknameLabel:[cc.Label],listTopWinLabel:[cc.Label],myWinLabel:[cc.Label],percentLabel:[cc.Label],lastWeekListTopNicknameLabel:[cc.Label],lastWeekListTopWinLabel:[cc.Label],balanceTopWinLabel:[cc.Label],dayLabel:cc.Label,hourLabel:cc.Label,minutesLabel:cc.Label,secondsLabel:cc.Label},init:function(t){this.controller=t},onLoad:function(){this.isMoneyType=!0,this.setTypeRoom(this.isMoneyType),this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset(),this.loadData()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),clearInterval(this.timeInterval),this.removeXhr()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.controller.DialogMessage||!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active},loadData:function(){var t=this;if(this.loadingNode.active=!0,this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.getTopWeekBauCua(e,function(e){t.data=e.data,t.initData()},function(e){t.loadingNode.active=!1,t.controller.showDialogMessage(o.BAU_CUA_TOP_WEEK_TITLE,e.msg)})}},initData:function(){if(this.loadingNode.active=!1,this.data){var t=this.isMoneyType?this.data.money:this.data.gold;this.initLastWeekData(t),this.initThisWeekData(t),this.initUserData(this.data.user),this.initTime()}},initLastWeekData:function(t){if(t){var e=t.last_week;if(this.totalAmountLastWeek=0,e)for(var i in e){var n=e[i].door_id-1;this.lastWeekListTopNicknameLabel[n].string=e[i].nick_name,this.lastWeekListTopWinLabel[n].string=s.numberWithCommas(e[i].amount),this.balanceTopWinLabel[n].string=s.numberWithCommas(e[i].top_prize),this.totalAmountLastWeek+=e[i].top_prize}}var o=this.data.pecent_win_week;if(o)for(var a in this.percentLabel)this.percentLabel[a].string=o[a]+"%"},initThisWeekData:function(t){if(t){var e=t.this_week;if(e)for(var i in e){var n=e[i].door_id-1;this.listTopNicknameLabel[n].string=e[i].nick_name,this.listTopWinLabel[n].string=s.numberWithCommas(e[i].amount)}}},isShowLastWeek:function(){return this.lastWeekNode.active},initUserData:function(t){var e=this.isMoneyType?t.money:t.gold;for(var i in e)this.myWinLabel[e[i].door_id-1].string=s.numberWithCommas(e[i].amount)},initTime:function(){this.initTimeLabel(),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.data.remain_time--,this.data.remain_time<0&&(this.data.remain_time=604800),this.initTimeLabel()}.bind(this),1e3)},initTimeLabel:function(){var t=this.data.remain_time,e=parseInt(t/86400),i=parseInt((t-86400*e)/3600),n=parseInt((t-86400*e-3600*i)/60),o=parseInt(t-86400*e-3600*i-60*n);this.dayLabel.string=e,this.hourLabel.string=i,this.minutesLabel.string=n,this.secondsLabel.string=o},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},onCurrentWeekClick:function(){this.currentWeekNode.active=!0,this.lastWeekNode.active=!1,this.titleLabel.string="X\u1ebeP H\u1ea0NG HI\u1ec6N T\u1ea0I",this.initJackpotWithoutAnimation()},onLastWeekClick:function(){this.currentWeekNode.active=!1,this.lastWeekNode.active=!0,this.titleLabel.string="X\u1ebeP H\u1ea0NG TU\u1ea6N TR\u01af\u1edaC",this.JackpotItem.setMoneyWithoutAnimation(this.totalAmountLastWeek)},onTutorialClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(n.BAU_CUA)},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.initInfo()},initJackpotWithoutAnimation:function(){var t=this.controller.MiniGame.BauCua.data;if(t){var e=t.jackpot_gold,i=t.jackpot_money;this.isMoneyType?this.JackpotItem.setMoneyWithoutAnimation(i):this.JackpotItem.setMoneyWithoutAnimation(e)}},initJackpot:function(){var t=this.controller.MiniGame.BauCua.data;if(t){var e=t.jackpot_gold,i=t.jackpot_money;this.isShowLastWeek()||(this.isMoneyType?this.JackpotItem.setMoney(i):this.JackpotItem.setMoney(e))}},initInfo:function(){if(this.resetAllLabel(),this.data){var t=this.isMoneyType?this.data.money:this.data.gold;this.initLastWeekData(t),this.initThisWeekData(t),this.initUserData(this.data.user)}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.data=null,this.dayLabel.string="",this.hourLabel.string="",this.minutesLabel.string="",this.secondsLabel.string="",this.resetAllLabel()},resetAllLabel:function(){for(var t in this.listTopNicknameLabel)this.listTopNicknameLabel[t].string="...";for(var t in this.listTopWinLabel)this.listTopWinLabel[t].string=0;for(var t in this.myWinLabel)this.myWinLabel[t].string=0;for(var t in this.lastWeekListTopNicknameLabel)this.lastWeekListTopNicknameLabel[t].string="...";for(var t in this.lastWeekListTopWinLabel)this.lastWeekListTopWinLabel[t].string=0;for(var t in this.percentLabel)this.percentLabel[t].string=""}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../item/JackpotItem":"JackpotItem"}],BauCuaState:[function(t,e,i){"use strict";cc._RF.push(e,"3f9b2/dpS9IELkibc/XPnm2","BauCuaState");var n=t("./BauCuaConstant"),o={currentState:null,BETTING:"BETTING",WAITTING:"WAITTING",setState:function(t){this.currentState=t},setStateById:function(t){switch(t){case n.GAME_STATE_BETTING:this.setBetting();break;case n.GAME_STATE_WAITTING:this.setWaitting()}},setBetting:function(){this.currentState=this.BETTING},setWaitting:function(){this.currentState=this.WAITTING},isBetting:function(){return this.currentState===this.BETTING},isWaitting:function(){return this.currentState===this.WAITTING}};e.exports=o,cc._RF.pop()},{"./BauCuaConstant":"BauCuaConstant"}],BauCuaTime:[function(t,e,i){"use strict";cc._RF.push(e,"c087czN929JypsuHaTnWBxz","BauCuaTime");var n=t("./BauCuaConstant"),o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,timeLabel:cc.Label},init:function(t){this.BauCua=t},onLoad:function(){},onDestroy:function(){clearInterval(this.timeInterval)},initTime:function(t){t&&(t.game_state&&(this.gameState=t.game_state,this.setTitleByGameState(this.gameState)),t.remain_time&&(this.time=t.remain_time,this.setTitleByGameState(this.gameState),this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3)))},setTitleByGameState:function(t){switch(t){case n.GAME_STATE_WAITTING:this.titleLabel.string=o.BAU_CUA_NEXT_TURN,this.timeLabel.node.color=cc.Color.YELLOW;break;case n.GAME_STATE_BETTING:this.titleLabel.string=o.BAU_CUA_BET,this.timeLabel.node.color=cc.Color.WHITE}},setTimeLabel:function(t){this.timeLabel.string=t}}),cc._RF.pop()},{"../../../helper/Message":"Message","./BauCuaConstant":"BauCuaConstant"}],BauCuaUI:[function(t,e,i){"use strict";cc._RF.push(e,"0600e12BKJI9r73O3dxY76m","BauCuaUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],BauCua:[function(t,e,i){"use strict";cc._RF.push(e,"1a6bdiM3upMELme/iMyUG27","BauCua");var n=t("../../../base/BaseController"),o=t("./BauCuaState"),s=t("./BauCuaConstant"),a=t("./BauCuaHistory"),r=t("./BauCuaTime"),c=t("./BauCuaPlate"),h=t("./BauCuaBet"),l=t("../MiniGameResult"),u=t("../item/BauCuaItem"),d=t("../item/JackpotItem"),m=t("../../../object/RoomType"),f=t("../../../util/FormatUtil"),p=t("../../../helper/Message"),_=t("../../../helper/Constant"),S=t("../../../helper/Config"),g=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,toastPrefab:cc.Prefab,JackpotItem:d,listItems:[u],BauCuaTime:r,BauCuaHistory:a,BauCuaPlate:c,BauCuaBet:h,MiniGameResult:l},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.time=0,this.timeInterval=null,this.resultTimeout=null,this.isMoneyType=!0,this.BauCuaState=o,this.BauCuaTime.init(this),this.BauCuaHistory.init(this),this.BauCuaPlate.init(this),this.BauCuaBet.init(this);for(var t=0;t<this.listItems.length;t++)this.listItems[t].init(this,t+1);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.initData()},onEnable:function(){this.BauCuaPlate.node.active=!1,this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),clearInterval(this.timeInterval),clearTimeout(this.resultTimeout),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[s.MONEY_TYPE]===s.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initSaveData:function(){var t=cc.sys.localStorage.getItem(s.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initTempData:function(){var t=this.getTempData()[s.BET_VALUE];t&&this.BauCuaBet.selectItemByBet(t)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_START:this.handleStart(i);break;case s.REQUEST_FINISH:this.handleFinish(i);break;case s.REQUEST_BET:this.handleBet(i);break;case s.REQUEST_UPDATE:this.handleUpdate(i);break;case s.REQUEST_MESSAGE:this.handleMessage(n);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataBauCua(i)}},handleInfo:function(t){this.data=t;var e=t.game_state,i=t.spin_id||t.match_game_id,n=t.game_info,o=t.player_info,a=t.total_time;this.BauCuaHistory.initHistory(t),this.BauCuaTime.initTime(t),this.initJackpot(),void 0!==a&&(e=60===a?s.GAME_STATE_BETTING:s.GAME_STATE_WAITTING),void 0!==e&&(this.BauCuaState.setStateById(e),this.BauCuaTime.setTitleByGameState(e)),i&&(this.idLabel.string=String.format(p.MINIGAME_ID,i)),n&&this.setGameInfo(n),o&&this.setPlayerInfo(o)},handleStart:function(t){this.reset(),this.BauCuaState.setBetting(),this.BauCuaTime.initTime(t),this.BauCuaTime.setTitleByGameState(s.GAME_STATE_BETTING),this.idLabel.string=String.format(p.MINIGAME_ID,t.match_game_id)},handleFinish:function(t){this.BauCuaState.setWaitting(),this.BauCuaTime.initTime(t),this.BauCuaTime.setTitleByGameState(s.GAME_STATE_WAITTING),this.BauCuaPlate.shakePlate(t.dice),this.initFinish(t)},initFinish:function(t){clearTimeout(this.resultTimeout),this.resultTimeout=setTimeout(function(){if(t){this.showWinItem(t.dice),this.BauCuaHistory.addHistory(t.dice);var e=t.total_gold_win,i=t.total_money_win,n=this.isMoneyType?i:e,o="";o=n>0?"Th\u1eafng":n<0?"Thua":"H\xf2a",this.isBet()&&this.MiniGameResult.show(n,o)}}.bind(this),5e3)},showWinItem:function(t){for(var e in this.listItems){var i=0;for(var n in t)this.listItems[e].getId()==t[n]&&i++;this.listItems[e].showEffectByNumberWin(i)}},handleUpdate:function(t){if(t){var e=t.game_info;this.setGameInfo(e)}},handleBet:function(t){var e=t.game_info,i=t.player_info;this.setGameInfo(e),this.setPlayerInfo(i)},handleMessage:function(t){this.showMessage(t)},onBauCuaClick:function(){this.setShowBauCua(!this.isShow)},onCloseClick:function(){this.setShowBauCua(!1)},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(_.BAU_CUA)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showBauCuaHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(g.BAU_CUA),this.controller.MiniGame.GameMiniRank.showDialog()},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},onRankWeekClick:function(){this.controller.MiniGame.showBauCuaRankForm()},setGameInfo:function(t){this.gameInfo=t,this.initGameInfo()},initGameInfo:function(){var t=this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE;if(this.gameInfo)for(var e in this.listItems){var i=this.listItems[e].getId(),n=!1;for(var o in this.gameInfo)if(t==this.gameInfo[o].money_type&&i==this.gameInfo[o].door_id){this.listItems[e].setTotalBet(this.gameInfo[o].amount),n=!0;break}n||this.listItems[e].setTotalBet(0)}},initJackpot:function(){if(this.data){var t=this.data.jackpot_gold,e=this.data.jackpot_money;this.isMoneyType?this.JackpotItem.setMoney(e):this.JackpotItem.setMoney(t),this.controller.MiniGame.BauCuaRank.initJackpot()}},setPlayerInfo:function(t){this.playerInfo=t,this.initPlayerInfo()},initPlayerInfo:function(){var t=this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE;if(this.playerInfo)for(var e in this.listItems){var i=this.listItems[e].getId(),n=!1;for(var o in this.playerInfo)if(t==this.playerInfo[o].money_type&&i==this.playerInfo[o].door_id){this.listItems[e].setBet(this.playerInfo[o].amount),n=!0;break}n||this.listItems[e].setBet(0)}},setShowBauCua:function(t){this.node.active=t,this.isShow=t,this.getTempData()[s.IS_SHOW]=t},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=S.MINIGAME_SCALE_TOAST,e.setPosition(S.MINIGAME_POSITION_TOAST_X,S.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.initBauCuaData(this.data),this.initGameInfo(),this.initPlayerInfo();var e=this.isMoneyType?s.MONEY_TYPE_MONEY:s.MONEY_TYPE_GOLD;this.getTempData()[s.MONEY_TYPE]=e},initBauCuaData:function(t){if(t){this.data=t;var e=this.isMoneyType?t.money:t.gold;if(e){this.time=t.time_remain;var i=e.tai.total_players,n=e.tai.total_bet,o=e.tai.my_bet,s=e.xiu.total_players,a=e.xiu.total_bet,r=e.xiu.my_bet;this.setTimeLabel(this.data),this.taiTotalLabel.string=f.numberWithCommas(n),this.taiNumberPlayerLabel.string=f.numberWithCommas(i),this.taiMyBetLabel.string=f.numberWithCommas(o),this.xiuTotalLabel.string=f.numberWithCommas(a),this.xiuNumberPlayerLabel.string=f.numberWithCommas(s),this.xiuMyBetLabel.string=f.numberWithCommas(r)}}},isBet:function(){for(var t in this.listItems)if(this.listItems[t].isBet())return!0;return!1},reset:function(){for(var t in this.BauCuaPlate.node.active=!1,this.listItems)this.listItems[t].reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/BauCuaItem":"BauCuaItem","../item/JackpotItem":"JackpotItem","./BauCuaBet":"BauCuaBet","./BauCuaConstant":"BauCuaConstant","./BauCuaHistory":"BauCuaHistory","./BauCuaPlate":"BauCuaPlate","./BauCuaState":"BauCuaState","./BauCuaTime":"BauCuaTime"}],BetForm:[function(t,e,i){"use strict";cc._RF.push(e,"0fffcu8MKRFwpRw8HhC3gd0","BetForm");var n=t("../../util/FormatUtil"),o=t("../../helper/Config"),s=t("../../object/RoomType");cc.Class({extends:cc.Component,properties:{minValue:0,maxValue:0,round:100,hideWhenClick:!1,balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,balanceLabel:cc.Label,minLabel:cc.Label,maxLabel:cc.Label,formNode:cc.Node,balanceSlider:cc.Slider,backgroundNode:cc.Node},init:function(t){this.controller=t,this.initX=this.node.x,this.initY=this.node.y},onLoad:function(){var t=this;this.onBackgroundTouchDown=function(e){t.hideWhenClick&&t.hideDialog(),e.stopPropagation()},this.onFormTouchDown=function(t){t.stopPropagation()}},onEnable:function(){this.balanceSlider.progress=0,this.setBalanceBuyProgress(),this.setMinValue(this.minValue),this.setMaxValue(this.maxValue),this.showDialog(),this.enableTouchEvents()},onDisable:function(){this.disableTouchEvents()},enableTouchEvents:function(){this.backgroundNode.on(cc.Node.EventType.TOUCH_START,this.onBackgroundTouchDown,this.backgroundNode),this.formNode.on(cc.Node.EventType.TOUCH_START,this.onFormTouchDown,this.formNode)},disableTouchEvents:function(){this.formNode.off(cc.Node.EventType.TOUCH_START,this.onFormTouchDown,this.formNode)},setBalanceSpriteByRoomType:function(t){this.balanceSprite.spriteFrame=t==s.GOLD_CODE?this.moneySpriteFrame:this.goldSpriteFrame},setRound:function(t){this.round=t},getRound:function(){return this.round},setMinValue:function(t){this.minValue=t,this.minLabel.string=n.numberWithCommas(t)},setMaxValue:function(t){this.maxValue=t,this.maxLabel.string=n.numberWithCommas(t)},onBalanceSlider:function(){this.setBalanceBuyProgress()},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.getBalanceSlider()},setBalanceBuyProgress:function(){var t=this.getBalanceSlider();this.balanceLabel.string=n.numberWithCommas(t)},getBalanceSlider:function(){var t=this.balanceSlider.progress*(this.maxValue-this.minValue)+this.minValue;return t=t>=this.maxValue?this.maxValue:t<=this.minLabel?this.minValue:Math.ceil(t/this.round)*this.round},setHideWhenClick:function(t){this.hideWhenClick=t},isHideWhenClick:function(){return this.hideWhenClick},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t?(this.formNode.stopAllActions(),this.formNode.x=o.BET_FORM_HIDE_X,this.formNode.runAction(cc.moveTo(o.BET_FORM_TIME_SHOW,o.BET_FORM_SHOW_X,0))):this.node.setPosition(this.initX,this.initY)},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.formNode.stopAllActions(),this.formNode.x=o.BET_FORM_SHOW_X,this.formNode.runAction(cc.sequence(cc.moveTo(o.BET_FORM_TIME_SHOW,o.BET_FORM_HIDE_X,0),cc.callFunc(function(){this.node.active=!1},this)))):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],BomConstant:[function(t,e,i){"use strict";cc._RF.push(e,"9ee736D6XpIpq5rlx9ehj22","BomConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"bom.ADD_EVENT",REMOVE_EVENT:"bom.REMOVE_EVENT",SPIN:"bom.SPIN",IS_SHOW:"bom_is_show",POSITION:"bom_position",LIST_LINES:"bom_list",IS_AUTO_SPIN:"bom_auto_spin",BET_VALUE:"bom_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"bom_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"bom.GET_TOP",MINIGAME_CONFIG_ID:47,BOM_LIST_ICON_1:["A","B","C","D","E","Bom","G"],BOM_LIST_ICON_2:["X2","X3","X5","X10","Bom"],LINE_1:[1,4,7],LINE_2:[1,4,8],LINE_3:[1,4,9],LINE_4:[1,5,7],LINE_5:[1,5,8],LINE_6:[1,5,9],LINE_7:[1,6,7],LINE_8:[1,6,8],LINE_9:[1,6,9],LINE_10:[2,4,7],LINE_11:[2,4,8],LINE_12:[2,4,9],LINE_13:[2,5,7],LINE_14:[2,5,8],LINE_15:[2,5,9],LINE_16:[2,6,7],LINE_17:[2,6,8],LINE_18:[2,6,9],LINE_19:[3,4,7],LINE_20:[3,4,8],LINE_21:[3,4,9],LINE_22:[3,5,7],LINE_23:[3,5,8],LINE_24:[3,5,9],LINE_25:[3,6,7],LINE_26:[3,6,8],LINE_27:[3,6,9]},cc._RF.pop()},{}],BomHistories:[function(t,e,i){"use strict";cc._RF.push(e,"bd38apUJcJN7rEG+2dEG/VD","BomHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryBom(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=(this.isMoneyType(),this.data[0]);for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("BomHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],BomHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"29422+5k+JAxJNzYmb56JuL","BomHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_bet_value),this.getLabel.string=n.numberWithCommas(t.total_prize_value),this.resultLabel.string=this.getResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){try{return(t=JSON.parse(t)).length+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BomItem:[function(t,e,i){"use strict";cc._RF.push(e,"e718aee3qFJ3YqpB96jB7ub","BomItem"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconBomNode:cc.Node,iconGNode:cc.Node,x2SpriteNode:cc.Node,x3SpriteNode:cc.Node,x5SpriteNode:cc.Node,x10SpriteNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"Bom":this.iconBomNode.active=!0;break;case"G":this.iconGNode.active=!0;break;case"X2":this.x2SpriteNode.active=!0;break;case"X3":this.x3SpriteNode.active=!0;break;case"X5":this.x5SpriteNode.active=!0;break;case"X10":this.x10SpriteNode.active=!0}},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconBomNode.active=!1,this.iconGNode.active=!1,this.x2SpriteNode.active=!1,this.x3SpriteNode.active=!1,this.x5SpriteNode.active=!1,this.x10SpriteNode.active=!1}}),cc._RF.pop()},{}],BomLine:[function(t,e,i){"use strict";cc._RF.push(e,"b012c9RaupJzK4WmXHIWLFj","BomLine");var n=t("./BomConstant");cc.Class({extends:cc.Component,properties:{listLineNode:[cc.Node]},init:function(t){this.Bom=t},onLoad:function(){cc.test=this},showLines:function(t){if(this.reset(),t)for(var e=0,i=t.length;e<i;e++)this.showLineBuyListIndex(t[e].line)},showLine:function(t){},initNumberLine:function(){},getLineData:function(){return[]},select:function(t){},unSelect:function(t){},getlistLineNodes:function(){return[]},showLineBuyListIndex:function(t){switch(JSON.stringify(t)){case JSON.stringify(n.LINE_1):this.listLineNode[0].active=!0;break;case JSON.stringify(n.LINE_2):this.listLineNode[1].active=!0;break;case JSON.stringify(n.LINE_3):this.listLineNode[2].active=!0;break;case JSON.stringify(n.LINE_4):this.listLineNode[3].active=!0;break;case JSON.stringify(n.LINE_5):this.listLineNode[4].active=!0;break;case JSON.stringify(n.LINE_6):this.listLineNode[5].active=!0;break;case JSON.stringify(n.LINE_7):this.listLineNode[6].active=!0;break;case JSON.stringify(n.LINE_8):this.listLineNode[7].active=!0;break;case JSON.stringify(n.LINE_9):this.listLineNode[8].active=!0;break;case JSON.stringify(n.LINE_10):this.listLineNode[9].active=!0;break;case JSON.stringify(n.LINE_11):this.listLineNode[10].active=!0;break;case JSON.stringify(n.LINE_12):this.listLineNode[11].active=!0;break;case JSON.stringify(n.LINE_13):this.listLineNode[12].active=!0;break;case JSON.stringify(n.LINE_14):this.listLineNode[13].active=!0;break;case JSON.stringify(n.LINE_15):this.listLineNode[14].active=!0;break;case JSON.stringify(n.LINE_16):this.listLineNode[15].active=!0;break;case JSON.stringify(n.LINE_17):this.listLineNode[16].active=!0;break;case JSON.stringify(n.LINE_18):this.listLineNode[17].active=!0;break;case JSON.stringify(n.LINE_19):this.listLineNode[18].active=!0;break;case JSON.stringify(n.LINE_20):this.listLineNode[19].active=!0;break;case JSON.stringify(n.LINE_21):this.listLineNode[20].active=!0;break;case JSON.stringify(n.LINE_22):this.listLineNode[21].active=!0;break;case JSON.stringify(n.LINE_23):this.listLineNode[22].active=!0;break;case JSON.stringify(n.LINE_24):this.listLineNode[23].active=!0;break;case JSON.stringify(n.LINE_25):this.listLineNode[24].active=!0;break;case JSON.stringify(n.LINE_26):this.listLineNode[25].active=!0;break;case JSON.stringify(n.LINE_27):this.listLineNode[26].active=!0}},reset:function(){for(var t in this.listLineNode)this.listLineNode[t].active=!1}}),cc._RF.pop()},{"./BomConstant":"BomConstant"}],BomReel2:[function(t,e,i){"use strict";cc._RF.push(e,"ed60c7VJ/pBK67zmXLSaMc6","BomReel2");var n=t("../../../util/RandomUtil"),o=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./BomConstant");cc.Class({extends:cc.Component,properties:{bomItemPrefab:cc.Prefab},init:function(t){this.Bom=t,this.BomUI=t.BomUI,this.BomLine=t.BomLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.bomItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,n,a,r,c,h){this.reset(),this.setChips(this.chips),this.chips=t;for(var l=1;l<e;l++){var u=this.getRandomChip();l===e-1&&(u=t[0]),l===e-2&&(u=t[1]),l===e-3&&(u=t[2]);var d=this.instanceChip(u);d.setPosition(0,(l+1)*o.BOM_DISTANCE_TWO_CHIPS_2),d.parent=this.node}var m=(e-1)*o.BOM_DISTANCE_TWO_CHIPS_2,f=m/o.BOM_SPEED_SPIN_CARD,p=cc.moveTo(f,this.node.x,-m).easing(cc.easeInOut(3)),_=cc.callFunc(function(){this.setChips(t),i&&this.Bom.node.active&&(r===s.WIN_TYPE_JACKPOT||h?this.BomUI.showJackPot(n,c):a&&this.MiniGameResult.show(n),this.BomLine.showLines(a))},this),S=cc.delayTime(o.BOM_DELAY_SPIN),g=cc.callFunc(function(){i&&this.Bom.node.active&&this.Bom.isAutoSpin()&&this.Bom.spin()},this);this.node.runAction(cc.sequence(p,_,S,g)),r!==s.WIN_TYPE_JACKPOT||this.Bom.node.active||(this.Bom.node.active=!0,this.BomUI.showJackPot(n,c))},randomChips:function(){for(var t=[],e=0;e<o.BOM_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=n.getRandomInt(0,a.BOM_LIST_ICON_2.length-1);return a.BOM_LIST_ICON_2[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*o.BOM_DISTANCE_TWO_CHIPS_2),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.bomItemPrefab)),e.getComponent("BomItem").init(t),e.scale=o.BOM_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.BomLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./BomConstant":"BomConstant"}],BomReel:[function(t,e,i){"use strict";cc._RF.push(e,"8af8cU7J+xO/rBwhatrasEo","BomReel");var n=t("../../../util/RandomUtil"),o=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./BomConstant");cc.Class({extends:cc.Component,properties:{bomItemPrefab:cc.Prefab},init:function(t){this.Bom=t,this.BomUI=t.BomUI,this.BomLine=t.BomLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.bomItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,n,a,r,c){this.reset(),this.setChips(this.chips),this.chips=t;for(var h=1;h<e;h++){var l=this.getRandomChip();h===e-1&&(l=t[0]),h===e-2&&(l=t[1]),h===e-3&&(l=t[2]);var u=this.instanceChip(l);u.setPosition(0,(h+1)*o.BOM_DISTANCE_TWO_CHIPS),u.parent=this.node}var d=(e-1)*o.BOM_DISTANCE_TWO_CHIPS,m=d/o.BOM_SPEED_SPIN_CARD,f=cc.moveTo(m,this.node.x,-d).easing(cc.easeInOut(3)),p=cc.callFunc(function(){this.setChips(t),i&&this.Bom.node.active&&(r===s.WIN_TYPE_JACKPOT?this.BomUI.showJackPot(n,c):a&&this.MiniGameResult.show(n),this.BomLine.showLines(a))},this),_=cc.delayTime(o.BOM_DELAY_SPIN),S=cc.callFunc(function(){i&&this.Bom.node.active&&this.Bom.isAutoSpin()&&this.Bom.spin()},this);this.node.runAction(cc.sequence(f,p,_,S)),r!==s.WIN_TYPE_JACKPOT||this.Bom.node.active||(this.Bom.node.active=!0,this.BomUI.showJackPot(n,c))},randomChips:function(){for(var t=[],e=0;e<o.BOM_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=n.getRandomInt(0,a.BOM_LIST_ICON_1.length-1);return a.BOM_LIST_ICON_1[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*o.BOM_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.bomItemPrefab)),e.getComponent("BomItem").init(t),e.scale=o.BOM_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.BomLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./BomConstant":"BomConstant"}],BomSelectForm:[function(t,e,i){"use strict";cc._RF.push(e,"b7da1GSpkdFQKBbHOUx990I","BomSelectForm");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){for(var e in this.Bom=t,this.BomLine=t.BomLine,this.listSelectItem)this.listSelectItem[e].init(this,parseInt(e)+1)},onLoad:function(){},initData:function(){},select:function(t){this.listSelectItem[t-1].select()},unSelect:function(t){this.listSelectItem[t-1].unSelect()},onCloseClick:function(){this.node.active=!1},onIgnoreAllClick:function(){if(this.Bom.isSpinning()||this.Bom.isAutoSpin())this.Bom.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].unSelect(),this.BomLine.unSelect(parseInt(t)+1);this.Bom.saveListLines()}},onSelectAllClick:function(){if(this.Bom.isSpinning()||this.Bom.isAutoSpin())this.Bom.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].select(),this.BomLine.select(parseInt(t)+1);this.Bom.saveListLines()}},onSelectEvenClick:function(){if(this.Bom.isSpinning()||this.Bom.isAutoSpin())this.Bom.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].select(),this.BomLine.select(parseInt(t)+1)):(this.listSelectItem[t].unSelect(),this.BomLine.unSelect(parseInt(t)+1));this.Bom.saveListLines()}},onSelectOddClick:function(){if(this.Bom.isSpinning()||this.Bom.isAutoSpin())this.Bom.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].unSelect(),this.BomLine.unSelect(parseInt(t)+1)):(this.listSelectItem[t].select(),this.BomLine.select(parseInt(t)+1));this.Bom.saveListLines()}}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],BomUI:[function(t,e,i){"use strict";cc._RF.push(e,"4e0afj2a3xFEa6BsWR11KzG","BomUI");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=o.BOM_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=o.BOM_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=n.nFormatter(t),this.bet2Label.string=n.nFormatter(e),this.bet3Label.string=n.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],Bom:[function(t,e,i){"use strict";cc._RF.push(e,"c9cd4UZsRZIsI/isHeRdkZA","Bom");var n=t("../../../base/BaseController"),o=t("./BomLine"),s=t("./BomUI"),a=t("./BomConstant"),r=t("./BomReel"),c=t("./BomReel2"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../item/MiniGameXPer"),d=t("../../../helper/Config"),m=t("../../../helper/Constant"),f=t("../../../helper/Message"),p=t("../../../object/RoomType"),_=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,MiniGameXPer:u,toastPrefab:cc.Prefab,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,reels:[r],reels2:[c],BomLine:o,BomUI:s,MiniGameResult:h},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=1,this.intervalSpin=null,this.reels)this.reels[t].init(this);for(var e in this.reels2)this.reels2[e].init(this);this.BomLine.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(a.ADD_EVENT),this.initMiniGameSpinFree(this.getUser().minigame_free)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(a.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[a.MONEY_TYPE]===a.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().bom_free,i=t[a.IS_AUTO_SPIN],n=t[a.BET_VALUE];switch(i&&this.onAutoSpinClick(),n){case a.BET_100:this.setBet1();break;case a.BET_1k:this.setBet2();break;case a.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(a.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y);var e=cc.sys.localStorage.getItem(a.LIST_LINES);for(var i in e=e?JSON.parse(e):[1])this.BomLine.select(parseInt(e[i]))},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationBom(!0,e):this.MiniGameCircleNotification.initShowNotificationBom(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationBom(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,n=t[e].quantity;i===a.MINIGAME_CONFIG_ID&&(n>0?this.BomUI.showMiniGameSpinFree(n):this.BomUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case a.REQUEST_INFO:this.handleInfo(i);break;case a.REQUEST_SPIN:this.handleSpin(i);break;case a.REQUEST_MESSAGE:this.handleMessage(n);break;case a.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,n=t.total_prize_value,o=t.win_type,s=t.money_type,a=t.spin_id,r=t.is_jackpot,c=s==p.MONEY_CODE;this.idLabel.string=String.format(f.MINIGAME_ID,a),this.spinReels(i,n,e,o,c,r)},spinReels:function(t,e,i,n,o,s){var a=t.slice(0,3),r=t.slice(3,6),c=t.slice(6,9),h=t.slice(9,12),l=t.slice(12,15);this.reels[0].spin(a,d.BOM_NUMBER_CHIP_SPIN),this.reels[1].spin(r,d.BOM_NUMBER_CHIP_SPIN+3),this.reels[2].spin(c,d.BOM_NUMBER_CHIP_SPIN+6),this.reels2[0].spin(h,d.BOM_NUMBER_CHIP_SPIN+9),this.reels2[1].spin(l,d.BOM_NUMBER_CHIP_SPIN+12,!0,e,i,n,o,s)},onAutoSpinClick:function(){this.autoSpinButtonNode.active=!1,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1,this.getTempData()[a.IS_AUTO_SPIN]=!0,this.spin()},onStopAutoSpinClick:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.getTempData()[a.IS_AUTO_SPIN]=!1},onSpinClick:function(){this.isSpinning()||this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:p.MONEY_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(a.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(m.BOM)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showBomHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(_.BOM),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowBom(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.BomUI.enableBet1Button(),this.getTempData()[a.BET_VALUE]=a.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.BomUI.enableBet2Button(),this.getTempData()[a.BET_VALUE]=a.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.BomUI.enableBet3Button(),this.getTempData()[a.BET_VALUE]=a.BET_10k},onBomClick:function(){this.setShowBom(!this.node.active)},setShowBom:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().Bom_free;cc.sys.localStorage.setItem(a.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*d.BOM_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer&&this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=d.MINIGAME_SCALE_TOAST,e.setPosition(d.MINIGAME_POSITION_TOAST_X,d.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.BomUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?a.MONEY_TYPE_MONEY:a.MONEY_TYPE_GOLD;this.getTempData()[a.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?d.BOM_LIST_BET_MONEY:d.BOM_LIST_BET_GOLD)[this.betOrder]},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0},isAutoSpin:function(){return!this.autoSpinButtonNode.active},saveListLines:function(){var t=this.BomLine.getListLines();cc.sys.localStorage.setItem(a.LIST_LINES,JSON.stringify(t))},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./BomConstant":"BomConstant","./BomLine":"BomLine","./BomReel":"BomReel","./BomReel2":"BomReel2","./BomUI":"BomUI"}],BonusConfig:[function(t,e,i){"use strict";cc._RF.push(e,"7e7b85KCEdD4pN1q5CgapJ2","BonusConfig");e.exports={BONUS_LIST_MONEY:[1e4,5e4,1e5,5e5,1e6,1e7]},cc._RF.pop()},{}],BonusConstant:[function(t,e,i){"use strict";cc._RF.push(e,"cd59aW/vvhJfJcjX/8uYZoJ","BonusConstant");e.exports={TAN_LOC_ADD_EVENT:"tan_loc.ADD_EVENT",TAN_LOC_REMOVE_EVENT:"tan_loc.REMOVE_EVENT",TAN_LOC_INFO:"tan_loc.INFO",TAN_LOC_TAN_LOC:"tan_loc.TAN_LOC",TAN_LOC_RUT_LOC:"tan_loc.RUT_LOC",HU_LOC_ADD_EVENT:"hu_loc.ADD_EVENT",HU_LOC_REMOVE_EVENT:"hu_loc.REMOVE_EVENT",HU_LOC_RUT_LOC:"hu_loc.RUT_LOC",INFO:"INFO",RUT_LOC:"RUT_LOC",PHAT_LOC:"PHAT_LOC",PLAYER_RUT_LOC:"PLAYER_RUT_LOC",MESSAGE:"MESSAGE",CHANGE_NUMBER_RUT_LOC:"CHANGE_NUMBER_RUT_LOC",TAN_LOC:"TAN_LOC",STATE_WAITTING:"WAITTING",STATE_REGISTER:"REGISTER",GET_TOP:"tan_loc.GET_TOP",GET_TOP_2:"GET_TOP"},cc._RF.pop()},{}],BonusEventMoneyItem:[function(t,e,i){"use strict";cc._RF.push(e,"89134pFp5lPnaOyh7ibnHPq","BonusEventMoneyItem");var n=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},init:function(t,e){this.BonusMoney=t,this.value=e,this.numberLabel.string=n.nFormatter(e)},onLoad:function(){},onClick:function(){this.BonusMoney.addMoney(this.value)}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil"}],BonusEvent:[function(t,e,i){"use strict";cc._RF.push(e,"07775TMurNIiqhVa/N4CX36","BonusEvent");var n=t("../../../base/BaseController"),o=(t("../../../helper/Config"),t("../MiniGameConstant")),s=t("./BonusConstant"),a=t("./BonusMoney"),r=t("./BonusMessage"),c=t("./HuLoc"),h=t("./TanLoc");cc.Class({extends:n,properties:{HuLoc:c,TanLoc:h,BonusMoney:a,BonusMessage:r},init:function(t){this.controller=t,this.MiniGame=t.MiniGame,this.BonusMoney.init(this),this.HuLoc.init(this),this.TanLoc.init(this),this.BonusMessage.init(this)},onLoad:function(){this._super(),this.dialogFormMoney=this.BonusMoney.node.getComponent("DialogForm"),this.dialogFormMessage=this.BonusMessage.node.getComponent("DialogForm")},onEnable:function(){this.handleEventTanLoc&&(this.handleEventTanLoc=!1,this.isEventTanLoc?this.TanLoc.addEvent():this.TanLoc.removeEvent())},handleRequest:function(t){if(t.status)switch(t.data.game_name){case o.HU_LOC:this.HuLoc.handleRequest(t);break;case o.TAN_LOC:this.TanLoc.handleRequest(t)}},setShowTaiXiu:function(t){this.isEventTanLoc=t,this.sendRequest?this.isEventTanLoc?this.TanLoc.addEvent():this.TanLoc.removeEvent():this.handleEventTanLoc=!0},tanLocRutLoc:function(){console.log("tanLocRutLoc"),this.sendRequest.sendNoPrefixToZone(s.TAN_LOC_RUT_LOC)},tanLoctanLoc:function(t){console.log("tanLoctanLoc"),this.sendRequest.sendNoPrefixToZone(s.TAN_LOC_TAN_LOC,t)},huLocRutLoc:function(){console.log("huLocRutLoc"),this.sendRequest.sendNoPrefixToZone(s.HU_LOC_RUT_LOC,{})},onGetBonusClick:function(){},onTanLocClick:function(t){},showFormBonusMoney:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormMoney.showDialog(t)},showFormBonusMessage:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormMessage.showDialog(t)},showMessage:function(t){this.MiniGame.controller&&this.MiniGame.controller.showToast&&this.MiniGame.controller.showToast(t)}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../MiniGameConstant":"MiniGameConstant","./BonusConstant":"BonusConstant","./BonusMessage":"BonusMessage","./BonusMoney":"BonusMoney","./HuLoc":"HuLoc","./TanLoc":"TanLoc"}],BonusMessage:[function(t,e,i){"use strict";cc._RF.push(e,"9c796Dp3ClP/pPuwea9TlYp","BonusMessage"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.BonusEvent=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onSuccessClick:function(){this.BonusEvent.controller.GameInfo?(this.BonusEvent.controller.GameCenterUI.showInfoNode(),this.BonusEvent.controller.GameInfo.onInfoClick(),this.BonusEvent.controller.GameInfo.showSercurity(),this.node.active=!1):this.BonusEvent.controller.showToast("Vui l\xf2ng tr\u1edf l\u1ea1i m\xe0n h\xecnh Home \u0111\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y")},onBackClick:function(){this.dialogForm.hideDialog()}}),cc._RF.pop()},{}],BonusMoney:[function(t,e,i){"use strict";cc._RF.push(e,"430cfO0yIFHrZxFMV25vQAf","BonusMoney");var n=t("../../../util/FormatUtil"),o=t("./item/BonusEventMoneyItem"),s=t("./BonusConfig");cc.Class({extends:cc.Component,properties:{totalMoneyLabel:cc.Label,listSelectItem:[o]},init:function(t){for(var e in this.BonusEvent=t,this.listSelectItem)this.listSelectItem[e].init(this,s.BONUS_LIST_MONEY[e])},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.totalMoneyLabel.string=0,this.totalMoney=0},addMoney:function(t){this.totalMoney+=t,this.totalMoneyLabel.string=n.numberWithCommas(this.totalMoney)},onConfirmClick:function(){var t={amount:this.totalMoney};this.BonusEvent.tanLoctanLoc(t),this.onCloseClick()},onCloseClick:function(){this.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","./BonusConfig":"BonusConfig","./item/BonusEventMoneyItem":"BonusEventMoneyItem"}],Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"d53bd4IqhdOH5Pfp+u2XhQR","Bonus");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,moneyNode:cc.Node,moneyLabel:cc.Label,goldNode:cc.Node,goldLabel:cc.Label},init:function(t){this.GameCenter=t},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutStarParticle)},initData:function(){var t=this.GameCenter.getUser().bonus,e=t.money,i=t.gold;this.moneyNode.active=e>0,this.goldNode.active=i>0,e>0&&(this.node.active=!0,this.moneyLabel.string=n.numberWithCommas(e)),i>0&&(this.node.active=!0,this.goldLabel.string=n.numberWithCommas(i)),this.titleLabel.string=t.name.toUpperCase()},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getUser().bonus;(t.money>0||t.gold>0)&&(this.node.active=!1),t.money=0,t.gold=0}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BrowserUtil:[function(t,e,i){"use strict";cc._RF.push(e,"03a19tqNJxC+7c3JPrmjmP3","BrowserUtil");var n={showCursorText:function(){this.isCursorAuto()||this.setCursor("text")},showCursorPointer:function(){this.isCursorAuto()||this.setCursor("pointer")},showCursorMove:function(){this.isCursorAuto()||this.setCursor("move")},showCursorAuto:function(){this.isCursorAuto()||this.setCursor("auto")},showCursorShoot:function(){cc.sys.isBrowser&&document.getElementById("GameDiv")&&(document.getElementById("GameDiv").style.cursor="url('cursors/cursor-shot.png') 5 2, auto")},showCursorAutoForce:function(){cc.sys.isBrowser&&this.setCursor("auto")},isCursorAuto:function(){return!(!cc.sys.isBrowser||!document.getElementById("GameDiv"))&&"auto"===document.getElementById("GameDiv").style.cursor},setCursor:function(t){cc.sys.isBrowser&&(document.body.style.cursor=t)},showTooltip:function(t){cc.sys.isBrowser&&(document.body.title=t)},focusGame:function(){cc.sys.isBrowser&&document.getElementsByTagName("canvas")[0].focus()},getHTMLElementByEditBox:function(t){},checkEditBoxFocus:function(t){},focusEditBox:function(t){},unFocusEditBox:function(t){},readOnlyEditBox:function(t){}};e.exports=n,cc._RF.pop()},{}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"0c84aw/ZftIGrzMpl8dVrvW","Bullet");var n=t("../../helper/FireFishConfig"),o=t("./PlasticityPositionType");function s(t,e,i,s,a,r,c){this.FireFishGame=t,this.FireFishBulletManager=t.bulletManager,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height,this.bulletPrefab=t.bulletPrefab,this.bulletPool=t.bulletPool,this.currentGun=e-1,this.node=null,this.startX=i,this.startY=s,this.angle=a,this.speed=r,this.idBullet=c,this.width=n.BULLET_WIDTH,this.height=n.BULLET_HEIGHT,this.radius=this.width/2,this.plasticityPositionType=o.NO,this.instanceNode()}s.prototype.isOutOfScreen=function(){return!1},s.prototype.update=function(t){this.instanceNode(),this.node&&this.node._position&&(this.updatePosition(t),this.updateRotate())},s.prototype.instanceNode=function(){this.node||(this.bulletPool.size()>0?this.node=this.bulletPool.get():this.node=cc.instantiate(this.bulletPrefab),this.node.setPosition(this.startX,this.startY),this.ScriptBaseBullet=this.node.getComponent("BaseBullet"),this.ScriptBaseBullet.init(this.FireFishGame,this.currentGun,this),this.ScriptBaseBullet.setBulletCallBackCollision(this.bulletCollision,this),this.node.parent=this.FireFishGame.gamePlayNode)},s.prototype.updatePosition=function(t){this.node.x+=this.speed*Math.cos(this.angle*Math.PI/180)*t*60,this.node.y+=this.speed*Math.sin(this.angle*Math.PI/180)*t*60,this.node.x<-this.gameWidth/2+this.radius&&this.plasticityPositionType!==o.LEFT?this.updatePositionLeft(t):this.node.x>this.gameWidth/2-this.radius&&this.plasticityPositionType!==o.RIGHT?this.updatePositionRight(t):this.node.y<-this.gameHeight/2+this.radius&&this.plasticityPositionType!==o.BOTTOM?this.updatePositionBottom(t):this.node.y>this.gameHeight/2-this.radius&&this.plasticityPositionType!==o.TOP&&this.updatePositionTop(t)},s.prototype.updatePositionLeft=function(t){this.plasticityPositionType=o.LEFT;var e=-this.gameWidth/2+this.radius;this.node.x=2*(e-this.node.x)+this.node.x,this.angle=180-this.angle},s.prototype.updatePositionRight=function(t){this.plasticityPositionType=o.RIGHT;var e=this.gameWidth/2-this.radius;this.node.x=this.node.x-2*(this.node.x-e),this.angle=180-this.angle},s.prototype.updatePositionBottom=function(t){this.plasticityPositionType=o.BOTTOM;var e=-this.gameHeight/2+this.radius;this.node.y=2*(e-this.node.y)+this.node.y,this.angle=-this.angle},s.prototype.updatePositionTop=function(t){this.plasticityPositionType=o.TOP;var e=this.gameHeight/2-this.radius;this.node.y=this.node.y-2*(e-this.node.y),this.angle=-this.angle},s.prototype.updateRotate=function(){this.node.angle=-(90-this.angle)},s.prototype.bulletCollision=function(t){var e=t.node.getComponent("BaseFish"),i="-"+this.FireFishGame.getUser().user_id+"-";this.FireFishGame.fishManager.getFishLock()&&-1!=this.idBullet.indexOf(i)?e.isLockFish()&&this.FireFishBulletManager.destroyBulletWithAnimationByBullet(this):this.FireFishBulletManager.destroyBulletWithAnimationByBullet(this)},s.prototype.getIdBullet=function(){return this.idBullet},s.prototype.destroyNode=function(){this.node&&(this.bulletPool.put(this.node),this.node=null)},e.exports=s,cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","./PlasticityPositionType":"PlasticityPositionType"}],Button:[function(t,e,i){"use strict";cc._RF.push(e,"4d0b4loKx1BFrq+hIbYPxOP","Button"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._initScale=this.node.scale},onDisable:function(){for(var t=this.node.getComponents(cc.Button),e=0;e<t.length;e++)t[e]._transitionFinished=!0,this._initScale&&(this.node.scale=this._initScale)}}),cc._RF.pop()},{}],BuyInForm:[function(t,e,i){"use strict";cc._RF.push(e,"129ecL1ZzhABL+4baDzczGe","BuyInForm");var n=t("../../util/FormatUtil"),o=t("../../object/RoomType"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{minValue:0,maxValue:0,round:100,balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,balanceLabel:cc.Label,minLabel:cc.Label,maxLabel:cc.Label,autoBuyInToggle:cc.Toggle,balanceSlider:cc.Slider},init:function(t){this.controller=t,this.GameRoom=t.GameRoom},initDataInvite:function(t){this.dataInvite=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.setBalanceBuyProgress(),this.setMinValue(this.minValue),this.setMaxValue(this.maxValue)},setBalanceSpriteByRoomType:function(t){this.balanceSprite.spriteFrame=t==o.GOLD_CODE?this.moneySpriteFrame:this.goldSpriteFrame},setInvite:function(t){this.isInvite=t},setRound:function(t){this.round=t},getRound:function(){return this.round},setValue:function(t){var e=0;e=t<=this.minValue?0:t>=this.maxValue?1:(t-this.minValue)/(this.maxValue-this.minValue),this.balanceSlider.progress=e,this.setBalanceBuyProgress()},setMinValue:function(t){this.minValue=t,this.minLabel.string=n.numberWithCommas(t)},setMaxValue:function(t){this.maxValue=t,this.maxLabel.string=n.numberWithCommas(t)},setAutoBuyIn:function(t){this.autoBuyInToggle.isChecked=t},onAutoBuyinToggleClick:function(t){},onBalanceSlider:function(t){this.setBalanceBuyProgress()},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){if(this.controller.Audio.playClick(),this.isInvite){var t={room_name:this.dataInvite.room_name,balance:this.getBalanceSlider(),is_auto_buy_in:this.autoBuyInToggle.isChecked};this.dialogForm.hideDialog(),this.controller.sendRequest.sendNoPrefixToZone(s.REQUEST_ACCEPT_INVITE,t)}else{this.controller.showProcessingNode();var e=this.controller.getLastJoinedRoom().groupId,i=this.getBalanceSlider(),n=this.autoBuyInToggle.isChecked,o=this.GameRoom.getRoomType();this.controller.sfsManager.joinRoom(e,this.GameRoom.minBet,o,i,n)}},setBalanceBuyProgress:function(){var t=this.getBalanceSlider();this.balanceLabel.string=n.numberWithCommas(t)},getBalanceSlider:function(){var t=this.balanceSlider.progress*(this.maxValue-this.minValue)+this.minValue;return t=t>=this.maxValue?this.maxValue:t<=this.minLabel?this.minValue:parseInt(t/this.round)*this.round},isBuyIn:function(){return this.autoBuyInToggle.isChecked},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],Capcha:[function(t,e,i){"use strict";cc._RF.push(e,"bda77nV2SlBM6JyhlVGbMC0","Capcha"),e.exports=function(){for(var t="",e="",i="abcdefghijklmnpqrstuvwxyz123456789",n=0;n<3;n++)t+=i.charAt(Math.floor(Math.random()*i.length));for(var o=0;o<32;o++)e+=i.charAt(Math.floor(Math.random()*i.length));this.text=t,this.result=t,this.device_id=e},cc._RF.pop()},{}],CardController:[function(t,e,i){"use strict";cc._RF.push(e,"69c57HUsUVKCbgJO4A2zOZC","CardController"),cc.Class({extends:cc.Component,properties:{darkEffectNode:cc.Node,highLightNode:cc.Node,backgroundNode:cc.Node,foregroundNode:cc.Node,pointLabel:cc.Label,suiltSprite:cc.Sprite,mainPicSprite:cc.Sprite,highLightSprite:cc.Sprite,highLight1SpriteFrame:cc.SpriteFrame,highLight2SpriteFrame:cc.SpriteFrame,highLight3SpriteFrame:cc.SpriteFrame,highLight4SpriteFrame:cc.SpriteFrame,redColor:cc.Color,blackColor:cc.Color,faces:[cc.SpriteFrame],suiltsBig:[cc.SpriteFrame],suiltsSmall:[cc.SpriteFrame]},onLoad:function(){},init:function(t){var e=t.point>10;this.mainPicSprite.spriteFrame=e?this.faces[t.point-11]:this.suiltsBig[t.suit-1],this.trueValue=t.trueValue,this.pointLabel.string=t.pointName,this.pointLabel.node.color=t.isRedSuit?this.redColor:this.blackColor,this.suiltSprite.spriteFrame=this.suiltsSmall[t.suit-1]},reveal:function(t){this.backgroundNode.active=!t,this.foregroundNode.active=t},isReveal:function(){return this.foregroundNode.active},revealWithAnimationFlip:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.node.scaleX,o=this.node.scaleY;this.reveal(!t),i&&this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(e/2,0,o),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/2,n,o)))},revealWithAnimationFlipMoveScale:function(t,e,i,n,o){this.node.scaleX;var s=this.node.scaleY;this.reveal(!t);var a=cc.spawn(cc.moveTo(e,i,n),cc.sequence(cc.scaleTo(e/4,0,(o+s)/2),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/4,o,o)));this.node.runAction(a,this)},showForeground:function(){this.foregroundNode.active=!0},hideForeground:function(){this.foregroundNode.active=!1},showBackground:function(){this.backgroundNode.active=!0},hideBackground:function(){this.backgroundNode.active=!1},showHighLightBlue:function(){this.highLightSprite.spriteFrame=this.highLight4SpriteFrame,this.showHighLight()},showHighLight:function(){this.highLightNode.active=!0},hideHighLight:function(){this.highLightNode.active=!1},showDarkEffect:function(){this.darkEffectNode.active=!0,this.hideHighLight()},hideDarkEffect:function(){this.darkEffectNode.active=!1},getTrueValue:function(){return this.trueValue}}),cc._RF.pop()},{}],CardGameValueItem:[function(t,e,i){"use strict";cc._RF.push(e,"bb0fcIemBVM8Jc0HGC8Vg7G","CardGameValueItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardOnButtonNode:cc.Node,cardOffButtonNode:cc.Node,cardOnLabel:cc.Label,cardOffLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.AwardCard=this.GameRecharge.AwardCard,this.data=e,this.vnd=parseInt(e.vnd),this.money=parseInt(e.money),this.cardOnLabel.string=String.format(o.CARD_VALUE,n.nFormatter(this.vnd)),this.cardOffLabel.string=String.format(o.CARD_VALUE,n.nFormatter(this.vnd))},onLoad:function(){},onClick:function(){this.AwardCard.clearCardSelected(),this.setOn(),this.AwardCard.initTotalMoney()},setOn:function(){this.cardOnButtonNode.active=!0,this.cardOffButtonNode.active=!1},setOff:function(){this.cardOnButtonNode.active=!1,this.cardOffButtonNode.active=!0},isSelected:function(){return this.cardOnButtonNode.active},getValue:function(){return this.vnd},getMoney:function(){return this.money}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],CardUtil:[function(t,e,i){"use strict";cc._RF.push(e,"102e57qSrBCCLOd51UwED01","CardUtil");var n={sortAZ:function(t){for(var e=0,i=t.length-1;e<i;e++)for(var n=e+1,o=t.length;n<o;n++)if(t[e]>t[n]){var s=t[e];t[e]=t[n],t[n]=s}return t},sortList:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],n=[],o=0,s=(t=this.getValeCard2(t)).length;o<s;o++)e[parseInt(t[o]/100)]+=1;for(var a=1,r=e.length-1;a<r;a++)if(e[a-1]>0&&e[a]>0&&e[a+1]>0){i.push(a-1),i.push(a),e[a-1]-=1,e[a]-=1;for(var c=a+1;c<e.length&&e[c]>0;)i.push(c),e[c]-=1,c++;a-=1}for(var h=0,l=i.length;h<l;h++)if(0!==i[h])for(var u=!1,d=0,m=t.length;d<m;d++)u||i[h]===parseInt(t[d]/100)&&(n.push(t[d]),t[d]=0,u=!0);t=this.sortAZ(t);for(var f=0;f<t.length;f++)0!==t[f]&&n.push(t[f]);if(this.listSave2.length>0)for(var p=0,_=this.listSave2.length;p<_;p++)n.push(this.listSave2[p]);return n},getValeCard2:function(t){this.listSave2=[];for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(this.listSave2.push(t[e]),t.splice(e,1));return this.listSave2.length>0&&(this.listSave2=this.sortAZ(this.listSave2)),t},sorfCardPlayedInSam:function(t){return this.checkCardA_2(t)?this.sanhA_2(t):this.checkCard2_3(t)?this.sanh2_3(t):this.sortAZ(t)},checkCardA_2:function(t){var e=!1,i=!1;for(var n in t)t[n]>=1400&&t[n]<1500&&(e=!0),t[n]>=1500&&(i=!0);return e&&i},checkCard2_3:function(t){var e=!1,i=!1;for(var n in t)t[n]>=1500&&(e=!0),t[n]<1500&&(i=!0);return i&&e},sanhA_2:function(t){var e=[];for(var i in t)t[i]>=1400&&t[i]<1500&&(e[0]=t[i],t.splice(i,1)),t[i]>=1500&&(e[1]=t[i],t.splice(i,1));for(var n in t=this.sortAZ(t))e.push(t[n]);return e},sanh2_3:function(t){var e=[];for(var i in t)t[i]>=1500&&(e[1]=t[i],t.splice(i,1));for(var n in t=this.sortAZ(t))e.push(t[n]);return e},sortListSam:function(t){var e=this.checkCardQKASAm(t);t=this.removeListCard(t,e);for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[],o=[],s=0,a=(t=this.convertValueCard(t)).length;s<a;s++)i[parseInt(t[s]/100)]+=1;for(var r=1,c=i.length-1;r<c;r++)if(i[r-1]>0&&i[r]>0&&i[r+1]>0){n.push(r-1),n.push(r),i[r-1]-=1,i[r]-=1;for(var h=r+1;h<i.length&&i[h]>0;)n.push(h),i[h]-=1,h++;r-=1}for(var l=0,u=n.length;l<u;l++)if(0!==n[l])for(var d=!1,m=0,f=t.length;m<f;m++)d||n[l]===parseInt(t[m]/100)&&(o.push(t[m]),t[m]=0,d=!0);for(var p=0,_=(o=this.convertBackValueCard(o)).length;p<_;p++)e.push(o[p]);t=this.convertBackValueCard(t);for(var S=this.checkNgang(t),g=0,C=S.length;g<C;g++)e.push(S[g]);t=this.removeListCard(t,S),t=this.sortAZ(t);for(var N=0;N<t.length;N++)0!==t[N]&&e.push(t[N]);return e},checkCardQKASAm:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],n=[],o=0,s=t.length;o<s;o++)e[parseInt(t[o]/100)]+=1;for(var a=14;e[a]>0&&e[13]>0&&e[12]>0;){var r=[];r.push(a),r.push(13),e[13]-=1,e[a]-=1;for(var c=12;c>0&&e[c]>0;)r.push(c),e[c]-=1,c--;for(var h=r.length-1;h>=0;h--)i.push(r[h])}for(var l=0,u=i.length;l<u;l++)if(0!==i[l])for(var d=!1,m=0,f=t.length;m<f;m++)d||i[l]===parseInt(t[m]/100)&&(n.push(t[m]),t[m]=0,d=!0);return n},removeListCard:function(t,e){for(var i=0,n=e.length;i<n;i++)for(var o=!1,s=0,a=t.length;s<a;s++)o||e[i]===t[s]&&(t.splice(s,1),o=!0);return t},checkNgang:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],n=[],o=0,s=t.length;o<s;o++)e[parseInt(t[o]/100)]+=1;for(var a=0,r=e.length;a<r;a++)if(e[a]>=3){for(var c=0;c<e[a];c++)i.push(a);e[a]=0}for(var h=0,l=e.length;h<l;h++)if(e[h]>=2){for(var u=0;u<e[h];u++)i.push(h);e[h]=0}for(var d=0,m=i.length;d<m;d++)if(0!==i[d])for(var f=!1,p=0,_=t.length;p<_;p++)f||i[d]===parseInt(t[p]/100)&&(n.push(t[p]),t[p]=0,f=!0);return n},convertValueCard:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=1400&&t[e]<1500&&(t[e]=100+t[e]%1400),t[e]>=1500&&(t[e]=200+t[e]%1500);return t},convertBackValueCard:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=100&&t[e]<200&&(t[e]=1400+t[e]%100),t[e]>=200&&t[e]<300&&(t[e]=1500+t[e]%200);return t}};e.exports=n,cc._RF.pop()},{}],Card:[function(t,e,i){"use strict";cc._RF.push(e,"1b969WHve5B1rO3zNNUlG1L","Card");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t,e){Object.defineProperties(this,{point:{value:t,writable:!1},suit:{value:e,writable:!1},id:{value:13*(e-1)+(t-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return this.suit===n.Spade||this.suit===n.Club}},isRedSuit:{get:function(){return this.suit===n.Heart||this.suit===n.Diamond}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],ChangeBalance:[function(t,e,i){"use strict";cc._RF.push(e,"539d4zOzZFE+bKPzJ4uzg7+","ChangeBalance");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label},onLoad:function(){},showChangeBalance:function(t){var e=t>0?"+"+n.numberWithCommas(t):n.numberWithCommas(t);t>=0?(this.addBalanceLabel.string=e,this.addBalanceLabel.node.active=!0,this.minusBalanceLabel.node.active=!1):(this.minusBalanceLabel.string=e,this.minusBalanceLabel.node.active=!0,this.addBalanceLabel.node.active=!1),this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(2,0,50),cc.fadeOut(3)),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],ChangePasswordSuccess:[function(t,e,i){"use strict";cc._RF.push(e,"9bc5bjvHolAPL5/9X13V01S","ChangePasswordSuccess"),cc.Class({extends:cc.Component,init:function(t){this.GameCenter=t},properties:{},onLoad:function(){},onDestroy:function(){clearTimeout(this.hideTimeout)},onConfirmLogoutClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.showProcessingNode(),this.logout()},logout:function(){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.logout(t,function(t){},function(t){}),this.GameCenter.clearAccount(),this.GameCenter.sfsManager.sfs.disconnect()}}),cc._RF.pop()},{}],ChangePassword:[function(t,e,i){"use strict";cc._RF.push(e,"5243d1HGEdHUoCE0XBKEnnB","ChangePassword");var n=t("../../../helper/Message"),o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{oldPasswordEditBox:cc.EditBox,newPasswordEditBox:cc.EditBox,reNewPasswordEditBox:cc.EditBox,otpEditBox:cc.EditBox,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.oldPasswordEditBox,this.newPasswordEditBox,this.reNewPasswordEditBox,this.otpEditBox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear()},onDisable:function(){},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(o.REQUEST_GET_OTP)},onConfirmClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.oldPasswordEditBox.string,i=this.newPasswordEditBox.string,o=this.reNewPasswordEditBox.string,s=this.otpEditBox.string;if(this.checkAllEditboxNotEmpty())if(i===o){var a={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),old_pass:e,new_pass:i,otp:s};this.GameCenter.api.changePassword(a,function(e){t.clear(),t.GameCenter.hideProcessingNode(),t.GameCenterUI.showChangePasswordSuccessFormNode()},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,n.CHANGE_PASSWORD_RE_PASSWORD_NOT_CORRECT);else this.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],ChatEvent:[function(t,e,i){"use strict";cc._RF.push(e,"3a261F6t49NIohpScnpjYIf","ChatEvent");var n=t("./Chat"),o=t("./SmallBanner");cc.Class({extends:cc.Component,properties:{Chat:n,SmallBanner:o,chatButtonNode:cc.Node,smallBannerButtonNode:cc.Node},onLoad:function(){},init:function(t){this.GameCenter=t,this.Chat.init(t),this.SmallBanner.init(t)},onChatClick:function(){this.Chat.node.active||this.showChat()},initLoginSuccess:function(){this.showSmallBanner()},onSmallBannerClick:function(){this.SmallBanner.node.active||this.showSmallBanner()},showChat:function(){this.Chat.node.active=!0,this.SmallBanner.node.active=!1,this.chatButtonNode.active=!1,this.smallBannerButtonNode.active=!0},showSmallBanner:function(){this.Chat.node.active=!1,this.SmallBanner.node.active=!0,this.chatButtonNode.active=!0,this.smallBannerButtonNode.active=!1},showButtons:function(){this.showSmallBanner()}}),cc._RF.pop()},{"./Chat":"Chat","./SmallBanner":"SmallBanner"}],ChatGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"b2c12vqej9MEIaeclZpm/lN","ChatGameItem");var n=t("../../helper/Message"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText},onLoad:function(){},init:function(t,e){this.setMessage(t,e)},setMessage:function(t,e){e=o.formatMessage(e),this.messageRichText.string=String.format(n.CHAT_GAME_MESSAGE,t,e)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],ChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"81321RgoCFF5Z7R7efL4I57","ChatItem");var n=t("../../helper/Message"),o=t("../../util/FormatUtil"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText},onLoad:function(){},init:function(t){if(Array.isArray(t)){for(var e="",i=0;i<t.length;i++)e+=String.format(n.CHAT_MESSAGE,s.getServerID(t[i].server_id),t[i].nick_name,o.formatMessage(t[i].msg)||o.formatMessage(t[i].message)),i!==t.length-1&&(e+="\n");this.messageRichText.string=e}else this.messageRichText.string=String.format(n.CHAT_MESSAGE,s.getServerID(t.server_id),t.nick_name,o.formatMessage(t.msg)||o.formatMessage(t.message))},initFail:function(t){this.setMessageFail(t)},setMessageFail:function(t){this.messageRichText.string=String.format(n.CHAT_MESSAGE_FAIL,t)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Chat:[function(t,e,i){"use strict";cc._RF.push(e,"cd3acijzrZGzrkGqSRbu8qE","Chat");var n=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{chatEditBox:cc.EditBox,chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){},start:function(){this.GameCenter.sendRequest.sendNoPrefixToZone("CHAT."+n.REQUEST_CHAT_GET_CHAT)},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(),this.number++},initChat:function(t){t&&(this.instanceChatItem(t),this.scrollToBottom())},addChatFail:function(t){this.instanceChatItem(t,!0),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},addChat:function(t){this.instanceChatItem(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChatItem:function(t,e){var i=cc.instantiate(this.chatItemPrefab);e?i.getComponent("ChatItem").initFail(t):i.getComponent("ChatItem").init(t),this.chatScrollView.content.addChild(i)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=50},scrollToBottom:function(){this.number=0},onChatClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(""!==t.trim()){var e={msg:t};this.chatEditBox.string="",this.GameCenter.sendRequest.sendNoPrefixToZone("CHAT."+n.REQUEST_CHAT_SEND_CHAT,e)}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant"}],Chip:[function(t,e,i){"use strict";cc._RF.push(e,"6e4b3qjhMxK8LB41nT7AiZz","Chip"),cc.Class({extends:cc.Component,properties:{chipSprite:cc.Sprite,chipSpriteFrames:[cc.SpriteFrame]},onLoad:function(){},init:function(t){this.chipSprite.spriteFrame=this.chipSpriteFrames[t]}}),cc._RF.pop()},{}],CompareType:[function(t,e,i){"use strict";cc._RF.push(e,"5a971MjFeBBPqi1AXeAqlO9","CompareType");var n=cc.Enum({KHONG_HOP_LE:1,LON_HON:2,BANG_NHAU:3,NHO_HON:4});e.exports=n,cc._RF.pop()},{}],Config:[function(t,e,i){"use strict";cc._RF.push(e,"9fba5O+YeZBBrO8olQOatoZ","Config");e.exports={CANVAS_WIDTH:1280,CANVAS_HEIGHT:720,GAME_WIDTH:1280,GAME_HEIGHT:720,TIME_SAVE_ACCOUNT:300,XHR_TIMEOUT:120,PROCESSING_TIME_OUT:120,TOAST_TIME_OUT:2,SPEED_MOVE_NEWS:125,DISTANCE_TWO_NEWS:75,NEWS_MAX:10,BET_FORM_SHOW_X:-145,BET_FORM_HIDE_X:0,BET_FORM_TIME_SHOW:.2,MAIL_PAGINATION:10,HISTORY_PAGINATION:10,MAX_LENGTH_CONTENT:30,BANNER_TIME_CHANGE:5,BANNER_TIME_FADE:1,TOGGLE_DISTANCE_X:17,TOGGLE_TIME_ANIMATION:.2,CHAT_GAME_TIME_OUT:5,CHANGE_BALANCE_TIME_OUT:5,GAME_BUTTON_HISTORY_CHAT_SHOW_Y:453.5,GAME_BUTTON_HISTORY_CHAT_HIDE_Y:26.5,WIN_EFFECT_TIME_OUT:5,SAFE_MAX_LENGTH:12,SLOT_NUMBER_ITEM_IN_REEL:3,SLOT_NUMBER_REELS:5,SLOT_NUMBER_TYPE_ITEM:11,SLOT_DISTANCE_TWO_ITEMS:156,SLOT_SPEED_SPIN:750,SLOT_DELAY_SPIN:2,SLOT_DELAY_FINISH_1:3.5,SLOT_DELAY_FINISH_2:7.5,SLOT_NUMBER_LINES:20,SLOT_BETS:[100,1e3,1e4],SLOT_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT_BONUS_TIME_FLIP_CARD:.4,SLOT2_DISTANCE_TWO_ITEMS:150,SLOT2_NUMBER_TYPE_ITEM:7,SLOT2_NUMBER_ITEM_IN_REEL:3,SLOT2_NUMBER_REELS:5,SLOT2_BET_ALIBABA:100,SLOT2_BET_ALADIN:1e3,SLOT2_BET_SINBAD:1e4,SLOT2_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT2_DELAY_FINISH_1:4,SLOT2_TIME_OPEN_BOX:.5,SLOT2_TIME_FIRST_OPEN_EGGE:1.5,SLOT2_TIME_OPEN_EGGE:.5,SLOT2_TIME_DELAY_OPEN_EGGE:.75,SLOT2_TIME_OPEN_ALL_EGGE:2,SLOT2_DELAY_FINISH_2:5,SLOT2_DELAY_FINISH_3:3.5,SLOT2_TIME_SPIN:3,SLOT3_DISTANCE_TWO_ITEMS:136,SLOT3_NUMBER_TYPE_ITEM:7,SLOT3_NUMBER_ITEM_IN_REEL:3,SLOT3_NUMBER_REELS:5,SLOT3_BET_ALIBABA:100,SLOT3_BET_ALADIN:1e3,SLOT3_BET_SINBAD:1e4,SLOT3_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT3_DELAY_FINISH_1:3.5,SLOT3_TIME_OPEN_BOX:.5,SLOT3_TIME_FIRST_OPEN_EGGE:1.5,SLOT3_TIME_OPEN_EGGE:.5,SLOT3_TIME_DELAY_OPEN_EGGE:.75,SLOT3_TIME_OPEN_ALL_EGGE:2,SLOT3_DELAY_FINISH_2:5,SLOT3_DELAY_FINISH_3:3.5,SLOT3_TIME_SPIN:3,MINIGAME_TIME_SHOW:.3,MINIGAME_SCALE_TOAST:.8,MINIGAME_POSITION_TOAST_X:0,MINIGAME_POSITION_TOAST_Y:-50,TAI_XIU_TIME_POSITION_X_BIG:160,TAI_XIU_TIME_POSITION_Y_BIG:90,TAI_XIU_TIME_POSITION_X_SMALL:50,TAI_XIU_TIME_POSITION_Y_SMALL:30,TAI_XIU_MIN_BALANCE_CHAT:1e3,TAI_XIU_NUMBER_HISTORY:120,JACKPOT_TIME_SHOW:.2,JACKPOT_EFFECT_SHOW:5,JACKPOT_TIME_INCREASE:2.5,MINIPOKER_SCALE_CARD:.6,MINIPOKER_DISTANCE_TWO_CARD:100,MINIPOKER_SPEED_SPIN_CARD:2e3,MINIPOKER_SPEED_FAST_SPIN_CARD:3e3,MINIPOKER_DELAY_SPIN:2,MINIPOKER_NUMBER_CARDS_SPIN:15,MINIPOKER_TIME_SPIN:4,MINIPOKER_TIME_FAST_SPIN:1,MINIPOKER_LIST_BET_GOLD:[1e3,1e4,1e5],MINIPOKER_LIST_BET_MONEY:[100,1e3,1e4],MINIBACAY_SCALE_CARD:.7,MINIBACAY_DISTANCE_TWO_CARD:115,MINIBACAY_SPEED_SPIN_CARD:2e3,MINIBACAY_SPEED_FAST_SPIN_CARD:3e3,MINIBACAY_DELAY_SPIN:2,MINIBACAY_NUMBER_CARDS_SPIN:15,MINIBACAY_TIME_SPIN:4,MINIBACAY_TIME_FAST_SPIN:1,MINIBACAY_LIST_BET_GOLD:[1e3,1e4,1e5],MINIBACAY_LIST_BET_MONEY:[100,1e3,1e4],DIAMOND_TIME_SPIN:5,DIAMOND_NUMBER_REELS:3,DIAMOND_SPEED_SPIN_CARD:1250,DIAMOND_SPEED_FAST_SPIN_CARD:2500,DIAMOND_LIST_BET_GOLD:[1e3,1e4,1e5],DIAMOND_LIST_BET_MONEY:[100,1e3,1e4],DIAMOND_NUMBER_CHIP_SPIN:15,DIAMOND_NUMBER_TYPE_CHIP:6,DIAMOND_SCALE_CHIP:1,DIAMOND_DISTANCE_TWO_CHIPS:110,DIAMOND_DELAY_SPIN:2,BOM_TIME_SPIN:5,BOM_NUMBER_REELS:3,BOM_SPEED_SPIN_CARD:1500,BOM_LIST_BET_GOLD:[1e3,1e4,1e5],BOM_LIST_BET_MONEY:[100,1e3,1e4],BOM_NUMBER_CHIP_SPIN:15,BOM_NUMBER_TYPE_CHIP:6,BOM_SCALE_CHIP:.9,BOM_DISTANCE_TWO_CHIPS:90,BOM_DISTANCE_TWO_CHIPS_2:90,BOM_DELAY_SPIN:1,WILD_TIME_SPIN:5,WILD_NUMBER_REELS:3,WILD_SPEED_SPIN_CARD:1500,WILD_LIST_BET_GOLD:[1e3,5e3,1e4],WILD_LIST_BET_MONEY:[1e3,5e3,1e4],WILD_NUMBER_CHIP_SPIN:20,WILD_NUMBER_TYPE_CHIP:6,WILD_SCALE_CHIP:.9,WILD_DISTANCE_TWO_CHIPS:115,WILD_DISTANCE_TWO_CHIPS_2:90,WILD_DELAY_SPIN:2,WILD_DELAY_SPIN_REEL_2:1.5,TRENDUOI_SCALE_CARD:1.25,TRENDUOI_DISTANCE_TWO_CARD:200,TRENDUOI_SPEED_SPIN_CARD:1e3,TRENDUOI_DELAY_SPIN:1,TRENDUOI_NUMBER_CARDS_SPIN:15,TRENDUOI_LIST_BET_GOLD:[1e4,5e4,1e5,5e5,1e6],TRENDUOI_LIST_BET_MONEY:[1e3,5e3,1e4,5e4,1e5,5e5],TAI_XIU_LIST_SELECT:[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6],TAI_XIU_MAX_LENGTH:12,MINIGAME_LOTTERY_LIST_SELECT:[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6],BAU_CUA_LIST_BET:[100,500,1e3,5e3,1e4,5e4,1e5,5e5,1e6],QUEST_TIME_SHOW_NOTIFICATION:10,TIME_WIN_TYPE_NORMAL:1.5,TIME_WIN_TYPE_BIGWIN:3,TIME_WIN_TYPE_JACKPOT:5,NUMBER_LOGIN:7,SECONDS_TIME_LOGIN:60,NUMBER_PAGE_EVENT:10,AREA_CODES:[{name:"\u0110\xe0i Loan - +886",code:"+886"},{name:"Vi\u1ec7t Nam - +84",code:"+84"},{name:"Nh\u1eadt B\u1ea3n - +81",code:"+81"}]},cc._RF.pop()},{}],ConfirmRemoveMail:[function(t,e,i){"use strict";cc._RF.push(e,"64f08KPEVZKZLUfcQdvtRw5","ConfirmRemoveMail"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.InfoMail=t.GameInfo.InfoMail},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},setId:function(t,e){this.id=t,this.isReaded=e},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.removeMail()},removeMail:function(){var t={id:this.id,token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.removeMessage(t,function(t){},function(t){}),this.isReaded||this.GameCenter.Header.HeaderAccount.minusUnreadMessage(),this.InfoMail.removeMail(this.id),this.dialogForm.hideDialog()}}),cc._RF.pop()},{}],ConfirmSecurity:[function(t,e,i){"use strict";cc._RF.push(e,"f6baeAMzOFFPYhUxRIwH3Ot","ConfirmSecurity"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity(),this.dialogForm.hideDialog(!1)}}),cc._RF.pop()},{}],Constant:[function(t,e,i){"use strict";cc._RF.push(e,"7231dbXIA5Kw457Ynrh/vxo","Constant");e.exports={STATUS_SUCCESS:1,STATUS_FAILURE:0,SECURITY_LOGIN:1,SECURITY_LOGIN_STATUS_CHOSE:1,SECURITY_LOGIN_STATUS_CANCEL:0,IS_SOUND:"is_sound",IS_SOUND_SLOT:"is_sound_slot",IS_MUSIC_SLOT:"is_music_slot",Z_INDEX:"z_index",TOKEN:"token",FACEBOOK:"facebook",TYPE:"type",TIME_LOGIN:"time_login",DEVICE_ID:"device_id",MONEY_NAME:"Vin",GOLD_NAME:"Xu",MONEY_CODE:"0",GOLD_CODE:"1",SERVER_ID_1:1,SERVER_ID_2:2,SERVER_ID_1_NAME:"[JP]  ",SERVER_ID_2_NAME:"[TW]  ",CONVERT_DIAMOND:"CONVERT_DIAMOND",GIFT_CODE:"GIFTCODE",SCENE_LOGIN:"Login",SCENE_GAME_CENTER:"GameCenter",SCENE_GAME_TLMN:"TLMN",SCENE_GAME_POKER:"POKER",SCENE_GAME_BACAY:"BACAY",SCENE_GAME_XOCDIA:"XOCDIA",SCENE_GAME_LIENG:"LIENG",SCENE_GAME_MAUBINH:"MAUBINH",SCENE_GAME_SAM:"SAM",SCENE_GAME_PHOM:"PHOM",SCENE_GAME_XITO:"XITO",SCENE_GAME_SLOT:"SLOT",SCENE_GAME_SLOT_2:"SLOT2",SCENE_GAME_SLOT_3:"SLOT3",SCENE_GAME_SLOT_4:"SLOT4",SCENE_GAME_FIRE_FISH:"GameFireFish",LOBBY:"LOBBY",CHAT_WORLD:"CHAT_WORLD",BA_CAY:"BACAY",XOC_DIA:"XOCDIA",POKER:"POKER",TLMN:"TLMN",TLMNSOLO:"TLMNSOLO",LIENG:"LIENG",MAU_BINH:"MAUBINH",SAM:"SAM",SAMSOLO:"SAMSOLO",PHOM:"PHOM",CHAN:"CHAN",XITO:"XITO",TAI_XIU:"TAIXIU",MINI_POKER:"MINIPOKER",MINI_BACAY:"MINI3CAY",TREN_DUOI:"HILO",LUCK_WHEEL:"LUCK_WHEEL",DIAMOND:"DIAMOND",ZOOMBIES:"ZOOMBIES",ONE001:"ONE001",DRAGON:"DRAGON",CLASSIC1:"CLASSIC1",DIAMOND_2:"DIAMOND2",MINIGAME_LOTTERY:"MINIGAME_LOTTERY",BAU_CUA:"HOO_HEY_HOW",WILD:"WILD",BOM:"BOM",DRAGON_TIGER:"DRAGON_TIGER",SHOOTING_FISH:"SHOOTING_FISH",BA_CAY_NAME:"Ba C\xe2y",XOC_DIA_NAME:"X\xf3c \u0110\u0129a",POKER_NAME:"Poker",TLMN_NAME:"Ti\u1ebfn L\xean Mi\u1ec1n Nam",LIENG_NAME:"Li\xeang",MAU_BINH_NAME:"M\u1eadu Binh",SAM_NAME:"S\xe2m",SAMSOLO_NAME:"S\xe2m Solo",PHOM_NAME:"Ph\u1ecfm",CHAN_NAME:"Ch\u1eafn",XITO_NAME:"X\xec T\u1ed1",TAI_XIU_NAME:"T\xe0i X\u1ec9u",MINI_POKER_NAME:"Mini Poker",MINI_BACAY_NAME:"Mini Ba C\xe2y",TREN_DUOI_NAME:"Cao Th\u1ea5p",LUCK_WHEEL_NAME:"V\xf2ng Quay May M\u1eafn",DIAMOND_NAME:"Kho B\xe1u Ho\xe0ng Gia",ZOOMBIES_NAME:"ZOOMBIES",ONE001_NAME:"T\u1ee9 Linh",DRAGON_NAME:"Quan V\xe2n Tr\u01b0\u1eddng",CLASSIC1_NAME:"N\xe0ng Ti\xean C\xe1",DIAMOND_2_NAME:"DIAMOND_2",MINIGAME_LOTTERY_NAME:"X\u1ed5 S\u1ed1",BAU_CUA_NAME:"B\u1ea7u Cua",WILD_NAME:"N\xf4ng Tr\u1ea1i Vui V\u1ebb",BOM_NAME:"Ice Cream",DRAGON_TIGER_NAME:"Long H\u1ed5",MIN_BET:"MIN_BET",ROOM_TYPE:"ROOM_TYPE",MATCH_GAME_ID:"MATCH_GAME_ID",GOLD:"gold",MONEY:"money",BALANCE:"balance",SAFE_AMOUNT:"safe_amount",VIP_POINT_VARIBLE:"vip_point",DIAMOND_EVENT:"diamond",DIAMOND_LEVEL_EVENT:"diamond_level",SHORT_NAME:"short_name",IS_BUY_IN:"is_buy_in",MIN_BUY:"min_buy",MAX_BUY:"max_buy",JOIN_ROOM_ERROR:"JOIN_ROOM_ERROR",REQUEST_JOIN_GAME:"REQUEST_JOIN_GAME",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_JOIN_ROOM:"REQUEST_JOIN_ROOM",REQUEST_OUT_LOBBY_GAME:"REQUEST_OUT_LOBBY_GAME",REQUEST_UPDATE:"REQUEST_UPDATE",REQUEST_UPDATE_USER_VARIABLES:"UPDATE_USER_VARIABLES",REQUEST_PREVENT_DISCONNECT:"REQUEST_PREVENT_DISCONNECT",MINIGAME_REQUEST:"MINIGAME",REQUEST_INVITE:"REQUEST_INVITE",REQUEST_ACCEPT_INVITE:"REQUEST_ACCEPT_INVITE",REQUEST_CHAT_GET_CHAT:"GET_CHAT",REQUEST_CHAT_SEND_CHAT:"SEND_CHAT",REQUEST_SAFE_DEPOSIT:"SAFE_DEPOSIT",REQUEST_SAFE_WITHDRAW:"SAFE_WITHDRAW",REQUEST_AWARD_CARD:"AWARD",REQUEST_TRANSFER:"PLAYER_TRANSFER",REQUEST_RECHARGE_GOLD:"CONVERT_MONEY_TO_GOLD",REQUEST_PLAYER_RECEIVE_ALERT:"PLAYER_RECEIVE_ALERT",REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:"PLAYER_RECEIVE_NEW_MESSAGE",REQUEST_ACHIVEMENTED_QUEST:"REQUEST_ACHIVEMENTED_QUEST",REQUEST_NOT_ENOUGH_BALANCE_STAY_ROOM:"NOT_ENOUGH_BALANCE_STAY_ROOM",REQUEST_PLUS_LUCKY_WHEEL_FREE:"PLUS_LUCKY_WHEEL_FREE",REQUEST_GET_DAILY_ACHIVEMENT:"GET_DAILY_ACHIVEMENT",REQUEST_MESSAGE:"MESSAGE",REQUEST_GET_OTP:"GET_OTP",UPDATE_MINIGAME_FREE:"UPDATE_MINIGAME_FREE",REQUEST_ACHIVEMENTED_VIP_POINT:"REQUEST_ACHIVEMENTED_VIP_POINT",GET_TOP:"GET_TOP",ROOM_INFO:"ROOM_INFO",NEWS:"NEWS",TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,VIP_POINT:["T\u1eadp S\u1ef1","Nh\u1eadp M\xf4n","T\xe2n Th\u1ee7","Danh Th\u1ee7","Cao Th\u1ee7","Si\xeau Cao Th\u1ee7","Ki\u1ec7n T\u01b0\u1edbng","\u0110\u1ea1i Ki\u1ec7n T\u01b0\u1edbng"],VIETEL:"Viettel",MOBIFONE:"Mobifone",VINAPHONE:"Vinaphone",GATE:"Gate",VCOIN:"VCoin",MEGACARD:"MegaCard",SMS_MOBIFONE:"MOBIFONE",SMS_VIETTEL:"VIETTEL",SMS_VINAPHONE:"VINAPHONE",FACEBOOK_ID:"215637868926300",LOGIN_FACEBOOK_TYPE:1,REGISTER_CODE_WEB:"WEB",REGISTER_CODE_APPLE_STORE:"APPLE",REGISTER_CODE_GOOGLE_STORE:"GOOGLE",REGISTER_CODE_APPLE_JAILBREAK:"APPLE_JB",MARKETING_CODE:"mkt_code",ACCOUNT:"account",ACCOUNT_QUICK:"account_quick",AUTO_LOGIN:"auto_login",ACCOUNT_TYPE:"account_type",ACCOUNT_TYPE_LOGIN:0,ACCOUNT_TYPE_LOGIN_FACEBOOK:1,ACCOUNT_TYPE_LOGIN_QUICK:2,KEY:"JeDrwhYsTzGPswr3kJEfw7PjXqRYsJMLt886FXjGXUG4jW7TBd9pHZmWy52Q"},cc._RF.pop()},{}],DialogForm:[function(t,e,i){"use strict";cc._RF.push(e,"1fb49tXzQxNvrkjaKEWrGv0","DialogForm"),cc.Class({extends:cc.Component,properties:{formNode:cc.Node},onLoad:function(){this.isHiding=!1,this.formAnimation=this.formNode.getComponent(cc.Animation)},onDestroy:function(){clearTimeout(this.hideTimeout)},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t&&this.formAnimation.play("ShowDialogFormAnimation")},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isHiding||(this.isHiding=!0,this.node.active&&this.formAnimation.play("HideDialogFormAnimation"),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.node.active=!1,this.isHiding=!1}.bind(this),500)):this.node.active=!1},onCloseClick:function(){this.hideDialog()}}),cc._RF.pop()},{}],DialogMessage:[function(t,e,i){"use strict";cc._RF.push(e,"e016aEktsRFU6gOpCNwKkOg","DialogMessage");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{formNode:cc.Node,titleLabel:cc.Label,contentLabel:cc.Label},onLoad:function(){},onDestroy:function(){clearTimeout(this.hideTimeout)},setMessage:function(t,e){this.titleLabel.string=t.toUpperCase(),e===n.ACCOUNT_ONLINE&&(e=n.ACCOUNT_ONLINE_2),this.contentLabel.string=e},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t&&this.formNode.getComponent(cc.Animation).play("ShowDialogFormAnimation")},showMessage:function(t,e){this.setMessage(t,e),this.showDialog()},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.node.active&&this.formNode.getComponent(cc.Animation).play("HideDialogFormAnimation"),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.node.active=!1}.bind(this),500)):this.node.active=!1},onCloseClick:function(){this.hideDialog()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],DiamondConstant:[function(t,e,i){"use strict";cc._RF.push(e,"02d18ohIQtBDLjjjcr0oCc4","DiamondConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"diamond.ADD_EVENT",REMOVE_EVENT:"diamond.REMOVE_EVENT",SPIN:"diamond.SPIN",IS_SHOW:"diamond_is_show",POSITION:"diamond_position",LIST_LINES:"diamond_list",IS_AUTO_SPIN:"diamond_auto_spin",IS_SPIN_FAST:"diamond_spin_fast",BET_VALUE:"diamond_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"diamond_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"diamond.GET_TOP",MINIGAME_CONFIG_ID:13},cc._RF.pop()},{}],DiamondEventItem:[function(t,e,i){"use strict";cc._RF.push(e,"768a1m07adJVIig+3fnBMSt","DiamondEventItem");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{diamondLabel:cc.Label,goldLabel:cc.Label,sprite1:cc.Sprite,sprite2:cc.Sprite,listSprite:[cc.SpriteFrame],onButtonNode:cc.Node,offButtonNode:cc.Node},init:function(t,e,i){if(this.GameCenter=t,e){this.data=e,this.diamondLabel.string=n.nFormatter(e.diamond),this.goldLabel.string=n.nFormatter(e.fee_gold),this.sprite1.spriteFrame=this.listSprite[i-1],this.sprite2.spriteFrame=this.listSprite[i];var o=this.GameCenter.getDiamondLevel();0===o?(this.onButtonNode.active=!0,this.offButtonNode.active=!1):o>=i?(this.onButtonNode.active=!1,this.offButtonNode.active=!0):(this.onButtonNode.active=!0,this.offButtonNode.active=!1)}},onClick:function(){this.GameCenter.sendRequest.sendToZone(o.CONVERT_DIAMOND)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil"}],DiamondHistories:[function(t,e,i){"use strict";cc._RF.push(e,"f09d10/I91AtonX3K8O8qz1","DiamondHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryDiamond(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("DiamondHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],DiamondHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"26e46qI5d1CQ5bbvTx/vW9W","DiamondHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResult(t.result),this.getLabel.string=n.numberWithCommas(t.total_prize_value);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){try{t=JSON.parse(t);var e=0;if(t)for(var i in t)e++;return e+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DiamondItem:[function(t,e,i){"use strict";cc._RF.push(e,"4ade3TcWKZBWYIbccTy01ld","DiamondItem"),cc.Class({extends:cc.Component,properties:{diamondSprite:cc.Sprite,itemsSpriteFrame:[cc.SpriteFrame]},onLoad:function(){},init:function(t){switch(this.diamondSprite.node.active=!0,t){case"A":t=0;break;case"B":t=1;break;case"C":t=2;break;case"D":t=3;break;case"E":t=4;break;case"W":t=5}this.diamondSprite.spriteFrame=this.itemsSpriteFrame[t]},reset:function(){this.diamondSprite.node.active=!1}}),cc._RF.pop()},{}],DiamondLine:[function(t,e,i){"use strict";cc._RF.push(e,"1e028BOpcVKzKfEjLPODe8t","DiamondLine");var n=t("../item/DiamondNumberLineItem");cc.Class({extends:cc.Component,properties:{listNumberLineItem:[n],listLine:[cc.Node]},init:function(t){for(var e in this.Diamond=t,this.DiamondSelectForm=t.DiamondSelectForm,this.listNumberLineItem)this.listNumberLineItem[e].init(this)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in this.listLine)for(var i in t)if(e==t[i].line-1){this.listLine[e].active=!0;break}},showLine:function(t){for(var e in this.listLine)this.listLine[e].active=parseInt(t)-1==e},initNumberLine:function(){var t=0;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t++;this.Diamond.numberLineLabel.string=t+" D\xd2NG"},getLineData:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},select:function(t){this.listNumberLineItem[t-1].select()},unSelect:function(t){this.listNumberLineItem[t-1].unSelect()},getListLines:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1}}),cc._RF.pop()},{"../item/DiamondNumberLineItem":"DiamondNumberLineItem"}],DiamondNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"5bf970XvBpId6EelGMtFE1b","DiamondNumberLineItem");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{numberLine:0,bgSprite:cc.Sprite,bgDefaultSpriteFrame:cc.SpriteFrame,bgSelectedSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame},init:function(t){this.DiamondLine=t,this.Diamond=t.Diamond,this.DiamondSelectForm=t.DiamondSelectForm,this.line=this.numberLine,this.isSelected=!1},onLoad:function(){},onClick:function(){this.Diamond.isSpinning()||this.Diamond.isAutoSpin()?this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?this.DiamondSelectForm.select(this.line):this.DiamondSelectForm.unSelect(this.line),this.Diamond.saveListLines())},select:function(){this.isSelected=!0,this.bgSprite.spriteFrame=this.bgSelectedSpriteFrame,this.DiamondLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.bgSprite.spriteFrame=this.bgDefaultSpriteFrame,this.DiamondLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],DiamondReel:[function(t,e,i){"use strict";cc._RF.push(e,"cf0a6E8GtVNW4S69nHAeKvs","DiamondReel");var n=t("../../../util/RandomUtil"),o=t("../../../helper/Config"),s=t("../MiniGameConstant");cc.Class({extends:cc.Component,properties:{diamondItemPrefab:cc.Prefab},init:function(t){this.Diamond=t,this.DiamondUI=t.DiamondUI,this.DiamondLine=t.DiamondLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.diamondItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,n,a,r,c){this.reset(),this.setChips(this.chips),this.chips=t;for(var h=1;h<e;h++){var l=this.getRandomChip();h===e-1&&(l=t[0]),h===e-2&&(l=t[1]),h===e-3&&(l=t[2]);var u=this.instanceChip(l);u.setPosition(0,(h+1)*o.DIAMOND_DISTANCE_TWO_CHIPS),u.parent=this.node}var d=(e-1)*o.DIAMOND_DISTANCE_TWO_CHIPS,m=d/(this.Diamond.isSpinFast()?o.DIAMOND_SPEED_FAST_SPIN_CARD:o.DIAMOND_SPEED_SPIN_CARD),f=cc.moveTo(m,this.node.x,-d).easing(cc.easeInOut(3)),p=cc.callFunc(function(){this.setChips(t),i&&this.Diamond.node.active&&(r===s.WIN_TYPE_JACKPOT?this.DiamondUI.showJackPot(n,c):a&&this.MiniGameResult.show(n),this.DiamondLine.showLines(a))},this),_=this.Diamond.isSpinFast()?cc.delayTime(0):cc.delayTime(o.DIAMOND_DELAY_SPIN),S=cc.callFunc(function(){i&&this.Diamond.node.active&&this.Diamond.isAutoSpin()&&this.Diamond.spin()},this);this.node.runAction(cc.sequence(f,p,_,S)),r!==s.WIN_TYPE_JACKPOT||this.Diamond.node.active||(this.Diamond.node.active=!0,this.DiamondUI.showJackPot(n,c))},randomChips:function(){for(var t=[],e=0;e<o.DIAMOND_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){return n.getRandomInt(0,o.DIAMOND_NUMBER_TYPE_CHIP-1)},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*o.DIAMOND_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.diamondItemPrefab)),e.getComponent("DiamondItem").init(t),e.scale=o.DIAMOND_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),this.DiamondLine.reset()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant"}],DiamondSelectForm:[function(t,e,i){"use strict";cc._RF.push(e,"8eaa0pD7pFAkY7F2dN0xp9O","DiamondSelectForm");var n=t("../item/DiamondSelectItem"),o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{listSelectItem:[n]},init:function(t){for(var e in this.Diamond=t,this.DiamondLine=t.DiamondLine,this.listSelectItem)this.listSelectItem[e].init(this,parseInt(e)+1)},onLoad:function(){},initData:function(){},select:function(t){this.listSelectItem[t-1].select()},unSelect:function(t){this.listSelectItem[t-1].unSelect()},onCloseClick:function(){this.node.active=!1},onIgnoreAllClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1);this.Diamond.saveListLines()}},onSelectAllClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1);this.Diamond.saveListLines()}},onSelectEvenClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1)):(this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1));this.Diamond.saveListLines()}},onSelectOddClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1)):(this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1));this.Diamond.saveListLines()}}}),cc._RF.pop()},{"../../../helper/Message":"Message","../item/DiamondSelectItem":"DiamondSelectItem"}],DiamondSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"a986fg5SLJLNa04CDwno5n4","DiamondSelectItem");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{diamondSprite:cc.Sprite,diamondOnSpriteFrame:cc.SpriteFrame,diamondOffSpriteFrame:cc.SpriteFrame},init:function(t,e){this.DiamondSelectForm=t,this.Diamond=t.Diamond,this.DiamondLine=t.DiamondLine,this.line=e,this.isSelected=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.diamondSprite.spriteFrame=t.diamondOnSpriteFrame},this.onMouseLeave=function(){t.diamondSprite.spriteFrame=t.isSelected?t.diamondOnSpriteFrame:t.diamondOffSpriteFrame},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Diamond.isSpinning()||this.Diamond.isAutoSpin()?this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?(this.DiamondLine.select(this.line),this.select()):(this.DiamondLine.unSelect(this.line),this.unSelect()),this.Diamond.saveListLines())},select:function(){this.isSelected=!0,this.diamondSprite.spriteFrame=this.diamondOnSpriteFrame,this.DiamondLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.diamondSprite.spriteFrame=this.diamondOffSpriteFrame,this.DiamondLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],DiamondUI:[function(t,e,i){"use strict";cc._RF.push(e,"cc08255pmhA0Z/ihjvIj/y9","DiamondUI");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1OnLabel:cc.Label,bet1OffLabel:cc.Label,bet2OnLabel:cc.Label,bet2OffLabel:cc.Label,bet3OnLabel:cc.Label,bet3OffLabel:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setBetMoney:function(){var t=o.DIAMOND_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetGold:function(){var t=o.DIAMOND_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1OnLabel.string=n.nFormatter(t),this.bet1OffLabel.string=n.nFormatter(t),this.bet2OnLabel.string=n.nFormatter(e),this.bet2OffLabel.string=n.nFormatter(e),this.bet3OnLabel.string=n.nFormatter(i),this.bet3OffLabel.string=n.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],Diamond:[function(t,e,i){"use strict";cc._RF.push(e,"df956LzxDZEgKZY4Vv9ynB8","Diamond");var n=t("../../../base/BaseController"),o=t("./DiamondLine"),s=t("./DiamondSelectForm"),a=t("./DiamondUI"),r=t("./DiamondConstant"),c=t("./DiamondReel"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../item/MiniGameXPer"),d=t("../../../helper/Config"),m=t("../../../helper/Constant"),f=t("../../../helper/Message"),p=t("../../../object/RoomType"),_=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,MiniGameXPer:u,toastPrefab:cc.Prefab,autoSpinToggle:cc.Toggle,spinFastToggle:cc.Toggle,numberLineLabel:cc.Label,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,diamonFormNode:cc.Node,reels:[c],DiamondLine:o,DiamondSelectForm:s,DiamondUI:a,MiniGameResult:h},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.isMoneyType=!0,this.betOrder=0,this.intervalSpin=null,this.reels)this.reels[t].init(this);this.DiamondLine.init(this),this.DiamondSelectForm.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(r.ADD_EVENT),this.initMiniGameSpinFree(this.getUser().minigame_free)},onDisable:function(){var t=this.isAutoSpin(),e=this.isSpinFast();this.getTempData()[r.IS_AUTO_SPIN]=t,this.getTempData()[r.IS_SPIN_FAST]=e,this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(r.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[r.MONEY_TYPE]===r.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().diamond_free,i=t[r.IS_AUTO_SPIN],n=t[r.IS_SPIN_FAST],o=t[r.BET_VALUE];switch(n&&this.spinFastToggle.check(),i&&(this.autoSpinToggle.check(),this.spin()),o){case r.BET_100:this.setBet1();break;case r.BET_1k:this.setBet2();break;case r.BET_10k:this.setBet3()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(r.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y);var e=cc.sys.localStorage.getItem(r.LIST_LINES);for(var i in e=e?JSON.parse(e):[1])this.DiamondLine.select(parseInt(e[i])),this.DiamondSelectForm.select(parseInt(e[i]))},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationDiamond(!0,e):this.MiniGameCircleNotification.initShowNotificationDiamond(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationDiamond(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,n=t[e].quantity;i===r.MINIGAME_CONFIG_ID&&(n>0?this.DiamondUI.showMiniGameSpinFree(n):this.DiamondUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case r.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i);break;case r.REQUEST_INFO:this.handleInfo(i);break;case r.REQUEST_SPIN:this.handleSpin(i);break;case r.REQUEST_MESSAGE:this.handleMessage(n)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onAutoSpinToggle()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,n=t.total_prize_value,o=t.win_type,s=t.money_type,a=t.spin_id,r=s==p.MONEY_CODE;this.idLabel.string=String.format(f.MINIGAME_ID,a),this.spinReels(i,n,e,o,r)},spinReels:function(t,e,i,n,o){for(var s=[],a=[],r=[],c=0;c<t.length;c++)switch(c%d.DIAMOND_NUMBER_REELS){case 0:s.push(t[c]);break;case 1:a.push(t[c]);break;case 2:r.push(t[c])}this.reels[0].spin(s,d.DIAMOND_NUMBER_CHIP_SPIN),this.reels[1].spin(a,d.DIAMOND_NUMBER_CHIP_SPIN+3),this.reels[2].spin(r,d.DIAMOND_NUMBER_CHIP_SPIN+6,!0,e,i,n,o)},onSpinClick:function(){this.isSpinning()||this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t=this.DiamondLine.getLineData();if(t.length>0){var e={money_type:this.isMoneyType?p.MONEY_CODE:p.GOLD_CODE,money_value:this.getCurrentBet(),line_data:t};this.sendRequest.sendNoPrefixToZone(r.SPIN,e),this.MiniGameResult.reset()}else this.showMessage(f.DIAMOND_NO_LINE_SELECTED)}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(m.DIAMOND)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showDiamondHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(_.DIAMOND),this.controller.MiniGame.GameMiniRank.showDialog(),this.isMoneyType?this.controller.MiniGame.GameMiniRank.onMoneyClick():this.controller.MiniGame.GameMiniRank.onGoldClick()},onCloseClick:function(){this.setShowDiamond(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.DiamondUI.enableBet1Button(),this.getTempData()[r.BET_VALUE]=r.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.DiamondUI.enableBet2Button(),this.getTempData()[r.BET_VALUE]=r.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.DiamondUI.enableBet3Button(),this.getTempData()[r.BET_VALUE]=r.BET_10k},onDiamondClick:function(){this.setShowDiamond(!this.node.active)},onShowDiamonFormClick:function(){this.diamonFormNode.active=!0},onAutoSpinToggle:function(){var t=this.isAutoSpin();this.getTempData()[r.IS_AUTO_SPIN]=t},onSpinFastToggle:function(){var t=this.isSpinFast();this.getTempData()[r.IS_SPIN_FAST]=t},setShowDiamond:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().diamond_free;this.getTempData()[r.IS_SHOW]=t,this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*d.DIAMOND_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer&&this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=d.MINIGAME_SCALE_TOAST,e.setPosition(d.MINIGAME_POSITION_TOAST_X,d.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.DiamondUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?r.MONEY_TYPE_MONEY:r.MONEY_TYPE_GOLD;this.getTempData()[r.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?d.DIAMOND_LIST_BET_MONEY:d.DIAMOND_LIST_BET_GOLD)[this.betOrder]},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0},isAutoSpin:function(){return this.autoSpinToggle.isChecked},isSpinFast:function(){return this.spinFastToggle.isChecked},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},saveListLines:function(){var t=this.DiamondLine.getListLines();cc.sys.localStorage.setItem(r.LIST_LINES,JSON.stringify(t))},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./DiamondConstant":"DiamondConstant","./DiamondLine":"DiamondLine","./DiamondReel":"DiamondReel","./DiamondSelectForm":"DiamondSelectForm","./DiamondUI":"DiamondUI"}],DropDownList2:[function(t,e,i){"use strict";cc._RF.push(e,"955e9sXPgVOIqJqS/wqiFyr","DropDownList2");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,expandNode:cc.Node,contentNode:cc.Node,dropboxItemPrefab:cc.Prefab},onLoad:function(){},selectByValue:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=this.contentNode.getChildren();for(var i in e){var o=e[i].getComponent("DropDownListItem");o.getValue()==t?(o.showSelectedNode(),this.value=t,this.data=o.getData(),this.selectedItem=o,this.valueLabel.string="number"==typeof t?n.numberWithCommas(t):t,this.callback&&this.callback(this)):o.hideSelectedNode()}},onItemClick:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=t.target,i=e.getComponent("DropDownListItem");i.showSelectedNode();var o=i.getValue();this.selectedItem=e,this.value=o,this.valueLabel.string="number"==typeof o?n.numberWithCommas(o):o,this.callback&&this.callback(this)},onDropDownListClick:function(){this.expandNode.active?(this.expandNode.active=!1,this.expandNode.zIndex=0):(this.expandNode.active=!0,this.expandNode.zIndex=1)},addItem:function(t,e){var i=cc.instantiate(this.dropboxItemPrefab),o=i.getComponent("DropDownListItem");o.init(t,e),i.on(cc.Node.EventType.TOUCH_END,this.onItemClick.bind(this),this.newItem),this.contentNode.addChild(i),this.selectedItem||(this.value=t,this.data=e,this.selectedItem=i,o.showSelectedNode(),this.valueLabel.string="number"==typeof t?n.numberWithCommas(t):t)},setCallback:function(t,e){this.callback=t.bind(e),this.controller=e},getValue:function(){return this.value},getData:function(){return this.data},getSelectedItem:function(){return this.selectedItem.getComponent("DropDownListItem")},removeAllItem:function(){this.contentNode.removeAllChildren(!0),this.value="",this.valueLabel.string=""}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],DropDownListItem:[function(t,e,i){"use strict";cc._RF.push(e,"0fe8cQ3a+tJ0ZDY9i+J3jrv","DropDownListItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,selectedNode:cc.Node},onLoad:function(){},init:function(t,e){this.value=t,this.data=e,this.valueLabel.string="number"==typeof t?n.numberWithCommas(t):t},getValue:function(){return this.value},getData:function(){return this.data},showSelectedNode:function(){this.selectedNode.active=!0},hideSelectedNode:function(){this.selectedNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],DropDownList:[function(t,e,i){"use strict";cc._RF.push(e,"bc845h2c69CK4RFOqkVuN9v","DropDownList");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,expandNode:cc.Node,dropboxItemPrefab:cc.Prefab},onLoad:function(){},onDisable:function(){this.expandNode.active=!1,this.expandNode.zIndex=0},selectByValue:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=this.expandNode.getChildren();for(var i in e){var o=e[i].getComponent("DropDownListItem");o.getValue()==t?(o.showSelectedNode(),this.value=t,this.data=o.getData(),this.selectedItem=o,this.valueLabel.string="number"==typeof t?n.numberWithCommas(t):t,this.callback&&this.callback(this)):o.hideSelectedNode()}},onItemClick:function(t){this.hideAllItem();var e=t.target,i=e.getComponent("DropDownListItem");i.showSelectedNode();var o=i.getValue(),s=i.getData();this.selectedItem=e,this.value=o,this.data=s,this.valueLabel.string="number"==typeof o?n.numberWithCommas(o):o,this.callback&&this.callback(this)},onDropDownListClick:function(){this.expandNode.active?(this.expandNode.active=!1,this.expandNode.zIndex=0):(this.expandNode.active=!0,this.expandNode.zIndex=1)},addItem:function(t,e){var i=cc.instantiate(this.dropboxItemPrefab),o=i.getComponent("DropDownListItem");return o.init(t,e),i.on(cc.Node.EventType.TOUCH_END,this.onItemClick.bind(this),this.newItem),this.expandNode.addChild(i),this.selectedItem||(this.value=t,this.data=e,this.selectedItem=i,o.showSelectedNode(),this.valueLabel.string="number"==typeof t?n.numberWithCommas(t):t),o},setCallback:function(t,e){this.callback=t.bind(e),this.controller=e},getValue:function(){return this.value},getData:function(){return this.data},getSelectedItem:function(){return this.selectedItem.getComponent("DropDownListItem")},hideAllItem:function(){var t=this.expandNode.getChildren();for(var e in t)t[e].getComponent("DropDownListItem").hideSelectedNode()},removeAllItem:function(){this.expandNode.removeAllChildren(!0),this.value="",this.valueLabel.string="",this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode(),this.selectedItem=null}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],EmotionItem:[function(t,e,i){"use strict";cc._RF.push(e,"4528eITagFEXImkqcCUC+8U","EmotionItem"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCommon=t},onLoad:function(){var t=this.node.children[0];t&&(this.textureName=t.getComponent(cc.Sprite).spriteFrame._name)},onClick:function(){this.GameCommon.sendChat(this.textureName),this.GameCommon.hideQuickChatNode()}}),cc._RF.pop()},{}],EventCenter:[function(t,e,i){"use strict";cc._RF.push(e,"a563ckKFBpNOpT/yN5B+nY3","EventCenter");var n=t("../../../../base/BaseController"),o=t("../../../../helper/Config"),s=t("../../../../util/FormatUtil"),a=t("../../../../util/NodeUtil"),r=t("../../MiniGameConstant");cc.Class({extends:n,properties:{scoreLabel:cc.Label},init:function(t){this.controller=t,this.MiniGame=t.MiniGame,this.scoreLabel.string=s.numberWithCommas(this.controller.getUser().vp)},onLoad:function(){var t=this;this._super(),this.isMove=!1,this.startPosition=null,this.positionX=this.node.x,this.positionY=this.node.y,this.onTouchStart=function(e){t.isMove=!1,t.startPosition=t.node.getPosition()},this.onTouchMove=function(e){t.isMove=!0;var i=e.touch.getDelta(),n=t.node.x+i.x,s=t.node.y+i.y,a=o.CANVAS_WIDTH/2,r=-o.CANVAS_WIDTH/2,c=o.GAME_HEIGHT/2,h=-(o.CANVAS_HEIGHT-o.GAME_HEIGHT/2);n>a?n=a:n<r&&(n=r),s>c?s=c:s<h&&(s=h),t.node.x=n,t.node.y=s},this.onTouchEnd=function(e){t.isMove&&t.savePosition();var i=t.node.getPosition();a.getDistanceTwoNode(t.startPosition,i)<10&&t.onCircleButtonClick()},this.onMouseEnter=function(t){t.stopPropagation()},this.initData()},onEnable:function(){this.addEventMove()},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},removeEventMove:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.node),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},initData:function(){var t=this.getTempData()[r.MINIGAME_EVENT_TOP_POSITION];if(t){this.positionX=t.x,this.positionY=t.y;var e=cc.winSize;this.positionX>e.width/2?this.positionX=e.width/2:this.positionX<-e.width/2&&(this.positionX=-e.width/2),this.positionY>e.height/2?this.positionY=e.height/2:this.positionY<-e.height/2&&(this.positionY=-e.height/2)}this.node.setPosition(this.positionX,this.positionY)},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[r.MINIGAME_EVENT_TOP_POSITION]=t},onCircleButtonClick:function(){this.MiniGame.Event.showDialog()}}),cc._RF.pop()},{"../../../../base/BaseController":"BaseController","../../../../helper/Config":"Config","../../../../util/FormatUtil":"FormatUtil","../../../../util/NodeUtil":"NodeUtil","../../MiniGameConstant":"MiniGameConstant"}],EventHuLocHistory:[function(t,e,i){"use strict";cc._RF.push(e,"5328e1f/UNLyJHT1m1+8fgY","EventHuLocHistory");var n=t("../../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{huLocRankItemPrefab:cc.Prefab,rankListScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},initData:function(t){if(this.loadingNode.active=!1,t=t.slice(),this.rankListScrollView.content.removeAllChildren(!0),t)for(var e in t=n.deDuplicate(t),t=n.sortDataTimeByTime2(t)){var i=cc.instantiate(this.huLocRankItemPrefab);i.parent=this.rankListScrollView.content,i.getComponent("TanLocHistoryItem").init(t[e],e)}}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil"}],EventHuLocRank:[function(t,e,i){"use strict";cc._RF.push(e,"c41e39kju9K1awIVXLmnY8Y","EventHuLocRank");var n=t("../../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{huLocRankItemPrefab:cc.Prefab,rankListScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},getData:function(t){return t=t.slice(),t=n.sortDataByAmount1(t)},initData:function(t){if(this.loadingNode.active=!1,t=this.getData(t),this.rankListScrollView.content.removeAllChildren(!0),t)for(var e in t=n.deDuplicate(t),t=n.sortDataTimeByTime2(t)){var i=cc.instantiate(this.huLocRankItemPrefab);i.parent=this.rankListScrollView.content,i.getComponent("TanLocRankItem").init(t[e],e)}}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil"}],EventHuLoc:[function(t,e,i){"use strict";cc._RF.push(e,"5dfb780wLJAmL7xXrLagDXq","EventHuLoc");var n=t("./hu-loc/EventHuLocRank"),o=t("./hu-loc/EventHuLocHistory");cc.Class({extends:cc.Component,properties:{rankButtonOnNode:cc.Node,rankButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,historyButtonOnNode:cc.Node,historyButtonOffNode:cc.Node,rankContentNode:cc.Node,ruleContentNode:cc.Node,historyContentNode:cc.Node,EventHuLocRank:n,EventHuLocHistory:o},init:function(t){this.controller=t,this.EventHuLocRank.init(t),this.EventHuLocHistory.init(t)},onLoad:function(){this.onRankClick()},onEnable:function(){this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(){var t=this;if(!this.xhr){var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.logHuLoc(e,function(e){t.data=e.data,t.EventHuLocRank.initData(t.data),t.EventHuLocHistory.initData(t.data)},function(e){t.xhr=null})}},onRuleClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1,this.ruleContentNode.active=!0},onRankClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rankButtonOnNode.active=!0,this.rankButtonOffNode.active=!1,this.rankContentNode.active=!0},onHistoryClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.historyButtonOnNode.active=!0,this.historyButtonOffNode.active=!1,this.historyContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rankButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0,this.historyButtonOffNode.active=!0},hideAllOnButtons:function(){this.rankButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1,this.historyButtonOnNode.active=!1},hideAllContents:function(){this.rankContentNode.active=!1,this.ruleContentNode.active=!1,this.historyContentNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"./hu-loc/EventHuLocHistory":"EventHuLocHistory","./hu-loc/EventHuLocRank":"EventHuLocRank"}],EventLuckyWheel:[function(t,e,i){"use strict";cc._RF.push(e,"b60055Mr1FGKq0bz+TDcHEz","EventLuckyWheel"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.controller=t},onLoad:function(){}}),cc._RF.pop()},{}],EventRutLocRank:[function(t,e,i){"use strict";cc._RF.push(e,"6ec62PfSbdJI6DYEQMkYkuQ","EventRutLocRank");var n=t("../../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{tanLocItemPrefab:cc.Prefab,tanLocListScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},getData:function(t){for(var e=[],i=0,n=(t=t.slice()).length;i<n;i++)t[i].amount>0&&e.push(t[i]);return e},initData:function(t){this.loadingNode.active=!1;var e=this.getData(t);if(this.tanLocListScrollView.content.removeAllChildren(!0),e)for(var i in e=n.deDuplicate(e),e=n.sortDataByAmount1(e)){var o=cc.instantiate(this.tanLocItemPrefab);o.parent=this.tanLocListScrollView.content,o.getComponent("TanLocRankItem").init(e[i],i)}}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil"}],EventTaiXiuItem:[function(t,e,i){"use strict";cc._RF.push(e,"404d5Z7snFD8KTCia/tu1Zs","EventTaiXiuItem");var n=t("../../../../../util/FormatUtil"),o=t("../../../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bg1SpriteFrame:cc.SpriteFrame,bg2SpriteFrame:cc.SpriteFrame,sttLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,amountLabel:cc.Label,prizeLabel:cc.Label},onLoad:function(){},init:function(t,e,i){this.data=t,this.isWin=e,this.bgSprite.spriteFrame=i%2==0?this.bg1SpriteFrame:this.bg2SpriteFrame,this.sttLabel.string=i+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.amountLabel.string=n.numberWithCommas(Math.abs(t.amount)),this.prizeLabel.string=n.numberWithCommas(this.getPrizeByTop(i+1)),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)},getPrizeByTop:function(t){return this.isWin?1===t?5e5:2===t?3e5:3===t?2e5:t<=10?1e5:0:1===t?3e5:2===t?2e5:t<=10?1e5:0}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil","../../../../../util/Util":"Util"}],EventTaiXiuRank:[function(t,e,i){"use strict";cc._RF.push(e,"82f82rEHqNG/YtBiH+PFQMc","EventTaiXiuRank"),cc.Class({extends:cc.Component,properties:{winButtonOnNode:cc.Node,winButtonOffNode:cc.Node,loseButtonOnNode:cc.Node,loseButtonOffNode:cc.Node,dateNode:cc.Node,dateLabel:cc.Label,nextButtonNode:cc.Node,previousButtonNode:cc.Node,taiXiuEventItemPrefab:cc.Prefab,taiXiuListScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.listDate=null,this.currentDate=null,this.onWinClick()},onDisable:function(){this.removeXhr()},initData:function(){if(this.showListNode(),this.taiXiuListScrollView.content.removeAllChildren(!0),this.data&&this.data[0]){var t=new Set;for(var e in this.data)this.data[e]&&t.add(this.data[e].created_at);this.listDate=[];var i=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;this.listDate.push(r)}}catch(t){n=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}this.listDate.reverse(),!this.currentDate&&this.listDate.length>0&&(this.currentDate=this.listDate[this.listDate.length-1]),this.dateLabel.string=this.getDateByTimeStamp(this.currentDate),this.initShowNextPreviousButton();var c=this.getDataByDate(this.currentDate,this.isWin());c=c.reverse();for(var h=0;h<c.length;h++){var l=cc.instantiate(this.taiXiuEventItemPrefab);l.getComponent("EventTaiXiuItem").init(c[h],this.isWin(),h),l.parent=this.taiXiuListScrollView.content}}},getDateByTimeStamp:function(t){var e=new Date(t);return e.setDate(e.getDate()-1),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},getDataByDate:function(t,e){var i=[];if(e=!0===e?1:0,this.data)for(var n in this.data)this.data[n].created_at===t&&this.data[n].is_win===e&&i.push(this.data[n]);return i},initShowNextPreviousButton:function(){this.previousButtonNode.active=this.listDate[0]!==this.currentDate,this.nextButtonNode.active=this.listDate[this.listDate.length-1]!==this.currentDate},loadData:function(){var t=this;if(this.showLoadingNode(),this.taiXiuListScrollView.content.removeAllChildren(!0),this.data)this.initData();else if(!this.xhr){var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getTopTaiXiu(e,function(e){t.data=e.data,t.listDate=null,t.currentDate=null,t.initData(),t.xhr=null},function(e){t.showListNode(),t.controller.showDialogMessage("S\u1ef1 Ki\u1ec7n",e.msg),t.xhr=null})}},onWinClick:function(){this.winButtonOnNode.active=!0,this.winButtonOffNode.active=!1,this.loseButtonOnNode.active=!1,this.loseButtonOffNode.active=!0,this.loadData()},onLoseClick:function(){this.winButtonOnNode.active=!1,this.winButtonOffNode.active=!0,this.loseButtonOnNode.active=!0,this.loseButtonOffNode.active=!1,this.loadData()},onNextClick:function(){if(this.listDate&&this.currentDate&&this.listDate.length>1)for(var t=0;t<this.listDate.length;t++)if(this.listDate[t]===this.currentDate){this.currentDate=this.listDate[t+1],this.initData();break}},onPreviousClick:function(){if(this.listDate&&this.currentDate&&this.listDate.length>1)for(var t=0;t<this.listDate.length;t++)if(this.listDate[t]===this.currentDate){this.currentDate=this.listDate[t-1],this.initData();break}},isWin:function(){return!0===this.winButtonOnNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.taiXiuListScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.taiXiuListScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{}],EventTaiXiuRule:[function(t,e,i){"use strict";cc._RF.push(e,"a685aIcmtZLe5UCdqfP+54K","EventTaiXiuRule"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.controller=t},onLoad:function(){}}),cc._RF.pop()},{}],EventTaiXiu:[function(t,e,i){"use strict";cc._RF.push(e,"d424fed7CFIDohOF4xhYh1d","EventTaiXiu");var n=t("./tai-xiu/EventTaiXiuRank"),o=t("./tai-xiu/EventTaiXiuRule");cc.Class({extends:cc.Component,properties:{rankButtonOnNode:cc.Node,rankButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,rankContentNode:cc.Node,ruleContentNode:cc.Node,EventTaiXiuRank:n,EventTaiXiuRule:o},init:function(t){this.controller=t,this.EventTaiXiuRank.init(t),this.EventTaiXiuRule.init(t)},onLoad:function(){},onEnable:function(){},initData:function(t){},onRuleClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1,this.ruleContentNode.active=!0},onRankClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rankButtonOnNode.active=!0,this.rankButtonOffNode.active=!1,this.rankContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rankButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0},hideAllOnButtons:function(){this.rankButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1},hideAllContents:function(){this.rankContentNode.active=!1,this.ruleContentNode.active=!1}}),cc._RF.pop()},{"./tai-xiu/EventTaiXiuRank":"EventTaiXiuRank","./tai-xiu/EventTaiXiuRule":"EventTaiXiuRule"}],EventTanLocRank:[function(t,e,i){"use strict";cc._RF.push(e,"c8cf6h0TJ9KUq+f7F9CJnEd","EventTanLocRank");var n=t("../../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{tanLocItemPrefab:cc.Prefab,tanLocListScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},getData:function(t){for(var e=[],i=0,n=(t=t.slice()).length;i<n;i++)t[i].amount<0&&e.push(t[i]);return e},initData:function(t){this.loadingNode.active=!1,this.tanLocListScrollView.content.removeAllChildren(!0);var e=this.getData(t);if(e)for(var i in e=n.deDuplicate(e),e=n.sortDataByAmount2(e)){var o=cc.instantiate(this.tanLocItemPrefab);o.parent=this.tanLocListScrollView.content,o.getComponent("TanLocRankItem").init(e[i],i)}}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil"}],EventTanLoc:[function(t,e,i){"use strict";cc._RF.push(e,"806fcNofXRH94QR7IfZkTd5","EventTanLoc");var n=t("./tan-loc/EventRutLocRank"),o=t("./tan-loc/EventTanLocRank");t("../../bonus-event/BonusConstant");cc.Class({extends:cc.Component,properties:{rankRutLocButtonOnNode:cc.Node,rankRutLocButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,rankTanLocButtonOnNode:cc.Node,rankTanLocButtonOffNode:cc.Node,rankRutLocContentNode:cc.Node,ruleContentNode:cc.Node,rankTanLocContentNode:cc.Node,EventTanLocRank:o,EventRutLocRank:n},init:function(t){this.controller=t,this.EventTanLocRank.init(t),this.EventRutLocRank.init(t)},onLoad:function(){},onEnable:function(){this.onRankTanLocClick(),this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(){var t=this;if(!this.xhr){var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.logTanLoc(e,function(e){t.data=e.data,t.EventTanLocRank.initData(t.data),t.EventRutLocRank.initData(t.data)},function(e){t.xhr=null})}},onRuleClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1,this.ruleContentNode.active=!0},onRankRutLocClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rankRutLocButtonOnNode.active=!0,this.rankRutLocButtonOffNode.active=!1,this.rankRutLocContentNode.active=!0},onRankTanLocClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rankTanLocButtonOnNode.active=!0,this.rankTanLocButtonOffNode.active=!1,this.rankTanLocContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rankRutLocButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0,this.rankTanLocButtonOffNode.active=!0},hideAllOnButtons:function(){this.rankRutLocButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1,this.rankTanLocButtonOnNode.active=!1},hideAllContents:function(){this.rankRutLocContentNode.active=!1,this.ruleContentNode.active=!1,this.rankTanLocContentNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../bonus-event/BonusConstant":"BonusConstant","./tan-loc/EventRutLocRank":"EventRutLocRank","./tan-loc/EventTanLocRank":"EventTanLocRank"}],EventTopItem:[function(t,e,i){"use strict";cc._RF.push(e,"089a33D3zlFkLsAbFLTnxr7","EventTopItem");var n=t("../../../../../util/FormatUtil"),o=t("../../../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bg1SpriteFrame:cc.SpriteFrame,bg2SpriteFrame:cc.SpriteFrame,sttLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,scoreLabel:cc.Label,prizeLabel:cc.Label,prizeItem1Node:cc.Node,prizeItem2Node:cc.Node,prizeItem3Node:cc.Node,amountLabel:cc.Label},onLoad:function(){},init:function(t,e){this.data=t,this.bgSprite.spriteFrame=e%2==0?this.bg1SpriteFrame:this.bg2SpriteFrame,this.sttLabel.string=e+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nickname||t.nick_name,this.scoreLabel.string=n.numberWithCommas(t.total_vp),this.initPrizeByTop(e+1),this.prizeLabel.string=n.numberWithCommas(this.getPrizeByTop(e+1)),this.amountLabel.string=n.numberWithCommas(this.getPrizeByTop(e+1)),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)},initPrizeByTop:function(t){this.prizeLabel.node.active=!1,this.prizeItem1Node.active=!1,this.prizeItem2Node.active=!1,this.prizeItem3Node.active=!1,1===t?this.prizeItem1Node.active=!0:2===t?this.prizeItem2Node.active=!0:3===t?this.prizeItem3Node.active=!0:this.prizeLabel.node.active=!0},getPrizeByTop:function(t){return 1===t?12e7:2===t?7e7:3===t?4e7:t<=5?15e6:t<=10?8e6:t<=20?3e6:t<=50?5e5:0}}),cc._RF.pop()},{"../../../../../util/FormatUtil":"FormatUtil","../../../../../util/Util":"Util"}],EventTopRank:[function(t,e,i){"use strict";cc._RF.push(e,"d2fb9WHAXhHoqbRddK6B849","EventTopRank");var n=t("../../../../../helper/Constant"),o=t("../../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,topLabel:cc.Label,eventTopItemPrefab:cc.Prefab,eventTopScrollScrollView:cc.ScrollView,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.scoreLabel.string="\u0110i\u1ec3m Vip c\u1ee7a b\u1ea1n: "+o.numberWithCommas(this.controller.getUser().vp),this.topLabel.string="H\u1ea1ng c\u1ee7a b\u1ea1n: "+o.numberWithCommas(this.controller.getUser().vp_user),this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(){var t=this;this.showLoadingNode(),this.eventTopScrollScrollView.content.removeAllChildren(!0);var e={token:this.controller.getToken(),user_id:this.controller.getUserId(),money_type:n.MONEY_CODE};this.xhr=this.controller.api.getEventTop(e,function(e){t.showListNode(),t.initData(e.data),t.xhr=null},function(e){t.showListNode(),t.controller.showDialogMessage("S\u1ef1 Ki\u1ec7n",e.msg),t.xhr=null})},initData:function(t){for(var e=0;e<t.length;e++){var i=cc.instantiate(this.eventTopItemPrefab);i.getComponent("EventTopItem").init(t[e],e),i.parent=this.eventTopScrollScrollView.content}},showListNode:function(){this.loadingNode.active=!1,this.eventTopScrollScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0,this.eventTopScrollScrollView.node.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../../helper/Constant":"Constant","../../../../../util/FormatUtil":"FormatUtil"}],EventTopRule:[function(t,e,i){"use strict";cc._RF.push(e,"72ba77//XtLbLL3v/ui1vIb","EventTopRule"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.controller=t},onLoad:function(){}}),cc._RF.pop()},{}],EventTop:[function(t,e,i){"use strict";cc._RF.push(e,"4042dkLAyZDq7U3G0i/h70l","EventTop");var n=t("./top/EventTopRank"),o=t("./top/EventTopRule");cc.Class({extends:cc.Component,properties:{headerFormNode:cc.Node,headerTopNode:cc.Node,rankButtonOnNode:cc.Node,rankButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,rankContentNode:cc.Node,ruleContentNode:cc.Node,EventTopRank:n,EventTopRule:o},init:function(t){this.controller=t,this.EventTopRank.init(t),this.EventTopRule.init(t)},onLoad:function(){},onEnable:function(){this.headerFormNode.active=!1,this.headerTopNode.active=!0},onDisable:function(){this.headerFormNode.active=!0,this.headerTopNode.active=!1},onRuleClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1,this.ruleContentNode.active=!0},onRankClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rankButtonOnNode.active=!0,this.rankButtonOffNode.active=!1,this.rankContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rankButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0},hideAllOnButtons:function(){this.rankButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1},hideAllContents:function(){this.rankContentNode.active=!1,this.ruleContentNode.active=!1}}),cc._RF.pop()},{"./top/EventTopRank":"EventTopRank","./top/EventTopRule":"EventTopRule"}],Event:[function(t,e,i){"use strict";cc._RF.push(e,"81e02SeD3hDpKyTC1IsJrp8","Event");var n=t("./event/EventTop"),o=t("./event/EventTaiXiu"),s=t("./event/EventHuLoc"),a=t("./event/EventTanLoc"),r=t("./event/EventLuckyWheel"),c=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{topButtonNode:cc.Node,topOnButtonNode:cc.Node,topOffButtonNode:cc.Node,taiXiuOnButtonNode:cc.Node,taiXiuOffButtonNode:cc.Node,rutLocOnButtonNode:cc.Node,rutLocOffButtonNode:cc.Node,tanLocOnButtonNode:cc.Node,tanLocOffButtonNode:cc.Node,luckyWheelOnButtonNode:cc.Node,luckyWheelOffButtonNode:cc.Node,slot1OnButtonNode:cc.Node,slot1OffButtonNode:cc.Node,slot2OnButtonNode:cc.Node,slot2OffButtonNode:cc.Node,slot3OnButtonNode:cc.Node,slot3OffButtonNode:cc.Node,diamondOnButtonNode:cc.Node,diamondOffButtonNode:cc.Node,miniPokerOnButtonNode:cc.Node,miniPokerOffButtonNode:cc.Node,mini3CayOnButtonNode:cc.Node,mini3CayOffButtonNode:cc.Node,bomOnButtonNode:cc.Node,bomOffButtonNode:cc.Node,wildOnButtonNode:cc.Node,wildOffButtonNode:cc.Node,topContentNode:cc.Node,taiXiuContentNode:cc.Node,rutLocContentNode:cc.Node,tanLocContentNode:cc.Node,luckyWheelContentNode:cc.Node,slot1ContentNode:cc.Node,slot2ContentNode:cc.Node,slot3ContentNode:cc.Node,diamondContentNode:cc.Node,miniPokerContentNode:cc.Node,mini3CayContentNode:cc.Node,bomContentNode:cc.Node,wildContentNode:cc.Node,EventTop:n,EventTaiXiu:o,EventLuckyWheel:r,EventHuLoc:s,EventTanLoc:a},init:function(t){this.controller=t,this.EventTop.init(t),this.EventTaiXiu.init(t),this.EventLuckyWheel.init(t),this.EventHuLoc.init(t),this.EventTanLoc.init(t)},onLoad:function(){c.checkTimeStartByDate("Mar 15 2020")?this.topButtonNode.active=!0:this.topButtonNode.active=!1},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},onTopClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.topOnButtonNode.active=!0,this.topOffButtonNode.active=!1,this.topContentNode.active=!0},onTaiXiuClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.taiXiuOnButtonNode.active=!0,this.taiXiuOffButtonNode.active=!1,this.taiXiuContentNode.active=!0},onRutLocClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.rutLocOnButtonNode.active=!0,this.rutLocOffButtonNode.active=!1,this.rutLocContentNode.active=!0},onTanLocClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.tanLocOnButtonNode.active=!0,this.tanLocOffButtonNode.active=!1,this.tanLocContentNode.active=!0},onLuckyWheelClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.luckyWheelOnButtonNode.active=!0,this.luckyWheelOffButtonNode.active=!1,this.luckyWheelContentNode.active=!0},onSlot1Click:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.slot1OnButtonNode.active=!0,this.slot1OffButtonNode.active=!1,this.slot1ContentNode.active=!0},onSlot2Click:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.slot2OnButtonNode.active=!0,this.slot2OffButtonNode.active=!1,this.slot2ContentNode.active=!0},onSlot3Click:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.slot3OnButtonNode.active=!0,this.slot3OffButtonNode.active=!1,this.slot3ContentNode.active=!0},onDiamondClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.diamondOnButtonNode.active=!0,this.diamondOffButtonNode.active=!1,this.diamondContentNode.active=!0},onMiniPokerClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.miniPokerOnButtonNode.active=!0,this.miniPokerOffButtonNode.active=!1,this.miniPokerContentNode.active=!0},onMini3CayClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.mini3CayOnButtonNode.active=!0,this.mini3CayOffButtonNode.active=!1,this.mini3CayContentNode.active=!0},onBomClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.bomOnButtonNode.active=!0,this.bomOffButtonNode.active=!1,this.bomContentNode.active=!0},onWildClick:function(){this.controller.Audio.playClick(),this.initBeforeClick(),this.wildOnButtonNode.active=!0,this.wildOffButtonNode.active=!1,this.wildContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.topOffButtonNode.active=!0,this.taiXiuOffButtonNode.active=!0,this.luckyWheelOffButtonNode.active=!0,this.slot1OffButtonNode.active=!0,this.slot2OffButtonNode.active=!0,this.slot3OffButtonNode.active=!0,this.diamondOffButtonNode.active=!0,this.miniPokerOffButtonNode.active=!0,this.mini3CayOffButtonNode.active=!0,this.bomOffButtonNode.active=!0,this.wildOffButtonNode.active=!0,this.rutLocOffButtonNode.active=!0,this.tanLocOffButtonNode.active=!0},hideAllOnButtons:function(){this.topOnButtonNode.active=!1,this.taiXiuOnButtonNode.active=!1,this.luckyWheelOnButtonNode.active=!1,this.slot1OnButtonNode.active=!1,this.slot2OnButtonNode.active=!1,this.slot3OnButtonNode.active=!1,this.diamondOnButtonNode.active=!1,this.miniPokerOnButtonNode.active=!1,this.mini3CayOnButtonNode.active=!1,this.bomOnButtonNode.active=!1,this.wildOnButtonNode.active=!1,this.rutLocOnButtonNode.active=!1,this.tanLocOnButtonNode.active=!1},hideAllContents:function(){this.topContentNode.active=!1,this.taiXiuContentNode.active=!1,this.luckyWheelContentNode.active=!1,this.slot1ContentNode.active=!1,this.slot2ContentNode.active=!1,this.slot3ContentNode.active=!1,this.diamondContentNode.active=!1,this.miniPokerContentNode.active=!1,this.mini3CayContentNode.active=!1,this.bomContentNode.active=!1,this.wildContentNode.active=!1,this.rutLocContentNode.active=!1,this.tanLocContentNode.active=!1}}),cc._RF.pop()},{"../../../util/Util":"Util","./event/EventHuLoc":"EventHuLoc","./event/EventLuckyWheel":"EventLuckyWheel","./event/EventTaiXiu":"EventTaiXiu","./event/EventTanLoc":"EventTanLoc","./event/EventTop":"EventTop"}],FFEvent:[function(t,e,i){"use strict";cc._RF.push(e,"20f61UTNtZFrrtsGJwYWii7","FFEvent"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active}}),cc._RF.pop()},{}],FFGameCardsList:[function(t,e,i){"use strict";cc._RF.push(e,"8c40cDkyWxAI7tD7hvKatxI","FFGameCardsList");var n=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{previousNode:cc.Node,listGamePageView:cc.PageView},init:function(t){this.FireFish=t},onLoad:function(){this.isShow=!0,this.showX=-80,this.hideX=490},onShowClick:function(){this.FireFish.Audio.playClick(),this.isShow?(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(.25,0,1)),this.previousNode.stopAllActions(),this.previousNode.runAction(cc.moveTo(.25,this.hideX,this.previousNode.y))):(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(.25,1,1)),this.previousNode.stopAllActions(),this.previousNode.runAction(cc.moveTo(.25,this.showX,this.previousNode.y))),this.isShow=!this.isShow},onChangePageClick:function(){this.onShowClick()},onBaCayClick:function(){this.joinGameLobby(n.BA_CAY)},onLiengClick:function(){this.joinGameLobby(n.LIENG)},onMauBinhClick:function(){this.joinGameLobby(n.MAU_BINH)},onPhomClick:function(){this.joinGameLobby(n.PHOM)},onPokerClick:function(){this.joinGameLobby(n.POKER)},onSamClick:function(){this.joinGameLobby(n.SAM)},onSamSoloClick:function(){this.joinGameLobby(n.SAMSOLO)},onTLMNClick:function(){this.joinGameLobby(n.TLMN)},onTLMNSoloClick:function(){this.joinGameLobby(n.TLMNSOLO)},onXocDiaClick:function(){this.joinGameLobby(n.XOC_DIA)},joinGameLobby:function(t){this.FireFish.showProcessingNode();var e={game_name:t};this.FireFish.sendRequest.sendNoPrefixToZone(n.REQUEST_JOIN_GAME,e)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant"}],FFLockFish:[function(t,e,i){"use strict";cc._RF.push(e,"2e3350RowdCs5qyt13+ztlN","FFLockFish"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,ballItemPrefab:cc.Prefab,pointFishNode:cc.Node},init:function(t){this.FireFishGame=t,this.FishManager=t.FishManager},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.ballItemPrefab);this.pool.put(e)}this.isCountDraw=0,this.distanceBall=90},initFish:function(t){if(this.isCountDraw++,this.isCountDraw>=10){this.isCountDraw=0;var e=this.FireFishGame.getMyPlayerNode();this.drawLockFish(e,t)}},removeLockFish:function(){this.pointFishNode.active=!1,this.putAllBallToPool()},drawLockFish:function(t,e){var i=t.parent.convertToWorldSpaceAR(t),n=this.contentNode.convertToNodeSpaceAR(i),o=t.parent.convertToWorldSpaceAR(e),s=this.contentNode.convertToNodeSpaceAR(o),a=this.getStraightLine(n,s),r=this.getListPosition(n,s,a);this.showPointFishNode(s),this.drawBall(r)},drawBall:function(t){for(var e in this.putAllBallToPool(),t){var i=this.instanceBall();i&&(this.contentNode.addChild(i),i.position=t[e])}},getStraightLine:function(t,e){var i=(t.y-e.y)/(t.x-e.x);return{a:i,b:t.y-i*t.x}},showPointFishNode:function(t){this.pointFishNode.active=!0,this.pointFishNode.position=t},getListPosition:function(t,e,i){var n=[];n.push(t);for(var o=this.getNumberBall(t,e),s=0;s<o;s++){var a=this.findPositionInLine(n[n.length-1],e,i,this.distanceBall);a&&n.push(a)}return n.splice(0,1),n},instanceBall:function(){var t=void 0;return this.pool&&(t=this.pool.get()),t||(t=cc.instantiate(this.ballItemPrefab)),t},putAllBallToPool:function(){if(this.pool){var t=this.contentNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},findPositionInLine:function(t,e,i,n){var o=t.x,s=t.y,a=i.a,r=i.b,c=Math.pow(a,2)+1,h=2*(a*r-a*s-o),l=Math.pow(o,2)+Math.pow(s-r,2)-Math.pow(n,2),u=Math.pow(h,2)-4*c*l;if(u>=0){var d=(-h+Math.sqrt(u))/(2*c),m=(-h-Math.sqrt(u))/(2*c),f=a*d+r,p=a*m+r;if(this.checkPositionInlIne(t,e,d,f))return{x:d,y:f};if(this.checkPositionInlIne(t,e,m,p))return{x:m,y:p}}return null},getNumberBall:function(t,e){var i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),s=parseInt(o/this.distanceBall);return s-1>0?s-1:0},checkPositionInlIne:function(t,e,i,n){if(t.x<=i&&i<=e.x){if(t.y<=n&&n<=e.y)return!0;if(e.y<=n&&n<=t.y)return!0}if(e.x<=i&&i<=t.x){if(t.y<=n&&n<=e.y)return!0;if(e.y<=n&&n<=t.y)return!0}return!1}}),cc._RF.pop()},{}],FFRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"c7384wjoDRL4K7LF5v9FW5X","FFRankItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{noSprite:cc.Sprite,noSpriteFrames:[cc.SpriteFrame],noLabel:cc.Label,nameLabel:cc.Label,valueLabel:cc.Label,moneyNode:cc.Node,bgSprite:cc.Sprite,bg1SpriteFrame:cc.SpriteFrame,bg2SpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){this.initNo(e),this.nameLabel.string=t.nick_name;var i=t.money;this.valueLabel.string=n.numberWithCommas(i),this.bgSprite.spriteFrame=e%2==1?this.bg1SpriteFrame:this.bg2SpriteFrame},initNo:function(t){if(t<3){this.noSprite.node.active=!0,this.noLabel.node.active=!1;var e=this.noSpriteFrames[t];this.noSprite.spriteFrame=e}else this.noSprite.node.active=!1,this.noLabel.node.active=!0,this.noLabel.string=parseInt(t)+1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],FFRankLuck:[function(t,e,i){"use strict";cc._RF.push(e,"1a407SnuVVMwZSiC/NEFPDz","FFRankLuck"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t,this.FFRank=t.FFRank},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRankMegaPrize:[function(t,e,i){"use strict";cc._RF.push(e,"b7717aYiwpGfKeFYG6GcGYw","FFRankMegaPrize"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRankMiss:[function(t,e,i){"use strict";cc._RF.push(e,"bf2f4b/3H9NiYpRlnci2pr2","FFRankMiss"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRank:[function(t,e,i){"use strict";cc._RF.push(e,"c9eebbRF7tFyZiV0COZQTtn","FFRank");var n=t("./rank/FFRankLuck"),o=t("./rank/FFRankMiss"),s=t("./rank/FFRankMegaPrize");t("./../FireFishConstant");cc.Class({extends:cc.Component,properties:{rankLuckOnNode:cc.Node,rankLuckOffNode:cc.Node,rankMissOnNode:cc.Node,rankMissOffNode:cc.Node,rankMegaPrizeOnNode:cc.Node,rankMegaPrizeOffNode:cc.Node,rankLuckContentNode:cc.Node,rankMissContentNode:cc.Node,rankMegaPrizeContentNode:cc.Node,FFRankLuck:n,FFRankMiss:o,FFRankMegaPrize:s},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI,this.FFRankLuck.init(t),this.FFRankMiss.init(t),this.FFRankMegaPrize.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.resetAllData(),this.getData(),this.showRankMegaPrize()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.hideAllContents(),this.removeXhr()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active},getData:function(){var t=this;this.data=null;var e={token:this.FireFish.getToken(),user_id:this.FireFish.getUserId()};this.xhr=this.FireFish.api.getTopLongVuong(e,function(e){t.data=e.data;var i=t.data.big_win,n=t.data.collision_mega,o=t.data.fire;t.FFRankMegaPrize.initData(n),t.FFRankLuck.initData(i),t.FFRankMiss.initData(o)},function(t){})},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},onRankLuckClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.rankLuckOnNode.active=!0,this.rankLuckOffNode.active=!1,this.rankLuckContentNode.active=!0},onRankMissClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.rankMissOnNode.active=!0,this.rankMissOffNode.active=!1,this.rankMissContentNode.active=!0},onRankMegaPrizeClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.showRankMegaPrize()},showRankMegaPrize:function(){this.rankMegaPrizeOnNode.active=!0,this.rankMegaPrizeOffNode.active=!1,this.rankMegaPrizeContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},hideAllOnButtons:function(){this.rankLuckOnNode.active=!1,this.rankMissOnNode.active=!1,this.rankMegaPrizeOnNode.active=!1},showAllOffButtons:function(){this.rankLuckOffNode.active=!0,this.rankMissOffNode.active=!0,this.rankMegaPrizeOffNode.active=!0},hideAllContents:function(){this.rankLuckContentNode.active=!1,this.rankMissContentNode.active=!1,this.rankMegaPrizeContentNode.active=!1},resetAllData:function(){this.FFRankLuck.showLoadingNode(),this.FFRankLuck.removeAllData(),this.FFRankMegaPrize.showLoadingNode(),this.FFRankMegaPrize.removeAllData(),this.FFRankMiss.showLoadingNode(),this.FFRankMiss.removeAllData()}}),cc._RF.pop()},{"./../FireFishConstant":"FireFishConstant","./rank/FFRankLuck":"FFRankLuck","./rank/FFRankMegaPrize":"FFRankMegaPrize","./rank/FFRankMiss":"FFRankMiss"}],FFRoomItem:[function(t,e,i){"use strict";cc._RF.push(e,"490d63bwKRDrIdum/aHCBQa","FFRoomItem");var n=t("../../helper/Message"),o=t("../../util/FormatUtil"),s=t("../../object/RoomType");cc.Class({extends:cc.Component,properties:{minBetLabel:cc.Label},init:function(t,e){this.FireFish=t,this.data=e,this.minBetLabel.string=String.format(n.FIREFISH_MIN_BET,o.numberWithCommas(e.value),n.MONEY)},onLoad:function(){},onClick:function(){this.FireFish.Audio.playClick(),this.FireFish.showProcessingNode();var t=this.FireFish.getLastJoinedRoom().groupId;this.FireFish.sfsManager.joinRoom(t,this.data.value,s.MONEY_CODE)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],FFTutorial:[function(t,e,i){"use strict";cc._RF.push(e,"e21e0RwtOxMf5AlHpzK4D5K","FFTutorial"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active}}),cc._RF.pop()},{}],FireFishBasePlayer:[function(t,e,i){"use strict";cc._RF.push(e,"12523NZpjxCLrdA4kHOUW7B","FireFishBasePlayer");var n=t("../../../object/fire-fish/Bullet"),o=t("../../../util/FormatUtil"),s=t("../../../util/RandomUtil"),a=t("../../../helper/FireFishConfig"),r=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label,listGunPrefab:[cc.Prefab],gunNode:cc.Node},init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.gameNode=t.gameNode,this.timeFireInterval=a.TIME_FITE_INTERVAL,this.bulletSpeed=this.FireFish.getBulletSpeed(),this.gameWidth=this.gameNode.width,this.gameHeight=this.gameNode.height,this.currentGun=0,this.currentMoney=0;var e=this.gunNode.parent.convertToWorldSpace(this.gunNode);this.moveX=e.x,this.moveY=e.y+50,this.lastFiredTime=Date.now(),this.changeGun(this.currentGun)},onLoad:function(){},setMoney:function(t){this.currentMoney=t,this.moneyLabel.string=o.numberWithCommas(t)},addMoney:function(t){this.currentMoney+=t,this.setMoney(this.currentMoney)},minusMoney:function(t){this.currentMoney-=t,this.setMoney(this.currentMoney)},plusGun:function(){var t=this.listGunPrefab.length,e=parseInt(this.currentGun)+1;e>t&&(e-=t),this.changeGun(e),this.FireFishGame.sendChangeGun(e)},minusGun:function(){var t=this.listGunPrefab.length,e=parseInt(this.currentGun)-1;e<1&&(e+=t),this.changeGun(e),this.FireFishGame.sendChangeGun(e)},changeGun:function(t){this.gunNode.removeAllChildren(!0);var e=cc.instantiate(this.listGunPrefab[t-1]||this.listGunPrefab[t]);e&&(e.setPosition(0,0),e.parent=this.gunNode,this.gun=e.getComponent("Gun"),this.currentGun=t)},changeGunWithAnimation:function(t){this.changeGun(t)},fire:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.moveX=i.x,this.moveY=i.y}}var n=new cc.Vec2(this.moveX,this.moveY);this.checkTimeAndFire(n,!0)},checkTimeAndFire:function(t,e){var i=Date.now();if(i-this.lastFiredTime>=this.timeFireInterval){this.FireFish.AudioFireFish.playFireByGunType(this.currentGun),this.lastFiredTime=i;var o=this.gameNode.convertToNodeSpaceAR(t);o.x+=this.gameWidth/2,o.y+=this.gameHeight/2;var a=this.gunNode.convertToWorldSpaceAR(this.gunNode),c=this.gameNode.convertToNodeSpaceAR(a),h=180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI,l=75*Math.cos(h/180*Math.PI),u=75*Math.sin(h/180*Math.PI);c.x+=l,c.y+=u;var d="";if(e){var m=this.FireFish.getUser();d=r.SERVER_ID_1+"-"+m.user_id+"-"+(new Date).getTime()}else d=s.getRandomInt(1,50)+"-"+(new Date).getTime();var f=new n(this.FireFishGame,this.currentGun,c.x,c.y,h,this.bulletSpeed,d);this.FireFishGame.bulletManager.addBullet(f),this.gun.fire(),e&&(this.FireFishGame.sendFire(h,d),clearTimeout(this.timeOutAutoFire),this.FireFishGame.isAutoFire()&&(this.timeOutAutoFire=setTimeout(function(){this.fire()}.bind(this),this.timeFireInterval+50)))}},setRotateReceivedInSever:function(t){this.isPosition0()||this.isPosition1()?this.gunNode.angle=-(90-t):(this.isPosition2()||this.isPosition3())&&(this.gunNode.angle=-(270-t))},isPosition0:function(){return this.node.y<0},isPosition1:function(){return this.node.y<0},isPosition2:function(){return this.node.y>0},isPosition3:function(){return this.node.y>0}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/FireFishConfig":"FireFishConfig","../../../object/fire-fish/Bullet":"Bullet","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil"}],FireFishBulletManager:[function(t,e,i){"use strict";cc._RF.push(e,"efbf23+blZBTbBeFGEN2yUu","FireFishBulletManager");var n=t("../../util/Util"),o={bullets:[],bulletHandlerServer:[],init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.fishManager=t.fishManager,this.FireFishFormulaManager=t.FireFishFormulaManager},addBullet:function(t){this.bullets.push(t)},handlerBulletServer:function(t,e){var i={};i.id_bullet=t,i.sign=e,this.bulletHandlerServer.push(i)},getIdBulletFormServer:function(t){for(var e=0,i=this.bulletHandlerServer.length;e<i;e++){if(this.bulletHandlerServer[e].sign===t)return this.bulletHandlerServer.splice(e,1)[0].id_bullet}return null},update:function(t,e){for(var i=0;i<this.bullets.length;i++)this.bullets[i].update(t)},detroyAllBullet:function(){for(var t=0;t<this.bullets.length;t++)this.destroyBullet(this.bullets[t],t--)},destroyBullet:function(t,e){t.destroyNode(),this.bullets.splice(e,1)},destroyBulletWithAnimation:function(t){this.bullets[t].ScriptBaseBullet.explosion(),this.bullets.splice(t,1)},destroyBulletWithAnimationByBullet:function(t){for(var e in this.bullets)this.bullets[e].getIdBullet()==t.getIdBullet()&&(this.FireFish.AudioFireFish.playHit(),this.destroyBulletWithAnimation(e))},checkCollision:function(t,e,i,n){for(var o=0;o<e.length;o++)if(e[o].isIdle(i)&&this.FireFishFormulaManager.checkCollision(this.bullets[t],e[o],n))return this.FireFish.AudioFireFish.playHit(),this.destroyBulletWithAnimation(t),!0;return!1},reset:function(){n.clearArray(this.bullets)}};e.exports=o,cc._RF.pop()},{"../../util/Util":"Util"}],FireFishCenter:[function(t,e,i){"use strict";cc._RF.push(e,"ced6bHhKzRCDKt00YTG1xtx","FireFishCenter");var n=t("../../prefab/item/FFRoomItem"),o=t("./other/FFGameCardsList"),s=t("./other/FireFishHeader");cc.Class({extends:cc.Component,properties:{listRoomItem:[n],FFGameCardsList:o,FireFishHeader:s},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI,this.FFGameCardsList.init(t),this.FireFishHeader.init(t)},onLoad:function(){var t=this.getConfigFake();if(t&&t.length>0)for(var e in this.listRoomItem)this.listRoomItem[e].init(this.FireFish,t[e])},onRankClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showFFRankForm()},onEventClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showFFEventForm()},onHelpClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showFFTutorialForm()},getConfigFake:function(){return[{value:1},{value:10},{value:100},{value:1e3}]}}),cc._RF.pop()},{"../../prefab/item/FFRoomItem":"FFRoomItem","./other/FFGameCardsList":"FFGameCardsList","./other/FireFishHeader":"FireFishHeader"}],FireFishConfig:[function(t,e,i){"use strict";cc._RF.push(e,"689ffY/flZHxrKf31gtSUJB","FireFishConfig");e.exports={SHOT_FISH_URL_ORBIT:"game-firefish/orbit/Orbit.json",SHOT_FISH_TIME_UPDATE:.035,SCORE_POOL:10,BULLET_POOL:25,FISH_POOL:250,MY_PLAYER_SHOW_GUN_CHOISE:.15,FRAME_RATE:60,BULLET_WIDTH:20,BULLET_HEIGHT:20,TIME_FITE_INTERVAL:100,TIME_FISH_DIE:1,TIME_DELAY_WATTING:30,TIME_UPDATE_REMAIN_TIME:3e3,TIME_ROTATE_SCREEN:.2,TIME_MAX_ACCELERATION:3,TIME_MAX_DIFFERENCE:.1,TIME_ACCELERATION:1,GUNS_TYPE:[1,1,2,3,5,10,20],ID_BULLET_MYSELF:"myself",FISH_SCALE_COLLIDER:1,FISHS:[{name:"fish1",type:1,width:60,height:43,scale:1,size_with:50,size_height:30,off_set_x:0,off_set_y:0},{name:"fish2",type:2,width:75,height:55,scale:1,size_with:70,size_height:35,off_set_x:0,off_set_y:0},{name:"fish3",type:3,width:61,height:56,scale:1,size_with:50,size_height:40,off_set_x:0,off_set_y:0},{name:"fish4",type:4,width:156,height:82,scale:1,size_with:90,size_height:30,off_set_x:10,off_set_y:10},{name:"fish5",type:5,width:107,height:54,scale:1,size_with:60,size_height:30,off_set_x:-10,off_set_y:0},{name:"fish6",type:6,width:105,height:65,scale:1.7,size_with:90,size_height:40,off_set_x:0,off_set_y:10},{name:"fish7",type:7,width:93,height:65,scale:1,size_with:90,size_height:40,off_set_x:0,off_set_y:10},{name:"fish8",type:8,width:147,height:50,scale:1,size_with:140,size_height:50,off_set_x:0,off_set_y:0},{name:"fish9",type:9,width:128,height:170,scale:1.7,size_with:60,size_height:150,off_set_x:-10,off_set_y:0},{name:"fish10",type:10,width:222,height:147,scale:1,size_with:200,size_height:80,off_set_x:0,off_set_y:0},{name:"fish11",type:11,width:222,height:147,scale:1,size_with:200,size_height:80,off_set_x:0,off_set_y:0},{name:"fish12",type:12,width:128,height:77,scale:1,size_with:80,size_height:30,off_set_x:30,off_set_y:0},{name:"fish13",type:13,width:211,height:97,scale:1,size_with:200,size_height:60,off_set_x:0,off_set_y:0},{name:"fish14",type:14,width:220,height:165,scale:1,size_with:200,size_height:60,off_set_x:0,off_set_y:0},{name:"fish15",type:15,width:218,height:166,scale:1,size_with:200,size_height:60,off_set_x:0,off_set_y:0},{name:"fish16",type:16,width:136,height:136,scale:-1,size_with:100,size_height:60,off_set_x:0,off_set_y:0},{name:"fish17",type:17,width:350,height:200,scale:-1,size_with:300,size_height:100,off_set_x:0,off_set_y:0},{name:"fish18",type:18,width:70,height:70,scale:-1,size_with:50,size_height:20,off_set_x:5,off_set_y:0},{name:"fish19",type:19,width:70,height:35,scale:-1,size_with:50,size_height:20,off_set_x:5,off_set_y:0},{name:"fish200",type:200,width:377,height:239,scale:1,size_with:200,size_height:377,off_set_x:5,off_set_y:0}]},cc._RF.pop()},{}],FireFishConstant:[function(t,e,i){"use strict";cc._RF.push(e,"d7a1bIi05tKspc3/cOjJjXW","FireFishConstant");e.exports={WAITING:"WAITING",ROOM_INFO:"ROOM_INFO",START_ROUND:"START_ROUND",START_GAME:"START_GAME",GET_REMAIN_TIME:"GET_REMAIN_TIME",BROADCAST:"BROADCAST",NEW_MSG:"NEW_MSG",RESULT:"result",UPDATE_MEGA_PRIZE_MONEY:"UPDATE_MEGA_PRIZE_MONEY",GAME_STATUS_WAITING:"waiting",GAME_STATUS_PLAYING:"playing",ANGLE:"angle",TYPE:"type",POSITION:"position",GUN_TYPE:"gun_type",MONEY:"money",BULLET_ID:"bullet_id",SIGN_BULLET:"sign",FISH_ID:"fish_id",REQUEST_FISH_DIE:"REQUEST_FISH_DIE",REQUEST_FIRE:"REQUEST_FIRE",REQUEST_CHANGE_GUN:"REQUEST_CHANGE_GUN",REQUEST_CHANGE_POSITION:"REQUEST_CHANGE_POSITION",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_FIRE_HIT:"REQUEST_FIRE_HIT",REMAIN_TIME:"GET_REMAIN_TIME",REQUEST_ADD_FISHS:"REQUEST_ADD_FISHS",REQUEST_FISH_HIT:"REQUEST_FISH_HIT",REQUEST_FIRE_HIT_FAIL:"REQUEST_FIRE_HIT_FAIL",REQUEST_REMOVE_FISHS:"REQUEST_REMOVE_FISHS",GET_TOP:"GET_TOP"},cc._RF.pop()},{}],FireFishFormulaManager:[function(t,e,i){"use strict";cc._RF.push(e,"5b0ea3jaP1CN49iV/0KFH9v","FireFishFormulaManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},checkCollision:function(t,e,i){if(t.node&&e.node&&t.node._position&&e.node._position){var n=e.width*e.scale,o=e.height*e.scale,s=e.node.rotation*Math.PI/180,a=e.node.x,r=e.node.y,c=t.node.x,h=t.node.y,l=t.radius,u=this.getFowardBulletPositionByRate(t,.25,i),d=this.getFowardBulletPositionByRate(t,.5,i),m=this.getFowardBulletPositionByRate(t,.75,i);return this.checkCollisionRectangleToCircle(n,o,s,a,r,c,h,l)||this.checkCollisionRectangleToCircle(n,o,s,a,r,u.x,u.y,l)||this.checkCollisionRectangleToCircle(n,o,s,a,r,d.x,d.y,l)||this.checkCollisionRectangleToCircle(n,o,s,a,r,m.x,m.y,l)}return!1},checkCollisionRectangleToCircle:function(t,e,i,n,o,s,a,r){var c=void 0,h=void 0,l=void 0,u=void 0;return 0==i?(c=s,h=a,l=n,u=o):(c=Math.cos(i)*s-Math.sin(i)*a,h=Math.cos(i)*a+Math.sin(i)*s,l=Math.cos(i)*n-Math.sin(i)*o,u=Math.cos(i)*o+Math.sin(i)*n),this.checkCollisionRectangleToPoint(t,e,i,n,o,s,a)||this.checkCollisionRectangleToSegment(c,h,r,l-t/2,u+e/2,l+t/2,u+e/2)||this.checkCollisionRectangleToSegment(c,h,r,l+t/2,u+e/2,l+t/2,u-e/2)||this.checkCollisionRectangleToSegment(c,h,r,l+t/2,u-e/2,l-t/2,u-e/2)||this.checkCollisionRectangleToSegment(c,h,r,l-t/2,u-e/2,l-t/2,u+e/2)},checkCollisionRectangleToPoint:function(t,e,i,n,o,s,a){if(0==i)return Math.abs(n-s)<t/2&&Math.abs(o-a)<e/2;var r=Math.cos(i)*s-Math.sin(i)*a,c=Math.cos(i)*a+Math.sin(i)*s,h=Math.cos(i)*n-Math.sin(i)*o,l=Math.cos(i)*o+Math.sin(i)*n;return Math.abs(h-r)<t/2&&Math.abs(l-c)<e/2},checkCollisionRectangleToSegment:function(t,e,i,n,o,s,a){var r=Math.sqrt(Math.pow(n-s,2)+Math.pow(o-a,2)),c=void 0;if(0==r)return(c=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2)))<i;var h=((t-n)*(s-n)+(e-o)*(a-o))/(r*r);if(h<0)c=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2));else if(h>1)c=Math.sqrt(Math.pow(t-s,2)+Math.pow(e-a,2));else{var l=n+h*(s-n),u=o+h*(a-o);c=Math.sqrt(Math.pow(t-l,2)+Math.pow(e-u,2))}return c<i},getFowardBulletPositionByRate:function(t,e,i){var n=t.node.x-t.speed*Math.cos(t.angle*Math.PI/180)*i*60*e,o=t.node.y-t.speed*Math.sin(t.angle*Math.PI/180)*i*60*e;return new cc.Vec2(n,o)}}),cc._RF.pop()},{}],FireFishGame:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"c61e2R3S9VMt7fgQVCrrs3B","FireFishGame");var s=t("../../base/BaseController"),a=t("./other/FireFishMegaPrize"),r=t("./FireFishBulletManager"),c=t("./FishManager"),h=t("./FireFishFormulaManager"),l=t("./other/FFLockFish"),u=t("../../helper/Constant"),d=t("../../helper/FireFishConfig"),m=t("./FireFishConstant");cc.Class((o(n={extends:s,properties:{soundSprite:cc.Sprite,soundOnSpriteFrame:cc.SpriteFrame,soundOffSpriteFrame:cc.SpriteFrame,centerNode:cc.Node,gameFishsNode:cc.Node,gamePlayNode:cc.Node,gameNode:cc.Node,buttonAutoFireOnNode:cc.Node,buttonAutoFireOffNode:cc.Node,scorePrefab:cc.Prefab,fishPrefab:cc.Prefab,fishMegaPrizePrefab:cc.Prefab,bulletPrefab:cc.Prefab,myPlayersNode:[cc.Node],otherPlayersNode:[cc.Node],positionNode:[cc.Node],FireFishMegaPrize:a,FireFishFormulaManager:h,FFLockFish:l},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this._super(),this.scorePool=new cc.NodePool,this.fishPool=new cc.NodePool,this.bulletPool=new cc.NodePool;for(var t=0;t<d.SCORE_POOL;t++){var e=cc.instantiate(this.scorePrefab);this.scorePool.put(e)}for(var i=0;i<d.FISH_POOL;i++){var n=cc.instantiate(this.fishPrefab);this.fishPool.put(n)}for(var o=0;o<d.BULLET_POOL;o++){var s=cc.instantiate(this.bulletPrefab);this.bulletPool.put(s)}this.FFLockFish.init(this)},onEnable:function(){cc.V.resume||(cc.V.resume=cc.game.resume.bind(cc.game),cc.V.pause=cc.game.pause.bind(cc.game));var t=this;cc.game.pause=function(){t.bulletManager.detroyAllBullet(),t.onBackClick()},cc.game.resume=function(){this.FireFish.AudioFireFish.playMusicBackgroundGame(),this.FireFish.hideProcessingNode(),this.soundSprite.spriteFrame=this.FireFish.AudioFireFish.isSound?this.soundOnSpriteFrame:this.soundOffSpriteFrame,this.initData()},this.FireFish.AudioFireFish.playMusicBackgroundGame(),this.FireFish.hideProcessingNode(),this.soundSprite.spriteFrame=this.FireFish.AudioFireFish.isSound?this.soundOnSpriteFrame:this.soundOffSpriteFrame,this.initData(),this.setLockFish(!1),this.removeLockFishs()},onDisable:function(){cc.V.resume&&(cc.game.resume=cc.V.resume,cc.game.pause=cc.V.pause),clearInterval(this.timeoutStarParticle),this.FireFish.AudioFireFish.stopAll(),this.setAutoFire(!1),this.setLockFish(!1),this.removeLockFishs()},initData:function(){this.isMirror=!1,this.lastPosition=0,this.isPlaying=!0,this.lastTime=(new Date).getTime(),this.lastRemainTime=(new Date).getTime(),this.minBet=this.getLastJoinedRoom().variables[u.MIN_BET].value,this.time=0,this.lastDeltaTime=0,this.timeAcceleration=0,this.timeRemainAcceleration=0,this.isFirstFrameStartRound=!0,this.timeStartStamp=0,this.listPlayers=[],this.fishManager=c,this.fishManager.init(this),this.bulletManager=r,this.bulletManager.init(this),this.hideAllPlayers(),this.initMyPlayers(),this.initOtherPlayers(),this.initMyplayer(),this.initPlayers(),this.handleRoomInfo()},update:function(t){this.fishManager.update(t,this.time),this.bulletManager.update(t,this.time)},initMyPlayers:function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].getComponent("FireFishMyPlayer").init(this)},initOtherPlayers:function(){for(var t in this.otherPlayersNode)this.otherPlayersNode[t].getComponent("FireFishOtherPlayer").init(this)},hideAllPlayers:function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].active=!1,this.otherPlayersNode[t].active=!1},initMyplayer:function(){var t=this.getListUserInRoom();for(var e in t)if(t[e].isItMe){this.mySelf=t[e];var i=this.mySelf.variables.position.value;this.isMirror=this.checkMirrorByPosition(i),this.lastPosition=i;break}},initPlayers:function(){this.hideAllPlayers();var t=this.getListUserInRoom();for(var e in t)t[e].isItMe?this.addMyPlayer(t[e]):this.addPlayer(t[e])},addMyPlayer:function(t){var e=0,i=0;t.variables.money&&(e=t.variables.money.value),t.variables.gun_type&&(i=t.variables.gun_type.value);var n=this.getMirrorPositionByUser(t);t.node=this.myPlayersNode[n],t.node.active=!0;var o=t.node.getComponent("FireFishBasePlayer"),s=t.node.getComponent("FireFishMyPlayer");t.BasePlayer=o,t.MyPlayer=s,o.user=t,s.user=t,t.BasePlayer.setMoney(e),t.BasePlayer.changeGun(i),this.listPlayers.push(t),this.checkShowPositionButton()},addPlayer:function(t){var e=0,i=0;t.variables.money&&(e=t.variables.money.value),t.variables.gun_type&&(i=t.variables.gun_type.value);var n=this.getMirrorPositionByUser(t);t.node=this.otherPlayersNode[n],t.node.active=!0;var o=t.node.getComponent("FireFishBasePlayer"),s=t.node.getComponent("FireFishOtherPlayer");t.BasePlayer=o,t.OtherPlayer=s,o.user=t,s.user=t,t.BasePlayer.setMoney(e),t.BasePlayer.changeGun(i),this.listPlayers.push(t),this.checkShowPositionButton()},removePlayer:function(t){var e=t.variables.user_id.value,i=this.getPlayerByUserId(e);i&&(this.removePlayerFromListByPlayer(i),i.node.active=!1),this.checkShowPositionButton()},changeMoney:function(t){var e=this.getPlayerByUserId(t.variables.user_id.value),i=t.variables.money.value;e&&e.BasePlayer.setMoney(i)},changePosition:function(t){if(t.variables.position)if(this.removePlayer(t),t.isItMe){this.addMyPlayer(t);var e=this.mySelf.variables.position.value;this.isMirror=this.checkMirrorByPosition(e),this.rotateScreen(),this.lastPosition=e,this.setAutoFire(!1),this.setLockFish(!1),this.removeLockFishs()}else this.addPlayer(t)},changeGunType:function(t){if(t.variables.gun_type&&!t.isItMe){var e=this.getPlayerByUserId(t.variables.user_id.value),i=t.variables.gun_type.value;e&&e.BasePlayer.changeGun(i)}},checkShowPositionButton:function(){for(var t in this.positionNode)this.myPlayersNode[t].active||this.otherPlayersNode[t].active?this.positionNode[t].active=!1:this.positionNode[t].active=!0},onBackClick:function(){this.FireFish.AudioFireFish.playClick(),this.sendRequest.send(m.REQUEST_LEFT_ROOM),this.FireFish.showProcessingNode()},onSelectPositon0Click:function(){this.FireFish.AudioFireFish.playClick();var t=0;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon1Click:function(){this.FireFish.AudioFireFish.playClick();var t=1;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon2Click:function(){this.FireFish.AudioFireFish.playClick();var t=2;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon3Click:function(){this.FireFish.AudioFireFish.playClick();var t=3;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSoundClick:function(){this.FireFish.Audio.setSoundClick(),this.FireFish.AudioFireFish.setSound(this.FireFish.Audio.isSound),this.FireFish.AudioFireFish.playClick(),this.FireFish.AudioFireFish.playMusicBackgroundGame(),this.soundSprite.spriteFrame=this.FireFish.AudioFireFish.isSound?this.soundOnSpriteFrame:this.soundOffSpriteFrame},onAutoFireClick:function(){(this.setAutoFire(!this.isAutoFire()),this.isAutoFire())&&this.getPlayerByUserId(this.getUser().user_id).BasePlayer.fire()},onLockFish:function(){this.setLockFish(!this.isLockFish()),this.removeLockFishs(),this.isLockFish()&&(this.FireFish.showToast("Ch\u1ecdn c\xe1 \u0111\u1ec3 b\u1eafn"),this.fishManager.addAllEventClickFish())},removeLockFishs:function(){this.FFLockFish.removeLockFish(),this.fishManager.removeAllLockFish(),this.fishManager.removeAllEventClickFish()},onUserEnterRoom:function(t){this.addPlayer(t.user)},onUserExitRoom:function(t){console.log("onUserExitRoom"),this.removePlayer(t.user)},onPingPong:function(t){this.handlerPingPong(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,n=0;n<i.length;n++)switch(i[n]){case m.POSITION:this.changePosition(e);break;case m.GUN_TYPE:this.changeGunType(e);break;case m.MONEY:this.changeMoney(e)}},onResponse:function(t){t.timeReceived=(new Date).getTime();var e=t.params;switch(t.cmd){case m.REQUEST_ADD_FISHS:this.handlerAddFishs(e);break;case m.REQUEST_FIRE:this.handlerFire(e);break;case m.REQUEST_FIRE_HIT_FAIL:this.handlerFireHitFail(e);break;case m.REQUEST_FISH_DIE:this.handlerFishDied(e);break;case m.REQUEST_REMOVE_FISHS:break;case m.UPDATE_MEGA_PRIZE_MONEY:this.handlerUpdateMegaPrizeMoney(e);break;case m.WAITING:this.handlerWaiting(e);break;case m.START_GAME:this.handlerStartGame(e)}},handlerWaiting:function(t){},handleRoomInfo:function(){this.reset();var t=this.getRoomInfo(),e=t.time_receive,i=(t.data||t.params.data).fishs;this.fishManager.addListFishs(i,this.isMirror,e),this.fishManager.convertListFishsByMirror(this.isMirror)},handlerFishDied:function(t){var e=t.data,i=e.fish_id,n=e.user_id,o=e.money,s=this.fishManager.getFishById(i);if(s){var a=this.getPlayerByUserId(n);if(a&&s.node){var r=a.node.getPosition(),c=s.node.getPosition();if(this.isPlaying){var h=null;(h=this.scorePool.size()>0?this.scorePool.get():cc.instantiate(this.scorePrefab)).scale=2,h.getComponent("Score").init(this,a,o,c,r),this.FireFish.AudioFireFish.playGem()}}this.fishManager.destroyFishWidthAnimation(s)}},handlerRemoveFish:function(t){var e=t.data.fishs;for(var i in e){var n=e[i],o=this.fishManager.getFishById(n);o&&this.fishManager.destroyFishWidthAnimation(o)}},handlerFire:function(t){if(this.isPlaying&&t.status){var e=t.data.user_id,i=t.data.angle,n=t.data.id,o=t.data.sign,s=this.getPlayerByUserId(e);this.isMirror&&(i=180+i)>360&&(i-=360),s&&(s.isItMe?this.myPlayerHandlerFire(n,o):this.playerFire(s,i))}},handlerFireHitFail:function(t){var e=t.data;this.listFireHitFail||(this.listFireHitFail=[]),this.listFireHitFail.push(e)},playerFire:function(t,e){var i=t.BasePlayer.gunNode,n=i.convertToWorldSpaceAR(i),o=n.x+100*Math.cos(e*Math.PI/180),s=n.y+100*Math.sin(e*Math.PI/180),a=new cc.Vec2(o,s);t.BasePlayer.setRotateReceivedInSever(e),t.BasePlayer.checkTimeAndFire(a,!1,!0)},myPlayerHandlerFire:function(t,e){this.bulletManager.handlerBulletServer(t,e);for(var i=0,n=this.listDataSaveFireHit.length;i<n;i++){var o=this.listDataSaveFireHit[i];if(o[m.SIGN_BULLET]===e){(t=this.bulletManager.getIdBulletFormServer(e))&&(o[m.BULLET_ID]=t,this.sendRequest.send(m.REQUEST_FIRE_HIT,o),this.sendFireHitFail(o[m.FISH_ID])),this.listDataSaveFireHit.splice(i,1)[0];break}}},handlerAddFishs:function(t){var e=t.data.fishs;this.fishManager.addListFishs(e,this.isMirror)},handlerUpdateMegaPrizeMoney:function(t){var e=t.data.money;this.FireFishMegaPrize.setMoney(e)},sendFire:function(t,e){var i={};this.isMirror&&(t=180+t)>360&&(t-=360),i[m.ANGLE]=t,i[m.SIGN_BULLET]=e,this.sendRequest.send(m.REQUEST_FIRE,i)},sendChangeGun:function(t){var e={};e[m.TYPE]=t,this.sendRequest.send(m.REQUEST_CHANGE_GUN,e)},sendChangePosition:function(t){var e={};e[m.POSITION]=t,this.sendRequest.send(m.REQUEST_CHANGE_POSITION,e)},sendFireHit:function(t,e){var i=t.getIdFish(),n={};i&&i&&(n[m.SIGN_BULLET]=e,n[m.FISH_ID]=i,this.sendRequestFireHit(n))},sendRequestFireHit:function(t){if(this.checkDataSaveFireHit(t[m.SIGN_BULLET])){var e=this.bulletManager.getIdBulletFormServer(t[m.SIGN_BULLET]);e?(t[m.BULLET_ID]=e,this.sendRequest.send(m.REQUEST_FIRE_HIT,t),this.sendFireHitFail(t[m.FISH_ID])):this.listDataSaveFireHit.push(t),this.listDataSaveFireHit.length>50&&this.listDataSaveFireHit.splice(0,1)}},sendFireHitFail:function(t){this.listFireHitFail||(this.listFireHitFail=[]);for(var e=this.listFireHitFail.length>2?2:this.listFireHitFail.length-1,i=0;i<e;i++){var n=this.listFireHitFail[i];n&&(n[m.FISH_ID]=t,this.sendRequest.send(m.REQUEST_FIRE_HIT,n))}this.listFireHitFail.splice(0,e)},checkDataSaveFireHit:function(t){this.listDataSaveFireHit||(this.listDataSaveFireHit=[]);for(var e=0,i=this.listDataSaveFireHit.length;e<i;e++){if(this.listDataSaveFireHit[e][m.SIGN_BULLET]===t)return!1}return!0},gunLockFish:function(t){this.getMyPlayerNode().getComponent("FireFishMyPlayer").onTouchMoved()},getMirrorPositionByUser:function(t){var e=0;return t.variables.position&&(e=t.variables.position.value),this.isMirror&&(e=this.getPositionMirror(e)),e},getMyPlayerNode:function(){var t=this.getMirrorPositionByUser(this.getSFSMySelf());return this.myPlayersNode[t]},rotateScreen:function(){var t=this.mySelf.variables.position.value;this.isTop(this.lastPosition)&&this.isTop(t)||this.isBottom(this.lastPosition)&&this.isBottom(t)||(this.centerNode.stopAllActions(),this.isTop(t)?this.centerNode.runAction(cc.sequence(cc.rotateTo(d.TIME_ROTATE_SCREEN,180),cc.callFunc(function(){this.initScreen()},this))):this.isBottom(t)&&this.centerNode.runAction(cc.sequence(cc.rotateTo(d.TIME_ROTATE_SCREEN,180),cc.callFunc(function(){this.initScreen()},this))))},initScreen:function(){this.centerNode.angle=0,this.fishManager.convertListFishsByMirror(this.isMirror),this.bulletManager.detroyAllBullet(),this.initPlayers()},isTop:function(t){return 2==t||3==t},isBottom:function(t){return 0==t||1==t},getPositionMirror:function(t){switch(t){case 0:t=2;break;case 1:t=3;break;case 2:t=0;break;case 3:t=1}return t},setAutoFire:function(t){this.buttonAutoFireOnNode.active=t,this.buttonAutoFireOffNode.active=!t},isAutoFire:function(){return this.buttonAutoFireOnNode.active},setLockFish:function(t){this.lockFish=t},isLockFish:function(){return this.lockFish},checkMirrorByPosition:function(t){return this.isTop(t)},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].variables.user_id.value===t)return this.listPlayers[e];return null},removePlayerFromListByPlayer:function(t){for(var e=0,i=this.listPlayers.length;e<i;e++)if(this.listPlayers[e]===t)return void this.listPlayers.splice(e,1)}},"hideAllPlayers",function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].active=!1;for(var e in this.otherPlayersNode)this.otherPlayersNode[e].active=!1}),o(n,"reset",function(){this.time=0,this.fishManager.reset(),this.gameFishsNode.removeAllChildren(!0),this.listDataSaveFireHit=[],this.listDataSendFireHit=[]}),n)),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/FireFishConfig":"FireFishConfig","./FireFishBulletManager":"FireFishBulletManager","./FireFishConstant":"FireFishConstant","./FireFishFormulaManager":"FireFishFormulaManager","./FishManager":"FishManager","./other/FFLockFish":"FFLockFish","./other/FireFishMegaPrize":"FireFishMegaPrize"}],FireFishHeader:[function(t,e,i){"use strict";cc._RF.push(e,"74ca300xZNMc59S9dn/15zk","FireFishHeader");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){},onEnable:function(){this.loadUserInfo()},loadUserInfo:function(){var t=this.FireFish.getUser();if(t){var e=t.nick_name,i=t.avatar;this.setNicknameLabel(e),this.setAvatar(i),this.updateMoneyGold()}},setNicknameLabel:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var n=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=n}})},updateMoneyGold:function(){var t=this.FireFish.getSFSMySelf(),e=t.variables.money.value,i=t.variables.gold.value;this.setMoneyLabel(e),this.setGoldLabel(i)},setMoneyLabel:function(t){this.moneyLabel.string=n.numberWithCommas(t)},setGoldLabel:function(t){this.goldLabel.string=n.numberWithCommas(t)},onBackClick:function(){this.FireFish.AudioFireFish.playClick(),this.FireFish.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME),this.FireFish.showProcessingNode()},onRechargeMoneyClick:function(){this.FireFish.showDialogMessage(s.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},onRechargeGoldClick:function(){this.FireFishUI.showRechargeForm(),this.FireFish.Recharge.showRechargeGold()},onSettingClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showSettingForm()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],FireFishMegaPrize:[function(t,e,i){"use strict";cc._RF.push(e,"34928/QdaBCR4fAQlCX0hhc","FireFishMegaPrize");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label},init:function(t){this.FireFish=t},onLoad:function(){this.timeOut=null,this._animation=this.node.getComponent(cc.Animation)},setMoney:function(t){this.moneyLabel.string=t?n.numberWithCommas(t):"???"},show:function(){clearTimeout(this.timeOut),this._animation||(this._animation=this.node.getComponent(cc.Animation)),this.node.active=!0,this.node.setPosition(0,0),this.node.opacity=255,this.node.rotation=0,this._animation.play("ShowMegaPrizeAnimation")},hide:function(){clearTimeout(this.timeOut),this.node&&(this._animation||(this._animation=this.node.getComponent(cc.Animation)),this.node.active&&(this.timeOut=setTimeout(function(){this.node&&(this.node.active=!1)}.bind(this),1e3)),this._animation.play("HideMegaPrizeAnimation"))}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],FireFishMyPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"38c02/ypmtMrKSZsg4J004a","FireFishMyPlayer");var n=t("../../../helper/FireFishConfig"),o=t("../../../object/fire-fish/GunChoise"),s=t("../../../object/fire-fish/MyPlayerHover"),a=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{listGunChoise:[o],MyPlayerHover:s},onLoad:function(){},init:function(t){for(var e in this.FireFish=t.FireFish,this.FireFishUI=this.FireFish.FireFishUI,this.FireFishGame=t,this.gameNode=t.gameNode,this.BasePlayer=this.node.getComponent("FireFishBasePlayer"),this.BasePlayer.init(t),this.gunNode=this.BasePlayer.gunNode,this.listGunChoise)this.listGunChoise[e].init(t,this,parseInt(e)+1);this.MyPlayerHover&&this.MyPlayerHover.init(t,this),this.fireInterval=null,this.rotationListener=null,this.timeFireInterval=n.TIME_FITE_INTERVAL,this._onTouchBegan=this.onTouchBegan.bind(this),this._onTouchMoved=this.onTouchMoved.bind(this),this._onTouchEnded=this.onTouchEnded.bind(this),this.changeGun(0)},onEnable:function(){this.addTouchEvents()},onDisable:function(){this.removeTouchEvents(),clearInterval(this.fireInterval)},addTouchEvents:function(){this.rotationListener=cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded}),this.gameNode)},removeTouchEvents:function(){cc.eventManager.removeListener(this.rotationListener)},onTouchBegan:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.BasePlayer.moveX=i.x,this.BasePlayer.moveY=i.y}var n=new cc.Vec2(this.BasePlayer.moveX,this.BasePlayer.moveY);this.gunNode.angle=-this.getAngleGunByTouchPosition(n)}else this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY(),this.gunNode.angle=-this.getAngleGunByTouchPosition(t);return this.checkMoneyAndFire(t),this.fireInterval||(this.fireInterval=setInterval(function(){this.checkMoneyAndFire(t)}.bind(this),this.timeFireInterval+50)),!0},onTouchMoved:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.BasePlayer.moveX=i.x,this.BasePlayer.moveY=i.y}var n=new cc.Vec2(this.BasePlayer.moveX,this.BasePlayer.moveY);this.gunNode.angle=-this.getAngleGunByTouchPosition(n)}else this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY(),this.gunNode.angle=-this.getAngleGunByTouchPosition(t)},onTouchEnded:function(t){this.FireFishGame.isLockFish()||(this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY()),clearInterval(this.fireInterval),this.fireInterval=null},getAngleGunByTouchPosition:function(t){var e=t.getLocation?t.getLocation():t,i=this.gameNode.convertToNodeSpaceAR(e),n=this.gunNode.convertToWorldSpaceAR(this.gunNode.getPosition()),o=this.gameNode.convertToNodeSpaceAR(n),s=180*Math.atan2(i.y-o.y,i.x-o.x)/Math.PI;return s>=360&&(s-=360),s=90-s},checkMoneyAndFire:function(t){clearTimeout(this.showEnoughMoneyTimeout),this.checkEnoughMoney()?this.BasePlayer.fire(t):this.FireFish.RechargeMessage.node.active||this.FireFish.FireFishUI.showRechargeMessageForm()},checkEnoughMoney:function(){var t=this.BasePlayer.currentGun,e=n.GUNS_TYPE[t]*this.FireFishGame.minBet;return parseInt(this.FireFish.getMoney())>=e},changeGun:function(t){this.setActiveGun(t-1),this.BasePlayer.changeGun(t)},changeGunWithAnimation:function(t){this.setActiveGun(t-1),this.BasePlayer.changeGunWithAnimation(t)},setActiveGun:function(t){for(var e=0;e<this.listGunChoise.length;e++)parseInt(e)===parseInt(t)?this.listGunChoise[e].setActive():this.listGunChoise[e].setNormal()},onPlusGunClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.BasePlayer.plusGun(),this.setActiveGun(this.BasePlayer.currentGun)},onMinusGunClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.BasePlayer.minusGun(),this.setActiveGun(this.BasePlayer.currentGun)},onAddDiamonClick:function(){this.FireFish.showDialogMessage(a.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},showGunChoise:function(){for(var t in this.listGunChoise)this.listGunChoise[t].show()},hideGunChoise:function(){for(var t in this.listGunChoise)this.listGunChoise[t].hide()},isShowGunChoise:function(){for(var t in this.listGunChoise)if(this.listGunChoise[t].node.active)return!0;return!1}}),cc._RF.pop()},{"../../../helper/FireFishConfig":"FireFishConfig","../../../helper/Message":"Message","../../../object/fire-fish/GunChoise":"GunChoise","../../../object/fire-fish/MyPlayerHover":"MyPlayerHover"}],FireFishOtherPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"ae673DHAuhKbo3lgk2wd4zu","FireFishOtherPlayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t){this.FireFish=t,this.BasePlayer=this.node.getComponent("FireFishBasePlayer"),this.BasePlayer.init(t)}}),cc._RF.pop()},{}],FireFishUI:[function(t,e,i){"use strict";cc._RF.push(e,"413cchpYPdDzJBCR5VjikCi","FireFishUI");var n=t("../../util/RandomUtil"),o=t("../../prefab/Toast"),s=t("../../ui/Processing"),a=t("../../ui/dialog/DialogMessage");cc.Class({extends:cc.Component,properties:{gameNode:cc.Node,centerNode:cc.Node,ffEventFormNode:cc.Node,ffRankFormNode:cc.Node,ffTutorialFormNode:cc.Node,rechageMessageFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,backgroundSprite:cc.Sprite,backgroundsSpriteFrame:[cc.SpriteFrame],Toast:o,Processing:s,DialogMessage:a},onLoad:function(){this.randomBackground(),this.ffEventDialogForm=this.ffEventFormNode.getComponent("DialogForm"),this.ffRankDialogForm=this.ffRankFormNode.getComponent("DialogForm"),this.ffTutorialDialogForm=this.ffTutorialFormNode.getComponent("DialogForm"),this.rechargeMessageDialogForm=this.rechageMessageFormNode.getComponent("DialogForm"),this.settingeDialogForm=this.settingFormNode.getComponent("DialogForm"),this.logOutDialogForm=this.settingFormNode.getComponent("DialogForm")},showGameNode:function(){this.gameNode.active=!0,this.centerNode.active=!1},showCenterNode:function(){this.gameNode.active=!1,this.centerNode.active=!0},randomBackground:function(){var t=this.backgroundsSpriteFrame.length,e=n.getRandomInt(0,t-1);this.backgroundSprite.spriteFrame=this.backgroundsSpriteFrame[e]},showFFEventForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffEventDialogForm.showDialog(t)},hideFFEventForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffEventDialogForm.hideDialog(t)},showFFRankForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffRankDialogForm.showDialog(t)},hideFFRankForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffRankDialogForm.hideDialog(t)},showFFTutorialForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffTutorialDialogForm.showDialog(t)},hideFFTutorialForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffTutorialDialogForm.hideDialog(t)},showRechargeForm:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},hideRechargeForm:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},showRechargeMessageForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.rechargeMessageDialogForm.showDialog(t)},hideRechargeMessageForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.rechargeMessageDialogForm.hideDialog(t)},showSettingForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.settingeDialogForm.showDialog(t)},hideSettingForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.settingeDialogForm.hideDialog(t)},showLogOutForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.logOutDialogForm.showDialog(t)},hideLogOutForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.logOutDialogForm.hideDialog(t)},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.DialogMessage.showMessage(t,e)},hideDialogMessage:function(){this.DialogMessage.hideDialog()},showProcessingNode:function(){this.Processing.node.active=!0},hideProcessingNode:function(){this.Processing.node.active=!1}}),cc._RF.pop()},{"../../prefab/Toast":"Toast","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","../../util/RandomUtil":"RandomUtil"}],FireFish:[function(t,e,i){"use strict";cc._RF.push(e,"e6edanrTO5Gpp6cgyC6ZuMP","FireFish");var n=t("../../base/BaseScene"),o=t("./FireFishGame"),s=t("./FireFishCenter"),a=t("./FireFishUI"),r=t("./form/FFEvent"),c=t("./form/FFRank"),h=t("./form/FFTutorial"),l=t("../../prefab/form/Tutorial"),u=t("../../prefab/form/Setting"),d=t("../../prefab/form/LogOut"),m=t("../../prefab/News"),f=t("./form/RechargeMessage"),p=t("../../prefab/Toast"),_=t("../../ui/dialog/DialogMessage"),S=t("../../ui/Processing"),g=t("../../helper/Constant"),C=t("../../helper/Message"),N=t("../../util/FormatUtil"),E=(t("../../util/Util"),t("../../helper/FireFishConfig")),T=t("./FireFishConstant"),I=t("../../object/Audio"),v=t("../../object/AudioFireFish");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,FireFishUI:a,FireFishGame:o,FireFishCenter:s,FFEvent:r,FFRank:c,FFTutorial:h,Tutorial:l,RechargeMessage:f,Setting:u,LogOut:d,News:m,Audio:I,AudioFireFish:v,Toast:p,DialogMessage:_,Processing:S},onLoad:function(){this._super(),this.setSceneName(g.SCENE_GAME_FIRE_FISH),this.setSceneGameSlot(!1),this.sfsManager.setController(this),this.FireFishGame.init(this),this.FireFishCenter.init(this),this.FFEvent.init(this),this.FFRank.init(this),this.FFTutorial.init(this),this.Tutorial.init(this),this.RechargeMessage.init(this),this.Setting.init(this),this.LogOut.init(this),this.sfsManager.removeEventResponse(),this.addEventResponse()},start:function(){this.showProcessingNode(),this.FireFishUI.showCenterNode(),this.initOrbitFireFish()},initOrbitFireFish:function(){var t=this;this.Orbit=this.getOrbitFireFish(),this.Orbit?this.hideProcessingNode():cc.loader.loadRes(E.SHOT_FISH_URL_ORBIT,cc.JsonAsset,function(e,i){t.Orbit=i.json,t.setOrbitFireFish(t.Orbit),t.hideProcessingNode()})},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.onUserEnterRoom=this.onUserEnterRoom.bind(this),this.onUserExitRoom=this.onUserExitRoom.bind(this),this.onUserVarsUpdate=this.onUserVarsUpdate.bind(this),this.onPingPong=this.onPingPong.bind(this),this.onResponse=this.onResponse.bind(this),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventResponse:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},onUserEnterRoom:function(t){this.FireFishGame.node.active&&this.FireFishGame.onUserEnterRoom(t)},onUserExitRoom:function(t){this.FireFishGame.node.active&&this.FireFishGame.onUserExitRoom(t)},onPingPong:function(t){this.FireFishGame.node.active&&this.FireFishGame.onPingPong(t)},onUserVarsUpdate:function(t){if(this.FireFishGame.node.active)this.FireFishGame.onUserVarsUpdate(t);else{var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case T.MONEY:case T.GOLD:this.FireFishCenter.FireFishHeader.updateMoneyGold()}}},onResponse:function(t){t.timeReceived=(new Date).getTime();var e=t.params;switch(t.cmd){case g.ROOM_INFO:t.time_receive=(new Date).getTime(),this.setRoomInfo(t),this.setBulletSpeed(30),this.FireFishUI.showGameNode();break;case T.BROADCAST:this.handlerBroadCast(e);break;case g.MINIGAME_REQUEST:case g.GET_TOP:this.MiniGame&&this.MiniGame.handleRequest(e);break;case g.REQUEST_PLAYER_RECEIVE_ALERT:this.handleAlert(e);break;case g.REQUEST_RECHARGE_GOLD:this.handleRechargeGold(e);break;case g.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.handleReceiveNewMessage(e);break;case g.REQUEST_ACHIVEMENTED_QUEST:this.handleAchivementedQuest(e);break;case g.NEWS:this.handlerNews(e);break;case g.JOIN_ROOM_ERROR:this.handleJoinRoomError(e);break;case g.UPDATE_MINIGAME_FREE:this.MiniGame&&this.MiniGame.initNumberSpinFreeGame(e)}this.FireFishGame.node.active&&this.FireFishGame.onResponse(t)},handlerBroadCast:function(t){var e=t.data,i=String.format(C.FIREFISH_FISHED,e.nick_name,e.fish_name,N.numberWithCommas(e.amount),C.MONEY.toUpperCase());this.News.addNewsNode(i)},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(C.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleReceiveNewMessage:function(t){this.getUser().unread_message++,this.showNotificationMessage(C.MAIL_NOTIFICATION)},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handlerNews:function(t){this.News.addNews(t)},handleJoinRoomError:function(t){this.hideProcessingNode(),this.showDialogMessage(C.TITLE_FAILED,t.msg)},showToast:function(t){this.Toast.showToast(t)},showProcessingNode:function(){this.FireFishUI.showProcessingNode()},hideProcessingNode:function(){this.FireFishUI.hideProcessingNode()},showDialogMessage:function(t,e){this.FireFishUI.showDialogMessage(t,e)}},"showToast",function(t){this.FireFishUI.showToast(t)})),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/FireFishConfig":"FireFishConfig","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/AudioFireFish":"AudioFireFish","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util","./FireFishCenter":"FireFishCenter","./FireFishConstant":"FireFishConstant","./FireFishGame":"FireFishGame","./FireFishUI":"FireFishUI","./form/FFEvent":"FFEvent","./form/FFRank":"FFRank","./form/FFTutorial":"FFTutorial","./form/RechargeMessage":"RechargeMessage"}],FishManager:[function(t,e,i){"use strict";cc._RF.push(e,"7acd7Sf/1ZKaYtOesTvA3n2","FishManager");var n=t("../../object/fire-fish/Fish"),o=t("../../util/Util"),s={fishs:[],isMirror:!1,init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height},addListFishs:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.isMirror=e;for(var o=0,s=t.length;o<s;o++){var a=new n(this.FireFishGame,t[o],e,o,i);this.fishs.push(a)}},convertListFishsByMirror:function(t){if(this.isMirror!==t){this.isMirror=t;for(var e=0,i=this.fishs.length;e<i;e++)this.fishs[e].convertListPointByMirror(t)}},destroyFishWidthAnimation:function(t){for(var e=0,i=this.fishs.length;e<i;e++)t===this.fishs[e]&&t.dead()},getFishById:function(t){for(var e=0,i=this.fishs.length;e<i;e++)if(this.fishs[e].getIdFish()===t)return this.fishs[e]},convertListPoint:function(t,e){for(var i=0,n=t.length;i<n;i++)e&&(t[i].y=this.gameHeight-t[i].y,t[i].x=this.gameWidth-t[i].x),t[i].x-=this.gameWidth/2,t[i].y-=this.gameHeight/2},update:function(t,e){for(var i=0,n=this.fishs.length;i<n;i++)this.fishs[i].update(t,i);this.removeFishsOutOfIdle(e)},addAllEventClickFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].baseFishController&&this.fishs[t].baseFishController.addEventClick()},getFishLock:function(){for(var t=0,e=this.fishs.length;t<e;t++)if(this.fishs[t].isLockFish())return this.fishs[t];return null},removeAllEventClickFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].baseFishController&&this.fishs[t].baseFishController.removeEventClick()},removeAllLockFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].setLockFish(!1)},removeFishsOutOfIdle:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t].isExpiredIdle()&&this.fishs.splice(t,1)},reset:function(){for(var t=0,e=this.fishs.length;t<e;t++)this.fishs[t].destroyNode();o.clearArray(this.fishs)},removeFishInArray:function(t){for(var e=0,i=this.fishs.length;e<i;e++)if(this.fishs[e].id===t)return void this.fishs.splice(e,1)},getTypeFishChange:function(t){switch(t){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 12;case 7:return 17;case 8:return 8;case 9:return 9;case 10:return 13;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 18;case 15:return 19;case 16:return 200;default:return t}}};e.exports=s,cc._RF.pop()},{"../../object/fire-fish/Fish":"Fish","../../util/Util":"Util"}],Fish:[function(t,e,i){"use strict";cc._RF.push(e,"5fd48pms+pJZpCGdoaiKt74","Fish");var n=t("../../helper/FireFishConfig");t("./formula/FormulaBezier");function o(t,e,i,n,o){this.FireFishGame=t,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height,this.fishManager=t.fishManager,this.fishs=t.fishManager.fishs,this.fishPrefab=t.fishPrefab,this.fishMegaPrizePrefab=t.fishMegaPrizePrefab,this.fishPool=t.fishPool,this.isMirror=i,this.id=e.id,this.money=e.money||200,this.orbitId=e.orbit_id,this.dicrect=e.dicrect,this.offsetTime=e.offset_time,this.type=e.type,this.offsetX=e.offset_x,this.offsetY=e.offset_y,this.currentOrbit=e.current_orbit,this.index=n;var s=o?((new Date).getTime()-o)/1e3:0;this.orbit=this.getOrbitById(this.orbitId),this.listPointDefault=this.orbit.points,this.listPoint=this.convertListPoint(this.listPointDefault,this.isMirror),this.totalTime=this.getTotalTimeByListOrbits(this.listPointDefault),this.timeElapsed=this.getTimeElapsedByCurrentOrbit(this.currentOrbit)+s,this.isDead=!1,this.fishConfig=this.getFishConfigByType(this.type),this.width=.3*this.fishConfig.width,this.height=.3*this.fishConfig.height,this.scale=this.fishConfig.scale?this.fishConfig.scale:1,this.scale*=-1,this.isShow=!1,this.setLockFish(!1)}o.prototype.convertListPointByMirror=function(t){this.isMirror!==t&&(this.isMirror=t,this.listPoint=this.convertListPoint(this.listPointDefault,t))},o.prototype.convertListPoint=function(t,e){for(var i=[],n=0,o=t.length;n<o;n++){var s=t[n].y,a=t[n].x,r=t[n].r;e&&(s=this.gameWidth-s,a=this.gameHeight-a,r-=180),s-=this.gameWidth/2,a-=this.gameHeight/2,i.push({x:s,y:a,r:r})}return i},o.prototype.isIdle=function(){return!(this.currentOrbit>=this.listPoint.length)||(this.isShow||(this.isShow=!0),!1)},o.prototype.isExpiredIdle=function(){return this.currentOrbit>this.listPoint.length},o.prototype.update=function(t){this.timeElapsed+=t,this.currentOrbit=this.getCurrentOrbitByTime(this.timeElapsed),this.isIdle()&&!this.isOutOfScreen()?this.isDead||(this.instanceNode(this.timeElapsed),this.updatePosition(this.timeElapsed),this.updateRotate(this.timeElapsed)):this.destroyNode()},o.prototype.isOutOfScreen=function(){return!(!this.node||!this.isLockFish())&&(this.node.x<-this.gameWidth/2-this.width/2||this.node.x>this.gameWidth/2+this.width/2||this.node.y<-this.gameHeight/2-this.height/2||this.node.y>this.gameHeight/2+this.height/2)},o.prototype.instanceNode=function(t){this.node||(this.checkIsMegaPrize(this.type)?(this.node=cc.instantiate(this.fishMegaPrizePrefab),this.FireFishGame.FireFishMegaPrize.setMoney(this.money),this.FireFishGame.FireFishMegaPrize.show()):this.fishPool.size()>0?this.node=this.fishPool.get():this.node=cc.instantiate(this.fishPrefab),this.node.setPosition(0,0),this.node.scale=this.scale,this.baseFishController=this.node.getComponent("BaseFish"),this.baseFishController.init(this.FireFishGame,this),this.baseFishController.setFishCallBackCollision(this.fishCollision,this),this.node.parent=this.FireFishGame.gameFishsNode)},o.prototype.updatePosition=function(){var t=this.listPoint[this.currentOrbit];this.node.x=t.x,this.node.y=t.y,this.isLockFish()&&(this.isOutOfScreen()?(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()):(this.FireFishGame.FFLockFish.initFish(this.node),this.FireFishGame.gunLockFish(this.node)))},o.prototype.updateRotate=function(){var t=this.listPoint[this.currentOrbit-1];if(t){var e=this.listPoint[this.currentOrbit],i=180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI;this.node.angle=i}},o.prototype.destroyNode=function(){this.node&&(this.checkIsMegaPrize(this.type)?(this.FireFishGame.FireFishMegaPrize&&this.FireFishGame.FireFishMegaPrize.hide(),this.node.destroy()):this.fishPool.put(this.node),this.isLockFish()&&(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()),this.node=null,this.baseFishController=null)},o.prototype.dead=function(){this.isDead=!0,this.baseFishController&&(this.checkIsMegaPrize(this.type)&&this.FireFishGame.FireFishMegaPrize&&this.FireFishGame.FireFishMegaPrize.hide(),this.isLockFish()&&(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()),this.baseFishController.dead())},o.prototype.getFishConfigByType=function(t){var e=n.FISHS;for(var i in t=this.fishManager.getTypeFishChange(t),e)if(e[i].type==t)return e[i]},o.prototype.checkIsMegaPrize=function(t){return 200===t},o.prototype.getOrbitById=function(t){var e=this.FireFishGame.FireFish.Orbit;for(var i in e)if(e[i].id==t)return e[i]},o.prototype.fishCollision=function(t){var e=t.node.getComponent("BaseBullet");if(e){var i=e.getIdBullet(),n="-"+this.FireFishGame.getUser().user_id+"-";this.FireFishGame.fishManager.getFishLock()?this.isLockFish()&&-1!=i.indexOf(n)&&this.FireFishGame.sendFireHit(this,i):-1!=i.indexOf(n)&&this.FireFishGame.sendFireHit(this,i)}},o.prototype.setLockFish=function(t){this.lockFish=t,this.baseFishController&&this.baseFishController.setLockFish(t)},o.prototype.isLockFish=function(t){return this.lockFish},o.prototype.getIdFish=function(){return this.id},o.prototype.getTotalTimeByListOrbits=function(t){return 1e3*n.SHOT_FISH_TIME_UPDATE},o.prototype.getTimeElapsedByCurrentOrbit=function(t){return t*n.SHOT_FISH_TIME_UPDATE},o.prototype.getCurrentOrbitByTime=function(t){return parseInt(t/n.SHOT_FISH_TIME_UPDATE)},e.exports=o,cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","./formula/FormulaBezier":"FormulaBezier"}],Footer:[function(t,e,i){"use strict";cc._RF.push(e,"1c1d3qhsbZLebvozOiXhxjS","Footer");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onAgentClick:function(){this.GameCenter.isConnected()?(this.GameCenter.Audio.playClick(),this.GameCenterUI.showAgentFormNode()):this.GameCenterUI.showLoginFormNode()},onTransferClick:function(){this.GameCenter.isConnected()?(this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onTransferClick()):this.GameCenterUI.showLoginFormNode()},onEventClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.Event.showDialog():this.GameCenterUI.showLoginFormNode()},onTutorialClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenterUI.showTutorialFormNode():this.GameCenterUI.showLoginFormNode()},onFriendClick:function(){(this.GameCenter.Audio.playClick(),this.GameCenter.isConnected())?""===this.GameCenter.getUser().invite_code?this.GameCenter.showDialogMessage(n.FRIEND_TITLE,n.FRIEND_NOT_ACTIVE):this.GameCenterUI.showFriendFormNode():this.GameCenterUI.showLoginFormNode()},onGroupClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getGeneralConfig();t&&cc.sys.openURL(t.GROUP)},onFanpageClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getGeneralConfig();t&&cc.sys.openURL(t.FANPAGE)},onShopClick:function(){this.GameCenter.isConnected()?(this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onAwardClick()):this.GameCenterUI.showLoginFormNode()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],ForgetPasswordEmail:[function(t,e,i){"use strict";cc._RF.push(e,"d4d3dFrz5dLfLa3oH1lu4UV","ForgetPasswordEmail");t("../../../helper/Constant");var n=t("../../../helper/Message");t("../../../util/BrowserUtil");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,emailEditBox:cc.EditBox},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.emailEditBox]},onEnable:function(){this.clear()},onConfirmClick:function(){var t=this;this.Login.Audio.playClick();var e=this.usernameEditBox.string,i=this.emailEditBox.string;if(this.checkAllEditboxNotEmpty()){var o={username:e,email:i};this.Login.showProcessingNode(),this.Login.api.forgotPasswordEmail(o,function(e){t.Login.hideProcessingNode(),t.Login.showDialogMessage(n.FORGET_PASSWORD_TITLE,e.msg)},function(e){t.clear(),t.Login.hideProcessingNode(),t.Login.showDialogMessage(n.FORGET_PASSWORD_TITLE,e.msg)})}else this.Login.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onForgetPasswordPhoneClick:function(){this.Login.Audio.playClick(),this.node.active=!1,this.LoginUI.showForgetPasswordPhoneFormNode()},onCloseClick:function(){this.node.active=!1},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil"}],ForgetPasswordPhone:[function(t,e,i){"use strict";cc._RF.push(e,"5f413AEF7xATZ5SuZa5A1pq","ForgetPasswordPhone");var n=t("../../../helper/Config"),o=t("../../../helper/Message"),s=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,otpEditBox:cc.EditBox,passwordEditBox:cc.EditBox,rePasswordEditBox:cc.EditBox,usernameStep1EditBox:cc.EditBox,phoneStep1EditBox:cc.EditBox,areaCodeDropDownList:s},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.otpEditBox,this.passwordEditBox,this.rePasswordEditBox]},onEnable:function(){this.clear(),this.initData()},initData:function(){this.areaCodeDropDownList.removeAllItem();for(var t=0;t<n.AREA_CODES.length;t++){var e=n.AREA_CODES[t].name;this.areaCodeDropDownList.addItem(e,n.AREA_CODES[t])}},onConfirmClick:function(){var t=this;this.Login.Audio.playClick();var e=this.usernameEditBox.string,i=this.otpEditBox.string,n=this.passwordEditBox.string,s=this.rePasswordEditBox.string;if(this.checkAllEditboxNotEmpty())if(n===s){var a={otp:i,username:e,password:n};this.Login.showProcessingNode(),this.Login.api.verifyPassword(a,function(e){t.clear(),t.Login.hideProcessingNode(),t.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,e.msg)},function(e){t.Login.hideProcessingNode(),t.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,e.msg)})}else this.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,o.FORGET_PASSWORD_RE_PASSWORD_NOT_CORRECT);else this.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,o.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onConfirmStep1Click:function(){var t=this;this.Login.Audio.playClick();var e=this.usernameStep1EditBox.string,i=this.phoneStep1EditBox.string;if(""!==e&&""!==i){var n=this.areaCodeDropDownList.getData().code;0===n.indexOf("+")&&(n=n.substr(1)),0===i.indexOf("0")&&(i=i.substr(1));var s={username:e,phone:n+i};this.Login.showProcessingNode(),this.Login.api.sendOtpForgetPassword(s,function(e){t.clear(),t.Login.hideProcessingNode(),t.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,e.msg)},function(e){t.Login.hideProcessingNode(),t.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,e.msg)})}else this.Login.showDialogMessage(o.FORGET_PASSWORD_TITLE,o.MISSING_INFO)},onForgetPasswordEmailClick:function(){this.Login.Audio.playClick(),this.node.active=!1,this.LoginUI.showForgetPasswordEmailFormNode()},onCloseClick:function(){this.node.active=!1},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.usernameStep1EditBox.string="",this.phoneStep1EditBox.string=""}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList"}],FormMove:[function(t,e,i){"use strict";cc._RF.push(e,"f11e7ExYOlIvo9Ud4s+vT34","FormMove");var n=t("../../base/BaseController"),o=t("../../helper/Constant"),s=t("../../helper/Config");cc.Class({extends:n,properties:{isSave:!1,nameSave:"",isChangeZIndex:!0},onLoad:function(){var t=this;this._super(),this.positionX=this.node.x,this.positionY=this.node.y,this.onTouchMove=function(e){var i=e.touch.getDelta(),n=t.node.x+i.x,o=t.node.y+i.y,a=s.CANVAS_WIDTH/2,r=-s.CANVAS_WIDTH/2,c=s.GAME_HEIGHT/2,h=-(s.CANVAS_HEIGHT-s.GAME_HEIGHT/2);n>a?n=a:n<r&&(n=r),o>c?o=c:o<h&&(o=h),t.node.x=n,t.node.y=o,t.checkSendEventDisconnect()},this.onTouchEnd=function(e){t.isSave&&t.nameSave&&t.savePosition()},this.onMouseEnter=function(e){cc.sys.isBrowser&&(t.addZIndex(),e.stopPropagation())},this.addEventMove(),this.initData()},onEnable:function(){this.addZIndex()},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node)},initData:function(){var t=this.getTempData()[this.nameSave];t&&(this.positionX=t.x,this.positionY=t.y),this.node.setPosition(this.positionX,this.positionY)},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[this.nameSave]=t},addZIndex:function(){if(this.isChangeZIndex){var t=this.getTempData()[o.Z_INDEX];t||(t=0),++t,this.node.zIndex=t,this.getTempData()[o.Z_INDEX]=t}}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Config":"Config","../../helper/Constant":"Constant"}],FormatUtil:[function(t,e,i){"use strict";cc._RF.push(e,"12a51JyA55E46B4eLpSVhsR","FormatUtil");var n=t("../helper/Message"),o={nFormatter:function(t,e){for(var i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],n=/\.0+$|(\.[0-9]*[1-9])0+$/,o=0;o<i.length;o++)if(t>=i[o].value)return(t/i[o].value).toFixed(e).replace(n,"$1")+i[o].symbol;return t.toFixed(e).replace(n,"$1")},numberWithCommas:function(t){if(t){var e=(t=parseInt(t)).toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),e.join(".")}return"0"},validateEmail:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},validateUrlImage:function(t){var e=t.split("/").pop(),i=t.split(".").pop();return e.indexOf(".")>-1&&("png"===i||"jpg"===i)},checkPhoneValid:function(t){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t)},checkDOBValid:function(t,e,i){var n=i+"/"+e+"/"+t,o=Date.parse(n);return!isNaN(o)},getOnlyNumberInString:function(t){var e=t.match(/\d+/g);return e?e.join(""):""},numberToTime:function(t){t<0&&(t=0),t=parseInt(t);var e=parseInt(t/60),i=t%60;return e<10&&(e="0"+e),i<10&&(i="0"+i),e+":"+i},getStringDateByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getHours(),n=e.getMinutes(),o=e.getDate(),s=e.getMonth()+1,a=e.getFullYear();return i<10&&(i="0"+i),n<10&&(n="0"+n),o<10&&(o="0"+o),s<10&&(s="0"+s),i+":"+n+" "+o+"/"+s+"/"+a},getDateByTimeStamp:function(t){var e=new Date(1e3*t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},sortDataByAmount:function(t){return t.sort(function(t,e){return e.amount-t.amount}),t},getStringHourByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return i<10&&(i="0"+i),n<10&&(n="0"+n),o<10&&(o="0"+o),i+":"+n+":"+o},getStringOnlyDateByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return i<10&&(i="0"+i),n<10&&(n="0"+n),i+"/"+n+"/"+o},getParamsInUrl:function(t,e){if(cc.sys.isBrowser){e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==i?null:i[1]}return""},deDuplicate:function(t){return t.filter(function(t,e,i){return i.indexOf(t)===e})},sortDataByAmount1:function(t){return t.sort(function(t,e){return e.amount-t.amount}),t},sortDataByAmount2:function(t){return t.sort(function(t,e){return t.amount-e.amount}),t},formatMessage:function(t){if(t){t=this.formatTypeMessage(t);for(var e=n.MESSAGE_FORBIDDEN,i=t.split(" "),o="",s=new RegExp("  ","g"),a=0,r=i.length;a<r;a++)for(var c=i[a].toLowerCase(),h=0,l=e.length;h<l;h++)if(-1!==c.indexOf(e[h])){i[a]="***";break}for(var u in i)o+=" "+i[u];return(o=o.replace(s," ")).trim()}return""},formatTypeMessage:function(t){var e=new RegExp("<","g"),i=new RegExp(">","g");return t=(t=t.replace(e,"")).replace(i,"")},sortDataTimeByTime:function(t){return t.sort(function(t,e){return e.created_at-t.created_at}),t},sortDataTimeByTime2:function(t){return t.sort(function(t,e){return e.time-t.time}),t},filterSameItem:function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++)t[e].nick_name===t[i].nick_name&&(t.splice(i,1),e=0,i=0);return t},filterSameItemSlot:function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++)t[e].nick_name===t[i].nick_name&&t[e].total_prize_amount===t[i].total_prize_amount&&(t.splice(i,1),e=0,i=0);return t}};e.exports=o,cc._RF.pop()},{"../helper/Message":"Message"}],FormulaBezier:[function(t,e,i){"use strict";function n(t,e){this.time=t,this.listPoint=e,this.numberPoint=this.listPoint.length,this.convertListPointToVec2(),this.lastRenderTime=0}cc._RF.push(e,"d79e8napJJIz7lNINC36PA8","FormulaBezier"),n.prototype.convertListPointToVec2=function(){for(var t=0;t<this.numberPoint;t++)this.listPoint[t]=new cc.Vec2(this.listPoint[t].x,this.listPoint[t].y)},n.prototype.getPosition=function(t){for(var e=t/this.time,i=new cc.Vec2(0,0),n=0;n<this.numberPoint;n++)i.addSelf(this.tohop(this.numberPoint-1,n,e));return this.lastRenderTime=t,i},n.prototype.tohop=function(t,e,i){return this.listPoint[e].mul(this.J(t,e,i))},n.prototype.giaithua=function(t){for(var e=1,i=1;i<=t;i++)e*=i;return e},n.prototype.J=function(t,e,i){return this.giaithua(t)*Math.pow(i,e)*Math.pow(1-i,t-e)/(this.giaithua(e)*this.giaithua(t-e))},n.prototype.getRotate=function(t){var e=this.getPosition(this.lastRenderTime),i=this.getPosition(this.lastRenderTime+1/60);return 180-180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI},e.exports=n,cc._RF.pop()},{}],FormulaCurve:[function(t,e,i){"use strict";function n(t,e){this.p0=e[0],this.p1=e[1],this.p2=e[2],this.p3=e[3],this.time=t,this.lastRenderTime=0}cc._RF.push(e,"fc25aN4+7RGtqnvVS0lPrhK","FormulaCurve"),n.prototype.getPosition=function(t){var e=t/this.time,i=1-e,n=e*e,o=i*i,s=o*i,a=n*e,r=this.nhan(this.p0,s);return r=this.cong(r,this.nhan(this.p1,3*o*e)),r=this.cong(r,this.nhan(this.p2,3*i*n)),r=this.cong(r,this.nhan(this.p3,a)),this.lastRenderTime=t,r},n.prototype.getRotate=function(t){var e=this.getPosition(this.lastRenderTime),i=this.getPosition(this.lastRenderTime+1/60);return 180-180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI},n.prototype.nhan=function(t,e){return{x:t.x*e,y:t.y*e}},n.prototype.cong=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.exports=n,cc._RF.pop()},{}],FormulaDirect:[function(t,e,i){"use strict";function n(t,e){this.startX=e[0].x,this.startY=e[0].y,this.endX=e[1].x,this.endY=e[1].y,this.time=t,this.distance=Math.sqrt(Math.pow(this.endX-this.startX,2)+Math.pow(this.endY-this.startY,2))}cc._RF.push(e,"cb3aaPk1whDTJ3wqN38Af2w","FormulaDirect"),n.prototype.getPosition=function(t){return{x:(this.endX-this.startX)*t/this.time+this.startX,y:(this.endY-this.startY)*t/this.time+this.startY}},n.prototype.getRotate=function(t){var e=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;return e>=360&&(e-=360),180-e},e.exports=n,cc._RF.pop()},{}],FriendAward:[function(t,e,i){"use strict";cc._RF.push(e,"0ce04pqldRLnqGLje6zQ6Oi","FriendAward");var n=t("../../../../helper/Message"),o=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,scoreEditBox:cc.EditBox,moneyLabel:cc.Label},init:function(t){this.GameCenter=t,this.Friend=t.Friend},onEnable:function(){this.initData()},initData:function(){this.scoreLabel.string=o.numberWithCommas(this.GameCenter.getUser().score_received),this.scoreEditBox.string="",this.moneyLabel.string="0"},onScoreChange:function(){var t=parseInt(this.scoreEditBox.string);this.moneyLabel.string=o.numberWithCommas(1e3*t)},onConfirmClick:function(){if(""!==this.scoreEditBox){var t=parseInt(this.scoreEditBox.string),e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),amount:t};this.GameCenter.showProcessingNode(),this.GameCenter.api.convertFriend(i,function(i){e.scoreEditBox.string="",e.moneyLabel.string="0",e.GameCenter.getUser().score_received-=t,e.scoreLabel.string=o.numberWithCommas(e.GameCenter.getUser().score_received),e.GameCenter.showDialogMessage(n.FRIEND_TITLE,i.msg),e.GameCenter.hideProcessingNode()},function(t){e.GameCenter.showDialogMessage(n.FRIEND_TITLE,t.msg),e.GameCenter.hideProcessingNode()})}else this.GameCenter.showDialogMessage(n.FRIEND_TITLE,n.MISSING_INFO)},onBackClick:function(){this.Friend.showCenterNode()}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],FriendCenter:[function(t,e,i){"use strict";cc._RF.push(e,"04aa3GsAbZOa5I826Me8NOJ","FriendCenter");var n=t("../../../../helper/Message"),o=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{codeLabel:cc.Label,codeEditBox:cc.EditBox,nickNameLabel:cc.Label,notInviteNode:cc.Node,inviteNode:cc.Node,scoreLabel:cc.Label,totalScoreLabel:cc.Label},init:function(t){this.GameCenter=t,this.Friend=t.Friend},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initData:function(){var t=this,e=this.GameCenter.getUser();this.codeLabel.string=e.invite_code.toUpperCase(),this.codeEditBox.string="",this.nickNameLabel.string=e.friend_nickname,e.friend_nickname?(this.notInviteNode.active=!1,this.inviteNode.active=!0):(this.notInviteNode.active=!0,this.inviteNode.active=!1),this.scoreLabel.string=0,this.totalScoreLabel.string=0;var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.infoFriend(i,function(i){e.score_received=i.data.score_received,e.total_score=i.data.total_score,t.scoreLabel.string=o.numberWithCommas(e.score_received),t.totalScoreLabel.string=o.numberWithCommas(e.total_score)},function(e){t.GameCenter.showDialogMessage(n.FRIEND_TITLE,e.msg)})},onTopClick:function(){this.Friend.showTopNode()},onListClick:function(){this.Friend.showListNode()},onAwardClick:function(){this.Friend.showAwardNode()},onConfirmClick:function(){var t=this,e=this.codeEditBox.string;if(""!==e){var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),invite_code:e};this.GameCenter.showProcessingNode(),this.GameCenter.api.updateFriend(i,function(e){t.GameCenter.getUser().friend_nickname=e.data.friend_nickname,t.nickNameLabel.string=e.data.friend_nickname,t.notInviteNode.active=!1,t.inviteNode.active=!0,t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.FRIEND_TITLE,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.FRIEND_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(n.FRIEND_TITLE,n.MISSING_INFO)},onCopyClick:function(){var t=this.GameCenter.getUser().invite_code;jsb&&jsb.copyTextToClipboard(t)},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],FriendItem:[function(t,e,i){"use strict";cc._RF.push(e,"dda73yzHMBPWKdIB9pTT1M0","FriendItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,nickNameLabel:cc.Label,scoreLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,this.idLabel.string=e+1,this.nickNameLabel.string=t.nick_name,this.scoreLabel.string=n.numberWithCommas(t.score_sent);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],FriendList:[function(t,e,i){"use strict";cc._RF.push(e,"498e1bdF8xD95HH1ejlBF7b","FriendList"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,friendItemPrefab:cc.Prefab,listNode:cc.Node},init:function(t){this.GameCenter=t,this.Friend=t.Friend},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initData:function(){var t=this;this.loadingNode.active=!0,this.contentNode.active=!1,this.listNode.removeAllChildren(!0);var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.historyFriend(e,function(e){t.loadingNode.active=!1,t.contentNode.active=!0,t.initList(e.data)},function(e){t.GameCenter.showDialogMessage(Message.FRIEND_TITLE,e.msg)})},initList:function(t){for(var e=0;e<t.length;e++){var i=cc.instantiate(this.friendItemPrefab);i.getComponent("FriendItem").init(t[e],e),i.parent=this.listNode}},onBackClick:function(){this.Friend.showCenterNode()},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{}],FriendTopItem:[function(t,e,i){"use strict";cc._RF.push(e,"69133aFgvhE0r7AfWmtKJz4","FriendTopItem");var n=t("../../util/FormatUtil"),o=t("../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,scoreLabel:cc.Label,prizeLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,this.idLabel.string=e+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.scoreLabel.string=n.numberWithCommas(t.total_score),this.prizeLabel.string="0";var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],FriendTop:[function(t,e,i){"use strict";cc._RF.push(e,"05b47qoKsNB2rSq3R6AeZuA","FriendTop");var n=t("../../../../helper/Message");t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,friendTopItemPrefab:cc.Prefab,listNode:cc.Node},init:function(t){this.GameCenter=t,this.Friend=t.Friend},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initData:function(){var t=this;this.loadingNode.active=!0,this.contentNode.active=!1,this.listNode.removeAllChildren(!0);var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.topFriend(e,function(e){t.loadingNode.active=!1,t.contentNode.active=!0,t.initList(e.data)},function(e){t.GameCenter.showDialogMessage(n.FRIEND_TITLE,e.msg)})},initList:function(t){for(var e=0;e<t.length;e++){var i=cc.instantiate(this.friendTopItemPrefab);i.getComponent("FriendTopItem").init(t[e],e),i.parent=this.listNode}},onBackClick:function(){this.Friend.showCenterNode()},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],Friend:[function(t,e,i){"use strict";cc._RF.push(e,"966aeQ7jKlGh50J7UzDHGhD","Friend");var n=t("./friend/FriendAward"),o=t("./friend/FriendCenter"),s=t("./friend/FriendList"),a=t("./friend/FriendTop");cc.Class({extends:cc.Component,properties:{FriendAward:n,FriendCenter:o,FriendList:s,FriendTop:a},init:function(t){this.GameCenter=t,this.FriendAward.init(t),this.FriendCenter.init(t),this.FriendList.init(t),this.FriendTop.init(t)},onLoad:function(){},onEnable:function(){this.showCenterNode()},showCenterNode:function(){this.hideAll(),this.FriendCenter.node.active=!0},showAwardNode:function(){this.hideAll(),this.FriendAward.node.active=!0},showListNode:function(){this.hideAll(),this.FriendList.node.active=!0},showTopNode:function(){this.hideAll(),this.FriendTop.node.active=!0},hideAll:function(){this.FriendAward.node.active=!1,this.FriendCenter.node.active=!1,this.FriendList.node.active=!1,this.FriendTop.node.active=!1}}),cc._RF.pop()},{"./friend/FriendAward":"FriendAward","./friend/FriendCenter":"FriendCenter","./friend/FriendList":"FriendList","./friend/FriendTop":"FriendTop"}],GameCenterHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"138a7lXGsNPDYFwryKLbn2G","GameCenterHandlerRequest");var n=t("../../helper/Constant"),o=(t("../../helper/Message"),t("../../prefab/mini-game/MiniGameConstant")),s={init:function(t){this.GameCenter=t,this.GameRoom=t.GameRoom},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case n.MONEY:case n.GOLD:this.GameCenter.updateMoneyGold(),this.GameRoom.resetAllRoom();break;case n.SAFE_AMOUNT:this.GameCenter.updateSafeAmount();break;case n.VIP_POINT_VARIBLE:this.GameCenter.GameInfo.InfoAccount.VipAccount.initInfo(),this.GameCenter.Header.HeaderAccount.initVip()}},onResponse:function(t){var e=t.params,i=e.data;switch(t.cmd){case n.NEWS:this.GameCenter.handlerNews(e);break;case n.ROOM_INFO:this.GameCenter.clearTempRequests(),this.GameCenter.sfsManager.onResponse(t);break;case n.JOIN_ROOM_ERROR:this.GameCenter.hideProcessingNode(),this.GameCenter.handleJoinRoomError(t.params);break;case n.MINIGAME_REQUEST:var s=e.data.game_name;this.GameCenter.MiniGame&&this.GameCenter.MiniGame.handleRequest(e),s===o.JACKPOT&&this.GameCenter.Jackpot.handleRequest(i),this.GameCenter.GameList.handleRequest(e);break;case n.REQUEST_AWARD_CARD:this.GameCenter.handleAward(e);break;case n.REQUEST_RECHARGE_GOLD:this.GameCenter.handleRechargeGold(e);break;case n.REQUEST_TRANSFER:this.GameCenter.handleTransfer(e);break;case n.REQUEST_SAFE_DEPOSIT:this.GameCenter.handleSafeDeposit(e);break;case n.REQUEST_SAFE_WITHDRAW:this.GameCenter.handleSafeWithDraw(e);break;case n.REQUEST_CHAT_GET_CHAT:this.GameCenter.handleGetChat(e);break;case n.REQUEST_CHAT_SEND_CHAT:this.GameCenter.handleSendChat(e);break;case n.REQUEST_PLAYER_RECEIVE_ALERT:this.GameCenter.handleAlert(e);break;case n.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.GameCenter.handleNewMessage(e);break;case n.REQUEST_INVITE:this.GameCenter.handleInvite(e);break;case n.REQUEST_ACCEPT_INVITE:this.GameCenter.handleAcceptInvite(e);break;case n.REQUEST_ACHIVEMENTED_QUEST:this.GameCenter.handleAchivementedQuest(e);break;case n.REQUEST_NOT_ENOUGH_BALANCE_STAY_ROOM:this.GameCenter.handleNotEnoughBalanceStayRoom(e);break;case n.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.GameCenter.handlePlusLuckyWheelFree(e);break;case n.REQUEST_MESSAGE:this.GameCenter.handleMessage(e);break;case n.REQUEST_GET_OTP:this.GameCenter.handleGetOtp(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCenter.MiniGame&&this.GameCenter.MiniGame.initNumberSpinFreeGame(e);break;case n.REQUEST_ACHIVEMENTED_VIP_POINT:this.GameCenter.handleAlert(e);break;case n.CONVERT_DIAMOND:this.GameCenter.handleMessage(e);break;case n.GET_TOP:this.GameCenter.MiniGame&&this.GameCenter.MiniGame.handleRequest(e);break;case n.GIFT_CODE:this.GameCenter.handleGiftCode(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../prefab/mini-game/MiniGameConstant":"MiniGameConstant"}],GameCenterUI:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"1c4b7UK3kxP/KftF2Bz0W6b","GameCenterUI"),cc.Class((o(n={extends:cc.Component,properties:{headerLoginNode:cc.Node,headerAccountNode:cc.Node,shopButtonNode:cc.Node,gameNode:cc.Node,gameListNode:cc.Node,gameRoomNode:cc.Node,infoNode:cc.Node,rechargeNode:cc.Node,updateAvatarFormNode:cc.Node,giftCodeFormNode:cc.Node,playerInviteFormNode:cc.Node,changePasswordFormNode:cc.Node,changePasswordSuccessFormNode:cc.Node,joinRoomErrorFormNode:cc.Node,otpFirstAccountFormNode:cc.Node,confirmSecurityFormNode:cc.Node,confirmRemoveMailFormNode:cc.Node,agentFormNode:cc.Node,friendFormNode:cc.Node,settingFormNode:cc.Node,turorialFormNode:cc.Node,logOutFormNode:cc.Node,buyInFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},onLoad:function(){this.dialogFormUpdateAvatar=this.updateAvatarFormNode.getComponent("DialogForm"),this.dialogFormGiftCode=this.giftCodeFormNode.getComponent("DialogForm"),this.dialogFormPlayerInvite=this.playerInviteFormNode.getComponent("DialogForm"),this.dialogFormChangePassword=this.changePasswordFormNode.getComponent("DialogForm"),this.dialogFormChangePasswordSuccess=this.changePasswordSuccessFormNode.getComponent("DialogForm"),this.dialogFormJoinRoomError=this.joinRoomErrorFormNode.getComponent("DialogForm"),this.dialogFormOtpFirstAccount=this.otpFirstAccountFormNode.getComponent("DialogForm"),this.dialogFormConfirmSecurity=this.confirmSecurityFormNode.getComponent("DialogForm"),this.dialogFormConfirmRemoveMail=this.confirmRemoveMailFormNode.getComponent("DialogForm"),this.dialogFormAgent=this.agentFormNode.getComponent("DialogForm"),this.dialogFormFriend=this.friendFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormLogOut=this.logOutFormNode.getComponent("DialogForm"),this.dialogFormBuyIn=this.buyInFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage")},showGameNode:function(){this.hideAllNodes(),this.gameNode.active=!0},showInfoNode:function(){this.hideAllNodes(),this.infoNode.active=!0},showRechargeNode:function(){this.hideAllNodes(),this.rechargeNode.active=!0},showShopNode:function(){this.hideAllNodes(),this.rechargeNode.active=!0},hideAllNodes:function(){this.gameNode.active=!1,this.infoNode.active=!1,this.rechargeNode.active=!1},showHeaderLoginNode:function(){this.headerLoginNode.active=!0,this.headerAccountNode.active=!1},showHeaderAccountNode:function(){this.headerLoginNode.active=!1,this.headerAccountNode.active=!0},showGameListNode:function(){this.gameListNode.active=!0,this.gameRoomNode.active=!1},showGameRoomNode:function(){this.gameListNode.active=!1,this.gameRoomNode.active=!0},showShopButton:function(){this.shopButtonNode.active=!0},hideShopButton:function(){this.shopButtonNode.active=!1},showUpdateAvatarFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateAvatar.showDialog(t)},hideUpdateAvatarFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateAvatar.hideDialog(t)},showGiftCodeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGiftCode.showDialog(t)},hideGiftCodeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGiftCode.hideDialog(t)},showPlayerInviteFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPlayerInvite.showDialog(t)},hidePlayerInviteFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPlayerInvite.hideDialog(t)},showChangePasswordFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePassword.showDialog(t)},hideChangePasswordFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePassword.hideDialog(t)},showChangePasswordSuccessFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePasswordSuccess.showDialog(t)},hideChangePasswordSuccessFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePasswordSuccess.hideDialog(t)},showOtpFirstAccountFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpFirstAccount.showDialog(t)},hideOtpFirstAccountFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpFirstAccount.hideDialog(t)},showSecurityFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmSecurity.showDialog(t)},hideSecurityFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmSecurity.hideDialog(t)},showConfirmRemoveMailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmRemoveMail.showDialog(t)},hideConfirmRemoveMailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmRemoveMail.hideDialog(t)},showAgentFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAgent.showDialog(t)},hideAgentFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAgent.hideDialog(t)},showFriendFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormFriend.showDialog(t)},hideFriendFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormFriend.hideDialog(t)},showSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)},hideSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)},showTutorialFormNode:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.turorialFormNode.active=!0},hideTutorialFormNode:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.turorialFormNode.active=!1},showLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.showDialog(t)},hideLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.hideDialog(t)},showJoinRoomErrorNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormJoinRoomError.showDialog(t)},hideJoinRoomErrorNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormJoinRoomError.hideDialog(t)},showBuyInFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBuyIn.showDialog(t)},hideBuyInFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBuyIn.hideDialog(t)}},"hideBuyInFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBuyIn.hideDialog(t)}),o(n,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),o(n,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),o(n,"showProcessingNode",function(){this.processingNode.active=!0}),o(n,"hideProcessingNode",function(){this.processingNode.active=!1}),n)),cc._RF.pop()},{}],GameCenter:[function(t,e,i){"use strict";cc._RF.push(e,"a3fb8oESmxESq2/i4Mee/Zd","GameCenter");var n=t("../../base/BaseScene"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("../../util/Util"),r=t("../../util/FormatUtil"),c=t("./GameCenterHandlerRequest"),h=t("./GameCenterUI"),l=t("./GameInfo"),u=t("./GameRecharge"),d=t("./GameList"),m=t("./GameRoom"),f=t("./header/Header"),p=t("./footer/Footer"),_=t("./form/Bonus"),S=t("./form/UpdateAvatar"),g=t("./form/GiftCode"),C=t("./form/PlayerInvite"),N=t("./form/ChangePassword"),E=t("./form/ChangePasswordSuccess"),T=t("./form/JoinRoomError"),I=t("./form/OtpFirstAccount"),v=t("./form/ConfirmSecurity"),y=t("./form/ConfirmRemoveMail"),R=t("./form/Agent"),L=t("./form/Friend"),B=t("./other/ChatEvent"),M=t("../../prefab/mini-game/jackpot/Jackpot"),A=t("../../prefab/form/LogOut"),P=t("../../prefab/form/Setting"),b=t("../../prefab/form/Tutorial"),O=t("../../ui/dialog/BuyInForm"),F=t("../../prefab/News"),D=t("../../prefab/Toast"),k=t("../../ui/dialog/DialogMessage"),G=t("../../ui/Processing"),U=t("../../object/Audio");cc.Class({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,GameCenterUI:h,GameInfo:l,GameRecharge:u,GameList:d,GameRoom:m,Header:f,Footer:p,Bonus:_,UpdateAvatar:S,GiftCode:g,PlayerInvite:C,ChangePassword:N,ChangePasswordSuccess:E,JoinRoomError:T,OtpFirstAccount:I,ConfirmSecurity:v,ConfirmRemoveMail:y,Agent:R,Friend:L,Setting:P,LogOut:A,BuyInForm:O,Tutorial:b,ChatEvent:B,Jackpot:M,News:F,Toast:D,DialogMessage:k,Processing:G,Audio:U},onLoad:function(){this._super(),this.setSceneName(o.SCENE_GAME_CENTER),this.sfsManager.setController(this),this.isAddEvent=!1,this.GameInfo.init(this),this.GameRecharge.init(this),this.GameList.init(this),this.GameRoom.init(this),this.Header.init(this),this.Footer.init(this),this.Bonus.init(this),this.UpdateAvatar.init(this),this.GiftCode.init(this),this.PlayerInvite.init(this),this.ChangePassword.init(this),this.ChangePasswordSuccess.init(this),this.JoinRoomError.init(this),this.OtpFirstAccount.init(this),this.ConfirmSecurity.init(this),this.ConfirmRemoveMail.init(this),this.Agent.init(this),this.Friend.init(this),this.Setting.init(this),this.LogOut.init(this),this.BuyInForm.init(this),this.ChatEvent.init(this),this.Jackpot.init(this),this.Tutorial.init(this),this.GameCenterHandlerRequest=c,this.GameCenterHandlerRequest.init(this),this.onResponseBind=this.GameCenterHandlerRequest.onResponse.bind(this.GameCenterHandlerRequest),this.onUserVariablesUpdateBind=this.GameCenterHandlerRequest.onUserVariablesUpdate.bind(this.GameCenterHandlerRequest),this.addEventResponse(),this.initAccountNode()},start:function(){this.initListRoomsOutGame()},onDestroy:function(){this.removeEventResponse()},initLoginSuccess:function(){this.hideProcessingNode(),this.initBaseController(),this.Bonus.initData(),this.GameCenterUI.showGameListNode(),this.GameCenterUI.showHeaderAccountNode(),this.Header.HeaderAccount.initShowHeader(),this.sfsManager.removeEventResponse(),this.addEventResponse()},updateMoneyGold:function(){this.Header.HeaderAccount.updateMoneyGold(),this.GameRecharge.updateMoneyGold()},updateSafeAmount:function(){this.GameRecharge.Safe.initMoney()},initDataAndConnectSFS:function(t){this.initData(t),this.checkNicknameAndConnectSFS()},initData:function(t){this.setUser(t.user),this.setConfig(t.config),this.setListAgent(t.list_agent),this.setGuide(t.guide),this.setPolicy(t.policy),this.setFreeChip(t.free_chip),this.setLuckyWheel(t.lucky_wheel),this.setConfigIap(t.config_iap),this.setSecurityGame(t.security_game)},initAccountNode:function(){this.sfs&&this.sfs.isConnected()&&this.GameCenterUI.showHeaderAccountNode()},connectSFS:function(){this.sfsManager.init(),this.sfsManager.connect(this)},checkNicknameAndConnectSFS:function(){var t=this.getUser().nick_name,e=this.getUser().username;t&&t!==e?this.connectSFS():(this.hideProcessingNode(),this.GameCenterUI.hideLoginFormNode(),this.GameCenterUI.showUpdateNicknameFormNode())},initShowOtp:function(){var t=this.getUser();t.is_new&&(this.GameCenterUI.showOtpFirstAccountFormNode(!1),t.is_new=!1)},initListRoomsOutGame:function(){this.isConnected()&&(this.Audio.playOutGame(),this.initTempRequests()),this.initListRooms()},initListRooms:function(){if(this.isConnected()&&this.getLastJoinedRoom()){var t=this.getLastJoinedRoom().name;a.isLobbyGame(t)&&this.GameCenterUI.showGameRoomNode()}},initListGame:function(){this.GameCenterUI.showGameListNode()},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.GameCenterHandlerRequest.onResponse(t[e]);this.clearTempRequests()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},loginFacebook:function(){if(cc.sys.isBrowser){if(window.FB){var t=this;t.showProcessingNode(),!window.isInitFB&&window.FB&&FB.init({appId:"269983337196671",autoLogAppEvents:!0,xfbml:!0,cookie:!0,version:"v3.0"}),FB.login(function(e){if(e.authResponse){var i=e.authResponse.userID,n=o.LOGIN_FACEBOOK_TYPE,s=e.authResponse.accessToken;t.loginSocial(i,"",n,s)}else t.setAutoLogin(!1),t.hideProcessingNode()})}}else{if(this.initFacebook(),!this.checkPlugin())return;if(sdkbox.PluginFacebook.isLoggedIn())return void this.loginFacebookMobile();sdkbox.PluginFacebook.login()}},initFacebook:function(){if(this.checkPlugin()){this.showProcessingNode();var t=this;sdkbox.PluginFacebook.init(),sdkbox.PluginFacebook.setListener({onLogin:function(e,i){e?(console.log("Login facebook success"),console.log(i),t.loginFacebookMobile()):(console.log("Login facebook failed"),console.log(i),t.hideProcessingNode())}})}},checkPlugin:function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0!==sdkbox.PluginFacebook||(console.log("sdkbox.PluginFacebook is undefined"),!1)},loginFacebookMobile:function(){if(!this.isLoginFacebook){this.isLoginFacebook=!0;var t=sdkbox.PluginFacebook.getUserID(),e=o.LOGIN_FACEBOOK_TYPE,i=sdkbox.PluginFacebook.getAccessToken();this.showProcessingNode(),this.loginSocial(t,"",e,i)}},loginSocial:function(t,e,i,n){var a=this,r={social_id:t,email:e,social_type:i,access_token:n,register_code:this.getRegisterCode(),mkt_code:this.getMarketingCode()};this.getDeviceID()&&(r.device_id=this.getDeviceID());this.api.registerSocial(r,function(t){a.setAutoLogin(!0),a.setAccountType(o.ACCOUNT_TYPE_LOGIN_FACEBOOK),a.initDataAndConnectSFS(t.data)},function(t){a.setAutoLogin(!1),a.hideProcessingNode(),a.showDialogMessage(s.LOGIN_TITLE,t.msg)})},handlerNews:function(t){this.News.addNews(t)},handleAward:function(t){this.hideProcessingNode(),this.showDialogMessage(s.AWARD_TITLE,t.msg),t.status&&this.GameRecharge.AwardCard.clear()},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg),this.GameRecharge.RechargeGold.clear()},handleTransfer:function(t){this.hideProcessingNode(),this.showDialogMessage(s.TRANSFER_TITLE,t.msg),t.status&&this.GameRecharge.Transfer.TransferContent.clear()},handleSafeDeposit:function(t){this.hideProcessingNode(),this.showDialogMessage(s.SAFE_TITLE,t.msg),t.status&&this.GameRecharge.Safe.clear()},handleSafeWithDraw:function(t){this.hideProcessingNode(),this.showDialogMessage(s.SAFE_TITLE,t.msg),this.GameRecharge.Safe.clear(),this.GameRecharge.Safe.initWithDrawSuccess()},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.ChatEvent.Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.ChatEvent.Chat.addChat(e)}else this.ChatEvent.Chat.addChatFail(t.msg)},handleInvite:function(t){t.status?this.PlayerInvite.node.active||(this.PlayerInvite.initData(t.data),this.GameCenterUI.showPlayerInviteFormNode()):this.showDialogMessage(s.INTIVE_TITLE,t.msg)},handleAcceptInvite:function(t){this.showDialogMessage(s.INTIVE_TITLE,t.msg)},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handleMessage:function(t){this.hideProcessingNode(),this.showToast(t.msg)},handleNotEnoughBalanceStayRoom:function(t){var e=r.numberWithCommas(t.data.balance),i=a.getRoomTypeByRoomTypeCode(t.data.room_type),n=String.format(s.NOT_ENOUGH_MONEY_TO_STAY_GAME,e,i);this.showDialogMessage(s.NOTIFICATION_TITLE,n)},handleGetOtp:function(t){this.hideProcessingNode(),this.showDialogMessage(s.NOTIFICATION_TITLE,t.msg)},handlePlusLuckyWheelFree:function(t){this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.Header.HeaderAccount.plusUnreadMessage(),this.showNotificationMessage(s.MAIL_NOTIFICATION)},handleJoinRoomError:function(t){t.msg===s.JOIN_ROOM_ERROR?(this.JoinRoomError.initMessage(t.msg),this.GameCenterUI.showJoinRoomErrorNode()):this.showDialogMessage(s.TITLE_FAILED,t.msg)},handleGiftCode:function(t){this.GiftCode.clear(),this.showDialogMessage(s.GIFTCODE_TITLE,t.msg)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.GameCenterUI.showDialogMessage(t,e)},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},hideDialogMessage:function(){this.GameCenterUI.hideDialogMessage()},showProcessingNode:function(){this.GameCenterUI.showProcessingNode()},hideProcessingNode:function(){this.GameCenterUI.hideProcessingNode()}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/jackpot/Jackpot":"Jackpot","../../ui/Processing":"Processing","../../ui/dialog/BuyInForm":"BuyInForm","../../ui/dialog/DialogMessage":"DialogMessage","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util","./GameCenterHandlerRequest":"GameCenterHandlerRequest","./GameCenterUI":"GameCenterUI","./GameInfo":"GameInfo","./GameList":"GameList","./GameRecharge":"GameRecharge","./GameRoom":"GameRoom","./footer/Footer":"Footer","./form/Agent":"Agent","./form/Bonus":"Bonus","./form/ChangePassword":"ChangePassword","./form/ChangePasswordSuccess":"ChangePasswordSuccess","./form/ConfirmRemoveMail":"ConfirmRemoveMail","./form/ConfirmSecurity":"ConfirmSecurity","./form/Friend":"Friend","./form/GiftCode":"GiftCode","./form/JoinRoomError":"JoinRoomError","./form/OtpFirstAccount":"OtpFirstAccount","./form/PlayerInvite":"PlayerInvite","./form/UpdateAvatar":"UpdateAvatar","./header/Header":"Header","./other/ChatEvent":"ChatEvent"}],GameCommon:[function(t,e,i){"use strict";cc._RF.push(e,"ed8d5tBlklCp6EDz4au3hT9","GameCommon");var n=t("../base/BaseScene"),o=t("../util/Util"),s=t("../util/FormatUtil"),a=t("../helper/Constant"),r=t("../helper/Message"),c=t("../object/RoomType"),h=t("./form/Tutorial"),l=t("./form/Setting"),u=t("./form/LogOut"),d=t("./form/Recharge"),m=t("./form/Invite"),f=t("../prefab/Toast"),p=t("../ui/Processing"),_=t("../ui/dialog/DialogMessage"),S=t("../prefab/News"),g=t("../ui/dialog/BetForm"),C=t("../ui/dialog/BuyInForm"),N=t("../object/Audio");cc.Class({extends:n,properties:{quickChatNode:cc.Node,textNode:cc.Node,emotionNode:cc.Node,chatEditBox:cc.EditBox,nameTableLabel:cc.Label,betTableLabel:cc.Label,menuFormNode:cc.Node,waitingNode:cc.Node,showBuyInButtonNode:cc.Node,rechargeButtonNode:cc.Node,Tutorial:h,Setting:l,LogOut:u,Recharge:d,Invite:m,BetForm:g,BuyInForm:C,quickChatItemPrefab:cc.Prefab,questNotificationItemPrefab:cc.Prefab,Processing:p,Toast:f,DialogMessage:_,News:S,Audio:N},init:function(t){this.controller=t,this.Setting.init(this),this.LogOut.init(this),this.Recharge.init(this),this.Invite.init(this),this.BetForm.init(this),this.BuyInForm.init(this),this.Tutorial.init(this)},onLoad:function(){this._super(),this.room=this.getLastJoinedRoom(),this.roomType=parseInt(this.room.variables[a.ROOM_TYPE].value),this.minBet=parseInt(this.room.variables[a.MIN_BET].value),this.isMoneyType=this.roomType==c.MONEY_CODE,this.initRoomDescription(),this.initQuickChat(),this.dialogFormSetting=this.Setting.node.getComponent("DialogForm"),this.dialogFormRecharge=this.Recharge.node.getComponent("DialogForm"),this.dialogFormInvite=this.Invite.node.getComponent("DialogForm"),this.initServiceConfig()},initServiceConfig:function(){this.getServiceConfigByDevice().RECHARGE||(this.rechargeButtonNode.active=!1)},onMenuClick:function(){this.Audio.playClick(),this.dialogFormSetting.showDialog()},onRechargeClick:function(){this.Audio.playClick(),this.showDialogMessage(r.RECHARGE_MONEY_TITLE,"H\u1ec7 th\u1ed1ng n\u1ea1p th\u1ebb \u0111ang b\u1ea3o tr\xec")},onQuestClick:function(){this.Audio.playClick(),this.MiniGame.Quest.showDialog()},onTutorialClick:function(){this.Audio.playClick(),this.Tutorial.showDialog(),this.Tutorial.showTutorialByGameName(this.getGameName())},onSettingsClick:function(){this.Audio.playClick(),this.dialogFormSetting.showDialog()},onBackClick:function(){this.Audio.playClick(),this.sendRequest.send(a.REQUEST_LEFT_ROOM)},onShowQuickChatClick:function(){this.Audio.playClick(),this.quickChatNode.active?(this.hideEmotionNode(),this.showTextNode()):this.showQuickChatNode()},onTextClick:function(){this.Audio.playClick(),this.hideEmotionNode(),this.showTextNode()},onEmotionClick:function(){this.Audio.playClick(),this.hideTextNode(),this.showEmotionNode()},onQuickChatItemClick:function(t){this.Audio.playClick();var e=t.target._children[0].getComponent(cc.Label).string;this.sendChat(e),this.hideQuickChatNode()},onEmotionItemClick:function(t){this.Audio.playClick();var e=t.target.getComponent(cc.Sprite).spriteFrame._textureFilename;this.sendChat(e),this.hideQuickChatNode()},onInviteClick:function(){this.Audio.playClick();var t=this.getGameName(),e=o.getGameConfigByRoomName(t);e&&(1==e.invite_on&&this.dialogFormInvite.showDialog())},onShowBuyInClick:function(){this.Audio.playClick();var t=this.getGameName(),e=o.getGameConfigByRoomName(t),i=this.BuyInForm,n=0,s=this.getBalance(),r=this.isAutoBuyIn();n=this.isMoneyType?this.getMoney():this.getGold();var c=e[a.MIN_BUY]*this.minBet,h=e[a.MAX_BUY]*this.minBet;c>s+n&&(c=s+n),h>n+s&&(h=n+s),i.setInvite(!1),i.setAutoBuyIn(r),i.setRound(this.minBet),i.setMinValue(c),i.setMaxValue(h),i.setValue(s),this.showBuyInForm()},onSendChatClick:function(){this.Audio.playClick();var t=this.chatEditBox.string;this.sendChat(t),this.hideQuickChatNode()},onEnterPress:function(){var t=this.chatEditBox.string;this.chatEditBox.string="",this.sendChat(t),this.hideQuickChatNode()},onBackgroundClick:function(){this.hideQuickChatNode()},initRoomDescription:function(){var t=this.getGameName(),e=this.getTableId(),i=this.getLastJoinedRoom(),n=s.nFormatter(i.variables[a.MIN_BET].value),c=i.variables[a.MATCH_GAME_ID]?i.variables[a.MATCH_GAME_ID].value:"",h=i.variables[a.ROOM_TYPE].value;t=o.getGameNameByRoomName(t),h=o.getRoomTypeByRoomTypeCode(h);var l=String.format(r.GAME_DESCRIBE_TABLE_NAME,e,c),u=String.format(r.GAME_DESCRIBE_TABLE_BET,n,h);this.nameTableLabel.string=l,this.betTableLabel.string=u},initQuickChat:function(){var t=this.getGeneralConfig();if(t)for(var e=t.GUIDE,i=this.getGameName(),n=0;n<e.length;n++)if(i===e[n].short_name){var o=e[n].quick_chat;if(o){var s=o.split(";");for(var a in s){var r=cc.instantiate(this.quickChatItemPrefab);r.parent=this.textNode,r.getComponent("QuickChatItem").init(this,s[a])}}break}for(var c=this.emotionNode.getChildren(),h=0;h<c.length;h++)c[h].getComponent("EmotionItem").init(this)},setMinMaxBetForm:function(t,e){this.BetForm.setMinValue(t),this.BetForm.setMaxValue(e)},setMinMaxBetFormAndShow:function(t,e){this.setMinMaxBetForm(t,e),this.BetForm.showDialog()},showQuickChatNode:function(){this.quickChatNode.active=!0},hideQuickChatNode:function(){this.quickChatNode.active=!1},showTextNode:function(){this.textNode.active=!0},hideTextNode:function(){this.textNode.active=!1},showEmotionNode:function(){this.emotionNode.active=!0},hideEmotionNode:function(){this.emotionNode.active=!1},onResponse:function(t){var e=t.params;switch(t.cmd){case a.NEWS:this.handleNews(e);break;case a.REQUEST_INVITE:this.handleInvite(e);break;case a.MINIGAME_REQUEST:case a.GET_TOP:this.MiniGame&&this.MiniGame.handleRequest(e);break;case a.REQUEST_PLAYER_RECEIVE_ALERT:this.handleAlert(e);break;case a.REQUEST_RECHARGE_GOLD:this.handleRechargeGold(e);break;case a.REQUEST_ACHIVEMENTED_QUEST:this.handleAchivementedQuest(e);break;case a.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.handleReceiveNewMessage(e);break;case a.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.handlePlusLuckyWheelFree(e);break;case a.REQUEST_ACHIVEMENTED_VIP_POINT:this.handleAlert(e)}},handleNews:function(t){this.News.addNews(t)},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(r.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleReceiveNewMessage:function(t){this.getUser().unread_message++,this.showNotificationMessage(r.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleInvite:function(t){this.showToast(t.msg)},sendChat:function(t){if(""!==t){var e=cc.V.sfsManager.sfs,i=cc.V.sfsManager.SFS2X;if(e)e.send(new i.Requests.System.PublicMessageRequest(t))&&(this.chatEditBox.string="")}},showBuyInButton:function(){this.showBuyInButtonNode.active=!0},hideBuyInButton:function(){this.showBuyInButtonNode.active=!1},showBuyInForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BuyInForm.showDialog(t)},hideBuyInForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BuyInForm.hideDialog(t)},showBetForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BetForm.showDialog(t)},hideBetForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BetForm.hideDialog(t)},showWaitingNode:function(){this.waitingNode.active=!0},hideWaitingNode:function(){this.waitingNode.active=!1},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.DialogMessage.showMessage(t,e)},hideDialogMessage:function(){this.DialogMessage.hideDialog()},showProcessingNode:function(){this.Processing.node.active=!0},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},hideProcessingNode:function(){this.Processing.node.active=!1}}),cc._RF.pop()},{"../base/BaseScene":"BaseScene","../helper/Constant":"Constant","../helper/Message":"Message","../object/Audio":"Audio","../object/RoomType":"RoomType","../prefab/News":"News","../prefab/Toast":"Toast","../ui/Processing":"Processing","../ui/dialog/BetForm":"BetForm","../ui/dialog/BuyInForm":"BuyInForm","../ui/dialog/DialogMessage":"DialogMessage","../util/FormatUtil":"FormatUtil","../util/Util":"Util","./form/Invite":"Invite","./form/LogOut":"LogOut","./form/Recharge":"Recharge","./form/Setting":"Setting","./form/Tutorial":"Tutorial"}],GameInfo:[function(t,e,i){"use strict";cc._RF.push(e,"e0f250560lCdYJ0h4pe9lDk","GameInfo");var n=t("./info/InfoAccount"),o=t("./info/InfoHistory"),s=t("./info/InfoSercurity"),a=t("./info/InfoMail");cc.Class({extends:cc.Component,properties:{headerNode:cc.Node,accountOnButtonNode:cc.Node,accountOffButtonNode:cc.Node,historyOnButtonNode:cc.Node,historyOffButtonNode:cc.Node,sercurityOnButtonNode:cc.Node,sercurityOffButtonNode:cc.Node,mailOnButtonNode:cc.Node,mailOffButtonNode:cc.Node,accountContentNode:cc.Node,historyContenNode:cc.Node,sercurityContenNode:cc.Node,mailContenNode:cc.Node,InfoAccount:n,InfoHistory:o,InfoSercurity:s,InfoMail:a},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.InfoAccount.init(t),this.InfoHistory.init(t),this.InfoSercurity.init(t),this.InfoMail.init(t)},onLoad:function(){},onEnable:function(){this.headerNode.active=!0},onDisable:function(){this.hideAllContents()},onInfoClick:function(){this.GameCenter.Audio.playClick(),this.showInfo()},showInfo:function(){this.initBeforeClick(),this.accountOnButtonNode.active=!0,this.accountOffButtonNode.active=!1,this.accountContentNode.active=!0},onHistoryClick:function(){this.GameCenter.Audio.playClick(),this.showHistory()},showHistory:function(){this.initBeforeClick(),this.historyOnButtonNode.active=!0,this.historyOffButtonNode.active=!1,this.historyContenNode.active=!0},onSercurityClick:function(){this.GameCenter.Audio.playClick(),this.showSercurity()},showSercurity:function(){this.initBeforeClick(),this.sercurityOnButtonNode.active=!0,this.sercurityOffButtonNode.active=!1,this.sercurityContenNode.active=!0},onMailClick:function(){this.GameCenter.Audio.playClick(),this.showMail()},showMail:function(){this.initBeforeClick(),this.mailOnButtonNode.active=!0,this.mailOffButtonNode.active=!1,this.mailContenNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.accountOffButtonNode.active=!0,this.historyOffButtonNode.active=!0,this.sercurityOffButtonNode.active=!0,this.mailOffButtonNode.active=!0},hideAllOnButtons:function(){this.accountOnButtonNode.active=!1,this.historyOnButtonNode.active=!1,this.sercurityOnButtonNode.active=!1,this.mailOnButtonNode.active=!1},hideAllContents:function(){this.accountContentNode.active=!1,this.historyContenNode.active=!1,this.sercurityContenNode.active=!1,this.mailContenNode.active=!1},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showGameNode()}}),cc._RF.pop()},{"./info/InfoAccount":"InfoAccount","./info/InfoHistory":"InfoHistory","./info/InfoMail":"InfoMail","./info/InfoSercurity":"InfoSercurity"}],GameListAll:[function(t,e,i){"use strict";cc._RF.push(e,"23292wEFsdAb4hvilhK6vSw","GameListAll");var n=t("../../../prefab/item/SlotGameIconItem"),o=t("./GameListEvent");cc.Class({extends:cc.Component,properties:{slotSlotGameIcon:n,slot2SlotGameIcon:n,slot3SlotGameIcon:n,GameListEvent:o,gamePageView:cc.PageView},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},initData:function(t){if(this.data=t,t){t.zoombies;var e=t.dragon,i=t.one001,n=t.classic1;this.slotSlotGameIcon.initData(n),this.slot2SlotGameIcon.initData(e),this.slot3SlotGameIcon.initData(i)}this.GameListEvent&&this.GameListEvent.initData(t)},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{"../../../prefab/item/SlotGameIconItem":"SlotGameIconItem","./GameListEvent":"GameListEvent"}],GameListBetting:[function(t,e,i){"use strict";cc._RF.push(e,"14464QY8pdHVLdz8XJVSJfg","GameListBetting");var n=t("../../../prefab/item/SlotGameIconItem");cc.Class({extends:cc.Component,properties:{slotSlotGameIcon:n,slot2SlotGameIcon:n,slot3SlotGameIcon:n},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},initData:function(t){if(this.data=t,t){t.zoombies;var e=t.dragon,i=t.one001,n=t.classic1;this.slotSlotGameIcon.initData(n),this.slot2SlotGameIcon.initData(e),this.slot3SlotGameIcon.initData(i)}}}),cc._RF.pop()},{"../../../prefab/item/SlotGameIconItem":"SlotGameIconItem"}],GameListCardGame:[function(t,e,i){"use strict";cc._RF.push(e,"b4105ld/vFO7KiqCNXyj7uw","GameListCardGame"),cc.Class({extends:cc.Component,properties:{gamePageView:cc.PageView},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{}],GameListEvent:[function(t,e,i){"use strict";cc._RF.push(e,"e07fdEm0epLc77rOck1K3LJ","GameListEvent");var n=t("../../../prefab/mini-game/item/MiniGameXPer");cc.Class({extends:cc.Component,properties:{miniPokerMiniGameXper:n,mini3CayMiniGameXper:n,diamondMiniGameXper:n,trenDuoiMiniGameXper:n,bomMiniGameXper:n,wildMiniGameXper:n,miniPokerMiniGameXper2:n,mini3CayMiniGameXper2:n,diamondMiniGameXper2:n,trenDuoiMiniGameXper2:n,bomMiniGameXper2:n,wildMiniGameXper2:n,slot1MiniGameXper:n,slot2MiniGameXper:n,slot3MiniGameXper:n,slot1MiniGameXper2:n,slot2MiniGameXper2:n,slot3MiniGameXper2:n},onLoad:function(){this.miniPokerMiniGameXper.showEventNode(),this.mini3CayMiniGameXper.showEventNode(),this.diamondMiniGameXper.showEventNode(),this.trenDuoiMiniGameXper.showEventNode(),this.bomMiniGameXper.showEventNode(),this.wildMiniGameXper.showEventNode(),this.miniPokerMiniGameXper2.showEventNode(),this.mini3CayMiniGameXper2.showEventNode(),this.diamondMiniGameXper2.showEventNode(),this.trenDuoiMiniGameXper2.showEventNode(),this.bomMiniGameXper2.showEventNode(),this.wildMiniGameXper2.showEventNode(),this.slot1MiniGameXper.showEventNode(),this.slot2MiniGameXper.showEventNode(),this.slot3MiniGameXper.showEventNode(),this.slot1MiniGameXper2.showEventNode(),this.slot2MiniGameXper2.showEventNode(),this.slot3MiniGameXper2.showEventNode()},initData:function(t){if(this.data=t,this.data){var e=this.data.mini_poker?this.data.mini_poker[3]:null,i=this.data.mini_3cay?this.data.mini_3cay[3]:null,n=this.data.diamond?this.data.diamond[3]:null,o=this.data.hilo?this.data.hilo[6]:null,s=this.data.classic1?this.data.classic1[3]:null,a=this.data.one001?this.data.one001[3]:null,r=this.data.dragon?this.data.dragon[3]:null,c=this.data.bom?this.data.bom[3]:null,h=this.data.wild?this.data.wild[3]:null;this.miniPokerMiniGameXper.showEventNode(e),this.mini3CayMiniGameXper.showEventNode(i),this.diamondMiniGameXper.showEventNode(n),this.trenDuoiMiniGameXper.showEventNode(o),this.bomMiniGameXper.showEventNode(c),this.wildMiniGameXper.showEventNode(h),this.miniPokerMiniGameXper2.showEventNode(e),this.mini3CayMiniGameXper2.showEventNode(i),this.diamondMiniGameXper2.showEventNode(n),this.trenDuoiMiniGameXper2.showEventNode(o),this.bomMiniGameXper2.showEventNode(c),this.wildMiniGameXper2.showEventNode(h),this.slot1MiniGameXper.showEventNode(s),this.slot2MiniGameXper.showEventNode(r),this.slot3MiniGameXper.showEventNode(a),this.slot1MiniGameXper2.showEventNode(s),this.slot2MiniGameXper2.showEventNode(r),this.slot3MiniGameXper2.showEventNode(a)}}}),cc._RF.pop()},{"../../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer"}],GameList:[function(t,e,i){"use strict";cc._RF.push(e,"c1502eOkw9HHpKymD0FHhsY","GameList");var n=t("../../helper/Constant"),o=t("../../prefab/mini-game/MiniGameConstant"),s=t("./other/GameListAll"),a=t("./other/GameListCardGame"),r=t("./other/GameListBetting");cc.Class({extends:cc.Component,properties:{GameListAll:s,GameListCardGame:a,GameListBetting:r,allGameOnButtonNode:cc.Node,allGameOffButtonNode:cc.Node,cardGameOnButtonNode:cc.Node,cardGameOffButtonNode:cc.Node,miniBettingOnButtonNode:cc.Node,miniBettingOffButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameListAll.init(t),this.GameListCardGame.init(t),this.GameListBetting.init(t)},onLoad:function(){},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showLogOutFormNode()},handleRequest:function(t){if(t.status){var e=t.data.game_name,i=t.data;switch(e){case o.JACKPOT:this.GameListAll.initData(i.game_data),this.GameListBetting.initData(i.game_data)}}},onBannerClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()&&this.GameCenterUI.showBannerFormNode()},onSlotClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(n.ZOOMBIES):this.GameCenterUI.showLoginFormNode()},onSlot2Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(n.DRAGON):this.GameCenterUI.showLoginFormNode()},onSlot3Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(n.ONE001):this.GameCenterUI.showLoginFormNode()},onSlot4Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(n.CLASSIC1):this.GameCenterUI.showLoginFormNode()},onChanClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Ch\u1eafn","\u0110ang ph\xe1t tri\u1ec3n"):this.GameCenterUI.showLoginFormNode()},onBaCayClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.BA_CAY)},onLiengClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.LIENG)},onMauBinhClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.MAU_BINH)},onPhomClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.PHOM)},onPokerClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.POKER)},onSamClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.SAM)},onSamSoloClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.SAMSOLO)},onTLMNClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.TLMN)},onTLMNSoloClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.TLMNSOLO)},onXiToClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.XITO)},onXocDiaClick:function(){this.GameCenter.Audio.playClick(),this.joinGameLobby(n.XOC_DIA)},onVQMMClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onLuckyWheelClick()):this.GameCenterUI.showLoginFormNode()},onTaiXiuClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.TaiXiu.onTaiXiuClick(),this.GameCenter.MiniGame.TaiXiu.onShowTaiXiuClick()):this.GameCenterUI.showLoginFormNode()},onMiniPokerClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onMiniPokerClick()):this.GameCenterUI.showLoginFormNode()},onMiniBaCayClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onMiniBaCayClick()):this.GameCenterUI.showLoginFormNode()},onDiamondClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onDiamondClick()):this.GameCenterUI.showLoginFormNode()},onTrenDuoiClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onTrenDuoiClick()):this.GameCenterUI.showLoginFormNode()},onMiniGameLotteryClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onMiniGameLotteryClick()):this.GameCenterUI.showLoginFormNode()},onBauCuaClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onBauCuaClick()):this.GameCenterUI.showLoginFormNode()},onLuckyWheelClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onLuckyWheelClick()):this.GameCenterUI.showLoginFormNode()},onBomClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onBomClick()):this.GameCenterUI.showLoginFormNode()},onWildClick:function(){this.GameCenter.getUser()?(this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.MiniGameCircle.onWildClick()):this.GameCenterUI.showLoginFormNode()},onFireFishClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(n.SHOOTING_FISH):this.GameCenterUI.showLoginFormNode()},joinGameLobby:function(t){if(this.GameCenter.getUser()){this.GameCenter.showProcessingNode();var e={game_name:t};this.GameCenter.sendRequest.sendNoPrefixToZone(n.REQUEST_JOIN_GAME,e)}else this.GameCenterUI.showLoginFormNode()},onAllGameClick:function(){this.GameCenter.Audio.playClick(),this.hideAllButton(),this.hideAllContent(),this.GameListAll.node.active=!0,this.allGameOnButtonNode.active=!0,this.allGameOffButtonNode.active=!1},onCardGameClick:function(){this.GameCenter.Audio.playClick(),this.hideAllButton(),this.hideAllContent(),this.GameListCardGame.node.active=!0,this.cardGameOnButtonNode.active=!0,this.cardGameOffButtonNode.active=!1},onBettingGameClick:function(){this.GameCenter.Audio.playClick(),this.hideAllButton(),this.hideAllContent(),this.GameListBetting.node.active=!0,this.miniBettingOnButtonNode.active=!0,this.miniBettingOffButtonNode.active=!1},hideAllContent:function(){this.GameListAll.node.active=!1,this.GameListCardGame.node.active=!1,this.GameListBetting.node.active=!1},hideAllButton:function(){this.allGameOnButtonNode.active=!1,this.cardGameOnButtonNode.active=!1,this.miniBettingOnButtonNode.active=!1,this.allGameOffButtonNode.active=!0,this.cardGameOffButtonNode.active=!0,this.miniBettingOffButtonNode.active=!0}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../prefab/mini-game/MiniGameConstant":"MiniGameConstant","./other/GameListAll":"GameListAll","./other/GameListBetting":"GameListBetting","./other/GameListCardGame":"GameListCardGame"}],GameMiniHistory:[function(t,e,i){"use strict";cc._RF.push(e,"dc617DzYgFK35kPreEHoX31","GameMiniHistory");var n=t("./history/MiniBaCayHistories"),o=t("./history/MiniPokerHistories"),s=t("./history/TaiXiuHistories"),a=t("./history/DiamondHistories"),r=t("./history/TrenDuoiHistories"),c=t("./history/MiniGameLotteryHistories"),h=t("./history/BauCuaHistories"),l=t("./history/BomHistories"),u=t("./history/WildHistories"),d=t("./history/TanLocHistories");cc.Class({extends:cc.Component,properties:{MiniBaCayHistories:n,MiniPokerHistories:o,TaiXiuHistories:s,DiamondHistories:a,TrenDuoiHistories:r,MiniGameLotteryHistories:c,BauCuaHistories:h,BomHistories:l,WildHistories:u,TanLocHistories:d},init:function(t){this.controller=t,this.MiniBaCayHistories.init(t),this.MiniPokerHistories.init(t),this.TaiXiuHistories.init(t),this.DiamondHistories.init(t),this.TrenDuoiHistories.init(t),this.MiniGameLotteryHistories.init(t),this.BauCuaHistories.init(t),this.BomHistories.init(t),this.WildHistories.init(t),this.TanLocHistories.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onDisable:function(){this.hideAll()},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},showMiniBaCayHistories:function(){this.hideAll(),this.MiniBaCayHistories.node.active=!0},showMiniPokerHistories:function(){this.hideAll(),this.MiniPokerHistories.node.active=!0},showTaiXiuHistories:function(){this.hideAll(),this.TaiXiuHistories.node.active=!0},showDiamondHistories:function(){this.hideAll(),this.DiamondHistories.node.active=!0},showTrenDuoiHistories:function(){this.hideAll(),this.TrenDuoiHistories.node.active=!0},showMiniGameLotteryHistories:function(){this.hideAll(),this.MiniGameLotteryHistories.node.active=!0},showBauCuaHistories:function(){this.hideAll(),this.BauCuaHistories.node.active=!0},showBomHistories:function(){this.hideAll(),this.BomHistories.node.active=!0},showWildHistories:function(){this.hideAll(),this.WildHistories.node.active=!0},showTanLocHistories:function(){this.hideAll(),this.TanLocHistories.node.active=!0},hideAll:function(){this.MiniBaCayHistories.node.active=!1,this.MiniPokerHistories.node.active=!1,this.TaiXiuHistories.node.active=!1,this.DiamondHistories.node.active=!1,this.TrenDuoiHistories.node.active=!1,this.MiniGameLotteryHistories.node.active=!1,this.BauCuaHistories.node.active=!1,this.BomHistories.node.active=!1,this.WildHistories.node.active=!1,this.TanLocHistories.node.active=!1}}),cc._RF.pop()},{"./history/BauCuaHistories":"BauCuaHistories","./history/BomHistories":"BomHistories","./history/DiamondHistories":"DiamondHistories","./history/MiniBaCayHistories":"MiniBaCayHistories","./history/MiniGameLotteryHistories":"MiniGameLotteryHistories","./history/MiniPokerHistories":"MiniPokerHistories","./history/TaiXiuHistories":"TaiXiuHistories","./history/TanLocHistories":"TanLocHistories","./history/TrenDuoiHistories":"TrenDuoiHistories","./history/WildHistories":"WildHistories"}],GameMiniJackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"b4f8213qD5Duq9kD3gOu98R","GameMiniJackpotItem");var n=t("../../../util/FormatUtil"),o=(t("../../../helper/Constant"),t("../../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,prefixNickNameLabel:cc.Label,accountLabel:cc.Label,timeLabel:cc.Label,valueLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.noLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.accountLabel.string=t.nick_name,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.valueLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.accountLabel.node.color=new cc.Color(255,244,141,255)}else this.node.active=!1},onLoad:function(){}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],GameMiniRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"763f751aYJBXZHFDCBnk9rU","GameMiniRankItem");var n=t("../../../util/FormatUtil"),o=(t("../../../helper/Constant"),t("../../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,prefixNickNameLabel:cc.Label,accountLabel:cc.Label,valueLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,this.noLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.accountLabel.string=t.nick_name,this.valueLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.accountLabel.node.color=new cc.Color(255,244,141,255)},onLoad:function(){}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],GameMiniRankTanLoc:[function(t,e,i){"use strict";cc._RF.push(e,"c8381cg0uJDY7dZfCSSghde","GameMiniRankTanLoc");var n=t("../MiniGameConstant"),o=t("../../item/PaginationItem"),s=t("../bonus-event/BonusConstant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,headerTanLocNode:cc.Node,headerRutLocNode:cc.Node,tanLocOnButtonNode:cc.Node,tanLocOffButtonNode:cc.Node,rutLocOnButtonNode:cc.Node,rutLocOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView,pageNodeRank:cc.Node,pagePreviewPreviewRank:o,pagePreViewRank:o,pageNextRank:o,pageNextNextRank:o,listPageNumberItemRank:[o]},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.data=null,this.putAllItemToPoolRank(),this.showLoadingNode(),this.poolRank=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.rankItemPrefab);this.poolRank.put(e)}cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1)}},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},setMiniGameName:function(t){this.minigameName=t,this.loadDataBuyGameName(t)},loadDataBuyGameName:function(t){var e=void 0;switch(t){case n.TAN_LOC:e=s.GET_TOP}this.controller.sendRequest.sendNoPrefixToZone(e)},onCloseClick:function(){this.hideDialog()},onTanLocClick:function(){this.hideAllButton(),this.hideAllContent(),this.headerTanLocNode.active=!0,this.tanLocOnButtonNode.active=!0,this.tanLocOffButtonNode.active=!1,this.initData()},onRutLocClick:function(){this.hideAllButton(),this.hideAllContent(),this.headerRutLocNode.active=!1,this.rutLocOnButtonNode.active=!0,this.rutLocOffButtonNode.active=!1,this.initData()},initDataTop:function(t){this.data=t,this.initData(),this.hideLoadingNode(),console.log(t)},initData:function(){if(this.putAllItemToPoolRank(),this.data){var t=this.isRankTanLocType()?this.data.tan_loc:this.data.rut_loc;this.headerTanLocNode.active=this.isRankTanLocType(),this.headerRutLocNode.active=!this.isRankTanLocType(),t&&(this.rank=t,this.setPageRank(0))}},isRankTanLocType:function(){return this.tanLocOnButtonNode.active},setPageRank:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pageRank=e,this.listPaginationRank=[],this.putAllItemToPoolRank(),this.rank&&this.rank.length>0?function(){t.pageNodeRank.active=!0,t.showListContentRank(e);var i=parseInt(t.rank.length/n.NUMBER_DETAIL_ITEM);if(i=i*n.NUMBER_DETAIL_ITEM===t.rank.length?i-1:i,t.pagePreviewPreviewRank.init("<<",0),t.pageNextNextRank.init(">>",i),t.listPaginationRank.push(t.pagePreviewPreviewRank),t.listPaginationRank.push(t.pageNextNextRank),e<2)for(var o=0,s=t.listPageNumberItemRank.length;o<s;o++)t.listPageNumberItemRank[o].init(o+1,o),t.listPageNumberItemRank[o].enable(),o===e&&t.listPageNumberItemRank[o].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItemRank.length-1;r>=0;r--)t.listPageNumberItemRank[r].init(a+1,a),t.listPageNumberItemRank[r].enable(),a===e&&t.listPageNumberItemRank[r].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[r]),a--;else{for(var c=0,h=t.listPageNumberItemRank.length;c<h;c++)t.listPageNumberItemRank[c].enable();t.listPageNumberItemRank[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItemRank.length;u<d;u++)t.listPageNumberItemRank[u].init(e+l+1,e+l),t.listPageNumberItemRank[u].enable(),0===l&&t.listPageNumberItemRank[u].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[u]),l++;e<=0?(t.pagePreViewRank.init("<",0),t.pageNextRank.init(">",1)):e+2>=i?(t.pagePreViewRank.init("<",e-1),t.pageNextRank.init(">",i)):(t.pagePreViewRank.init("<",e-1),t.pageNextRank.init(">",e+1)),t.listPaginationRank.push(t.pagePreViewRank),t.listPaginationRank.push(t.pageNextRank);var m=t;if(!t.isEventRank){for(var f in t.listPaginationRank){var p=t.listPaginationRank[f].getComponent("PaginationItem").pageOffButtonNode;p.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPageRank(t)},p)}t.isEventRank=!0}}():this.pageNodeRank.active=!1},showListContentRank:function(t){if(t*n.NUMBER_DETAIL_ITEM<this.rank.length)for(var e=t*n.NUMBER_DETAIL_ITEM,i=e,o=e+n.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.rank.length){var s=void 0;this.poolRank&&(s=this.poolRank.get()),s||(s=cc.instantiate(this.rankItemPrefab)),s.getComponent("GameMiniRankItem").init(this.rank[i],i),s.parent=this.rankScrollView.content}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},putAllItemToPoolRank:function(){if(this.poolRank){var t=this.rankScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.poolRank.put(e[n])}},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideAllButton:function(){this.tanLocOnButtonNode.active=!1,this.tanLocOffButtonNode.active=!0,this.rutLocOnButtonNode.active=!1,this.rutLocOffButtonNode.active=!0},hideAllContent:function(){this.headerRutLocNode.active=!1,this.headerTanLocNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../item/PaginationItem":"PaginationItem","../MiniGameConstant":"MiniGameConstant","../bonus-event/BonusConstant":"BonusConstant"}],GameMiniRank:[function(t,e,i){"use strict";cc._RF.push(e,"f26e5vuvq5KjbFLdtrJr1vL","GameMiniRank");var n=t("../MiniGameConstant"),o=t("../../item/PaginationItem"),s=t("../tai-xiu/TaiXiuConstant"),a=t("../diamond/DiamondConstant"),r=t("../mini-bacay/MiniBaCayConstant"),c=t("../mini-poker/MiniPokerConstant"),h=t("../tren-duoi/TrenDuoiConstant"),l=t("../bom/BomConstant"),u=t("../wild/WildConstant"),d=t("../minigame-lottery/MiniGameLotteryConstant"),m=t("../bau-cua/BauCuaConstant"),f=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,typeButtonNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,rankTaiXiuNode:cc.Node,rankButtonNode:cc.Node,jackpotButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView,rankTaiXiuScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotContentNode:cc.Node,pageNode:cc.Node,pagePreviewPreview:o,pagePreView:o,pageNext:o,pageNextNext:o,listPageNumberItem:[o],pageNodeRank:cc.Node,pagePreviewPreviewRank:o,pagePreViewRank:o,pageNextRank:o,pageNextNextRank:o,listPageNumberItemRank:[o]},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.data=null,this.onMoneyClick(),this.onJackpotClick(),this.showLoadingNode(),this.poolRank=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.rankItemPrefab);this.poolRank.put(e)}this.poolJackpot=new cc.NodePool;for(var i=0;i<10;i++){var n=cc.instantiate(this.jackpotItemPrefab);this.poolJackpot.put(n)}},onDisable:function(){this.removeXhr()},setMiniGameName:function(t){this.reset(),this.minigameName=t,t===n.TAIXIU&&(this.jackpotButtonNode.active=!1),this.loadDataBuyGameName(t)},loadDataBuyGameName:function(t){var e=void 0;switch(t){case n.TAIXIU:e=s.GET_TOP;break;case n.DIAMOND:case n.DIAMOND_2:e=a.GET_TOP;break;case n.MINI_BACAY:e=r.GET_TOP;break;case n.MINI_POKER:e=c.GET_TOP;break;case n.TREN_DUOI:e=h.GET_TOP;break;case n.BOM:e=l.GET_TOP;break;case n.WILD:e=u.GET_TOP;break;case n.MINIGAME_LOTTERY:e=d.GET_TOP;break;case n.BAU_CUA:e=m.GET_TOP}this.controller.sendRequest.sendNoPrefixToZone(e)},onCloseClick:function(){this.hideDialog()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.minigameName===n.TAIXIU?this.initContentTaiXiu():this.initData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.minigameName===n.TAIXIU?this.initContentTaiXiu():this.initData()},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.minigameName===n.TAIXIU?(this.rankNode.active=!1,this.rankTaiXiuNode.active=!0):(this.rankNode.active=!0,this.rankTaiXiuNode.active=!1)},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOnButtonNode.active=!0,this.jackpotOffButtonNode.active=!1,this.jackpotNode.active=!0},initDataTaiXiu:function(t){this.data=t.tops_tai_xiu,this.initContentTaiXiu()},initDataBauCua:function(t){this.rankButtonNode.active=!0,this.jackpotButtonNode.active=!1,this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.initDataTop(t)},initDataTop:function(t){var e=[];e[0]=t[2],e[1]=t[0];var i=[];i[0]=t[3],i[1]=t[1],this.data=[],this.data[0]=e,this.data[1]=i,this.initData(),this.typeButtonNode.active=!0},initDataMiniGameLottery:function(t){this.data=[];var e=[];e[0]=t.tops_win,e[1]=t.tops_jackpot,this.data[0]=e,this.initData(),this.typeButtonNode.active=!1},initContentMiniGameLottery:function(){if(this.showListNode(),this.putAllItemToPoolRank(),this.putAllItemToPoolRankTaiXiu(),this.putAllItemToPoolJackpot(),this.rankNode.active=!this.isRankType(),this.jackpotNode.active=this.isRankType(),this.data){var t=this.isRankType()?this.data.tops_jackpot:this.data.tops_win;this.rank=f.sortDataTimeByTime(t),this.setPageRank(0)}},initContentTaiXiu:function(){if(this.showListNode(),this.putAllItemToPoolRank(),this.putAllItemToPoolRankTaiXiu(),this.putAllItemToPoolJackpot(),this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType(),this.rankTaiXiuNode.active=this.isRankType(),this.minigameName===n.TAIXIU&&this.onRankClick(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];this.rank=f.sortDataTimeByTime(t),this.showListContentRankTaiXiu()}},initData:function(){if(this.showListNode(),this.putAllItemToPoolRank(),this.putAllItemToPoolRankTaiXiu(),this.putAllItemToPoolJackpot(),this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType(),this.rankTaiXiuNode.active=this.isRankType(),this.minigameName===n.TAIXIU&&this.onRankClick(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];t&&(t[0]&&(this.rank=f.sortDataTimeByTime(t[0]),this.setPageRank(0)),t[1]&&(this.jackpot=f.sortDataTimeByTime(t[1]),this.setPage(0)))}},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},isMoneyType:function(){return this.goldButtonNode.active},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.rankOffButtonNode.active=!0,this.jackpotOffButtonNode.active=!0,this.rankOnButtonNode.active=!1,this.jackpotOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.putAllItemToPoolJackpot(),this.jackpot&&this.jackpot.length>0?function(){t.pageNode.active=!0,t.showListContent(e);var i=parseInt(t.jackpot.length/n.NUMBER_DETAIL_ITEM);if(i=i*n.NUMBER_DETAIL_ITEM===t.jackpot.length?i-1:i,t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",i),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var o=0,s=t.listPageNumberItem.length;o<s;o++)t.listPageNumberItem[o].init(o+1,o),t.listPageNumberItem[o].enable(),o===e&&t.listPageNumberItem[o].disable(),t.listPagination.push(t.listPageNumberItem[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItem.length-1;r>=0;r--)t.listPageNumberItem[r].init(a+1,a),t.listPageNumberItem[r].enable(),a===e&&t.listPageNumberItem[r].disable(),t.listPagination.push(t.listPageNumberItem[r]),a--;else{for(var c=0,h=t.listPageNumberItem.length;c<h;c++)t.listPageNumberItem[c].enable();t.listPageNumberItem[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItem.length;u<d;u++)t.listPageNumberItem[u].init(e+l+1,e+l),t.listPageNumberItem[u].enable(),0===l&&t.listPageNumberItem[u].disable(),t.listPagination.push(t.listPageNumberItem[u]),l++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=i?(t.pagePreView.init("<",e-1),t.pageNext.init(">",i)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var m=t;if(!t.isEvent){for(var f in t.listPagination){var p=t.listPagination[f].getComponent("PaginationItem").pageOffButtonNode;p.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPage(t)},p)}t.isEvent=!0}}():this.pageNode.active=!1},showListContent:function(t){if(t*n.NUMBER_DETAIL_ITEM<this.jackpot.length)for(var e=t*n.NUMBER_DETAIL_ITEM,i=e,o=e+n.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.jackpot.length){var s=void 0;this.poolJackpot&&(s=this.poolJackpot.get()),s||(s=cc.instantiate(this.jackpotItemPrefab)),s.getComponent("GameMiniJackpotItem").init(this.jackpot[i],i),s.parent=this.jackpotContentNode}},setPageRank:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pageRank=e,this.listPaginationRank=[],this.putAllItemToPoolRank(),this.rank&&this.rank.length>0?function(){t.pageNodeRank.active=!0,t.showListContentRank(e);var i=parseInt(t.rank.length/n.NUMBER_DETAIL_ITEM);if(i=i*n.NUMBER_DETAIL_ITEM===t.rank.length?i-1:i,t.pagePreviewPreviewRank.init("<<",0),t.pageNextNextRank.init(">>",i),t.listPaginationRank.push(t.pagePreviewPreviewRank),t.listPaginationRank.push(t.pageNextNextRank),e<2)for(var o=0,s=t.listPageNumberItemRank.length;o<s;o++)t.listPageNumberItemRank[o].init(o+1,o),t.listPageNumberItemRank[o].enable(),o===e&&t.listPageNumberItemRank[o].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItemRank.length-1;r>=0;r--)t.listPageNumberItemRank[r].init(a+1,a),t.listPageNumberItemRank[r].enable(),a===e&&t.listPageNumberItemRank[r].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[r]),a--;else{for(var c=0,h=t.listPageNumberItemRank.length;c<h;c++)t.listPageNumberItemRank[c].enable();t.listPageNumberItemRank[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItemRank.length;u<d;u++)t.listPageNumberItemRank[u].init(e+l+1,e+l),t.listPageNumberItemRank[u].enable(),0===l&&t.listPageNumberItemRank[u].disable(),t.listPaginationRank.push(t.listPageNumberItemRank[u]),l++;e<=0?(t.pagePreViewRank.init("<",0),t.pageNextRank.init(">",1)):e+2>=i?(t.pagePreViewRank.init("<",e-1),t.pageNextRank.init(">",i)):(t.pagePreViewRank.init("<",e-1),t.pageNextRank.init(">",e+1)),t.listPaginationRank.push(t.pagePreViewRank),t.listPaginationRank.push(t.pageNextRank);var m=t;if(!t.isEventRank){for(var f in t.listPaginationRank){var p=t.listPaginationRank[f].getComponent("PaginationItem").pageOffButtonNode;p.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPageRank(t)},p)}t.isEventRank=!0}}():this.pageNodeRank.active=!1},showListContentRank:function(t){if(t*n.NUMBER_DETAIL_ITEM<this.rank.length)for(var e=t*n.NUMBER_DETAIL_ITEM,i=e,o=e+n.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.rank.length){var s=void 0;this.poolRank&&(s=this.poolRank.get()),s||(s=cc.instantiate(this.rankItemPrefab)),s.getComponent("GameMiniRankItem").init(this.rank[i],i),s.parent=this.rankScrollView.content}},showListContentRankTaiXiu:function(){if(this.rank)for(var t=0,e=this.rank.length;t<e;t++){var i=void 0;this.poolRank&&(i=this.poolRank.get()),i||(i=cc.instantiate(this.rankItemPrefab)),i.getComponent("GameMiniRankItem").init(this.rank[t],t),i.parent=this.rankTaiXiuScrollView.content}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.rankButtonNode.active=!0,this.jackpotButtonNode.active=!0},putAllItemToPoolRank:function(){if(this.poolRank){var t=this.rankScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.poolRank.put(e[n])}},putAllItemToPoolRankTaiXiu:function(){if(this.poolRank){var t=this.rankTaiXiuScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.poolRank.put(e[n])}},putAllItemToPoolJackpot:function(){if(this.poolJackpot){var t=this.jackpotContentNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.poolJackpot.put(e[n])}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../item/PaginationItem":"PaginationItem","../MiniGameConstant":"MiniGameConstant","../bau-cua/BauCuaConstant":"BauCuaConstant","../bom/BomConstant":"BomConstant","../diamond/DiamondConstant":"DiamondConstant","../mini-bacay/MiniBaCayConstant":"MiniBaCayConstant","../mini-poker/MiniPokerConstant":"MiniPokerConstant","../minigame-lottery/MiniGameLotteryConstant":"MiniGameLotteryConstant","../tai-xiu/TaiXiuConstant":"TaiXiuConstant","../tren-duoi/TrenDuoiConstant":"TrenDuoiConstant","../wild/WildConstant":"WildConstant"}],GameRecharge:[function(t,e,i){"use strict";cc._RF.push(e,"ca742e6+P9PUaZE3/vTbd+Z","GameRecharge");var n=t("./recharge/RechargeGold"),o=t("./recharge/RechargeMoney"),s=t("./recharge/RechargeIAP"),a=t("./recharge/RechargeSMS"),r=t("./recharge/RechargeButtonCard"),c=t("./recharge/AwardButtonCard"),h=t("./recharge/AwardCard"),l=t("./recharge/Transfer"),u=t("./recharge/Safe");cc.Class({extends:cc.Component,properties:{headerNode:cc.Node,rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeIAPOnButtonNode:cc.Node,rechargeIAPOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,awardOnButtonNode:cc.Node,awardOffButtonNode:cc.Node,transferOnButtonNode:cc.Node,transferOffButtonNode:cc.Node,safeOnButtonNode:cc.Node,safeOffButtonNode:cc.Node,rechargeAllButtonNode:cc.Node,awardButtonContentNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,rechargeIAPContentNode:cc.Node,rechargeGoldContentNode:cc.Node,awardContentNode:cc.Node,transferContentNode:cc.Node,safeContentNode:cc.Node,RechargeGold:n,RechargeButtonCard:r,AwardButtonCard:c,RechargeMoney:o,RechargeSMS:a,RechargeIAP:s,AwardCard:h,Transfer:l,Safe:u},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.RechargeIAP.init(t),this.RechargeGold.init(t),this.RechargeButtonCard.init(t),this.AwardButtonCard.init(t),this.AwardCard.init(t),this.Transfer.init(t),this.Safe.init(t)},onLoad:function(){},onEnable:function(){this.headerNode.active=!0},onDisable:function(){this.hideAllContents()},updateMoneyGold:function(){this.RechargeGold.initData(),this.Transfer.TransferContent.initMoney(),this.AwardCard.initMoney(),this.Safe.initMoney()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeAllButtonNode.active=!0},onRechargeGoldClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0},onAwardClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.awardOnButtonNode.active=!0,this.awardOffButtonNode.active=!1,this.awardButtonContentNode.active=!0},onTransferClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.transferOnButtonNode.active=!0,this.transferOffButtonNode.active=!1,this.transferContentNode.active=!0},onSafeClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.safeOnButtonNode.active=!0,this.safeOffButtonNode.active=!1,this.safeContentNode.active=!0},onRechargeIAPClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeIAPOnButtonNode.active=!0,this.rechargeIAPOffButtonNode.active=!1,this.rechargeIAPContentNode.active=!0},showAwardCardNode:function(){this.awardButtonContentNode.active=!1,this.awardContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rechargeMoneyOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0,this.awardOffButtonNode.active=!0,this.transferOffButtonNode.active=!0,this.safeOffButtonNode.active=!0,this.rechargeIAPOffButtonNode.active=!0},hideAllOnButtons:function(){this.rechargeMoneyOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1,this.awardOnButtonNode.active=!1,this.transferOnButtonNode.active=!1,this.safeOnButtonNode.active=!1,this.rechargeIAPOnButtonNode.active=!1},hideAllContents:function(){this.rechargeAllButtonNode.active=!1,this.awardButtonContentNode.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1,this.rechargeGoldContentNode.active=!1,this.awardContentNode.active=!1,this.transferContentNode.active=!1,this.safeContentNode.active=!1,this.rechargeIAPContentNode.active=!1},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showGameNode()}}),cc._RF.pop()},{"./recharge/AwardButtonCard":"AwardButtonCard","./recharge/AwardCard":"AwardCard","./recharge/RechargeButtonCard":"RechargeButtonCard","./recharge/RechargeGold":"RechargeGold","./recharge/RechargeIAP":"RechargeIAP","./recharge/RechargeMoney":"RechargeMoney","./recharge/RechargeSMS":"RechargeSMS","./recharge/Safe":"Safe","./recharge/Transfer":"Transfer"}],GameRoom:[function(t,e,i){"use strict";cc._RF.push(e,"0f3b7+jLx9IH5Rib8Bhhs81","GameRoom");var n=t("../../helper/Constant"),o=t("../../object/RoomType"),s=t("./other/Online");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,moneyOnButtonNode:cc.Node,moneyOffButtonNode:cc.Node,goldOnButtonNode:cc.Node,goldOffButtonNode:cc.Node,roomItemPrefab:cc.Prefab,listRoomNode:cc.Node,gameTextSprite:cc.Sprite,baCaySpriteFrame:cc.SpriteFrame,phomSpriteFrame:cc.SpriteFrame,tlmnSpriteFrame:cc.SpriteFrame,pokerSpriteFrame:cc.SpriteFrame,liengSpriteFrame:cc.SpriteFrame,maubinhSpriteFrame:cc.SpriteFrame,samSpriteFrame:cc.SpriteFrame,xitoSpriteFrame:cc.SpriteFrame,xocdiaSpriteFrame:cc.SpriteFrame,Online:s},init:function(t){this.GameCenter=t,this.Online.init(t)},onLoad:function(){this.minBet=0;var t=this.GameCenter.getTempData().is_vip_room;this.isVipRoom=!t},onEnable:function(){this.initListRoom(),this.backButtonNode.active=!0},onDisable:function(){this.backButtonNode.active=!1},initListRoom:function(){this.isVipRoom?(this.showMoneyButton(),this.initListRoomByType(o.MONEY_CODE)):(this.showGoldButton(),this.initListRoomByType(o.GOLD_CODE))},initListRoomByType:function(t){this.listRoomNode.removeAllChildren(!0);var e=this.getRoomData(),i=e.room_min_bets,n=this.getSpriteFrameByShortName(e.short_name);if(n&&(this.gameTextSprite.spriteFrame=n),i)for(var s in i)i[s].money_type==t&&(100!==i[s].min_bet&&1e3!==i[s].min_bet&&1e4!==i[s].min_bet||this.instanceRoomItem(i[s]));this.GameCenter.getTempData().is_vip_room=t===o.GOLD_CODE},instanceRoomItem:function(t){var e=cc.instantiate(this.roomItemPrefab);e.getComponent("RoomItem").init(this.GameCenter,t),e.parent=this.listRoomNode},getRoomData:function(){var t=this.GameCenter.getLastJoinedRoom().groupId,e=this.GameCenter.getConfig().list_game;for(var i in e)if(e[i].short_name===t)return e[i]},onMoneyRoomClick:function(){this.GameCenter.Audio.playClick(),this.isVipRoom=!0,this.showMoneyButton(),this.initListRoomByType(o.MONEY_CODE)},onGoldRoomClick:function(){this.GameCenter.Audio.playClick(),this.isVipRoom=!1,this.showGoldButton(),this.initListRoomByType(o.GOLD_CODE)},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},getRoomType:function(){return this.isVipRoom?o.MONEY_CODE:o.GOLD_CODE},showMoneyButton:function(){this.hideAllButtons(),this.moneyOnButtonNode.active=!0,this.goldOffButtonNode.active=!0},showGoldButton:function(){this.hideAllButtons(),this.moneyOffButtonNode.active=!0,this.goldOnButtonNode.active=!0},hideAllButtons:function(){this.moneyOnButtonNode.active=!1,this.moneyOffButtonNode.active=!1,this.goldOnButtonNode.active=!1,this.goldOffButtonNode.active=!1},getSpriteFrameByShortName:function(t){switch(t){case n.BA_CAY:return this.baCaySpriteFrame;case n.POKER:return this.pokerSpriteFrame;case n.PHOM:return this.phomSpriteFrame;case n.TLMN:return this.tlmnSpriteFrame;case n.LIENG:return this.liengSpriteFrame;case n.MAU_BINH:return this.maubinhSpriteFrame;case n.SAM:return this.samSpriteFrame;case n.XITO:return this.xitoSpriteFrame;case n.XOC_DIA:return this.xocdiaSpriteFrame;default:return null}},resetAllRoom:function(){if(this.node.active){var t=this.listRoomNode.getChildren();for(var e in t)t[e].getComponent("RoomItem").initInteracable()}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../object/RoomType":"RoomType","./other/Online":"Online"}],GameSlot:[function(t,e,i){"use strict";cc._RF.push(e,"fac0aczYRdERY4eYv/OhYnS","GameSlot");var n=t("../../../prefab/item/SlotGameIconItem");cc.Class({extends:cc.Component,properties:{slotSlotGameIcon:n,slot2SlotGameIcon:n},init:function(t){this.GameCenter=t},onLoad:function(){},initData:function(t){if(this.data=t,t){var e=t.zoombies,i=t.one001;this.slotSlotGameIcon.initData(e),this.slot2SlotGameIcon.initData(i)}}}),cc._RF.pop()},{"../../../prefab/item/SlotGameIconItem":"SlotGameIconItem"}],GiftCode:[function(t,e,i){"use strict";cc._RF.push(e,"25d9dQ5PUNHq6+nJ4f/HbO/","GiftCode");t("../../../util/BrowserUtil");var n=t("../../../helper/Message");t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{giftCodeEdibox:cc.EditBox},init:function(t){this.GameCenter=t},onLoad:function(){this.editboxs=[this.giftCodeEdibox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear()},onConfirmClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.giftCodeEdibox.string;if(this.checkAllEditboxNotEmpty()){var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),code:e};this.GameCenter.api.getGiftCode(i,function(e){t.clear(),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.GIFTCODE_TITLE,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.GIFTCODE_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(n.GIFTCODE_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil"}],GunChoise:[function(t,e,i){"use strict";cc._RF.push(e,"73c51JWljxMebdYWknIZnZI","GunChoise");var n=t("../../helper/FireFishConfig"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{gunSprite:cc.Sprite,gunNormalSpriteFrame:cc.SpriteFrame,gunActiveSpriteFrame:cc.SpriteFrame,gunLabel:cc.Label},init:function(t,e,i){this.FireFish=t.FireFish,this.FireFishGame=t,this.MyPlayer=e,this.index=i,this.isActive=!1;var s=n.GUNS_TYPE[i]*this.FireFishGame.minBet;this.gunLabel.string=o.numberWithCommas(s)},onLoad:function(){this.node.active=!1,this._initX=this.node.x,this._initY=this.node.y},setNormal:function(){this.isActive=!1,this.gunSprite.spriteFrame=this.gunNormalSpriteFrame},setActive:function(){this.isActive=!0,this.gunSprite.spriteFrame=this.gunActiveSpriteFrame},show:function(){this.node.active||(this.node.stopAllActions(),this.node.active=!0,this.node.setPosition(0,0),this.node.runAction(cc.moveTo(n.MY_PLAYER_SHOW_GUN_CHOISE,this._initX,this._initY)))},hide:function(){this.node.stopAllActions(),this.node.setPosition(this._initX,this._initY),this.node.runAction(cc.sequence(cc.moveTo(n.MY_PLAYER_SHOW_GUN_CHOISE,0,0),cc.callFunc(function(){this.node.active=!1},this)))},onClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.MyPlayer.hideGunChoise(),this.MyPlayer.changeGunWithAnimation(this.index),this.MyPlayer.FireFishGame.sendChangeGun(this.index)}}),cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","../../util/FormatUtil":"FormatUtil"}],Gun:[function(t,e,i){"use strict";cc._RF.push(e,"daae86RElBPporbXHSuLrHU","Gun"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),this._fireAnimationName="";for(var t=this._animation.getClips(),e=0,i=t.length;e<i;e++)t[e]._name.indexOf("Fire")>-1&&(this._fireAnimationName=t[e]._name);this._initX=this.node.x,this._initY=this.node.y},playShowAnimation:function(){this.node.y=this._initY-60,this.node.runAction(cc.moveTo(.15,this._initX,this._initY))},fire:function(){this._animation.play(this._fireAnimationName)}}),cc._RF.pop()},{}],HeaderAccountUI:[function(t,e,i){"use strict";cc._RF.push(e,"66fe97kbkhJXI+cA51N4Azd","HeaderAccountUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],HeaderAccount:[function(t,e,i){"use strict";cc._RF.push(e,"b4ed80OKfNLrI3gIFa1UPO7","HeaderAccount");var n=t("../../../util/Util"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{headerLobbyNode:cc.Node,headerLobbyGameNode:cc.Node,avatarSprite:cc.Sprite,nameLabel:cc.Label,moneyLabel:cc.Label,goldLabel:cc.Label,money2Label:cc.Label,gold2Label:cc.Label,messageNode:cc.Node,vipNode:cc.Node,vipSprite:cc.Sprite,vipProgressBar:cc.ProgressBar,counterMailUnreadNode:cc.Node,counterMailUnreadLabel:cc.Label,listVipSprite:[cc.SpriteFrame]},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initShowHeader(),this.loadUserInfo()},initShowHeader:function(){var t=this.GameCenter.getLastJoinedRoom().name;n.isLobbyGame(t)?this.showHeaderLobbyGame():this.showHeaderLobby()},loadUserInfo:function(){var t=this.GameCenter.getUser();if(t){var e=t.show_nickname,i=t.avatar;this.setNicknameLabel(e),this.initCounterUnreadMessage(),this.setAvatar(i),this.updateMoneyGold(),this.initVip()}},initVip:function(){var t=this.GameCenter.getConfig().vip,e=this.GameCenter.getVipPoint();if(t&&e){this.showVipNode();var i=e.value,n=this.getVipPointData(t,i);this.vipSprite.spriteFrame=n.sprite,this.vipProgressBar.progress=n.progress}else this.hideVipNode()},setNicknameLabel:function(t){this.nameLabel.string=t},minusUnreadMessage:function(){this.GameCenter.getUser().unread_message--,this.initCounterUnreadMessage()},plusUnreadMessage:function(){this.GameCenter.getUser().unread_message++,this.initCounterUnreadMessage(),this.showEffectNewMessage()},initCounterUnreadMessage:function(){var t=parseInt(this.GameCenter.getUser().unread_message);t>0?(this.counterMailUnreadNode.active=!0,this.counterMailUnreadLabel.string=t):this.counterMailUnreadNode.active=!1},setAvatar:function(t){var e=this;t&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var n=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=n}})},updateMoneyGold:function(){var t=this.GameCenter.getSFSMySelf(),e=t.variables.money.value,i=t.variables.gold.value;this.setMoneyLabel(e),this.setGoldLabel(i)},setMoneyLabel:function(t){this.moneyLabel.string=o.numberWithCommas(t),this.money2Label.string=o.numberWithCommas(t)},setGoldLabel:function(t){this.goldLabel.string=o.numberWithCommas(t),this.gold2Label.string=o.numberWithCommas(t)},showEffectNewMessage:function(){this.messageNode.stopAllActions(),this.messageNode.angle=0,this.messageNode.runAction(cc.sequence(cc.rotateTo(.25,180),cc.rotateTo(.25,360),cc.callFunc(function(){this.messageNode.angle=-360},this)))},onAvatarClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onInfoClick()},onGiftCodeClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()){this.GameCenter.getUser();this.GameCenterUI.showGiftCodeFormNode()}else this.GameCenterUI.showLoginFormNode()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showAgentFormNode()},onRechargeGoldClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeGoldClick()},onAwardClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onUseMoneyClick(),this.GameCenter.api.sendTokentoPays(this.GameCenter.getToken()),cc.sys.openURL(s.WEB_RECHARGE)},onQuestClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.Quest.showDialog()},onMailClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onMailClick()},onSettingClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showSettingFormNode()},onSecurityClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onSafeClick()},onTutorialClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenterUI.showTutorialFormNode():this.GameCenterUI.showLoginFormNode()},hideVipNode:function(){this.vipNode.active=!1},showVipNode:function(){this.vipNode.active=!0},getVipPointData:function(t,e){for(var i=0,n=0,o=t.length;n<o;n++)t[n].from_money<=e&&(i=n);return{sprite:this.listVipSprite[i],progress:e/(i<t.length-1?t[i+1].from_money:t[i].from_money)}},showHeaderLobby:function(){this.headerLobbyNode.active=!0,this.headerLobbyGameNode.active=!1},showHeaderLobbyGame:function(){this.headerLobbyNode.active=!1,this.headerLobbyGameNode.active=!0}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],HeaderLogin:[function(t,e,i){"use strict";cc._RF.push(e,"f01b9fAXrRAFKfGzp93Vt11","HeaderLogin");var n=t("../../../helper/Constant"),o=t("../../../helper/Message");t("../../../lib/md5");cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.initAutoLogin()},initAutoLogin:function(){if(!this.GameCenter.isConnected()&&this.GameCenter.isAutoLogin())switch(parseInt(this.GameCenter.getAccountType())){case n.ACCOUNT_TYPE_LOGIN_FACEBOOK:this.GameCenter.loginFacebook();break;case n.ACCOUNT_TYPE_LOGIN:var t=this.GameCenter.getAccount();t&&this.GameCenter.Login.login(t.username,t.password);break;case n.ACCOUNT_TYPE_LOGIN_QUICK:}},onFacebookClick:function(){this.GameCenter.loginFacebook()},onLoginClick:function(){this.GameCenterUI.showLoginFormNode()},onRegisterClick:function(){this.GameCenterUI.showRegisterFormNode()},onQuickPlayClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.GameCenter.getAccountQuick();if(e)this.GameCenter.Login.login(e.username,e.password);else{var i=this.GameCenter.getRegisterCode(),s=this.GameCenter.getTime(),a={register_code:i,device_token:i,time:s,sign:this.GameCenter.getSign(i,s)};this.GameCenter.getDeviceID()&&(a.device_id=this.GameCenter.getDeviceID());this.GameCenter.showProcessingNode(),this.GameCenter.api.registerQuick(a,function(e){t.GameCenter.setAutoLogin(!0),t.GameCenter.setAccountType(n.ACCOUNT_TYPE_LOGIN_QUICK),t.GameCenter.setAccountQuick(e.data.user.username,e.data.user.username),t.GameCenter.initDataAndConnectSFS(e.data)},function(e){t.GameCenter.setAutoLogin(!1),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(o.LOGIN_TITLE,e.msg)})}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../lib/md5":"md5"}],Header:[function(t,e,i){"use strict";cc._RF.push(e,"b811f4WHlBItqiVRkwkA9rV","Header");var n=t("./HeaderLogin"),o=t("./HeaderAccount");cc.Class({extends:cc.Component,properties:{HeaderLogin:n,HeaderAccount:o},init:function(t){this.GameCenter=t,this.HeaderLogin.init(t),this.HeaderAccount.init(t)},onLoad:function(){}}),cc._RF.pop()},{"./HeaderAccount":"HeaderAccount","./HeaderLogin":"HeaderLogin"}],HistoryEvent:[function(t,e,i){"use strict";cc._RF.push(e,"2a967vlpPlBB6O8UX8Y+Co1","HistoryEvent");var n=t("../../../util/FormatUtil");t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,nameEventLabel:cc.Label,feeGoldLabel:cc.Label,prizeLabel:cc.Label,statusSuccessLabel:cc.Label,statusFailureLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.timeLabel.string=n.getDateByTimeStamp(t.created_at),this.prizeLabel.string=n.nFormatter(t.prize),this.feeGoldLabel.string=n.nFormatter(t.fee_gold),this.nameEventLabel.string=this.getEventNameBuyLevelId(t.diamond_level_id),1===t.status?(this.statusSuccessLabel.node.active=!0,this.statusFailureLabel.node.active=!1):(this.statusSuccessLabel.node.active=!1,this.statusFailureLabel.node.active=!0);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){},getEventNameBuyLevelId:function(t){switch(t){case 0:return"Xe \u0110\u1ea1p";case 1:return"Xe \u0110i\u1ec7n";case 2:return"Xe Wave";case 3:return"Xe Lead";case 4:return"Xe Ducati";case 5:return"Xe Mazda 3";default:return""}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil"}],HotUpdate:[function(t,e,i){"use strict";cc._RF.push(e,"0beff9PBvpHup1yYbTMdOC5","HotUpdate");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{manifestUrl:{type:cc.Asset,default:null},retryButtonNode:cc.Node,updateProgressBar:cc.ProgressBar,messageLabel:cc.Label,_updating:!1,_canRetry:!1,_storagePath:"",progressBarNode:cc.Node},init:function(t){this.Splash=t},onLoad:function(){},start:function(){cc.sys.isNative?(this.initHotUpdate(),this.checkUpdate()):this.Splash.loadAssets()},onDestroy:function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)},initHotUpdate:function(){this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"sunvin-remote-asset",console.log("Storage path for remote asset : "+this._storagePath),this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle),this._am.setVerifyCallback(function(t,e){e.compressed;return!0}),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this.updateProgressBar.progress=0},checkUpdate:function(){if(this._updating)this.messageLabel.string=n.HOT_UPDATE_CHECKING_VERSION;else{if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()&&(this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0)}},hotUpdate:function(){if(this._am&&!this._updating){if(this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._failCount=0,this._am.update(),this._updating=!0}},retry:function(){!this._updating&&this._canRetry&&(this.retryButtonNode.active=!1,this._canRetry=!1,this.messageLabel.string=n.HOT_UPDATE_RETRY,this._am.downloadFailedAssets())},checkCb:function(t){var e=!1,i=!1;switch(console.log("Code: "+t.getEventCode()),t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.messageLabel.string=n.HOT_UPDATE_NOT_FOUND;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.messageLabel.string=n.HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.updateProgressBar.progress=1,this.messageLabel.string=n.HOT_UPDATE_ALREADY_UP_TO_DATE,e=!0;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.messageLabel.string=n.HOT_UPDATE_FOUND_UPDATE,this.progressBarNode.active=!0,this.updateProgressBar.progress=0,i=!0;break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1,e&&this.Splash.loadAssets(),i&&this.hotUpdate()},updateCb:function(t){var e=!1,i=!1;switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log(),this.messageLabel.string=n.HOT_UPDATE_NOT_FOUND,i=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:this.updateProgressBar.progress=t.getPercent(),this.messageLabel.string=n.HOT_UPDATE_UPDATING;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.messageLabel.string=n.HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED,i=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.updateProgressBar.progress=1,this.messageLabel.string=n.HOT_UPDATE_ALREADY_UP_TO_DATE,i=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.messageLabel.string=n.HOT_UPDATE_UPDATE_SUCCESS,e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.messageLabel.string=n.HOT_UPDATE_UPDATE_FAILED,this.retryButtonNode.active=!0,this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:this.messageLabel.string=n.HOT_UPDATE_UPDATE_FAILED;break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.messageLabel.string=t.getMessage()}if(i&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),e){this._am.setEventCallback(null),this._updateListener=null;var o=jsb.fileUtils.getSearchPaths(),s=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(s)),Array.prototype.unshift.apply(o,s),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(o)),jsb.fileUtils.setSearchPaths(o),cc.audioEngine.stopAll(),console.log("update success... restart game"),cc.game.restart()}},onRetryClick:function(){this.retry()},versionCompareHandle:function(t,e){console.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var i=t.split("."),n=e.split("."),o=0;o<i.length;++o){var s=parseInt(i[o]),a=parseInt(n[o]||0);if(s!==a)return s-a}return n.length>i.length?-1:0}}),cc._RF.pop()},{"../../helper/Message":"Message"}],HuLocState:[function(t,e,i){"use strict";cc._RF.push(e,"b94075JSV1OrblnkojjAb4w","HuLocState");e.exports={currentState:null,WAITTING:"WAITTING",REGISTER:"REGISTER",setState:function(t){this.currentState=t},setWaitting:function(){this.currentState=this.WAITTING},setRegister:function(){this.currentState=this.REGISTER},isWaitting:function(){return this.currentState===this.WAITTING},isRegister:function(){return this.currentState===this.REGISTER}},cc._RF.pop()},{}],HuLoc:[function(t,e,i){"use strict";cc._RF.push(e,"eaa78LYlpZD+bqdXJfR3v4h","HuLoc");var n=t("../../../helper/Message"),o=t("./BonusConstant"),s=t("./HuLocState"),a=t("../../../util/FormatUtil"),r=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{contentHuLocNode:cc.Node,buttonXinLocNode:cc.Node,timeLabel:cc.Label},init:function(t){this.BonusEvent=t},onLoad:function(){this.HuLocState=s,this.intervalTime=null},onEnable:function(){this.removeIntervalTime(),this.BonusEvent.sendRequest.sendNoPrefixToZone(o.HU_LOC_ADD_EVENT)},onDisable:function(){this.removeIntervalTime(),this.BonusEvent.sendRequest.sendNoPrefixToZone(o.HU_LOC_REMOVE_EVENT)},handleRequest:function(t){if(t.status){var e=t.data.game_cmd,i=t.data.game_data,n=t.data.game_msg;switch(console.log(e),console.log(i),e){case o.INFO:this.handleInfo(i);break;case o.RUT_LOC:this.handleRutLoc(i);break;case o.PHAT_LOC:this.handlePhatLoc(i);break;case o.PLAYER_RUT_LOC:this.handlePlayerRutLoc(i);break;case o.MESSAGE:this.handleMessage(n)}}},handleInfo:function(t){this.HuLocState.setState(t.game_state),this.HuLocState.isRegister()?(this.resetRutLoc(),this.startIntervalTime(t.TIME||t.time)):this.resetPhatLoc()},handleRutLoc:function(t){this.resetRutLoc(),this.HuLocState.setRegister(),this.startIntervalTime(t.TIME||t.time)},handlePhatLoc:function(t){this.HuLocState.setWaitting(),this.resetPhatLoc();var e=this.getMoneyPhatLoc(t.list_phat_loc);if(e){var i=String.format(n.HU_LOC_MESSAGE,a.numberWithCommas(e));this.BonusEvent.controller.showDialogMessage(n.NOTIFICATION_TITLE,i)}},handlePlayerRutLoc:function(t){var e=this.BonusEvent.getUser().nick_name;r.getServerIdByShowNickName(this.BonusEvent.getUser().show_nickname);t.nick_name===e&&this.BonusEvent.showMessage(n.HU_LOC_REGISTER)},handleMessage:function(t){this.BonusEvent.showMessage(t)},onRutLocClick:function(){1==this.BonusEvent.getUser().status_value?this.HuLocState.isRegister()?this.BonusEvent.huLocRutLoc():this.BonusEvent.showMessage("Ch\u01b0a ph\u1ea3i th\u1eddi gian xin r\xfat l\u1ed9c"):this.BonusEvent.showFormBonusMessage()},startIntervalTime:function(t){this.contentHuLocNode.active&&(this.removeIntervalTime(),this.timeRemain=t,this.timeLabel.string=a.numberToTime(this.timeRemain),this.intervalTime=setInterval(function(){this.timeRemain--,this.timeRemain>=0&&(this.timeLabel.string=a.numberToTime(this.timeRemain))}.bind(this),1e3))},removeIntervalTime:function(){clearInterval(this.intervalTime)},resetRutLoc:function(){this.contentHuLocNode.active=!0},resetPhatLoc:function(){this.contentHuLocNode.active=!1},getMoneyPhatLoc:function(t){var e=this.BonusEvent.getUser().nick_name;r.getServerIdByShowNickName(this.BonusEvent.getUser().show_nickname);for(var i in t)if(e===t[i].nick_name)return t[i].amount;return 0}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","./BonusConstant":"BonusConstant","./HuLocState":"HuLocState"}],InfoAccount:[function(t,e,i){"use strict";cc._RF.push(e,"e4063zDjf5LjrxVMT2R1eWR","InfoAccount");var n=t("../../../util/FormatUtil"),o=(t("../../../util/Util"),t("./account/VipAccount"));cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,idLabel:cc.Label,emailLabel:cc.Label,phoneLabel:cc.Label,moneyLabel:cc.Label,dateCreatedLabel:cc.Label,authenticationLabel:cc.Label,ipLabel:cc.Label,VipAccount:o},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.VipAccount.init(t)},onLoad:function(){var t=this.GameCenter.getUser();this.dateCreatedLabel.string=n.getDateByTimeStamp(t.created_at),this.authenticationLabel.string=t.status},onEnable:function(){this.loadUserInfo()},loadUserInfo:function(){var t=this.GameCenter.getUser();if(t){var e=t.show_nickname,i=t.avatar;if(this.setNicknameLabel(e),this.idLabel.string=t.user_id,t.email&&"null"!==t.email){var n=t.email;n=n.substring(0,3)+"***"+n.substring(n.indexOf("@")),this.emailLabel.string=n}else this.emailLabel.string="";t.phone&&"null"!==t.phone?this.phoneLabel.string="+"+t.phone:this.phoneLabel.string="",this.setAvatar(i),this.updateMoneyGold()}},setNicknameLabel:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var n=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=n}})},updateMoneyGold:function(){var t=this.GameCenter.getSFSMySelf(),e=t.variables.money.value;t.variables.gold.value;this.setMoneyLabel(e)},setMoneyLabel:function(t){this.moneyLabel.string=n.numberWithCommas(t)},onUpdateAvatarClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showUpdateAvatarFormNode()},onChangePasswordClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showChangePasswordFormNode()}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","./account/VipAccount":"VipAccount"}],InfoAwardHistory:[function(t,e,i){"use strict";cc._RF.push(e,"abe84iF5ihN6byFc3hxFsRq","InfoAwardHistory");var n=t("../../../../helper/Config"),o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,awardHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.historyAward(e,function(e){t.data=e.data,t.data=t.data.reverse(),t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(o.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/n.HISTORY_PAGINATION)+1,o=n.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*n.HISTORY_PAGINATION?(e+1)*n.HISTORY_PAGINATION:t.data.length,a=o;a<s;a++){var r=cc.instantiate(t.awardHistoryItemPrefab);r.parent=t.listNode,r.getComponent("AwardHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t,N=function(e){var n=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;n.on(cc.Node.EventType.TOUCH_END,function(){var t=n.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},n)};for(var E in t.listPagination)N(E)}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message"}],InfoGame:[function(t,e,i){"use strict";cc._RF.push(e,"92c507Ek8JHyq3uG0NFJYsn","InfoGame");var n=t("../../../../helper/Message"),o=t("../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{otpEditBox:cc.EditBox,xocdiaToggle:cc.Toggle,bacayToggle:cc.Toggle,maubinhToggle:cc.Toggle,phomToggle:cc.Toggle,samToggle:cc.Toggle,samsoloToggle:cc.Toggle,pokerToggle:cc.Toggle,xitoToggle:cc.Toggle,liengToggle:cc.Toggle,tlmnToggle:cc.Toggle,tlmnsoloToggle:cc.Toggle,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){var t=this.GameCenter.getSecurityGame();if(this.reset(),t){var e=!!t.BACAY,i=!!t.LIENG,n=!!t.MAUBINH,o=!!t.PHOM,s=!!t.POKER,a=!!t.SAM,r=!!t.SAM_SOLO,c=!!t.TLMN,h=!!t.TLMN_SOLO,l=!!t.XITO,u=!!t.XOCDIA;this.bacayToggle.isChecked=e,this.liengToggle.isChecked=i,this.maubinhToggle.isChecked=n,this.phomToggle.isChecked=o,this.samToggle.isChecked=a,this.samsoloToggle.isChecked=r,this.pokerToggle.isChecked=s,this.tlmnToggle.isChecked=c,this.tlmnsoloToggle.isChecked=h,this.xitoToggle.isChecked=l,this.xocdiaToggle.isChecked=u}else this.xocdiaToggle.isChecked=!0,this.bacayToggle.isChecked=!0,this.maubinhToggle.isChecked=!0,this.phomToggle.isChecked=!0,this.samToggle.isChecked=!1,this.samsoloToggle.isChecked=!1,this.pokerToggle.isChecked=!1,this.xitoToggle.isChecked=!1,this.liengToggle.isChecked=!1,this.tlmnToggle.isChecked=!0,this.tlmnsoloToggle.isChecked=!0},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(o.REQUEST_GET_OTP)},onSendSecurityClick:function(){var t=this.otpEditBox.string;""===t?this.GameCenter.showDialogMessage(n.SECURITY_GAME,n.OTP_NOT_EMPTY):this.security(t)},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},security:function(t){var e=this,i=this.getData();i.otp=t,i.token=this.GameCenter.getToken(),i.user_id=this.GameCenter.getUserId(),console.log(i);this.GameCenter.showProcessingNode(),this.GameCenter.api.securityGame(i,function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.SECURITY_GAME,t.msg),e.GameCenter.setSecurityGame(i)},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.SECURITY_GAME,t.msg),e.otpEditBox.string=""})},getData:function(){var t=this.bacayToggle.isChecked?1:0,e=this.liengToggle.isChecked?1:0,i=this.maubinhToggle.isChecked?1:0,n=this.phomToggle.isChecked?1:0,o=this.pokerToggle.isChecked?1:0;return{BACAY:t,CHAN:1,LIENG:e,MAUBINH:i,PHOM:n,SAM:this.samToggle.isChecked?1:0,SAM_SOLO:this.samsoloToggle.isChecked?1:0,POKER:o,XITO:this.xitoToggle.isChecked?1:0,TLMN:this.tlmnToggle.isChecked?1:0,TLMN_SOLO:this.tlmnsoloToggle.isChecked?1:0,XOCDIA:this.xocdiaToggle.isChecked?1:0}},reset:function(){this.otpEditBox.string="",this.xocdiaToggle.isChecked=!1,this.bacayToggle.isChecked=!1,this.maubinhToggle.isChecked=!1,this.phomToggle.isChecked=!1,this.samToggle.isChecked=!1,this.samsoloToggle.isChecked=!1,this.pokerToggle.isChecked=!1,this.xitoToggle.isChecked=!1,this.liengToggle.isChecked=!1,this.tlmnToggle.isChecked=!1,this.tlmnsoloToggle.isChecked=!1}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoHistory:[function(t,e,i){"use strict";cc._RF.push(e,"a949dhBawJIUao3rZ0K/nk3","InfoHistory");var n=t("./history/InfoPlayMoneyHistory"),o=t("./history/InfoPlayGoldHistory"),s=t("./history/InfoAwardHistory"),a=t("./history/InfoRechargeMoneyHistory"),r=t("./history/InfoRechargeGoldHistory");cc.Class({extends:cc.Component,properties:{infoHeaderNode:cc.Node,playMoneyOnButtonNode:cc.Node,playMoneyOffButtonNode:cc.Node,playGoldOnButtonNode:cc.Node,playGoldOffButtonNode:cc.Node,awardOnButtonNode:cc.Node,awardOffButtonNode:cc.Node,rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,playMoneyContentNode:cc.Node,playGoldContentNode:cc.Node,awardContentNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeGoldContentNode:cc.Node,InfoPlayMoneyHistory:n,InfoPlayGoldHistory:o,InfoAwardHistory:s,InfoRechargeMoneyHistory:a,InfoRechargeGoldHistory:r},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoPlayMoneyHistory.init(t),this.InfoPlayGoldHistory.init(t),this.InfoAwardHistory.init(t),this.InfoRechargeMoneyHistory.init(t),this.InfoRechargeGoldHistory.init(t)},onLoad:function(){},onEnable:function(){this.infoHeaderNode.active=!1,this.showPlayMoneyHistories()},onDisable:function(){this.infoHeaderNode.active=!0,this.InfoPlayMoneyHistory.reset(),this.InfoPlayGoldHistory.reset(),this.InfoAwardHistory.reset(),this.InfoRechargeMoneyHistory.reset(),this.InfoRechargeGoldHistory.reset(),this.hideAllContents()},onBackClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onInfoClick()},onPlayMoneyClick:function(){this.GameCenter.Audio.playClick(),this.showPlayMoneyHistories()},showPlayMoneyHistories:function(){this.initBeforeClick(),this.playMoneyOnButtonNode.active=!0,this.playMoneyOffButtonNode.active=!1,this.playMoneyContentNode.active=!0,this.InfoPlayMoneyHistory.getPage()},onPlayGoldClick:function(){this.GameCenter.Audio.playClick(),this.showPlayGoldHistories()},showPlayGoldHistories:function(){this.initBeforeClick(),this.playGoldOnButtonNode.active=!0,this.playGoldOffButtonNode.active=!1,this.playGoldContentNode.active=!0,this.InfoPlayGoldHistory.getPage()},onAwardClick:function(){this.GameCenter.Audio.playClick(),this.showAwardHistories()},showAwardHistories:function(){this.initBeforeClick(),this.awardOnButtonNode.active=!0,this.awardOffButtonNode.active=!1,this.awardContentNode.active=!0,this.InfoAwardHistory.getPage()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.showRechargeMoneyHistores()},showRechargeMoneyHistores:function(){this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeMoneyContentNode.active=!0,this.InfoRechargeMoneyHistory.getPage()},onRechargeGoldClick:function(){this.GameCenter.Audio.playClick(),this.showRechargeGoldHistories()},showRechargeGoldHistories:function(){this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0,this.InfoRechargeGoldHistory.getPage()},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.playMoneyOffButtonNode.active=!0,this.playGoldOffButtonNode.active=!0,this.awardOffButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0},hideAllOnButtons:function(){this.playMoneyOnButtonNode.active=!1,this.playGoldOnButtonNode.active=!1,this.awardOnButtonNode.active=!1,this.rechargeMoneyOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1},hideAllContents:function(){this.playMoneyContentNode.active=!1,this.playGoldContentNode.active=!1,this.awardContentNode.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeGoldContentNode.active=!1}}),cc._RF.pop()},{"./history/InfoAwardHistory":"InfoAwardHistory","./history/InfoPlayGoldHistory":"InfoPlayGoldHistory","./history/InfoPlayMoneyHistory":"InfoPlayMoneyHistory","./history/InfoRechargeGoldHistory":"InfoRechargeGoldHistory","./history/InfoRechargeMoneyHistory":"InfoRechargeMoneyHistory"}],InfoMail:[function(t,e,i){"use strict";cc._RF.push(e,"a2c76J6LotKaKP5EahAcwvA","InfoMail");var n=t("../../../helper/Message"),o=t("../../../helper/Config"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{backNode:cc.Node,loadingNode:cc.Node,listMailNode:cc.Node,mailDetailNode:cc.Node,noMailNode:cc.Node,mailItemPrefab:cc.Prefab,rechargeCardPrefab:cc.Prefab,mailScrollView:cc.ScrollView,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab,mailDetailTitleLabel:cc.Label,mailDetailInfoLabel:cc.Label,mailDetailContentLabel:cc.Label,mailListCardScrollView:cc.ScrollView},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){this.data=null,this.showListMailNode(),this.initData()},onDisable:function(){this.backNode.active=!0},initData:function(){var t=this;this.showLoadingNode(),this.mailScrollView.content.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0);var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.getListMessage(e,function(e){t.data=e.data,t.getPage()},function(e){t.showListNode(),t.GameCenter.showDialogMessage(n.MAIL_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.currentPage=e,this.mailScrollView.content.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.data&&this.data.length>0?function(){for(var i=parseInt((t.data.length-1)/o.MAIL_PAGINATION)+1,n=o.MAIL_PAGINATION*e,s=t.data.length>(e+1)*o.MAIL_PAGINATION?(e+1)*o.MAIL_PAGINATION:t.data.length,a=n;a<s;a++){var r=cc.instantiate(t.mailItemPrefab);r.parent=t.mailScrollView.content,r.getComponent("MailItem").init(t.GameCenter,t.data[a])}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():(this.listMailNode.active=!1,this.noMailNode.active=!0)},removeMail:function(t){if(this.data)for(var e in this.data)this.data[e].id===t&&(this.data.splice(e,1),this.getPage(this.currentPage))},showListMailNode:function(){this.listMailNode.active=!0,this.mailDetailNode.active=!1,this.noMailNode.active=!1},showMailDetailNode:function(t){if(this.backNode.active=!1,this.listMailNode.active=!1,this.mailDetailNode.active=!0,this.mailDetailTitleLabel.string=t.title,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.mailDetailInfoLabel.string=String.format(n.MAIL_DETAIL_TITLE,t.from_username,s.getStringDateByTimeStamp(t.created_at)),1==t.msg_type){this.mailDetailContentLabel.node.active=!1,this.mailListCardScrollView.node.active=!0,this.mailListCardScrollView.content.removeAllChildren(!0);var e=JSON.parse(t.content);if(e)for(var i in e){var o=cc.instantiate(this.rechargeCardPrefab);o.parent=this.mailListCardScrollView.content,o.getComponent("RechargeCardItem").init(this.GameCenter,e[i])}}else this.mailDetailContentLabel.node.active=!0,this.mailListCardScrollView.node.active=!1,this.mailDetailContentLabel.string=t.content},onBackClick:function(){this.GameCenter.Audio.playClick(),this.showListMailNode(),this.backNode.active=!0},showLoadingNode:function(){this.loadingNode.active=!0,this.mailScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.mailScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],InfoPlayGoldHistory:[function(t,e,i){"use strict";cc._RF.push(e,"f6670jpgT9DIYV8spcQqQEN","InfoPlayGoldHistory");var n=t("../../../../helper/Constant"),o=t("../../../../helper/Message"),s=t("../../../../helper/Config");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,playMoneyHistoryItemPrefab:cc.Prefab,playMoneyLayoutNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.playMoneyLayoutNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),money_type:n.GOLD_CODE};this.GameCenter.api.getPlayHistory(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(o.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.playMoneyLayoutNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/s.HISTORY_PAGINATION)+1,n=s.HISTORY_PAGINATION*e,o=t.data.length>(e+1)*s.HISTORY_PAGINATION?(e+1)*s.HISTORY_PAGINATION:t.data.length,a=n;a<o;a++){var r=cc.instantiate(t.playMoneyHistoryItemPrefab);r.parent=t.playMoneyLayoutNode,r.getComponent("PlayHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t,N=function(e){var n=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;n.on(cc.Node.EventType.TOUCH_END,function(){var t=n.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},n)};for(var E in t.listPagination)N(E)}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoPlayMoneyHistory:[function(t,e,i){"use strict";cc._RF.push(e,"6564foCCy9Ioq6yK2DqW+Z7","InfoPlayMoneyHistory");var n=t("../../../../helper/Constant"),o=t("../../../../helper/Config"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,playMoneyHistoryItemPrefab:cc.Prefab,playMoneyLayoutNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.playMoneyLayoutNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),money_type:n.MONEY_CODE};this.GameCenter.api.getPlayHistory(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(s.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.playMoneyLayoutNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/o.HISTORY_PAGINATION)+1,n=o.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*o.HISTORY_PAGINATION?(e+1)*o.HISTORY_PAGINATION:t.data.length,a=n;a<s;a++){var r=cc.instantiate(t.playMoneyHistoryItemPrefab);r.parent=t.playMoneyLayoutNode,r.getComponent("PlayHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t,N=function(e){var n=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;n.on(cc.Node.EventType.TOUCH_END,function(){var t=n.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},n)};for(var E in t.listPagination)N(E)}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoRechargeGoldHistory:[function(t,e,i){"use strict";cc._RF.push(e,"fe584kUBApMPbyMVNEUsF9K","InfoRechargeGoldHistory");var n=t("../../../../helper/Config"),o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,rechargeGoldHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.historyRechargeGold(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(o.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/n.HISTORY_PAGINATION)+1,o=n.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*n.HISTORY_PAGINATION?(e+1)*n.HISTORY_PAGINATION:t.data.length,a=o;a<s;a++){var r=cc.instantiate(t.rechargeGoldHistoryItemPrefab);r.parent=t.listNode,r.getComponent("RechargeGoldHistoryItem").init(t.data[a])}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t,N=function(e){var n=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;n.on(cc.Node.EventType.TOUCH_END,function(){var t=n.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},n)};for(var E in t.listPagination)N(E)}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message"}],InfoRechargeMoneyHistory:[function(t,e,i){"use strict";cc._RF.push(e,"bf1c8OEsupGT7nr4/NFbvlb","InfoRechargeMoneyHistory");var n=t("../../../../helper/Config"),o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,rechargeHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.historyRechargeMoney(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(o.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/n.HISTORY_PAGINATION)+1,o=n.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*n.HISTORY_PAGINATION?(e+1)*n.HISTORY_PAGINATION:t.data.length,a=o;a<s;a++){var r=cc.instantiate(t.rechargeHistoryItemPrefab);r.parent=t.listNode,r.getComponent("RechargeHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),f=m.getComponent("PaginationItem");m.parent=t.paginationNode,f.init(d+1,d),d===e?f.disable():f.enable(),t.listPagination.push(m)}var p=cc.instantiate(t.paginationItemPrefab),_=p.getComponent("PaginationItem");p.parent=t.paginationNode,_.init(">",e+1),_.enable(),t.listPagination.push(p);var S=cc.instantiate(t.paginationItemPrefab),g=S.getComponent("PaginationItem");S.parent=t.paginationNode,g.init(">>",i-1),g.enable(),t.listPagination.push(S);var C=t,N=function(e){var n=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;n.on(cc.Node.EventType.TOUCH_END,function(){var t=n.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},n)};for(var E in t.listPagination)N(E)}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message"}],InfoSercurityAccount:[function(t,e,i){"use strict";cc._RF.push(e,"70a19vbU5dOepat6f4YMdU6","InfoSercurityAccount");var n=t("./account/InfoSercurityActivePhone"),o=t("./account/InfoSercurityUpdate"),s=t("./account/InfoSercurityInfo");cc.Class({extends:cc.Component,properties:{InfoSercurityActivePhone:n,InfoSercurityUpdate:o,InfoSercurityInfo:s},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoSercurityActivePhone.init(t),this.InfoSercurityUpdate.init(t),this.InfoSercurityInfo.init(t)},onLoad:function(){},onEnable:function(){var t=this.GameCenter.getUser();t.phone&&t.email?this.showInfoNode():this.showUpdateNode()},showUpdateNode:function(){this.hideAll(),this.InfoSercurityUpdate.node.active=!0},showInfoNode:function(){this.hideAll(),this.InfoSercurityInfo.node.active=!0},showActivePhone:function(){this.hideAll(),this.InfoSercurityActivePhone.node.active=!0},hideAll:function(){this.InfoSercurityActivePhone.node.active=!1,this.InfoSercurityUpdate.node.active=!1,this.InfoSercurityInfo.node.active=!1}}),cc._RF.pop()},{"./account/InfoSercurityActivePhone":"InfoSercurityActivePhone","./account/InfoSercurityInfo":"InfoSercurityInfo","./account/InfoSercurityUpdate":"InfoSercurityUpdate"}],InfoSercurityActivePhone:[function(t,e,i){"use strict";cc._RF.push(e,"a6309Ln815FYYudvPAKQ8Jw","InfoSercurityActivePhone");t("../../../../../util/BrowserUtil"),t("../../../../../helper/Constant");var n=t("../../../../../helper/Message");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,otpEditBox:cc.EditBox,otpRichText:cc.RichText},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){this.editboxs=[this.otpEditBox]},onEnable:function(){this.otpEditBox.string="",this.initData()},initData:function(){var t=this.GameCenter.getUser();this.usernameLabel.string=t.username;var e=this.GameCenter.getGeneralConfig();if(e){var i=e.OTP;if(i){var o=i.content,s=i.service_number,a=String.format(n.OTP_ACTIVE_ACCOUNT,o,s);this.otpRichText.string=a}}},onBackClick:function(){this.GameCenter.Audio.playClick(),this.InfoSercurityAccount.showInfoNode()},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.otpEditBox.string;this.checkAllEditboxNotEmpty()?(this.GameCenter.showProcessingNode(),this.updateOtp(t)):this.GameCenter.showDialogMessage(n.UPDATE_INFO,n.MISSING_INFO)},updateOtp:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),otp:t};this.GameCenter.api.verifyOtp(i,function(t){var i=e.GameCenter.getUser();i.status_value=1,i.invite_code=t.data,e.GameCenter.hideProcessingNode(),e.InfoSercurityAccount.showInfoNode()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.UPDATE_INFO,t.msg)})},onGetOtpClick:function(){var t=this;this.GameCenter.Audio.playClick();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.showProcessingNode(),this.GameCenter.api.sendOtp(e,function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.UPDATE_INFO,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.UPDATE_INFO,e.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0}}),cc._RF.pop()},{"../../../../../helper/Constant":"Constant","../../../../../helper/Message":"Message","../../../../../util/BrowserUtil":"BrowserUtil"}],InfoSercurityInfo:[function(t,e,i){"use strict";cc._RF.push(e,"445811BcK5Evbr8zRYJAeIw","InfoSercurityInfo");var n=t("../../../../../util/FormatUtil"),o=t("../../../../../helper/Message"),s=t("../../../../../helper/Config"),a=t("../../../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,emailLabel:cc.Label,phoneLabel:cc.Label,areaCodeDropDownList:a,notActiveEmailNode:cc.Node,activeEmailNode:cc.Node,emailEditBox:cc.EditBox,changeEmailNode:cc.Node,buttonEmailNode:cc.Node,notActivePhoneNode:cc.Node,activePhoneNode:cc.Node,phoneEditBox:cc.EditBox,changePhoneNode:cc.Node,buttonPhoneNode:cc.Node,otpEditBox:cc.EditBox},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){},onEnable:function(){this.clear(),this.initData()},initData:function(){var t=this.GameCenter.getUser(),e=t.status_value;this.usernameLabel.string=t.username||"",this.emailLabel.string=t.email||"",this.phoneLabel.string=t.phone||"",1==e?(this.notActivePhoneNode.active=!1,this.activePhoneNode.active=!0):(this.notActivePhoneNode.active=!0,this.activePhoneNode.active=!1),this.areaCodeDropDownList.removeAllItem();for(var i=0;i<s.AREA_CODES.length;i++){var n=s.AREA_CODES[i].name;this.areaCodeDropDownList.addItem(n,s.AREA_CODES[i])}this.showButtonEmail(),this.showButtonPhone()},onChangeEmailClick:function(){this.GameCenter.Audio.playClick(),this.showChangeEmail()},onCancelChangeEmailClick:function(){this.GameCenter.Audio.playClick(),this.showButtonEmail()},onUpdateEmailClick:function(){this.GameCenter.Audio.playClick();var t=this.emailEditBox.string;""!==t?n.validateEmail(t)?(this.GameCenter.showProcessingNode(),this.updateEmail(t)):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.FORMAT_EMAIL_NOT_CORRECT):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.MISSING_INFO)},updateEmail:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),email:t};this.GameCenter.api.update(i,function(i){e.GameCenter.getUser().email=t,e.emailLabel.string=t,e.GameCenter.hideProcessingNode(),e.showButtonEmail()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.UPDATE_INFO,t.msg)})},onChangePhoneClick:function(){this.GameCenter.Audio.playClick(),this.showChangePhone()},onCancelChangePhoneClick:function(){this.GameCenter.Audio.playClick(),this.showButtonPhone()},onUpdatePhoneClick:function(){this.GameCenter.Audio.playClick();var t=this.areaCodeDropDownList.getData().code;0===t.indexOf("+")&&(t=t.substr(1));var e=this.phoneEditBox.string;0===e.indexOf("0")&&(e=e.substr(1));var i=t+e;""!==i?n.checkPhoneValid(i)?(this.GameCenter.showProcessingNode(),this.updatePhone(i)):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.FORMAT_PHONE_NOT_CORRECT):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.MISSING_INFO)},updatePhone:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),phone:t};this.GameCenter.api.update(i,function(i){e.GameCenter.getUser().phone=t,e.phoneLabel.string=t,e.GameCenter.hideProcessingNode(),e.showButtonPhone()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.UPDATE_INFO,t.msg)})},onActivePhoneClick:function(){this.GameCenter.Audio.playClick(),this.InfoSercurityAccount.showActivePhone()},onGetOtpClick:function(){var t=this;this.GameCenter.Audio.playClick();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.showProcessingNode(),this.GameCenter.api.sendOtp(e,function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(o.UPDATE_INFO,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(o.UPDATE_INFO,e.msg)})},onCancelActivePhoneClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.otpEditBox.string;if(""!==e){var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),otp:e};this.GameCenter.showProcessingNode(),this.GameCenter.api.cancelActivePhone(i,function(e){t.GameCenter.getUser().phone="",t.GameCenter.getUser().status_value=0,t.initData(),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(o.UPDATE_INFO,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(o.UPDATE_INFO,e.msg)})}else this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.MISSING_INFO)},showChangeEmail:function(){this.changeEmailNode.active=!0,this.buttonEmailNode.active=!1},showButtonEmail:function(){this.changeEmailNode.active=!1,this.buttonEmailNode.active=!0},showChangePhone:function(){this.changePhoneNode.active=!0,this.buttonPhoneNode.active=!1},showButtonPhone:function(){this.changePhoneNode.active=!1,this.buttonPhoneNode.active=!0},clear:function(){this.emailEditBox.string="",this.phoneEditBox.string="",this.otpEditBox.string=""}}),cc._RF.pop()},{"../../../../../helper/Config":"Config","../../../../../helper/Message":"Message","../../../../../ui/drop-down-list/DropDownList":"DropDownList","../../../../../util/FormatUtil":"FormatUtil"}],InfoSercurityLogin:[function(t,e,i){"use strict";cc._RF.push(e,"975fc0dnftDuKXaCG+nmlM+","InfoSercurityLogin");var n=t("../../../../helper/Message"),o=t("../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{statusLabel:cc.Label,otpEditbox:cc.EditBox,successButtonNode:cc.Node,cancelButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){var t=this.GameCenter.getUser();t&&(t.secure_login===o.SECURITY_LOGIN?(this.statusLabel.string="\u0110\xe3 k\xedch ho\u1ea1t",this.successButtonNode.active=!1,this.cancelButtonNode.active=!0):(this.statusLabel.string="Ch\u01b0a k\xedch ho\u1ea1t",this.successButtonNode.active=!0,this.cancelButtonNode.active=!1))},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(o.REQUEST_GET_OTP)},onSendVerifyLoginClick:function(){this.GameCenter.Audio.playClick();var t=this.otpEditbox.string;""===t?this.GameCenter.showDialogMessage(n.OTP_LOGIN_TITLE,n.MISSING_INFO):this.verifyLogin(t)},verifyLogin:function(t){var e=this,i=this.GameCenter.getUser().secure_login===o.SECURITY_LOGIN?o.SECURITY_LOGIN_STATUS_CANCEL:o.SECURITY_LOGIN_STATUS_CHOSE,s={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),otp:t,status:i};this.GameCenter.showProcessingNode(),this.GameCenter.api.getOTPLoginSecurity(s,function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.OTP_LOGIN_TITLE,t.msg),e.GameCenter.getUser().secure_login=i,e.initData(),e.clear()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.OTP_LOGIN_TITLE,t.msg),e.clear()})},clear:function(){this.otpEditbox.string=""}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoSercurityUpdate:[function(t,e,i){"use strict";cc._RF.push(e,"3944ddtFctK55vx1M8Hdjks","InfoSercurityUpdate");var n=t("../../../../../util/FormatUtil"),o=t("../../../../../helper/Message"),s=t("../../../../../helper/Config"),a=t("../../../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,emailEditBox:cc.EditBox,phoneEditBox:cc.EditBox,areaCodeDropDownList:a},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){this.editboxs=[this.emailEditBox,this.phoneEditBox]},onEnable:function(){this.initData()},initData:function(){var t=this.GameCenter.getUser();this.usernameLabel.string=t.username,this.phoneEditBox.string="",this.emailEditBox.string="",this.areaCodeDropDownList.removeAllItem();for(var e=0;e<s.AREA_CODES.length;e++){var i=s.AREA_CODES[e].name;this.areaCodeDropDownList.addItem(i,s.AREA_CODES[e])}},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.emailEditBox.string,e=this.areaCodeDropDownList.getData().code;0===e.indexOf("+")&&(e=e.substr(1));var i=this.phoneEditBox.string;0===i.indexOf("0")&&(i=i.substr(1));var s=e+i;this.checkAllEditboxNotEmpty()?n.checkPhoneValid(s)?n.validateEmail(t)?(this.GameCenter.showProcessingNode(),this.updateInfo(t,s)):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.FORMAT_EMAIL_NOT_CORRECT):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.FORMAT_PHONE_NOT_CORRECT):this.GameCenter.showDialogMessage(o.UPDATE_INFO,o.MISSING_INFO)},updateInfo:function(t,e,i,n){var s=this,a={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),email:t,phone:e};this.GameCenter.api.update(a,function(i){var n=s.GameCenter.getUser();n.email=t,n.phone=e,s.GameCenter.hideProcessingNode(),s.InfoSercurityAccount.showInfoNode()},function(t){s.GameCenter.hideProcessingNode(),s.GameCenter.showDialogMessage(o.UPDATE_INFO,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0}}),cc._RF.pop()},{"../../../../../helper/Config":"Config","../../../../../helper/Message":"Message","../../../../../ui/drop-down-list/DropDownList":"DropDownList","../../../../../util/FormatUtil":"FormatUtil"}],InfoSercurity:[function(t,e,i){"use strict";cc._RF.push(e,"bfcd8qT10NN64MFgCsm7cQJ","InfoSercurity");var n=t("./sercutiry/InfoSercurityAccount"),o=t("./sercutiry/InfoSercurityLogin"),s=t("../../../helper/Constant"),a=t("./sercutiry/InfoGame");cc.Class({extends:cc.Component,properties:{infoHeaderNode:cc.Node,sercurityAccountButtonOnNode:cc.Node,sercurityAccountButtonOffNode:cc.Node,sercurityLoginButtonOnNode:cc.Node,sercurityLoginButtonOffNode:cc.Node,otpAppButtonOnNode:cc.Node,otpAppButtonOffNode:cc.Node,gameOnButtonNode:cc.Node,gameOffButtonNode:cc.Node,sercurityAccountContentNode:cc.Node,sercurityLoginContentNode:cc.Node,otpContentNode:cc.Node,gameContentNode:cc.Node,InfoSercurityAccount:n,InfoSercurityLogin:o,InfoGame:a},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoSercurityAccount.init(t),this.InfoSercurityLogin.init(t),this.InfoGame.init(t)},onLoad:function(){},onEnable:function(){this.infoHeaderNode.active=!1,this.showSercurityAccount()},onDisable:function(){this.infoHeaderNode.active=!0},onBackClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onInfoClick()},getOtpAppClick:function(){this.GameCenter.showProcessingNode();this.GameCenter.sendRequest.sendToZone(s.REQUEST_GET_OTP,{type:1})},onSercurityAccountClick:function(){this.GameCenter.Audio.playClick(),this.showSercurityAccount()},onSercurityLoginClick:function(){this.GameCenter.Audio.playClick(),this.showSercurityLogin()},onOtpAppClick:function(){this.GameCenter.Audio.playClick(),this.showOtpApp()},showSercurityAccount:function(){this.initBeforeClick(),this.sercurityAccountButtonOnNode.active=!0,this.sercurityAccountButtonOffNode.active=!1,this.sercurityAccountContentNode.active=!0},showSercurityLogin:function(){this.initBeforeClick(),this.sercurityLoginButtonOnNode.active=!0,this.sercurityLoginButtonOffNode.active=!1,this.sercurityLoginContentNode.active=!0},onSecurityGameClick:function(){this.GameCenter.Audio.playClick(),this.showGame()},showGame:function(){this.initBeforeClick(),this.gameOnButtonNode.active=!0,this.gameOffButtonNode.active=!1,this.gameContentNode.active=!0},showOtpApp:function(){this.initBeforeClick(),this.otpAppButtonOnNode.active=!0,this.otpAppButtonOffNode.active=!1,this.otpContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.sercurityAccountButtonOffNode.active=!0,this.sercurityLoginButtonOffNode.active=!0,this.otpAppButtonOffNode.active=!0,this.gameOffButtonNode.active=!0},hideAllOnButtons:function(){this.sercurityAccountButtonOnNode.active=!1,this.sercurityLoginButtonOnNode.active=!1,this.otpAppButtonOnNode.active=!1,this.gameOnButtonNode.active=!1},hideAllContents:function(){this.sercurityAccountContentNode.active=!1,this.sercurityLoginContentNode.active=!1,this.otpContentNode.active=!1,this.gameContentNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","./sercutiry/InfoGame":"InfoGame","./sercutiry/InfoSercurityAccount":"InfoSercurityAccount","./sercutiry/InfoSercurityLogin":"InfoSercurityLogin"}],Invite:[function(t,e,i){"use strict";cc._RF.push(e,"ee5edSG6v5H8YwgQRnJ8Pnk","Invite");var n=t("../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.GameCommon=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onCancelClick:function(){this.GameCommon.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCommon.Audio.playClick(),this.dialogForm.hideDialog(),this.GameCommon.sendRequest.send(n.REQUEST_INVITE)}}),cc._RF.pop()},{"../../helper/Constant":"Constant"}],JackpotConstant:[function(t,e,i){"use strict";cc._RF.push(e,"2603c/jpk1La53Rp2tu4cxy","JackpotConstant");e.exports={ADD_EVENT:"jackpot.ADD_EVENT",REMOVE_EVENT:"jackpot.REMOVE_EVENT",INFO:"INFO",BET_100:100,BET_1k:1e3,BET_10k:1e4,BET_VALUE:"jackpot_bet_value"},cc._RF.pop()},{}],JackpotEffect:[function(t,e,i){"use strict";cc._RF.push(e,"e8a1233kdpJUp/ZHOXRluJV","JackpotEffect");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{jackpotSkeleton:sp.Skeleton,balanceLabel:cc.Label},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},update:function(t){var e=this.currentMoney,i=parseInt(this.balance);if(e!==i){var o=e+this.increaseValue*t*60;this.increaseValue>0&&o>i?o=i:this.increaseValue<0&&o<i&&(o=i),this.currentMoney=o,this.balanceLabel.string=n.numberWithCommas(parseInt(o))}},show:function(t,e){this.clear(),this.node.active=!0,this.node.opacity=255,this.jackpotSkeleton.setAnimation(0,"nohu",!0),this.timeoutHide=setTimeout(function(){this.node.runAction(cc.sequence(cc.fadeOut(.25),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}.bind(this),1e3*o.JACKPOT_EFFECT_SHOW),this.balance=t,this.increaseValue=(t-this.currentMoney)/(60*o.JACKPOT_TIME_INCREASE),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1)},clear:function(){this.currentMoney=0,this.balance=0,this.increaseValue=0,this.balanceLabel.string=0}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"303f08Y7ZJDhKr9CAb1WmZT","JackpotItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label,time:2.5},onLoad:function(){void 0===this.increaseValue&&this.setMoneyWithoutAnimation(0),this.numberUpdatePerSecond=15,this.timeCheckUpdate=0},update:function(t){if(this.timeCheckUpdate+=t,this.timeCheckUpdate>1/this.numberUpdatePerSecond){var e=this.currentMoney,i=parseInt(this.money);if(e!==i){var o=e+60*this.increaseValue/this.numberUpdatePerSecond;this.increaseValue>0&&o>i?o=i:this.increaseValue<0&&o<i&&(o=i),this.currentMoney=o,this.moneyLabel.string=" "+n.numberWithCommas(parseInt(o))+" "}this.timeCheckUpdate=0}},addMoney:function(t){void 0===this.money?this.setMoney(t):this.setMoney(this.money+t)},setMoney:function(t){0===this.currentMoney||void 0===this.currentMoney?this.setMoneyWithoutAnimation(t):this.setMoneyWithAnimation(t)},setMoneyWithAnimation:function(t){this.money=t,this.increaseValue=(t-this.currentMoney)/(60*this.time),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1)},addMoneyWithoutAnimation:function(t){this.setMoneyWithoutAnimation(this.money+t)},setMoneyWithoutAnimation:function(t){this.currentMoney=t,this.money=t,this.increaseValue=0,this.moneyLabel.string=" "+n.numberWithCommas(t)+" "},setMoneyWithStartNumberZero:function(t){void 0!==t&&(this.money=t,this.currentMoney||(this.currentMoney=t/100),this.increaseValue=t/(60*this.time),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1))},getMoney:function(){return this.money}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],JackpotXPer:[function(t,e,i){"use strict";cc._RF.push(e,"f9d6cfe07ZMO6e1VCpTOgh5","JackpotXPer");var n=t("../item/MiniGameXPer");cc.Class({extends:cc.Component,properties:{xper100MiniPoker:n,xper100MiniBaCay:n,xper100Diamond:n,xper100TrenDuoi:n,xper100Slot1:n,xper100Slot2:n,xper100Slot3:n,xper100Bom:n,xper100Wild:n,xper1kMiniPoker:n,xper1kMiniBaCay:n,xper1kDiamond:n,xper1kTrenDuoi:n,xper1kSlot1:n,xper1kSlot2:n,xper1kSlot3:n,xper1kBom:n,xper1kWild:n,xper10kMiniPoker:n,xper10kMiniBaCay:n,xper10kDiamond:n,xper10kTrenDuoi:n,xper10kSlot1:n,xper10kSlot2:n,xper10kSlot3:n,xper10kBom:n,xper10kWild:n},initData:function(t){if(this.data=t,this.data){var e=this.data.mini_poker?this.data.mini_poker[3]:null,i=this.data.mini_3cay?this.data.mini_3cay[3]:null,n=this.data.diamond?this.data.diamond[3]:null,o=this.data.hilo?this.data.hilo[6]:null,s=this.data.classic1?this.data.classic1[3]:null,a=this.data.one001?this.data.one001[3]:null,r=this.data.dragon?this.data.dragon[3]:null,c=this.data.bom?this.data.bom[3]:null,h=this.data.wild?this.data.wild[3]:null;this.initXJackpotMiniPoker(e),this.initXJackpotMini3Cay(i),this.initXJackpotDiamond(n),this.initXJackpotTrenDuoi(o),this.initXJackpotSlot1(s),this.initXJackpotSlot2(r),this.initXJackpotSlot3(a),this.initXJackpotBom(c),this.initXJackpotWild(h)}},initXJackpotMiniPoker:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100MiniPoker.setXJackpot(e),this.xper1kMiniPoker.setXJackpot(i),this.xper10kMiniPoker.setXJackpot(n)}},initXJackpotMini3Cay:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100MiniBaCay.setXJackpot(e),this.xper1kMiniBaCay.setXJackpot(i),this.xper10kMiniBaCay.setXJackpot(n)}},initXJackpotDiamond:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Diamond.setXJackpot(e),this.xper1kDiamond.setXJackpot(i),this.xper10kDiamond.setXJackpot(n)}},initXJackpotBom:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Bom.setXJackpot(e),this.xper1kBom.setXJackpot(i),this.xper10kBom.setXJackpot(n)}},initXJackpotWild:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Wild.setXJackpot(e),this.xper1kWild.setXJackpot(i),this.xper10kWild.setXJackpot(n)}},initXJackpotTrenDuoi:function(t){if(t){var e=t[2]?t[2]:1,i=t[3]?t[3]:1,n=t[4]?t[4]:1;this.xper100TrenDuoi.setXJackpot(e),this.xper1kTrenDuoi.setXJackpot(i),this.xper10kTrenDuoi.setXJackpot(n)}},initXJackpotSlot1:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Slot1.setXJackpot(e),this.xper1kSlot1.setXJackpot(i),this.xper10kSlot1.setXJackpot(n)}},initXJackpotSlot2:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Slot2.setXJackpot(e),this.xper1kSlot2.setXJackpot(i),this.xper10kSlot2.setXJackpot(n)}},initXJackpotSlot3:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,n=t[2]?t[2]:1;this.xper100Slot3.setXJackpot(e),this.xper1kSlot3.setXJackpot(i),this.xper10kSlot3.setXJackpot(n)}},hideAllContent:function(){this.hideAllContentXper100(),this.hideAllContentXper1k(),this.hideAllContentXper10k()},hideAllContentXper100:function(){this.xper100MiniPoker.hideX(),this.xper100MiniBaCay.hideX(),this.xper100Diamond.hideX(),this.xper100TrenDuoi.hideX(),this.xper100Slot1.hideX(),this.xper100Slot2.hideX(),this.xper100Slot3.hideX(),this.xper100Bom.hideX(),this.xper100Wild.hideX()},hideAllContentXper1k:function(){this.xper1kMiniPoker.hideX(),this.xper1kMiniBaCay.hideX(),this.xper1kDiamond.hideX(),this.xper1kTrenDuoi.hideX(),this.xper1kSlot1.hideX(),this.xper1kSlot2.hideX(),this.xper1kSlot3.hideX(),this.xper1kBom.hideX(),this.xper1kWild.hideX()},hideAllContentXper10k:function(){this.xper10kMiniPoker.hideX(),this.xper10kMiniBaCay.hideX(),this.xper10kDiamond.hideX(),this.xper10kTrenDuoi.hideX(),this.xper10kSlot1.hideX(),this.xper10kSlot2.hideX(),this.xper10kSlot3.hideX(),this.xper10kBom.hideX(),this.xper10kWild.hideX()}}),cc._RF.pop()},{"../item/MiniGameXPer":"MiniGameXPer"}],Jackpot:[function(t,e,i){"use strict";cc._RF.push(e,"197d8ydttxKCruOYow6B6mM","Jackpot");var n=t("../../../base/BaseController"),o=t("../../../helper/Config"),s=(t("../../../helper/Constant"),t("../../../util/NodeUtil")),a=t("../../../util/Util"),r=t("../MiniGameConstant"),c=t("../item/JackpotItem"),h=t("./JackpotConstant"),l=t("./JackpotXPer");cc.Class({extends:n,properties:{button100OnNode:cc.Node,button100OffNode:cc.Node,button1kOnNode:cc.Node,button1kOffNode:cc.Node,button10kOnNode:cc.Node,button10kOffNode:cc.Node,content100Node:cc.Node,content1kNode:cc.Node,content10kNode:cc.Node,jackpot100MiniPoker:c,jackpot100MiniBaCay:c,jackpot100Diamond:c,jackpot100TrenDuoi:c,jackpot100Bom:c,jackpot100Wild:c,jackpot100Slot1:c,jackpot100Slot2:c,jackpot100Slot3:c,jackpot1kMiniPoker:c,jackpot1kMiniBaCay:c,jackpot1kDiamond:c,jackpot1kTrenDuoi:c,jackpot1kBom:c,jackpot1kWild:c,jackpot1kSlot1:c,jackpot1kSlot2:c,jackpot1kSlot3:c,jackpot10kMiniPoker:c,jackpot10kMiniBaCay:c,jackpot10kDiamond:c,jackpot10kTrenDuoi:c,jackpot10kBom:c,jackpot10kWild:c,jackpot10kSlot1:c,jackpot10kSlot2:c,jackpot10kSlot3:c,circleButtonNode:cc.Node,contentNode:cc.Node,JackpotXPer:l},init:function(t){this.controller=t,this.MiniGame=t.MiniGame},onLoad:function(){var t=this;this._super(),this.number=0,this.data=null,this.isShow=!0,this.isMove=!1,this.startPosition=null,this.positionX=this.node.x,this.positionY=this.node.y,this.onTouchStart=function(e){t.isMove=!1,t.startPosition=t.node.getPosition()},this.onTouchMove=function(e){t.isMove=!0;var i=e.touch.getDelta(),n=t.node.x+i.x,s=t.node.y+i.y,a=o.CANVAS_WIDTH/2,r=-o.CANVAS_WIDTH/2,c=o.GAME_HEIGHT/2,h=-(o.CANVAS_HEIGHT-o.GAME_HEIGHT/2);n>a?n=a:n<r&&(n=r),s>c?s=c:s<h&&(s=h),t.node.x=n,t.node.y=s},this.onTouchEnd=function(e){t.isMove&&t.savePosition();var i=t.node.getPosition();s.getDistanceTwoNode(t.startPosition,i)<10&&t.onJackpotButtonClick()},this.onMouseEnter=function(t){t.stopPropagation()}},update:function(t){0===this.number&&(this.initData(),this.addEventMove()),++this.number},onEnable:function(){this.sendRequest.sendNoPrefixToZone(h.ADD_EVENT)},onDestroy:function(){this.sendRequest.sendNoPrefixToZone(h.REMOVE_EVENT)},addEventMove:function(){},initData:function(){switch(this.initSaveData(),this.showContent(this.isShow),this.node.setPosition(this.positionX,this.positionY),this.getTempData()[h.BET_VALUE]){case h.BET_100:this.onButton100Click();break;case h.BET_1k:this.onButton1kClick();break;case h.BET_10k:this.onButton10kClick()}var t=this.controller.getLastJoinedRoom().name;a.isLobbyRoom(t)||a.isLobbyGame(t)||(this.node.active=!1)},initSaveData:function(){var t=cc.sys.localStorage.getItem(r.JACKPOT_IS_SHOW);"true"===t||!0===t?this.isShow=!0:"false"!==t&&!1!==t||(this.isShow=!1);var e=this.getTempData()[r.JACKPOT_POSITION];if(e){this.positionX=e.x,this.positionY=e.y;var i=cc.winSize;this.positionX>i.width/2?this.positionX=i.width/2:this.positionX<-i.width/2&&(this.positionX=-i.width/2),this.positionY>i.height/2?this.positionY=i.height/2:this.positionY<-i.height/2&&(this.positionY=-i.height/2)}},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[r.JACKPOT_POSITION]=t},onJackpotButtonClick:function(){this.showContentWithAnimation(!this.isShow)},showContent:function(t){this.isShow=t,this.contentNode.active=t,cc.sys.localStorage.setItem(r.JACKPOT_IS_SHOW,this.isShow)},showContentWithAnimation:function(t){this.contentNode.stopAllActions(),this.isShow=t,cc.sys.localStorage.setItem(r.JACKPOT_IS_SHOW,this.isShow),t?(this.contentNode.active=!0,this.contentNode.scaleX=0,this.contentNode.runAction(cc.scaleTo(o.JACKPOT_TIME_SHOW,1,this.contentNode.scaleY))):this.contentNode.runAction(cc.sequence(cc.scaleTo(o.JACKPOT_TIME_SHOW,0,this.contentNode.scaleY),cc.callFunc(function(){this.contentNode.active=!1},this)))},onMiniBaCayClick:function(){this.controller.MiniGame&&this.controller.MiniGame.MiniBaCay?this.controller.MiniGame.MiniBaCay.onMiniBaCayClick():this.controller.MiniGame.createMini3Cay()},onMiniPokerClick:function(){this.controller.MiniGame&&this.controller.MiniGame.MiniPoker?this.controller.MiniGame.MiniPoker.onMiniPokerClick():this.controller.MiniGame.createMiniPoker()},onDiamondClick:function(){this.controller.MiniGame&&this.controller.MiniGame.Diamond?this.controller.MiniGame.Diamond.onDiamondClick():this.controller.MiniGame.createDiamond()},onTrenDuoiClick:function(){this.controller.MiniGame&&this.controller.MiniGame.TrenDuoi?this.controller.MiniGame.TrenDuoi.onTrenDuoiClick():this.controller.MiniGame.createTrenDuoi()},onBomClick:function(){this.controller.MiniGame&&this.controller.MiniGame.Bom?this.controller.MiniGame.Bom.onBomClick():this.controller.MiniGame.createBom()},onWildClick:function(){this.controller.MiniGame&&this.controller.MiniGame.Wild?this.controller.MiniGame.Wild.onWildClick():this.controller.MiniGame.createWild()},onButton100Click:function(){this.initBeforeClick(),this.button100OnNode.active=!0,this.button100OffNode.active=!1,this.content100Node.active=!0,this.initDataByBet(),this.getTempData()[h.BET_VALUE]=h.BET_100},onButton1kClick:function(){this.initBeforeClick(),this.button1kOnNode.active=!0,this.button1kOffNode.active=!1,this.content1kNode.active=!0,this.initDataByBet(),this.getTempData()[h.BET_VALUE]=h.BET_1k},onButton10kClick:function(){this.initBeforeClick(),this.button10kOnNode.active=!0,this.button10kOffNode.active=!1,this.content10kNode.active=!0,this.initDataByBet(),this.getTempData()[h.BET_VALUE]=h.BET_10k},initBeforeClick:function(){this.showAllOffButtons(),this.hideAllOnButtons(),this.hideAllContents()},showAllOffButtons:function(){this.button100OffNode.active=!0,this.button1kOffNode.active=!0,this.button10kOffNode.active=!0},hideAllOnButtons:function(){this.button100OnNode.active=!1,this.button1kOnNode.active=!1,this.button10kOnNode.active=!1},hideAllContents:function(){this.content100Node.active=!1,this.content1kNode.active=!1,this.content10kNode.active=!1},isJackpot100:function(){return this.button100OnNode.active},isJackpot1k:function(){return this.button1kOnNode.active},isJackpot10k:function(){return this.button10kOnNode.active},handleRequest:function(t){var e=t.game_cmd,i=t.game_data;t.game_msg;switch(e){case h.INFO:this.handleInfo(i)}},handleInfo:function(t){this.node.active&&(this.data=t,this.contentNode.active=!0,this.initDataByBet())},initDataByBet:function(){if(this.data){var t=0,e=null,i=null,n=null,o=null,s=null,a=null,r=null,c=null,h=null;this.isJackpot100()?(t=0,e=this.jackpot100MiniPoker,i=this.jackpot100MiniBaCay,n=this.jackpot100Diamond,o=this.jackpot100TrenDuoi,s=this.jackpot100Bom,a=this.jackpot100Wild,r=this.jackpot100Slot1,c=this.jackpot100Slot2,h=this.jackpot100Slot3):this.isJackpot1k()?(t=1,e=this.jackpot1kMiniPoker,i=this.jackpot1kMiniBaCay,n=this.jackpot1kDiamond,o=this.jackpot1kTrenDuoi,s=this.jackpot1kBom,a=this.jackpot1kWild,r=this.jackpot1kSlot1,c=this.jackpot1kSlot2,h=this.jackpot1kSlot3):this.isJackpot10k()&&(t=2,e=this.jackpot10kMiniPoker,i=this.jackpot10kMiniBaCay,n=this.jackpot10kDiamond,o=this.jackpot10kTrenDuoi,s=this.jackpot10kBom,a=this.jackpot10kWild,r=this.jackpot10kSlot1,c=this.jackpot10kSlot2,h=this.jackpot10kSlot3);var l=this.data.mini_3cay?this.data.mini_3cay[t]:null,u=this.data.mini_poker?this.data.mini_poker[t]:null,d=this.data.diamond?this.data.diamond[t]:null,m=this.data.hilo?this.data.hilo[t+3]:null,f=this.data.bom?this.data.bom[t]:null,p=this.data.wild?this.data.wild[t]:null,_=this.data.classic1?this.data.classic1[t]:null,S=this.data.one001?this.data.one001[t]:null,g=this.data.dragon?this.data.dragon[t]:null;this.contentNode.active?(e.setMoney(u),i.setMoney(l),n.setMoney(d),o.setMoney(m),s.setMoney(f),a.setMoney(p),r.setMoney(_),c.setMoney(g),h.setMoney(S)):(e.setMoneyWithoutAnimation(u),i.setMoneyWithoutAnimation(l),n.setMoneyWithoutAnimation(d),o.setMoneyWithoutAnimation(m),s.setMoneyWithoutAnimation(f),a.setMoneyWithoutAnimation(p),r.setMoneyWithoutAnimation(_),c.setMoneyWithoutAnimation(g),h.setMoneyWithoutAnimation(S));var C=[u,l,d,m,f,p,_,S,g];this.sortDESC(C);var N=this.getIndexByValue(C,u),E=this.getIndexByValue(C,l),T=this.getIndexByValue(C,d),I=this.getIndexByValue(C,m),v=this.getIndexByValue(C,f),y=this.getIndexByValue(C,p),R=this.getIndexByValue(C,_),L=this.getIndexByValue(C,g),B=this.getIndexByValue(C,S);e.node.zIndex=N,i.node.zIndex=E,n.node.zIndex=T,o.node.zIndex=I,s.node.zIndex=v,a.node.zIndex=y,r.node.zIndex=R,c.node.zIndex=L,h.node.zIndex=B,e.node.parent.sortAllChildren(),this.JackpotXPer&&this.JackpotXPer.initData(this.data)}},sortDESC:function(t){t.sort(function(t,e){return!(!t||!e)&&e-t})},getIndexByValue:function(t,e){for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return 0}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../util/NodeUtil":"NodeUtil","../../../util/Util":"Util","../MiniGameConstant":"MiniGameConstant","../item/JackpotItem":"JackpotItem","./JackpotConstant":"JackpotConstant","./JackpotXPer":"JackpotXPer"}],JoinRoomError:[function(t,e,i){"use strict";cc._RF.push(e,"5a8af5zmO1MHownusiQu9Aw","JoinRoomError"),cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},initMessage:function(t){this.messageLabel.string=t},onSuccessClick:function(){this.dialogForm.hideDialog(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity(),this.GameCenter.GameInfo.InfoSercurity.showGame(),this.GameCenter.BuyInForm.node.active&&this.GameCenterUI.hideBuyInFormNode()}}),cc._RF.pop()},{}],LiengBetState:[function(t,e,i){"use strict";cc._RF.push(e,"504cedvmoxEiKxNk+x68Qff","LiengBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],LiengCard:[function(t,e,i){"use strict";cc._RF.push(e,"81d80OZpS9HtqPue/m4EBZ/","LiengCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;i++,this.point=e,this.suit=i,this.point=14===this.point?1:this.point,Object.defineProperties(this,{point:{value:this.point,writable:!1},suit:{value:this.suit,writable:!1},id:{value:13*(this.suit-1)+(this.point-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],LiengConfig:[function(t,e,i){"use strict";cc._RF.push(e,"abe14Gm1ORE4rQ4r5FNjSQO","LiengConfig");e.exports={NUMBER_PLAYERS:6,NUMBER_CARDS_EACH_PLAYERS:3,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_SUM_X:145,POSITION_PLAYER_SUM_Y:-65},cc._RF.pop()},{}],LiengConstant:[function(t,e,i){"use strict";cc._RF.push(e,"590864asjJG4rtghkS2aMYn","LiengConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",FOLD:"FOLD",CHECK:"CHECK",FIRST_BET:"FIRST_BET",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],LiengGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"0b12aPksulKBowPoi3nIZsI","LiengGroupCardsType");e.exports={BAI_CAO:"BAI_CAO",BO_DOI:"BO_DOI",LIENG:"LIENG",SAP:"SAP"},cc._RF.pop()},{}],LiengHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"595ccJj4zxCAoNW6leFMjmr","LiengHandlerEffect");var n=t("./LiengBetState"),o=t("./LiengConfig"),s=t("../../helper/Message"),a={init:function(t){this.Lieng=t,this.LiengUI=t.LiengUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].LiengPlayer.showCards(t,!0):this.listPlayers[e].LiengPlayer.showBackCards(!0)},startGame:function(t){var e=(t.data.playing_player||t.data).user_id,i=t.data.min_first_bet,n=t.data.max_first_bet,o=this.Lieng.getPlayerByUserId(e);o&&(o.isItMe&&(this.GameCommon.setMinMaxBetFormAndShow(i,n),this.LiengUI.showRaiseButton()),this.Lieng.startCountDownPlayer(o,t.time_remain,t.time)),this.LiengUI.showTotalChip(0)},handlePlayingPlayer:function(t){var e=t.data.playing_player||t.data,i=e.user_id,n=e.balance,o=e.min_bet,s=this.Lieng.getPlayerByUserId(i);s&&(s.isItMe?(this.displayButtons(n,o),o>0?this.GameCommon.setMinMaxBetForm(o,n):this.GameCommon.setMinMaxBetForm(this.Lieng.minBet,n)):this.LiengUI.hideAllButtons(),this.Lieng.startCountDownPlayer(s,t.time_remain,t.time))},handleBetAllPlayers:function(t){var e=t.data.players;for(var i in e){var n=e[i].user_id,o=e[i].bet_amount,s=this.Lieng.getPlayerByUserId(n);s&&s.is_player&&(s.BasePlayer.showBetNode(o),s.BasePlayer.showChangeBalance(-o))}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;for(var i in this.LiengUI.showTotalChip(e),this.listPlayers)this.listPlayers[i].LiengPlayer.moveToCenterTable()},showResult:function(t){var e=t.data.players;for(var i in e){var n=e[i].money_change,s=e[i].cards,a=e[i].user_id,r=e[i].group_cards,c=e[i].group_cards_name,h=this.Lieng.getPlayerByUserId(a);h&&(h.BasePlayer.showChangeBalance(n),h.LiengPlayer.isFold()||h.BasePlayer.showEffectByChangeBalance(n),c&&h.BasePlayer.showTextLight(c,!1,new cc.Vec2(o.POSITION_PLAYER_SUM_X,o.POSITION_PLAYER_SUM_Y)),r&&h.LiengPlayer.showEffectByGroupCardsType(r),h.isItMe||s&&h.LiengPlayer.showCards(s,!0),n>0&&this.showEffectWinCenterBalance(h),h.isItMe&&n>0&&this.GameCommon.Audio.playWin())}this.GameCommon.BetForm.hideDialog(!1),this.LiengUI.hideAllButtons()},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.Lieng.chipPrefab);e.parent=this.Lieng.gameNode,e.setPosition(o.POSITION_CENTER_MONEY_X,o.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.Lieng.isMoneyType),e.runAction(cc.sequence(cc.moveTo(o.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.LiengUI.showTotalChip(0)},displayButtons:function(t,e){this.LiengUI.showAllButtons(),this.LiengUI.setAllInLabelValue(0),this.LiengUI.setCallLabelValue(0),e>0?(this.LiengUI.hideCheckButton(),this.LiengUI.setCallLabelValue(e)):this.LiengUI.hideCallButton(),e>=t?(this.LiengUI.hideCallButton(),this.LiengUI.hideRaiseButton(),this.LiengUI.hideCheckButton(),this.LiengUI.setAllInLabelValue(t)):this.LiengUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].LiengPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===s.LIENG_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===n.CHECK?t.LiengPlayer.showEffectCheck():e===n.ALL_IN?t.LiengPlayer.showEffectAllIn():e===n.FOLD&&t.LiengPlayer.showEffectFold()},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1),this.listPlayers[t].is_home=!1},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutResult)}};e.exports=a,cc._RF.pop()},{"../../helper/Message":"Message","./LiengBetState":"LiengBetState","./LiengConfig":"LiengConfig"}],LiengHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"172bf0lEZ1MhoocoO4TA92+","LiengHandlerRequest");var n=t("./LiengConstant"),o=t("../../helper/Constant"),s={Lieng:null,init:function(t){this.Lieng=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Lieng.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.BALANCE:this.Lieng.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.COUNT_DOWN:this.Lieng.handleCountDown(e);break;case n.START_GAME:this.Lieng.handleStartGame(e);break;case n.PLAYER_PLAY:this.Lieng.handlePlayerPlay(e);break;case n.FIRST_BET:this.Lieng.handlePlayerFirstBet(e);break;case n.BET:this.Lieng.handlePlayerBet(e);break;case n.FOLD:this.Lieng.handlePlayerFold(e);break;case n.CHECK:this.Lieng.handlePlayerCheck(e);break;case n.BUY_IN:this.Lieng.handlePlayerBuyIn(e);break;case n.RESULT:this.Lieng.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.Lieng.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.Lieng.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.Lieng.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Lieng.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./LiengConstant":"LiengConstant"}],LiengPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"9407fT405hDTLDt/ptYo/Kp","LiengPlayer");var n=t("./LiengConfig"),o=t("./LiengGroupCardsType"),s=t("./LiengCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var o=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=n.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(o),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_CARDS,n.DISTANCE_TWO_CARDS*i,0,n.SCALE_CARD)):(r.reveal(!0),a.setPosition(n.DISTANCE_TWO_CARDS*i,0))}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=n.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var o=cc.instantiate(this.cardBackPrefab);o.parent=this.cardsNode,o.scale=n.SCALE_CARD,t?(o.setPosition(0,0),o.runAction(cc.moveTo(n.TIME_SHOW_CARDS,n.DISTANCE_TWO_CARDS*i,0))):o.setPosition(n.DISTANCE_TWO_CARDS*i,0)}},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=n.POSITION_CENTER_MONEY_X-this.node.x,i=n.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(n.TIME_MOVE_BALANCE_CENTER,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.LIENG_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case o.SAP:e=a.LIENG_SAP;break;case o.LIENG:e=a.LIENG_LIENG;break;case o.BO_DOI:e=a.LIENG_BO_DOI}e&&this.node.getComponent("BasePlayer").showTextLight(e)},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./LiengCard":"LiengCard","./LiengConfig":"LiengConfig","./LiengGroupCardsType":"LiengGroupCardsType"}],LiengState:[function(t,e,i){"use strict";cc._RF.push(e,"4faf6EnXZpGo6f6GZMFNY3h","LiengState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.Lieng=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.Lieng.GameCommon.showBuyInButton():this.Lieng.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],LiengUI:[function(t,e,i){"use strict";cc._RF.push(e,"3f5bdDxo5NAraBhSwS/0RYo","LiengUI");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.valueTotalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?n.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.valueTotalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_CALL,n.numberWithCommas(t)):o.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_ALL_IN,n.numberWithCommas(t)):o.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.hideTotalChip(),this.hideAllButtons(),this.valueTotalChip=0}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Lieng:[function(t,e,i){"use strict";cc._RF.push(e,"64e13R1bUtPKqBUIwWVdwqL","Lieng");var n=t("../../base/BaseController"),o=t("./LiengConstant"),s=t("./LiengConfig"),a=t("./LiengUI"),r=t("./LiengState"),c=t("./LiengHandlerRequest"),h=t("./LiengHandlerEffect"),l=t("./LiengBetState"),u=t("../../prefab/GameCommon"),d=t("../../helper/Constant"),m=t("../../helper/Message"),f=t("../../object/RoomType");cc.Class({extends:n,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,LiengUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_LIENG),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==f.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.LiengUI.playersNode,this.isMoneyType||this.LiengUI.disableAllPlaceHolder(),this.LiengConstant=o,this.LiengConfig=s,this.LiengState=r,this.LiengState.init(this),this.LiengHandlerRequest=c,this.LiengHandlerRequest.init(this),this.LiengHandlerEffect=h,this.LiengHandlerEffect.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.LiengHandlerRequest.onPublicMessage.bind(this.LiengHandlerRequest),this.onRoomVarsUpdate=this.LiengHandlerRequest.onRoomVarsUpdate.bind(this.LiengHandlerRequest),this.onUserVarsUpdate=this.LiengHandlerRequest.onUserVarsUpdate.bind(this.LiengHandlerRequest),this.onResponse=this.LiengHandlerRequest.onResponse.bind(this.LiengHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.active=!1}this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("LiengPlayer");t.BasePlayer=n,t.LiengPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRoomMaster(!1),n.setRequestLeftRoom(t.request_left_room),n.setPlayerName(t.nick_name),n.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.LiengState.setState(e),this.LiengState.isStop()?this.reset():this.LiengState.isWaiting()?this.resumeStateWaiting(t):this.LiengState.isPlaying()?this.resumeStatePlaying(t):this.LiengState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.LiengHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.cards,n=t.data.bet_amount_first_bet,o=t.data.min_first_bet,s=t.data.max_first_bet;for(var a in e){var r=e[a].user_id,c=e[a].bet_amount,h=e[a].bet_state,l=this.getPlayerByUserId(r);l&&(c>0&&l.BasePlayer.showBetNodeWithoutAnimation(c),this.LiengHandlerEffect.setPlayerStatusByBetState(l,h),l.isItMe?l.is_home&&0===n&&this.GameCommon.setMinMaxBetFormAndShow(o,s):l.LiengPlayer.showBackCards(!1))}this.LiengUI.showTotalChip(n),this.myPlayer.LiengPlayer.showCards(i,!1),this.LiengHandlerEffect.handlePlayingPlayer(t)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.bet_amount_first_bet;for(var n in e){var o=e[n].user_id,a=e[n].bet_amount,r=e[n].cards,c=e[n].money_change,h=e[n].group_cards,l=e[n].group_cards_name,u=this.getPlayerByUserId(o);u&&(a>0&&u.BasePlayer.showBetNodeWithoutAnimation(a),u.BasePlayer.showChangeBalance(c),u.BasePlayer.showEffectByChangeBalance(c),l&&u.BasePlayer.showTextLight(l,!1,new cc.Vec2(s.POSITION_PLAYER_SUM_X,s.POSITION_PLAYER_SUM_Y)),h&&u.LiengPlayer.showEffectByGroupCardsType(h),u.LiengPlayer.showCards(r,!1))}this.LiengUI.showTotalChip(i),this.LiengUI.hideAllButtons()},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.LiengHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.LiengState.setWaiting(),this.GameCommon.hideWaitingNode(),this.LiengHandlerEffect.startCountDownAllPlayers(t)):(this.LiengState.setStop(),this.LiengHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){var e=t.data.cards;this.LiengState.setPlaying(),this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.dealCards(e),this.LiengHandlerEffect.startGame(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.LiengHandlerEffect.resetPlayerNameAllPlayersCheck(),this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.handlePlayingPlayer(t)},handlePlayerFirstBet:function(t){this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.handleBetAllPlayers(t),this.LiengHandlerEffect.handlePlayingPlayer(t),this.LiengHandlerEffect.showEffectCollectMoney(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount,n=t.data.balance,o=this.getPlayerByUserId(e);o&&(o.BasePlayer.hideText(),o.BasePlayer.showChangeBalance(-i),i>0&&o.BasePlayer.showBetNode(i),0==n&&o.LiengPlayer.showEffectAllIn()),this.LiengHandlerEffect.stopCountDownAllPlayers(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.LiengPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.LiengPlayer.showEffectCheck()},handleResult:function(t){this.LiengState.setFinish(),this.LiengHandlerEffect.stopCountDownAllPlayers(t),this.LiengHandlerEffect.resetPlayerNameAllPlayers(),this.LiengHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.LiengState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.LiengHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(o.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(o.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getNumberCardInTable:function(){return this.tableCardNode.getChildren().length},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.LiengHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.LiengUI.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].LiengPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./LiengBetState":"LiengBetState","./LiengConfig":"LiengConfig","./LiengConstant":"LiengConstant","./LiengHandlerEffect":"LiengHandlerEffect","./LiengHandlerRequest":"LiengHandlerRequest","./LiengState":"LiengState","./LiengUI":"LiengUI"}],LogOut:[function(t,e,i){"use strict";cc._RF.push(e,"b9eb6URb2ZF0pZ2lqLMs9uh","LogOut");t("../../helper/Message");cc.Class({extends:cc.Component,init:function(t){this.controller=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmLogoutClick:function(){this.controller.isConnected()?(this.controller.Audio.playClick(),this.controller.showProcessingNode(),this.logout()):cc.game.end()},logout:function(){var t={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.logout(t,function(t){},function(t){}),this.controller.setAutoLogin(!1),this.controller.clearAccount(),this.controller.sfsManager.sfs.disconnect()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],LoginLogin:[function(t,e,i){"use strict";cc._RF.push(e,"c463dbXqQFHSqjLc469IXCG","LoginLogin");var n=t("../../../helper/Constant"),o=t("../../../helper/Message"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,passwordEditBox:cc.EditBox},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){var t=this.Login.getAccount();t&&(this.usernameEditBox.string=t.username,this.passwordEditBox.string=t.password)},onBackClick:function(){this.Login.Audio.playClick(),this.LoginUI.showMenuNode()},onConfirmClick:function(){this.Login.Audio.playClick();var t=this.usernameEditBox.string,e=this.passwordEditBox.string;""===t?this.Login.showDialogMessage(o.LOGIN_TITLE,o.LOGIN_MISSING_USERNAME):""===e?this.Login.showDialogMessage(o.LOGIN_TITLE,o.LOGIN_MISSING_PASSWORD):this.login(t,e)},login:function(t,e,i){var s=this,a=this.Login.getTime(),r={username:t,password:e,register_code:this.Login.getRegisterCode(),time:a,device_token:this.Login.getRegisterCode(),device_id:this.Login.getDeviceID(),sign:this.Login.getDK(t,a)};i&&(r.otp=i);this.checkTimeLogin(t)?(this.Login.showProcessingNode(),this.Login.api.login(r,function(i){0===i.data.change_pass?(s.Login.hideProcessingNode(),s.Login.setUser(i.data),s.LoginUI.showChangePasswordFormNode(),s.passwordEditBox.string=""):0===i.data.login_status?(s.Login.OTPLogin.setAccount(t,e),s.Login.OTPLogin.clear(),s.Login.hideProcessingNode(),s.LoginUI.showOtpLoginFormNode()):(s.Login.setAutoLogin(!0),i.data.user.is_quick?(s.Login.setAccountType(n.ACCOUNT_TYPE_LOGIN_QUICK),s.Login.setAccountQuick(t,e)):(s.Login.setAccountType(n.ACCOUNT_TYPE_LOGIN),s.Login.setAccount(t,e)),s.Login.initDataAndConnectSFS(i.data))},function(t){s.Login.setAutoLogin(!1),s.Login.hideProcessingNode(),s.Login.showDialogMessage(o.LOGIN_TITLE,t.msg)})):this.Login.showDialogMessage(o.LOGIN_TITLE,o.TIME_LOGIN)},onForgetPasswordClick:function(){this.Login.Audio.playClick(),this.LoginUI.showForgetPasswordPhoneFormNode()},checkTimeLogin:function(t){var e=this.Login.getTimeLogin(),i=parseInt((new Date).getTime()/1e3);if(e){var n=e[t];if(n){var o=n.time_first_login,a=n.number_login;return a<s.NUMBER_LOGIN?(a++,this.saveTimeLogin(t,o,a),!0):i-o>2*s.SECONDS_TIME_LOGIN&&(this.saveTimeLogin(t,i,0),!0)}this.saveTimeLogin(t,i,0)}else this.saveTimeLogin(t,i,0);return!0},saveTimeLogin:function(t,e,i){var n=this.Login.getTimeLogin();n||(n={}),n[t]||(n[t]={}),n[t].time_first_login=e,n[t].number_login=i,this.Login.setTimeLogin(n)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],LoginMenu:[function(t,e,i){"use strict";cc._RF.push(e,"25cc7mElvNIsL0M4ElGTnmz","LoginMenu");var n=t("../../../helper/Constant"),o=t("../../../helper/Message"),s=t("../../../util/Track");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Login=t,this.LoginUI=t.LoginUI,this.LoginLogin=t.LoginLogin},onLoad:function(){},onBackClick:function(){this.Login.Audio.playClick(),this.LoginUI.showLogOutFormNode()},onLoginClick:function(){this.Login.Audio.playClick(),this.LoginUI.showLoginNode()},onRegisterClick:function(){this.Login.Audio.playClick(),this.LoginUI.showRegisterNode()},onQuickPlayClick:function(){var t=this;this.Login.Audio.playClick();var e=this.Login.getAccountQuick();if(e)this.LoginLogin.login(e.username,e.password);else{var i=this.Login.getRegisterCode(),s=this.Login.getTime(),a={register_code:i,device_token:i,time:s,sign:this.Login.getDK(i,s),device_id:this.Login.getDeviceID()};this.Login.showProcessingNode(),this.Login.api.registerQuick(a,function(e){t.Login.setAutoLogin(!0),t.Login.setAccountType(n.ACCOUNT_TYPE_LOGIN_QUICK),t.Login.setAccountQuick(e.data.user.username,e.data.user.username),t.Login.initDataAndConnectSFS(e.data)},function(e){t.Login.setAutoLogin(!1),t.Login.hideProcessingNode(),t.Login.showDialogMessage(o.LOGIN_TITLE,e.msg)})}},onForgetPasswordClick:function(){this.Login.Audio.playClick(),this.LoginUI.showForgetPasswordPhoneFormNode()},onFacebookClick:function(){this.Login.Audio.playClick(),this.Login.OTPLogin.isShowForm()?this.LoginUI.showOtpLoginFormNode():cc.sys.isBrowser?this.initLoginFacebookWeb():this.initLoginFacebookMobile()},initLoginFacebookWeb:function(){if(window.FB){var t=this;t.Login.showProcessingNode(),!window.isInitFB&&window.FB&&FB.init({appId:"2461516980611772",autoLogAppEvents:!0,xfbml:!0,cookie:!0,version:"v3.0"}),FB.login(function(e){if(e.authResponse){var i=e.authResponse.userID,o=n.LOGIN_FACEBOOK_TYPE,s=e.authResponse.accessToken;t.loginSocial(i,"",o,s)}else t.Login.setAutoLogin(!1),t.Login.hideProcessingNode()})}},initLoginFacebookMobile:function(){this.initFacebook(),this.checkPlugin()&&(sdkbox.PluginFacebook.isLoggedIn()?this.loginFacebookMobile():sdkbox.PluginFacebook.login())},initFacebook:function(){if(this.checkPlugin()){this.Login.showProcessingNode();var t=this;sdkbox.PluginFacebook.init(),sdkbox.PluginFacebook.setListener({onLogin:function(e,i){e?(console.log("Login facebook success"),console.log(i),t.loginFacebookMobile()):(console.log("Login facebook failed"),console.log(i),t.Login.hideProcessingNode())}})}},checkPlugin:function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0!==sdkbox.PluginFacebook||(console.log("sdkbox.PluginFacebook is undefined"),!1)},loginFacebookMobile:function(){if(!this.isLoginFacebook){this.isLoginFacebook=!0;var t=sdkbox.PluginFacebook.getUserID(),e=n.LOGIN_FACEBOOK_TYPE,i=sdkbox.PluginFacebook.getAccessToken();this.Login.showProcessingNode(),this.loginSocial(t,"",e,i)}},loginSocial:function(t,e,i,a,r){var c={social_id:t,email:e,register_code:this.Login.getRegisterCode(),social_type:i,access_token:a};r&&(c.otp=r),this.initFlatformForData(c),this.Login.api.registerSocial(c,function(o){0===o.data.login_status?(this.Login.OTPLogin.setLoginFacebook(t,e,i,a),this.Login.OTPLogin.clear(),this.Login.hideProcessingNode(),this.LoginUI.showOtpLoginFormNode()):(this.Login.initDataAndConnectSFS(o.data),this.Login.setAutoLogin(!0),this.Login.setAccountType(n.ACCOUNT_TYPE_LOGIN_FACEBOOK)),o.data.user.is_new&&s.addTrackCompleteRegistration()}.bind(this),function(t){this.isLoginFacebook=!1,this.Login.setAutoLogin(!1),this.Login.hideProcessingNode(),this.Login.showDialogMessage(o.LOGIN_TITLE,t.msg)}.bind(this))},initFlatformForData:function(t){var e=this.Login.getDeviveToken();e&&(t.device_token=e);var i=this.Login.getDeviceID();i&&(t.device_id=i);var o=this.Login.getMarketingCode();o&&(t[n.MARKETING_CODE]=o),this.Login.setMarketingCode("")}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/Track":"Track"}],LoginRegister:[function(t,e,i){"use strict";cc._RF.push(e,"8b10cXRxapGPrrGpIewUF1+","LoginRegister");var n=t("../../../helper/Message"),o=t("../../../util/Track");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,passwordEditBox:cc.EditBox,rePasswordEditBox:cc.EditBox,agreeLiscenceToggle:cc.Toggle},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.passwordEditBox,this.rePasswordEditBox]},onEnable:function(){this.clear()},onBackClick:function(){this.Login.Audio.playClick(),this.LoginUI.showMenuNode()},onConfirmClick:function(){this.Login.Audio.playClick();var t=this.usernameEditBox.string,e=this.passwordEditBox.string,i=this.rePasswordEditBox.string,o=this.agreeLiscenceToggle.isChecked;""===t?this.Login.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_USERNAME):""===e?this.Login.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_PASSWORD):""===i?this.Login.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_REPASSWORD):e!==i?this.Login.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_REPASSWORD_NOT_CORRECT):o?this.register(t,e):this.Login.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_NOT_AGREE_TERM)},register:function(t,e){var i=this;this.Login.showProcessingNode();var s=this.Login.getTime(),a={username:t,password:e,register_code:this.Login.getRegisterCode(),time:s,sign:this.Login.getDK(t,s),device_id:this.Login.getDeviceID()};this.Login.api.register(a,function(t){i.Login.initDataAndConnectSFS(t.data),o.addTrackCompleteRegistration()},function(t){i.Login.hideProcessingNode(),i.Login.showDialogMessage(n.REGISTER_TITLE,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t=0;t<this.editboxs.length;t++)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t=0;t<this.editboxs.length;t++)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/Track":"Track"}],LoginUI:[function(t,e,i){"use strict";cc._RF.push(e,"4442fBplUlIaKIcplbFHNnH","LoginUI");t("../../helper/Config");cc.Class({extends:cc.Component,properties:{menuNode:cc.Node,registerNode:cc.Node,loginNode:cc.Node,logOutFormNode:cc.Node,updateNicknameFormNode:cc.Node,otpLoginFormNode:cc.Node,forgetPasswordPhoneFormNode:cc.Node,forgetPasswordEmailFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},onLoad:function(){this.dialogFormUpdateNickname=this.updateNicknameFormNode.getComponent("DialogForm"),this.dialogFormOtpLogin=this.otpLoginFormNode.getComponent("DialogForm"),this.dialogFormForgetPasswordPhone=this.forgetPasswordPhoneFormNode.getComponent("DialogForm"),this.dialogFormForgetPasswordEmail=this.forgetPasswordEmailFormNode.getComponent("DialogForm"),this.dialogFormLogOut=this.logOutFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage")},showMenuNode:function(){this.hideAllNode(),this.menuNode.active=!0},showRegisterNode:function(){this.hideAllNode(),this.registerNode.active=!0},showLoginNode:function(){this.hideAllNode(),this.loginNode.active=!0},hideAllNode:function(){this.menuNode.active=!1,this.registerNode.active=!1,this.loginNode.active=!1},showUpdateNicknameFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateNickname.showDialog(t)},hideUpdateNicknameFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateNickname.hideDialog(t)},showOtpLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpLogin.showDialog(t)},hideOtpLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpLogin.hideDialog(t)},showForgetPasswordPhoneFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormForgetPasswordPhone.showDialog(t)},hideForgetPasswordPhoneFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormForgetPasswordPhone.hideDialog(t)},showForgetPasswordEmailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormForgetPasswordEmail.showDialog(t)},hideForgetPasswordEmailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormForgetPasswordEmail.hideDialog(t)},showLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.showDialog(t)},hideLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.hideDialog(t)},showDialogMessage:function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()},hideDialogMessage:function(){this.dialogMessageForm.hideDialog()},showProcessingNode:function(){this.processingNode.active=!0},hideProcessingNode:function(){this.processingNode.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config"}],Login:[function(t,e,i){"use strict";cc._RF.push(e,"41d2dcpfAJOlLKpBRYN5WeN","Login");var n=t("../../base/BaseController"),o=t("../../prefab/form/LogOut"),s=t("./other/LoginMenu"),a=t("./other/LoginRegister"),r=t("./other/LoginLogin"),c=t("./LoginUI"),h=t("./form/UpdateNickname"),l=t("./form/OTPLogin"),u=t("./form/ForgetPasswordPhone"),d=t("./form/ForgetPasswordEmail"),m=t("../../prefab/Toast"),f=t("../../ui/dialog/DialogMessage"),p=t("../../ui/Processing"),_=t("../../object/Audio"),S=t("../../helper/Constant");cc.Class({extends:n,properties:{LoginUI:c,LoginMenu:s,LoginRegister:a,LoginLogin:r,LogOut:o,UpdateNickname:h,OTPLogin:l,ForgetPasswordPhone:u,ForgetPasswordEmail:d,Toast:m,DialogMessage:f,Processing:p,Audio:_},onLoad:function(){this._super(),this.setSceneName(S.SCENE_LOGIN),this.LoginMenu.init(this),this.LoginRegister.init(this),this.LoginLogin.init(this),this.LogOut.init(this),this.UpdateNickname.init(this),this.OTPLogin.init(this),this.ForgetPasswordPhone.init(this),this.ForgetPasswordEmail.init(this),this.initAutoLogin()},initAutoLogin:function(){if(this.isAutoLogin())switch(parseInt(this.getAccountType())){case S.ACCOUNT_TYPE_LOGIN_FACEBOOK:cc.sys.isBrowser||this.LoginMenu.initLoginFacebookMobile();break;case S.ACCOUNT_TYPE_LOGIN:var t=this.getAccount();t&&this.LoginLogin.login(t.username,t.password);break;case S.ACCOUNT_TYPE_LOGIN_QUICK:var e=this.getAccountQuick();e&&this.LoginLogin.login(e.username,e.password)}},initDataAndConnectSFS:function(t){this.initData(t),this.checkNicknameAndConnectSFS()},checkNicknameAndConnectSFS:function(){var t=this.getUser().nick_name,e=this.getUser().username;t&&t!==e?this.checkNickName()?(this.hideProcessingNode(),this.LoginUI.showUpdateNicknameFormNode()):this.connectSFS():(this.hideProcessingNode(),this.LoginUI.showUpdateNicknameFormNode())},initData:function(t){this.setUser(t.user),this.setConfig(t.config),this.setListAgent(t.list_agent),this.setGuide(t.guide),this.setPolicy(t.policy),this.setFreeChip(t.free_chip),this.setLuckyWheel(t.lucky_wheel),this.setConfigIap(t.config_iap),this.setSecurityGame(t.security_game)},connectSFS:function(){this.sfsManager.init(),this.sfsManager.connect(this)},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.LoginUI.showDialogMessage(t,e)},hideDialogMessage:function(){this.LoginUI.hideDialogMessage()},showProcessingNode:function(){this.LoginUI.showProcessingNode()},hideProcessingNode:function(){this.LoginUI.hideProcessingNode()},checkNickName:function(){return this.getUser().nick_name===this.getUser().username}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../object/Audio":"Audio","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","./LoginUI":"LoginUI","./form/ForgetPasswordEmail":"ForgetPasswordEmail","./form/ForgetPasswordPhone":"ForgetPasswordPhone","./form/OTPLogin":"OTPLogin","./form/UpdateNickname":"UpdateNickname","./other/LoginLogin":"LoginLogin","./other/LoginMenu":"LoginMenu","./other/LoginRegister":"LoginRegister"}],LuckyWheelConfig:[function(t,e,i){"use strict";cc._RF.push(e,"0e8a96CH2ZHX7/0meUpC29N","LuckyWheelConfig");e.exports={TIME_SPIN:8,NUMBER_SPIN_TIME:10},cc._RF.pop()},{}],LuckyWheelConstant:[function(t,e,i){"use strict";cc._RF.push(e,"10621YpinlP/7PX+67Q3Qeh","LuckyWheelConstant");e.exports={MONEY_TYPE:0,GOLD_TYPE:1,FREE_SPIN_TYPE:2,ADD_TURN:3,SPECIAL_ITEM:4,MISS:5,MISS_2:6,REQUEST_SPIN:"lucky_wheel.SPIN",SPIN:"SPIN",MESSAGE:"MESSAGE"},cc._RF.pop()},{}],LuckyWheelItem:[function(t,e,i){"use strict";cc._RF.push(e,"629732sbmhEnoFJe0bBdOMY","LuckyWheelItem");var n=t("../lucky-wheel/LuckyWheelConstant");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,goldNode:cc.Node,freeSpinNode:cc.Node,missNode:cc.Node,addTurnNode:cc.Node,specialItemNode:cc.Node,moneyLabel:cc.Label,goldLabel:cc.Label,freeSpinLabel:cc.Label,freeSpinGameLabel:cc.Label,specialItemLabel:cc.Label},init:function(t){this.data=t,this.iniData(t)},onLoad:function(){},iniData:function(t){switch(this.hideAllNode(),t.type){case n.GOLD_TYPE:this.showGoldNode(t);break;case n.MONEY_TYPE:this.showMoneyNode(t);break;case n.FREE_SPIN_TYPE:this.showFreeSpinNode(t);break;case n.MISS:this.showMissNode(t);break;case n.ADD_TURN:this.showAddTurnNode(t);break;case n.SPECIAL_ITEM:this.showSpecialItemNode(t);break;default:this.showMissNode(t)}},showMoneyNode:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t.name},showGoldNode:function(t){this.goldNode.active=!0,this.goldLabel.string=t.name},showFreeSpinNode:function(t){this.freeSpinNode.active=!0,this.freeSpinLabel.string=t.amount,this.freeSpinGameLabel.string=t.game_name},showMissNode:function(t){this.missNode.active=!0},showAddTurnNode:function(t){this.addTurnNode.active=!0},showSpecialItemNode:function(t){this.specialItemNode.active=!0},isFreeMiniGame:function(){return this.data.type===n.FREE_SPIN_TYPE},hideAllNode:function(){this.moneyNode.active=!1,this.goldNode.active=!1,this.freeSpinNode.active=!1,this.missNode.active=!1,this.addTurnNode.active=!1,this.specialItemNode.active=!1}}),cc._RF.pop()},{"../lucky-wheel/LuckyWheelConstant":"LuckyWheelConstant"}],LuckyWheel:[function(t,e,i){"use strict";cc._RF.push(e,"b179fqQeL5J86+P8qjq0PH7","LuckyWheel");var n=t("../../../base/BaseController"),o=t("../item/LuckyWheelItem"),s=t("./LuckyWheelConstant"),a=t("./LuckyWheelConfig"),r=t("../../../util/FormatUtil"),c=t("../../../helper/Message"),h=t("../../../helper/Constant");cc.Class({extends:n,properties:{spin3Node:cc.Node,numberSpinLabel:cc.Label,luckyWheelItems3:[o]},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.isSpining=!1,this.initData()},initData:function(){var t=this.getLuckyWheel()[2];for(var e in t)this.luckyWheelItems3[e].init(t[e]);this.initLuckyWheelFree()},initLuckyWheelFree:function(){var t=this.getUserLuckyWheelFree();this.getUser().lucky_wheel_free=t;var e=t>0?r.numberWithCommas(t):0;this.numberSpinLabel.string=e;var i=t>0;this.MiniGameCircleNotification&&this.MiniGameCircleNotification.initShowNotificationLuckyWheel(i,e)},minusLuckyWheelFree:function(){this.getUser().lucky_wheel_free--,this.initLuckyWheelFree()},plusLuckyWheelFree:function(){this.getUser().lucky_wheel_free++,this.initLuckyWheelFree()},addLuckyWheelFree:function(t){this.getUser().lucky_wheel_free+=t,this.initLuckyWheelFree()},onCloseClick:function(){this.node.active=!1},onTutorialClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(h.LUCK_WHEEL)},onGetSpinClick:function(){},onSpinClick:function(){this.isSpining?this.controller.showToast(c.LUCKY_WHEEL_IS_SPINING):this.sendRequest.sendNoPrefixToZone(s.REQUEST_SPIN)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case s.SPIN:this.handleSpin(i);break;case s.MESSAGE:this.handleMessage(n)}},handleSpin:function(t){this.isSpining=!0;var e=t.data,i=this.getDataByRoundType(e,2).id,n=void 0;for(var o in this.luckyWheelItems3)if(this.luckyWheelItems3[o].data.id==i){n=this.luckyWheelItems3[o];break}this.roundLuckyWheel(n,this.spin3Node),this.minusLuckyWheelFree()},getDataByRoundType:function(t,e){for(var i in t)if(t[i].round_type===e)return t[i];return null},roundLuckyWheel:function(t,e,i){if(t){var n=-t.node.angle,o=360*a.NUMBER_SPIN_TIME-n,r=-(360*a.NUMBER_SPIN_TIME+n);o=i?r:o,e.runAction(cc.sequence(cc.rotateTo(a.TIME_SPIN,o).easing(cc.easeCircleActionOut()),cc.callFunc(function(){t.data.type===s.ADD_TURN&&this.plusLuckyWheelFree(),this.isSpining=!1},this)))}},handleMessage:function(t){this.controller.showToast(t)}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../item/LuckyWheelItem":"LuckyWheelItem","./LuckyWheelConfig":"LuckyWheelConfig","./LuckyWheelConstant":"LuckyWheelConstant"}],MailItem:[function(t,e,i){"use strict";cc._RF.push(e,"d98345ZpGZGcKpWaCCIUcp8","MailItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{bgOnNode:cc.Node,bgOffNode:cc.Node,titleLabel:cc.Label,timeLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.ConfirmRemoveMail=t.ConfirmRemoveMail,this.InfoMail=this.GameInfo.InfoMail,this.data=e,this.titleLabel.string=e.title,this.setReaded(e.is_read),e.created_at>=1e10&&(e.created_at=parseInt(e.created_at/1e3)),this.timeLabel.string=String.format(o.MAIL_DETAIL_TITLE,e.from_username,n.getStringDateByTimeStamp(e.created_at))},onLoad:function(){},isReaded:function(){return 0!=this.data.is_read&&null!==this.data.is_read},setReaded:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.bgOnNode.active=!(0==t||null===t),this.bgOffNode.active=0==t||null===t},onDeleteClick:function(){this.GameCenter.Audio.playClick(),this.ConfirmRemoveMail.setId(this.data.id,this.isReaded()),this.GameCenterUI.showConfirmRemoveMailFormNode()},onReadClick:function(){this.GameCenter.Audio.playClick(),this.readMail()},readMail:function(){if(this.InfoMail.showMailDetailNode(this.data),!this.isReaded()){var t={id:this.data.id,token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.readMessage(t,function(t){},function(t){}),this.setReaded(1),this.data.is_read=1,this.GameCenter.Header.HeaderAccount.minusUnreadMessage()}}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],MauBinhCardController:[function(t,e,i){"use strict";cc._RF.push(e,"72c7e2uItJKaq7xqjnceNNu","MauBinhCardController");var n=t("../MauBinhConfig");cc.Class({extends:cc.Component,properties:{},init:function(t){this.MauBinhMove=t},onLoad:function(){var t=this;this.nearestCard=null,this.initX=this.node.x,this.initY=this.node.y,this.cardController=this.node.getComponent("CardController"),this.resetInAction=cc.callFunc(function(){t.MauBinhMove.setInAction(!1)},this),this.onTouchDown=function(e){t.MauBinhMove.isInAction||t.MauBinhMove.isSelected||(this.zIndex=1,t.MauBinhMove.setSelected(!0),t.initX=this.x,t.initY=this.y,t.cardController.showHighLight())},this.onTouchMove=function(e){if(!t.MauBinhMove.isInAction&&t.MauBinhMove.isSelected){var i=e.touch.getDelta();this.x+=i.x,this.y+=i.y;var n=t.MauBinhMove.getNearestCard(this);n?t.nearestCard?t.nearestCard.trueValue!==n.trueValue?(t.nearestCard.cardController.hideHighLight(),t.nearestCard=n):t.nearestCard.cardController.showHighLight():(t.nearestCard=n,t.nearestCard.cardController.showHighLight()):t.nearestCard&&(t.nearestCard.cardController.hideHighLight(),t.nearestCard=null)}},this.onTouchUp=function(e){if(!t.MauBinhMove.isInAction&&t.MauBinhMove.isSelected){this.zIndex=0,t.MauBinhMove.setSelected(!1),t.cardController.hideHighLight();var i=t.MauBinhMove.getNearestCard(this);i?(t.MauBinhMove.setInAction(!0),i.cardController.hideHighLight(),this.runAction(cc.sequence(cc.moveTo(n.TIME_CHANGE_TWO_CARDS,i.x,i.y),t.resetInAction)),i.runAction(cc.sequence(cc.moveTo(n.TIME_CHANGE_TWO_CARDS,t.initX,t.initY),t.resetInAction)),t.MauBinhMove.swapTwoCards(this,i)):(t.MauBinhMove.setInAction(!0),this.runAction(cc.sequence(cc.moveTo(n.TIME_CHANGE_TWO_CARDS,t.initX,t.initY),t.resetInAction)))}}},onEnable:function(){this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchUp,this.node)}}),cc._RF.pop()},{"../MauBinhConfig":"MauBinhConfig"}],MauBinhCard:[function(t,e,i){"use strict";cc._RF.push(e,"e596cXpeD9GGJq3Mo5XqF/u","MauBinhCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;++i,e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MauBinhConfig:[function(t,e,i){"use strict";cc._RF.push(e,"973b5l36k9FZJDbKsL+D2hU","MauBinhConfig");e.exports={NUMBER_PLAYERS:4,DISTANCE_TWO_COLS_CARDS_IN_HAND:85,DISTANCE_TWO_ROWS_CARDS_IN_HAND:80,TIME_SHOW_CARDS:.5,SCALE_CARD_IN_HAND:1,DISTANCE_MIN_TO_CHANGE_TWO_CARD:70,TIME_CHANGE_TWO_CARDS:.25,SCALE_CARD_IN_MOVE:.9,DISTANCE_TWO_COLS_CARDS_IN_MOVE:100,DISTANCE_TWO_ROWS_CARDS_IN_MOVE:135,NUMBER_CARDS_EACH_PLAYERS:13,NUMBER_CARDS_CHI_DAU:5,NUMBER_CARDS_CHI_GIUA:5,NUMBER_CARDS_CHI_CUOI:3,VALUE_MAU_THAU:0,VALUE_DOI:1,VALUE_THU:2,VALUE_SAM:3,VALUE_SANH_THUONG:4,VALUE_SANH_NHI:5,VALUE_SANH_DAI:6,VALUE_THUNG:7,VALUE_CU_LU:8,VALUE_TU_QUY:9,VALUE_THUNG_PHA_SANH:10,VALUE_THUNG_PHA_SANH_LON:11,TIME_SHOW_THANG_TRANG:1,TIME_SHOW_COMPARE_CHI_CUOI:3,TIME_SHOW_COMPARE_CHI_GIUA:6,TIME_SHOW_COMPARE_CHI_DAU:9,TIME_SHOW_COMPARE_BA_CHI:12,TIME_SHOW_LAST_MONEY_CHANGE:15},cc._RF.pop()},{}],MauBinhConstant:[function(t,e,i){"use strict";cc._RF.push(e,"7639e3kO01CEbRPHm61oCiM","MauBinhConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",READY:"READY",MOVE:"MOVE",COMPLETE:"COMPLETE",DEALING_CARD:"DEALING_CARD",START:"START",RESULT:"RESULT",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_LEFT_ROOM_WITH_CHANGE_HOME:"REQUEST_LEFT_ROOM_WITH_CHANGE_HOME",ROOM_INFO:"ROOM_INFO",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],MauBinhGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"19a33pI39xFgKnsmE1Xmft7","MauBinhGroupCardsType");var n=cc.Enum({KhongHopLe:1,ThungPhaSanhLon:2,ThungPhaSanh:3,TuQuy:4,CuLu:5,Thung:6,SanhDai:7,SanhNhi:8,SanhThuong:9,Sam:10,Thu:11,Doi:12,MauThau:13});e.exports=n,cc._RF.pop()},{}],MauBinhHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"ac814MAsetFAoHc5Wz/U9NP","MauBinhHandlerEffect");t("./MauBinhCard");var n=t("./MauBinhWinType"),o={init:function(t){this.MauBinh=t,this.MauBinhUI=t.MauBinhUI,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe||this.listPlayers[e].MauBinhPlayer.showBackCards(!0)},showResult:function(t){var e=t.data.players;for(var i in e){var o=e[i].user_id,s=this.MauBinh.getPlayerByUserId(o);s&&(s.MauBinhPlayer.showCards(e[i].cards,!1,!0),s.MauBinhPlayer.isBinhLung=e[i].is_binh_lung,s.MauBinhPlayer.winType=e[i].win_type,e[i].win_type!==n.KHONG_THANG_TRANG&&(s.MauBinhPlayer.isThangTrang=!0),s.MauBinhPlayer.thangTrangMoneyChange=e[i].thang_trang_money_change,s.MauBinhPlayer.chiDauMoneyChange=e[i].chi_cuoi_money_change,s.MauBinhPlayer.chiGiuaMoneyChange=e[i].chi_giua_money_change,s.MauBinhPlayer.chiCuoiMoneyChange=e[i].chi_dau_money_change,s.MauBinhPlayer.loseAllChiMoneyChange=e[i].lose_all_chi_money_change,s.MauBinhPlayer.moneyChange=e[i].money_change,s.MauBinhPlayer.showResult())}},clearCompleteAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].MauBinhPlayer.setComplete(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){}};e.exports=o,cc._RF.pop()},{"./MauBinhCard":"MauBinhCard","./MauBinhWinType":"MauBinhWinType"}],MauBinhHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"0e2ebC5cuhBD5dMHrnunzqH","MauBinhHandlerRequest");var n=t("./MauBinhConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.MauBinh=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.MauBinh.showChat(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,n=0,s=i.length;n<s;n++)switch(i[n]){case o.GOLD:this.MauBinh.initGold(e);break;case o.MONEY:this.MauBinh.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){for(var e=t.changedVars,i=0,n=e.length;i<n;i++)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.ROOM_INFO:this.MauBinh.handleRoomInfo(e);break;case n.START:this.MauBinh.handleStart(e);break;case n.COUNT_DOWN:this.MauBinh.handleCountDown(e);break;case n.DEALING_CARD:this.MauBinh.handleDealingCard(e);break;case n.COMPLETE:this.MauBinh.handleComplete(e);break;case n.RESULT:this.MauBinh.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.MauBinh.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.MauBinh.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.MauBinh.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.MauBinh.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./MauBinhConstant":"MauBinhConstant"}],MauBinhMove:[function(t,e,i){"use strict";cc._RF.push(e,"9a586buUwFJSZS/DyRM8aUJ","MauBinhMove");var n=t("../MauBinhConstant"),o=t("../MauBinhConfig"),s=t("../MauBinhUtil"),a=t("../MauBinhCard"),r=t("../item/MauBinhCardController"),c=t("../../../util/NodeUtil"),h=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{binhLungNode:cc.Node,chiDauLabel:cc.Label,chiGiuaLabel:cc.Label,chiCuoiLabel:cc.Label,cardPrefab:cc.Prefab,moveCardsNode:cc.Node},init:function(t){this.MauBinh=t,this.isInAction=!1,this.isSelected=!1,this.isBinhLung=!1,this.listCardsNode=[]},onLoad:function(){},onEnable:function(){},showCards:function(t){for(var e in this.moveCardsNode.removeAllChildren(!0),this.node.active=!0,t){var i=cc.instantiate(this.cardPrefab);i.scale=o.SCALE_CARD_IN_MOVE,i.setPosition(this.getPositionCardByIndex(e)),i.trueValue=t[e],i.parent=this.moveCardsNode;var n=i.getComponent("CardController"),s=new a(t[e]);n.init(s),i.cardController=n;var c=i.addComponent(r);c.init(this),i.maubinhCardController=c,this.listCardsNode.push(i)}this.checkGroupCards()},getNearestCard:function(t){var e=null,i=o.DISTANCE_MIN_TO_CHANGE_TWO_CARD,n=this.getListCardsNode();for(var s in n)if(t.trueValue!==n[s].trueValue){var a=c.getDistanceTwoNode(t,n[s]);a<=i&&(i=a,e=n[s])}return e},swapTwoCards:function(t,e){for(var i=this.getListCardsNode(),n=void 0,o=void 0,s=0;s<i.length;s++)i[s].trueValue===t.trueValue?n=s:i[s].trueValue===e.trueValue&&(o=s);this.swapIndexTwoCard(n,o),this.checkGroupCards(),this.sendRequestMove()},swapIndexTwoCard:function(t,e){var i=this.listCardsNode[t];this.listCardsNode[t]=this.listCardsNode[e],this.listCardsNode[e]=i},checkGroupCards:function(){var t=this.getListCards(),e=s.getCardsChiDau(t),i=s.getCardsChiGiua(t),n=s.getCardsChiCuoi(t),o=String.format(h.MAU_BINH_CHI_TYPE,1,s.getGroupCardsText(e)),a=String.format(h.MAU_BINH_CHI_TYPE,2,s.getGroupCardsText(i)),r=String.format(h.MAU_BINH_CHI_TYPE,3,s.getGroupCardsText(n));this.isBinhLung=s.checkBinhLung(t),this.binhLungNode.active=this.isBinhLung,this.chiDauLabel.string=o,this.chiGiuaLabel.string=a,this.chiCuoiLabel.string=r},sendRequestMove:function(){var t={data:this.getListCards()};this.MauBinh.sendRequest.send(n.MOVE,t)},getPositionCardByIndex:function(t){var e=void 0,i=void 0;return t<3?(e=(t-1)*o.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=o.DISTANCE_TWO_ROWS_CARDS_IN_MOVE):t<8?(e=(t-5)*o.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=0):(e=(t-10)*o.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=-o.DISTANCE_TWO_ROWS_CARDS_IN_MOVE),new cc.Vec2(e,i)},getListCardsNode:function(){return this.listCardsNode},getListCards:function(){var t=[];for(var e in this.listCardsNode)t.push(this.listCardsNode[e].trueValue);return t},setSelected:function(t){this.isSelected=t},setInAction:function(t){this.isInAction=t},hide:function(){this.node.active=!1},reset:function(){this.moveCardsNode.removeAllChildren(!0),this.listCardsNode=[],this.isInAction=!1,this.isSelected=!1,this.isBinhLung=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/NodeUtil":"NodeUtil","../MauBinhCard":"MauBinhCard","../MauBinhConfig":"MauBinhConfig","../MauBinhConstant":"MauBinhConstant","../MauBinhUtil":"MauBinhUtil","../item/MauBinhCardController":"MauBinhCardController"}],MauBinhPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"47173UwdQxJzqEOJ9FyZIjM","MauBinhPlayer");var n=t("./MauBinhCard"),o=t("./MauBinhConfig"),s=t("./MauBinhWinType"),a=t("./MauBinhGroupCardsType"),r=t("./MauBinhUtil"),c=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},init:function(t){this.MauBinh=t,this.GameCommon=t.GameCommon},onLoad:function(){this.isBinhLung=!1,this.isThangTrang=!1,this.winType=null,this.thangTrangMoneyChange=0,this.chiDauMoneyChange=0,this.chiGiuaMoneyChange=0,this.chiCuoiMoneyChange=0,this.loseAllChiMoneyChange=0,this.moneyChange=0,this.listCardsNode=[]},onEnable:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var s in this.cardsNode.removeAllChildren(!0),this.listCardsNode=[],t){var a=new n(t[s]),r=cc.instantiate(this.cardPrefab);r.scale=o.SCALE_CARD_IN_HAND,r.trueValue=t[s],r.parent=this.cardsNode;var c=r.getComponent("CardController");c.init(a),c.reveal(e),r.cardController=c;var h=this.getXPlayerCard(s),l=this.getYPlayerCard(s);i?(r.setPosition(0,0),r.runAction(cc.moveTo(o.TIME_SHOW_CARDS,h,l))):r.setPosition(h,l),this.listCardsNode.push(r)}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=o.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var n=cc.instantiate(this.cardBackPrefab);n.scale=o.SCALE_CARD_IN_HAND,n.parent=this.cardsNode;var s=this.getXPlayerCard(i),a=this.getYPlayerCard(i);t?(n.setPosition(0,0),n.runAction(cc.moveTo(o.TIME_SHOW_CARDS,s,a))):n.setPosition(s,a)}},showResult:function(){this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.isThangTrang&&(this.revealBaChi(),this.showEffectThangTrang(this.winType))},this),cc.delayTime(2),cc.callFunc(function(){this.isThangTrang||(this.isBinhLung?(this.revealBaChi(),this.showEffectBinhLung()):this.revealChiCuoi())},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||this.isBinhLung||this.revealChiGiua()},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||this.isBinhLung||this.revealChiDau()},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||(this.loseAllChiMoneyChange<0?(this.showEffectSapBaChi(),this.node.getComponent("BasePlayer").showChangeBalance(this.loseAllChiMoneyChange)):this.loseAllChiMoneyChange>0&&(this.showEffectThangBaChi(),this.node.getComponent("BasePlayer").showChangeBalance(this.loseAllChiMoneyChange)))},this),cc.delayTime(3),cc.callFunc(function(){this.hideDarkEffectByListNode(this.listCardsNode),this.node.getComponent("BasePlayer").showChangeBalance(this.moneyChange),this.node.getComponent("BasePlayer").showEffectByChangeBalance(this.moneyChange),this.node.getComponent("BasePlayer").hideText(),this.node.isItMe&&this.moneyChange>0&&this.GameCommon.Audio.playWin()},this)))},revealBaChi:function(){for(var t in this.listCardsNode)this.listCardsNode[t].cardController.revealWithAnimationFlip(!0,o.TIME_SHOW_CARDS)},revealChiDau:function(){var t=this.getListChiDauNode(),e=this.getListChiGiuaNode(),i=this.getCardsByListNode(t);for(var n in t)t[n].cardController.revealWithAnimationFlip(!0,o.TIME_SHOW_CARDS);this.showEffectKhoanPhat(i,0),this.showResultChiText(i),this.node.getComponent("BasePlayer").showChangeBalance(this.chiDauMoneyChange),this.showDarkEffectByListNode(e)},revealChiGiua:function(){var t=this.getListChiGiuaNode(),e=this.getListChiCuoiNode(),i=this.getCardsByListNode(t);for(var n in t)t[n].cardController.revealWithAnimationFlip(!0,o.TIME_SHOW_CARDS);this.showEffectKhoanPhat(i,1),this.showResultChiText(i),this.node.getComponent("BasePlayer").showChangeBalance(this.chiGiuaMoneyChange),this.showDarkEffectByListNode(e)},revealChiCuoi:function(){var t=this.getListChiCuoiNode(),e=this.getCardsByListNode(t);for(var i in t)t[i].cardController.revealWithAnimationFlip(!0,o.TIME_SHOW_CARDS);this.showEffectKhoanPhat(e,2),this.showResultChiText(e),this.node.getComponent("BasePlayer").showChangeBalance(this.chiCuoiMoneyChange)},showEffectKhoanPhat:function(t,e){this.node.getComponent("BasePlayer").hideWinEffect(),this.isBinhLung||this.showTextEffectByKhoanPhat(t,e)},showResultChiText:function(t){if(!this.isBinhLung){var e=r.getGroupCardsText(t);this.showResultChi(e)}},getListChiDauNode:function(){var t=[];for(var e in this.listCardsNode)e<3&&t.push(this.listCardsNode[e]);return t},getListChiGiuaNode:function(){var t=[];for(var e in this.listCardsNode)e>2&&e<8&&t.push(this.listCardsNode[e]);return t},getListChiCuoiNode:function(){var t=[];for(var e in this.listCardsNode)e>7&&t.push(this.listCardsNode[e]);return t},getCardsByListNode:function(t){var e=[];for(var i in t)e.push(t[i].trueValue);return e},getXPlayerCard:function(t){var e=void 0;return e=t<3?t*o.DISTANCE_TWO_COLS_CARDS_IN_HAND:t<8?(t-3)*o.DISTANCE_TWO_COLS_CARDS_IN_HAND:(t-8)*o.DISTANCE_TWO_COLS_CARDS_IN_HAND,this.cardsNode.x<0&&(e*=-1),e},getYPlayerCard:function(t){return t<3?2*o.DISTANCE_TWO_ROWS_CARDS_IN_HAND:t<8?o.DISTANCE_TWO_ROWS_CARDS_IN_HAND:0},showResultChi:function(t){this.node.getComponent("BasePlayer").showTextLight(t)},showEffectThangTrang:function(t){var e="";switch(t){case s.RONG_CUON:e=c.MAU_BINH_RONG_CUON;break;case s.SANH_RONG:e=c.MAU_BINH_SANH_RONG;break;case s.MUOI_BA_LA_CUNG_MAU:e=c.MAU_BINH_MUOI_BA_LA_CUNG_MAU;break;case s.NAM_DOI_MOT_SAM:e=c.MAU_BINH_NAM_DOI_MOT_SAM;break;case s.LUC_PHE_BON:e=c.MAU_BINH_LUC_PHE_BON;break;case s.BA_THUNG_TAI_BA_CHI:e=c.MAU_BINH_BA_THUNG_TAI_BA_CHI;break;case s.BA_SANH_TAI_BA_CHI:e=c.MAU_BINH_BA_SANH_TAI_BA_CHI}e&&this.node.getComponent("BasePlayer").showWinEffect(e)},showTextEffectByKhoanPhat:function(t,e){var i="",n=r.getGroupCardsType(t);if(2===e)switch(n){case a.ThungPhaSanhLon:case a.ThungPhaSanh:i=c.MAU_BINH_THUNG_PHA_SANH_CHI_DAU;break;case a.TuQuy:i=c.MAU_BINH_TU_QUY_CHI_DAU}else if(1===e)switch(n){case a.ThungPhaSanh:i=c.MAU_BINH_THUNG_PHA_SANH_CHI_GIUA;break;case a.TuQuy:i=c.MAU_BINH_TU_QUY_CHI_GIUA;break;case a.CuLu:i=c.MAU_BINH_CU_LU_CHI_GIUA}else 0===e&&n===a.Sam&&(i=c.MAU_BINH_SAM_CHI_CUOI);i&&(this.node.getComponent("BasePlayer").hideText(),this.node.getComponent("BasePlayer").showWinEffect(i))},showEffectBinhLung:function(){this.node.getComponent("BasePlayer").showTextDark(c.MAU_BINH_BINH_LUNG)},showEffectSapBaChi:function(){this.node.getComponent("BasePlayer").showTextDark(c.MAU_BINH_SAP_BA_CHI)},showEffectThangBaChi:function(){this.node.getComponent("BasePlayer").showTextLight(c.MAU_BINH_THANG_BA_CHI)},setComplete:function(t){t?this.showComplete():this.hideComplete()},showComplete:function(){this.node.getComponent("BasePlayer").showTextLight(c.MAU_BINH_COMPLETED)},hideComplete:function(){this.node.getComponent("BasePlayer").hideText()},showDarkEffectByListNode:function(t){for(var e=0,i=t.length;e<i;e++)t[e].cardController.showDarkEffect()},hideDarkEffectByListNode:function(t){for(var e=0,i=t.length;e<i;e++)t[e].cardController.hideDarkEffect()},reset:function(){this.isBinhLung=!1,this.isThangTrang=!1,this.winType=null,this.thangTrangMoneyChange=0,this.chiDauMoneyChange=0,this.chiGiuaMoneyChange=0,this.chiCuoiMoneyChange=0,this.loseAllChiMoneyChange=0,this.moneyChange=0,this.node.getComponent("BasePlayer").hideText(),this.cardsNode.removeAllChildren(!0),this.node.stopAllActions()}}),cc._RF.pop()},{"../../helper/Message":"Message","./MauBinhCard":"MauBinhCard","./MauBinhConfig":"MauBinhConfig","./MauBinhGroupCardsType":"MauBinhGroupCardsType","./MauBinhUtil":"MauBinhUtil","./MauBinhWinType":"MauBinhWinType"}],MauBinhState:[function(t,e,i){"use strict";cc._RF.push(e,"8eee6ky5cRNAaqM5eaAP5cG","MauBinhState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],MauBinhUI:[function(t,e,i){"use strict";cc._RF.push(e,"5d23990GYtGb4qgAAPjNlSS","MauBinhUI"),cc.Class({extends:cc.Component,properties:{playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1}}),cc._RF.pop()},{}],MauBinhUtil:[function(t,e,i){"use strict";cc._RF.push(e,"13435eIb29MS4wQZoIjyFop","MauBinhUtil");var n=t("./MauBinhGroupCardsType"),o=t("./MauBinhConfig"),s=t("../../object/CompareType"),a=t("../../helper/Message"),r={checkBinhLung:function(t){var e=this.getCardsChiDau(t),i=this.getCardsChiGiua(t),n=this.getCardsChiCuoi(t);return this.compareTwoChi(e,i)==s.NHO_HON||this.compareTwoChi(i,n)==s.NHO_HON},compareTwoChi:function(t,e){var i=this.getGroupCardsType(t),o=this.getGroupCardsType(e),a=this.getValueGroupCards(i),r=this.getValueGroupCards(o),c=s.KHONG_HOP_LE;if(i===o)switch(i){case n.KhongHopLe:break;case n.MauThau:c=this.compareMauThau(t,e);break;case n.Doi:c=this.compareDoi(t,e);break;case n.Thu:c=this.compareThu(t,e);break;case n.Sam:c=this.compareSam(t,e);break;case n.SanhThuong:c=this.compareSanhThuong(t,e);break;case n.SanhNhi:case n.SanhDai:c=s.BANG_NHAU;break;case n.Thung:c=this.compareThung(t,e);break;case n.CuLu:c=this.compareCuLu(t,e);break;case n.TuQuy:c=this.compareTuQuy(t,e);break;case n.ThungPhaSanh:c=this.compareThungPhaSanh(t,e);break;case n.ThungPhaSanhLon:c=s.BANG_NHAU}else c=a>r?s.LON_HON:s.NHO_HON;return c},compareMauThau:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e);this.sortCardsDESC(i),this.sortCardsDESC(n);for(var o=0;o<i.length;o++)if(i[o]&&n[o]){var a=this.compareTwoCard(i[o],n[o]);if(a!=s.BANG_NHAU)return a}else{if(i[o])return s.LON_HON;if(n[o])return s.NHO_HON}return s.BANG_NHAU},compareDoi:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e);this.sortCardsASC(i),this.sortCardsASC(n);var o=this.getPairCardsInCards(i)[0],a=this.getPairCardsInCards(n)[0];if(o&&a){var r=this.compareTwoCard(o,a);return r!=s.BANG_NHAU?r:this.compareMauThau(i,n)}return s.KHONG_HOP_LE},compareThu:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e),o=this.getPairCardsInCards(i)[0],a=this.getPairCardsInCards(n)[0],r=this.getPairCardsInCards(i)[1],c=this.getPairCardsInCards(n)[1];if(o&&a&&r&&c){var h=this.compareTwoCard(r,c);if(h!=s.BANG_NHAU)return h;var l=this.compareTwoCard(o,a);return l!=s.BANG_NHAU?l:this.compareMauThau(i,n)}return s.KHONG_HOP_LE},compareSam:function(t,e){var i=this.getSamDauTien(t),n=this.getSamDauTien(e);return i&&n?this.compareTwoCard(i,n):s.KHONG_HOP_LE},compareSanhThuong:function(t,e){var i=t[0],n=e[0];return this.compareTwoCard(i,n)},compareThung:function(t,e){return this.compareMauThau(t,e)},compareCuLu:function(t,e){return this.compareSam(t,e)},compareTuQuy:function(t,e){var i=this.getTuQuyDauTien(t),n=this.getTuQuyDauTien(e);return i&&n?this.compareTwoCard(i,n):s.KHONG_HOP_LE},compareThungPhaSanh:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e);this.sortCardsDESC(i),this.sortCardsDESC(n);var o=i[0],s=n[0];return this.compareTwoCard(o,s)},getTuQuyDauTien:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0;i<e.length-3;i++)if(this.getValueCard(e[i])==this.getValueCard(e[i+1])&&this.getValueCard(e[i])==this.getValueCard(e[i+2])&&this.getValueCard(e[i])==this.getValueCard(e[i+3]))return e[i];return null},getSamDauTien:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0;i<e.length-2;i++)if(this.getValueCard(e[i])==this.getValueCard(e[i+1])&&this.getValueCard(e[i])==this.getValueCard(e[i+2]))return e[i]},getPairCardsInCards:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=[],n=0,o=0;o<e.length-1;o++)this.getValueCard(e[o])==this.getValueCard(e[o+1])&&this.getValueCard(e[o])!=n&&(n=this.getValueCard(e[o]),i.push(e[o]),o++);return i},compareTwoCard:function(t,e){if(t&&e){var i=parseInt(t/100),n=parseInt(e/100);return i>n?s.LON_HON:i<n?s.NHO_HON:s.BANG_NHAU}return s.KHONG_HOP_LE},getGroupCardsText:function(t){var e=this.getGroupCardsType(t);return this.getTextByTypeGroupCards(e)},getGroupCardsType:function(t){return 5==t.length?this.getGroupCardsTypeFor5Cards(t):3==t.length?this.getGroupCardsTypeFor3Cards(t):n.KhongHopLe},getGroupCardsTypeFor5Cards:function(t){var e=n.MauThau,i=this.cloneCards(t);return this.checkThungPhaSanhLon(i)?e=n.ThungPhaSanhLon:this.checkThungPhaSanh(i)?e=n.ThungPhaSanh:this.checkTuQuy(i)?e=n.TuQuy:this.checkCuLu(i)?e=n.CuLu:this.checkThung(i)?e=n.Thung:this.checkSanhDai(i)?e=n.SanhDai:this.checkSanhNhi(i)?e=n.SanhNhi:this.checkSanhThuong(i)?e=n.SanhThuong:this.checkSam(i)?e=n.Sam:this.checkThu(i)?e=n.Thu:this.checkDoi(i)&&(e=n.Doi),e},getGroupCardsTypeFor3Cards:function(t){var e=n.MauThau,i=this.cloneCards(t);return this.checkSam(i)?e=n.Sam:this.checkDoi(i)&&(e=n.Doi),e},checkThungPhaSanhLon:function(t){return this.checkMotDay(t)&&this.checkSameTypeCards(t)&&this.checkCoLaAt(t)},checkThungPhaSanh:function(t){return this.checkSanh(t)&&this.checkSameTypeCards(t)},checkTuQuy:function(t){for(var e=void 0,i=0,n=t.length-4;i<=n;i++)if(t[i]&&t[i+1]&&t[i+2]&&t[i+3]&&(e=this.getValueCard(t[i]))==this.getValueCard(t[i+1])&&e==this.getValueCard(t[i+2])&&e==this.getValueCard(t[i+3]))return!0;return!1},checkCuLu:function(t){return this.checkSam(t)&&this.checkSoLuongDoi(t)>=2},checkThung:function(t){return this.checkSameTypeCards(t)},checkSanh:function(t){return this.checkSanhThuong(t)||this.checkSanhNhi(t)},checkSanhDai:function(t){return this.checkMotDay(t)&&this.checkCoLaAt(t)},checkSanhNhi:function(t){for(var e=this.cloneCards(t),i=0,n=e.length;i<n;i++)if(14===this.getValueCard(e[i]))return e[i]-=1300,this.sortCardsASC(e),this.checkMotDay(e);return!1},checkSanhThuong:function(t){return this.checkMotDay(t)},checkSam:function(t){return 1==this.checkSoLuongSam(t)},checkSoLuongDoi:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,n=0,o=0,s=e.length-1;o<s;o++)this.getValueCard(e[o])===this.getValueCard(e[o+1])&&this.getValueCard(e[o])!=n&&(n=this.getValueCard(e[o]),i++,o++);return i},checkSoLuongSam:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,n=0,o=e.length-2;n<o;n++){var s=[e[n],e[n+1],e[n+2]];this.checkMotBoBa(s)&&i++}return i},checkMotBoBa:function(t){return 3==t.length&&this.checkSameValueCards(t)},checkThu:function(t){return 2==this.checkSoLuongDoi(t)},checkDoi:function(t){return 1==this.checkSoLuongDoi(t)},checkMotDay:function(t){if(t.length>=3){this.sortCardsASC(t);for(var e=0,i=0,n=t.length;i<n;i++){var o=t[i];if(0==e)e=this.getValueCard(o);else{if(this.getValueCard(o)!=e+1)return!1;++e}}return!0}return!1},checkSameValueCards:function(t){for(var e=0,i=t.length;e<i-1;e++)if(this.getValueCard(t[e])!=this.getValueCard(t[e+1]))return!1;return!0},checkSameTypeCards:function(t){for(var e=0,i=t.length;e<i-1;e++)if(this.getTypeCard(t[e])!=this.getTypeCard(t[e+1]))return!1;return!0},checkCoLaAt:function(t){for(var e=0,i=t.length;e<i;e++)if(14===this.getValueCard(t[e]))return!0;return!1},getValueCard:function(t){return parseInt(t/100)},getTypeCard:function(t){return t%4},sortCardsASC:function(t){t.sort(function(t,e){return t-e})},sortCardsDESC:function(t){t.sort(function(t,e){return e-t})},cloneCards:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];e.push(o)}return e},getTextByTypeGroupCards:function(t){switch(t){case 1:return a.MAU_BINH_KHONG_HOP_LE;case 2:return a.MAU_BINH_THUNG_PHA_SANH_LON;case 3:return a.MAU_BINH_THUNG_PHA_SANH;case 4:return a.MAU_BINH_TU_QUY;case 5:return a.MAU_BINH_CU_LU;case 6:return a.MAU_BINH_THUNG;case 7:return a.MAU_BINH_SANH_DAI;case 8:return a.MAU_BINH_SANH_NHI;case 9:return a.MAU_BINH_SANH_THUONG;case 10:return a.MAU_BINH_SAM;case 11:return a.MAU_BINH_THU;case 12:return a.MAU_BINH_DOI;case 13:return a.MAU_BINH_MAU_THAU;default:return a.MAU_BINH_KHONG_HOP_LE}},getValueGroupCards:function(t){var e=-1;switch(t){case n.KhongHopLe:break;case n.MauThau:e=o.VALUE_MAU_THAU;break;case n.Doi:e=o.VALUE_DOI;break;case n.Thu:e=o.VALUE_THU;break;case n.Sam:e=o.VALUE_SAM;break;case n.SanhThuong:e=o.VALUE_SANH_THUONG;break;case n.SanhNhi:e=o.VALUE_SANH_NHI;break;case n.SanhDai:e=o.VALUE_SANH_DAI;break;case n.Thung:e=o.VALUE_THUNG;break;case n.CuLu:e=o.VALUE_CU_LU;break;case n.TuQuy:e=o.VALUE_TU_QUY;break;case n.ThungPhaSanh:e=o.VALUE_THUNG_PHA_SANH;break;case n.ThungPhaSanhLon:e=o.VALUE_THUNG_PHA_SANH_LON}return e},getCardsChiDau:function(t){for(var e=[],i=0;i<o.NUMBER_CARDS_CHI_DAU;i++)e.push(t[o.NUMBER_CARDS_EACH_PLAYERS-o.NUMBER_CARDS_CHI_DAU+i]);return e},getCardsChiGiua:function(t){for(var e=[],i=0;i<o.NUMBER_CARDS_CHI_GIUA;i++)e.push(t[o.NUMBER_CARDS_EACH_PLAYERS-o.NUMBER_CARDS_CHI_DAU-o.NUMBER_CARDS_CHI_GIUA+i]);return e},getCardsChiCuoi:function(t){for(var e=[],i=0;i<o.NUMBER_CARDS_CHI_CUOI;i++)e.push(t[i]);return e}};e.exports=r,cc._RF.pop()},{"../../helper/Message":"Message","../../object/CompareType":"CompareType","./MauBinhConfig":"MauBinhConfig","./MauBinhGroupCardsType":"MauBinhGroupCardsType"}],MauBinhWinType:[function(t,e,i){"use strict";cc._RF.push(e,"f7b3fPDbzJPxKc+YXWv4Tnl","MauBinhWinType");e.exports={KHONG_THANG_TRANG:"KHONG_THANG_TRANG",RONG_CUON:"RONG_CUON",SANH_RONG:"SANH_RONG",MUOI_BA_LA_CUNG_MAU:"MUOI_BA_LA_CUNG_MAU",NAM_DOI_MOT_SAM:"NAM_DOI_MOT_SAM",LUC_PHE_BON:"LUC_PHE_BON",BA_THUNG_TAI_BA_CHI:"BA_THUNG_TAI_BA_CHI",BA_SANH_TAI_BA_CHI:"BA_SANH_TAI_BA_CHI"},cc._RF.pop()},{}],MauBinh:[function(t,e,i){"use strict";cc._RF.push(e,"151ffmHoclPlJL6zAxyzAkG","MauBinh");var n=t("../../base/BaseController"),o=t("./MauBinhConstant"),s=t("./MauBinhConfig"),a=t("./MauBinhUI"),r=t("./MauBinhState"),c=t("./MauBinhHandlerRequest"),h=t("./MauBinhHandlerEffect"),l=t("./other/MauBinhMove"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),f=t("../../helper/Message");cc.Class({extends:n,properties:{cardPrefab:cc.Prefab,MauBinhUI:a,MauBinhMove:l,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_MAUBINH),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.MauBinhUI.playersNode,this.isMoneyType||this.MauBinhUI.disableAllPlaceHolder(),this.MauBinhConstant=o,this.MauBinhConfig=s,this.MauBinhState=r,this.MauBinhHandlerRequest=c,this.MauBinhHandlerRequest.init(this),this.MauBinhHandlerEffect=h,this.MauBinhHandlerEffect.init(this),this.MauBinhMove.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.MauBinhHandlerRequest.onPublicMessage.bind(this.MauBinhHandlerRequest),this.onRoomVarsUpdate=this.MauBinhHandlerRequest.onRoomVarsUpdate.bind(this.MauBinhHandlerRequest),this.onUserVarsUpdate=this.MauBinhHandlerRequest.onUserVarsUpdate.bind(this.MauBinhHandlerRequest),this.onResponse=this.MauBinhHandlerRequest.onResponse.bind(this.MauBinhHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.getComponent("MauBinhPlayer").init(this),s.active=!1}this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.isItMe=t.isItMe,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("MauBinhPlayer");t.BasePlayer=n,t.MauBinhPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRequestLeftRoom(t.request_left_room),n.setRoomMaster(t.is_home),n.setPlayerName(t.nick_name),n.setBalance(t.balance),o.setComplete(t.is_completed),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.MauBinhState.setState(e),this.MauBinhState.isStop()?this.reset():this.MauBinhState.isWaiting()?this.resumeStateWaiting(t):this.MauBinhState.isPlaying()?this.resumeStatePlaying(t):this.MauBinhState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var n=e[i].cards;e[i].is_completed||this.MauBinhMove.showCards(n)}else e[i].MauBinhPlayer.showBackCards(!1);this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},resumeStateFinish:function(t){if(t.data.result){var e=t.data.result.players;for(var i in e){var n=e[i].user_id,o=e[i].cards,s=e[i].money_change,a=this.getPlayerByUserId(n);a&&(a.MauBinhPlayer.setComplete(!1),a.MauBinhPlayer.showCards(o,!0,!1),a.BasePlayer.showChangeBalance(s),a.BasePlayer.showEffectByChangeBalance(s))}this.MauBinhHandlerEffect.startCountDownAllPlayers(t)}},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.MauBinhHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.MauBinhState.setWaiting(),this.GameCommon.hideWaitingNode(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)):(this.MauBinhState.setStop(),this.MauBinhHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.player.cards;this.MauBinhState.setPlaying(),this.MauBinhHandlerEffect.dealCards(e),this.MauBinhMove.showCards(e),this.MauBinhHandlerEffect.stopCountDownAllPlayers(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},handleComplete:function(t){var e=t.data.player,i=t.data.is_completed,n=this.getPlayerByUserId(e);n&&(n.is_completed=i,n.MauBinhPlayer.setComplete(i),n.isItMe&&this.MauBinhMove.hide())},handleResult:function(t){this.MauBinhState.setFinish(),this.MauBinhMove.hide(),this.MauBinhHandlerEffect.clearCompleteAllPlayers(),this.MauBinhHandlerEffect.showResult(t),this.MauBinhHandlerEffect.stopCountDownAllPlayers(),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.MauBinhState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.MauBinhHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(f.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(f.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onCompleteClick:function(){this.GameCommon.Audio.playClick(),this.MauBinhMove.isBinhLung?this.showToast(f.MAU_BINH_BINH_LUNG_NOT_COMPLETE):this.sendRequest.send(o.COMPLETE)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.MauBinhHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.MauBinhMove.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].MauBinhPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./MauBinhConfig":"MauBinhConfig","./MauBinhConstant":"MauBinhConstant","./MauBinhHandlerEffect":"MauBinhHandlerEffect","./MauBinhHandlerRequest":"MauBinhHandlerRequest","./MauBinhState":"MauBinhState","./MauBinhUI":"MauBinhUI","./other/MauBinhMove":"MauBinhMove"}],Message:[function(t,e,i){"use strict";cc._RF.push(e,"ab5f6SBt1RELaLx6JLF8Pdx","Message");e.exports={TITLE_SUCCESS:"Th\xe0nh c\xf4ng",TITLE_FAILED:"L\u1ed7i",TIME_OUT_LOADING:"C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n, vui l\xf2ng th\u1eed l\u1ea1i",CONNECT_SFS_ERROR:"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i t\u1edbi Server",MISSING_INFO:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 c\xe1c th\xf4ng tin",SUCCESS:"Th\xe0nh c\xf4ng",FAILURE:"Th\u1ea5t b\u1ea1i",HOT_UPDATE_CHECKING_VERSION:"\u0110ang ki\u1ec3m tra phi\xean b\u1ea3n ...",HOT_UPDATE_RETRY:"Th\u1eed l\u1ea1i",HOT_UPDATE_NOT_FOUND:"Kh\xf4ng t\xecm th\u1ea5y b\u1ea3n c\u1eadp nh\u1eadt",HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED:"T\u1ea3i b\u1ea3n c\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i",HOT_UPDATE_ALREADY_UP_TO_DATE:"B\u1ea1n \u0111ang d\xf9ng phi\xean b\u1ea3n m\u1edbi nh\u1ea5t",HOT_UPDATE_FOUND_UPDATE:"T\xecm th\u1ea5y b\u1ea3n c\u1eadp nh\u1eadt m\u1edbi",HOT_UPDATE_UPDATING:"\u0110ang c\u1eadp nh\u1eadt phi\xean b\u1ea3n m\u1edbi ...",HOT_UPDATE_UPDATE_SUCCESS:"C\u1eadp nh\u1eadt ho\xe0n th\xe0nh",HOT_UPDATE_UPDATE_FAILED:"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i",SPLASH_GET_GET_DATA:"\u0110ang l\u1ea5y d\u1eef li\u1ec7u game ...",SPLASH_GET_CONFIG_FAILED:"L\u1ea5y d\u1eef li\u1ec7u th\u1ea5t b\u1ea1i",VERSION:"Phi\xean b\u1ea3n: {0}",CONTACT:"Hotline: {0}",OTP_FIRST_ACCOUNT:"K\xedch ho\u1ea1t s\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\u1ea3o m\u1eadt \u0111\u1ec3 b\u1ea3o v\u1ec7 t\xe0i kho\u1ea3n b\u1ea1n nh\xe9!",OTP_ACTIVE_ACCOUNT:"Vui l\xf2ng so\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 k\xedch ho\u1ea1t OTP",OTP_FORGET_PASSWORD:"B\u01b0\u1edbc 1: So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 l\u1ea5y m\xe3 x\xe1c th\u1ef1c",SAFE_GET_OTP:"So\u1ea1n tin: <color = #F0FF40>{0}</color> g\u1eedi <color=#F0FF40>{1}</color> \u0111\u1ec3 nh\u1eadn m\xe3 x\xe1c th\u1ef1c",LOGIN_TITLE:"\u0110\u0103ng nh\u1eadp",LOGIN_MISSING_USERNAME:"Thi\u1ebfu th\xf4ng tin t\xe0i kho\u1ea3n",LOGIN_MISSING_PASSWORD:"Thi\u1ebfu th\xf4ng tin m\u1eadt kh\u1ea9u",LOGIN_MISSING_CAPTCHA:"Thi\u1ebfu th\xf4ng tin m\xe3 x\xe1c nh\u1eadn",LOGIN_SECURITY_SMS:"\u0110\u1ec3 \u0111\u0103ng k\xfd b\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp vui l\xf2ng so\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color>\n\u0110\u1ec3 h\u1ee7y b\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp vui l\xf2ng so\u1ea1n tin <color=yellow>{2}</color> g\u1eedi <color=yellow>{3}</color>",LOGIN_SECURITY_SMS_2:"So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 l\u1ea5y m\xe3 OTP",VINURITY_GAME:"Qu\u1ea3n l\xfd game",OTP_NOT_EMPTY:"M\xe3 OTP kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p tr\u1ed1ng",TIME_LOGIN:"B\u1ea1n \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe1 nhi\u1ec1u\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",ACCOUNT_ONLINE:"T\xe0i kho\u1ea3n \u0111ang \u0111\u01b0\u1ee3c \u0111\u0103ng nh\u1eadp tr\xean thi\u1ebft b\u1ecb kh\xe1c",ACCOUNT_ONLINE_2:"\u0110ang k\u1ebft n\u1ed1i l\u1ea1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng thao t\xe1c \u0110\u0102NG NH\u1eacP l\u1ea1i!",REGISTER_TITLE:"\u0110\u0103ng k\xfd",REGISTER_MISSING_USERNAME:"Vui l\xf2ng nh\u1eadp t\xean t\xe0i kho\u1ea3n",REGISTER_MISSING_PASSWORD:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u",REGISTER_MISSING_REPASSWORD:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u x\xe1c nh\u1eadn",REGISTER_REPASSWORD_NOT_CORRECT:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u ch\u01b0a ch\xednh x\xe1c. Vui l\xf2ng th\u1eed l\u1ea1i",REGISTER_NOT_AGREE_TERM:"Vui l\xf2ng x\xe1c nh\u1eadn l\u1ea1i c\xe1c \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",REGISTER_PASSWORD_SHORT:"M\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c d\u01b0\u1edbi 6 k\xfd t\u1ef1",FORGET_PASSWORD_TITLE:"Qu\xean m\u1eadt kh\u1ea9u",FORGET_PASSWORD_MISSING_USERNAME_EMAIL:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 t\xean t\xe0i kho\u1ea3n v\xe0 Email",FORGET_PASSWORD_NOT_SUPPORT_FORGET_PASSWORD_BY_PHONE:"Ch\xfang t\xf4i hi\u1ec7n ch\u01b0a h\u1ed7 tr\u1ee3 l\u1ea5y l\u1ea1i m\u1eadt kh\u1ea9u b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",FORGET_PASSWORD_SUCCESS:"G\u1eedi email th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email \u0111\u1ec3 l\u1ea5y th\xf4ng tin v\u1ec1 m\u1eadt kh\u1ea9u m\u1edbi",FORGET_PASSWORD_RE_PASSWORD_NOT_CORRECT:"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHANGE_PASSWORD_TITLE:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",CHANGE_PASSWORD_RE_PASSWORD_NOT_CORRECT:"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHANGE_PASSWORD_GET_OTP:"B\u1ea1n vui l\xf2ng s\u1eed d\u1ee5ng OTP App \u0111\u1ec3 nh\u1eadn OTP ho\u1eb7c li\xean h\u1ec7 v\u1edbi QTV \u0111\u1ec3 bi\u1ebft th\xeam th\xf4ng tin",SET_NICKNAME_TITLE:"T\u1ea1o nh\xe2n v\u1eadt",SET_NICKNAME_NICKNAME_NOT_EMPTY:"T\xean nh\u1eadn v\u1eadt kh\xf4ng \u0111\u01b0\u1ee3c tr\u1ed1ng",NICKNAME_DIFFERENT_USERNAME:"T\xean nh\xe2n v\u1eadt kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng v\u1edbi t\xe0i kho\u1ea3n",OTP_LOGIN_TITLE:"B\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp",SECURITY_GAME:"B\u1ea3o m\u1eadt",REGISTER_GIFTCODE_WELCOME:"Xin ch\xe0o <color=yellow>{0}</color>",LOGOUT_TITLE:"\u0110\u0103ng xu\u1ea5t",UPDATE_INFO:"C\u1eadp nh\u1eadt",UPDATE_AVATAR_TITLE:"\u0110\u1ed5i avatar",UPDATE_PASSWORD_TITLE:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",FORMAT_PHONE_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng ch\xednh x\xe1c",FORMAT_DOB_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y sinh kh\xf4ng ch\xednh x\xe1c",FORMAT_EMAIL_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng Email kh\xf4ng ch\xednh x\xe1c",INFO_DOB:"{0}/{1}/{2}",PLAYER_INFO_TITLE:"Th\xf4ng tin ng\u01b0\u1eddi ch\u01a1i",MAIL_TITLE:"H\xf2m th\u01b0",MAIL_DETAIL_TITLE:"Ngu\u1eddi g\u1eedi: {0} - Th\u1eddi gian: {1}",MAIL_NOTIFICATION:"B\u1ea1n c\xf3 tin nh\u1eafn m\u1edbi",RECHARGE_MONEY_SUCCESS:"B\u1ea1n \u0111\xe3 n\u1ea1p th\xe0nh c\xf4ng {0} {1}",RECHARGE_MONEY_TITLE:"N\u1ea1p th\u1ebb",RECHARGE_MONEY_HISTORY_NAME:"N\u1ea1p th\u1ebb {0}",RECHARGE_MONEY_HISTORY_NOTE:"Code: {0} - Seri: {1}",NUMBER_MONEY_LARGER_ZERO:"S\u1ed1 VIN ph\u1ea3i > 0",RECHARGE_GOLD_SUCCESS:"\u0110\u1ed5i th\xe0nh c\xf4ng",RECHARGE_GOLD_TITLE:"\u0110\u1ed5i XU",RECHARGE_GOLD_HISTORY_NAME:"\u0110\u1ed5i XU",RECHARGE_GOLD_HISTORY_NOTE:"S\u1ed1 XU nh\u1eadn \u0111\u01b0\u1ee3c: {0}",RECHARGE_SMS_NOTE:"<color=#A17E1A><i>N\u1ea1p {0} nh\u1eadn ngay {1} VIN</i></c>",RECHARGE_SMS_MSG:"So\u1ea1n <color=yellow>{0}</color> g\u1eedi <color=green>{1}</color>",RECHARGE_SMS_TENDANGNHAP:"tendangnhap",RECHARGE_SMS_ANDROID:"sms:{0}?body={1}",RECHARGE_SMS_IOS:"sms:{0}&body={1}",RECHARGE_SMS_HISTORY_NAME:"N\u1ea1p SMS",AWARD_TITLE:"\u0110\u1ed5i th\u01b0\u1edfng",AWARD_DESCRIBE:"\u0110\u1ed5i th\u1ebb {0}",NUMBER_CARDS_LARGER_ZERO:"S\u1ed1 l\u01b0\u1ee3ng th\u1ebb ph\u1ea3i > 0",TRANSFER_TITLE:"Chuy\u1ec3n kho\u1ea3n",VALUE_LARGER_ZERO:"S\u1ed1 VIN ph\u1ea3i > 0",RE_NICKNAME_NOT_CORRECT:"X\xe1c nh\u1eadn nickname kh\xf4ng ch\xednh x\xe1c",TRANSFER_OTP:"So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color>",SAFE_TITLE:"K\xe9t s\u1eaft",SAFE_NOT_ACTIVE_PHONE:"Vui l\xf2ng b\u1ea3o m\u1eadt t\xe0i kho\u1ea3n b\u1eb1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 r\xfat ti\u1ec1n",HISTORY_TITLE:"L\u1ecbch s\u1eed",TOP_TITLE:"B\u1ea3ng x\u1ebfp h\u1ea1ng",GIFTCODE_TITLE:"Gift Code",GIFTCODE_NOT_ACTIVE:"Vui l\xf2ng b\u1ea3o m\u1eadt \u0111\u1ec3 s\u1eed d\u1ee5ng Gift Code",FRIEND_TITLE:"Nh\xe0 ph\xe1t tri\u1ec3n",FRIEND_NOT_ACTIVE:"Vui l\xf2ng b\u1ea3o m\u1eadt \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng Nh\xe0 Ph\xe1t Tri\u1ec3n",CAPCHA_NOT_CORRECT:"M\xe3 x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHAT_MESSAGE:"<b><color=#FCC63C>{0}</color><color=#FFF48D>{1}: </b></color>{2}",CHAT_MESSAGE_FAIL:"<color=red><i>{0}</i></color>",CHAT_GAME_MESSAGE:"<color=fecb6e><b>{0}: </b></color>{1}",CHAT_TAI_XIU_MESSAGE:"<color=fadb32><b>{0}: </b></color>{1}",CHAT_TAI_XIU_VIP_MESSAGE:"<color=04fd4a><b>{0}: </b></color>{1}",CHAT_SLOT_2_MESSAGE:"<color=#DE9100><b>{0}: </b></color><color=#C3C2C3>{1}</color>",JOIN_ROOM_TITLE:"Ch\u1ecdn ph\xf2ng",NOT_ENOUGH_MONEY_TO_JOIN_GAME:"B\u1ea1n c\u1ea7n t\u1ed1i thi\u1ec3u {0} {1} \u0111\u1ec3 tham gia ch\u01a1i game",NOT_ENOUGH_MONEY_TO_STAY_GAME:"B\u1ea1n c\u1ea7n {0} {1} \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i game!",JOIN_ROOM_ERROR:"Ph\xf2ng ch\u01a1i hi\u1ec7n t\u1ea1i \u0111ang b\u1ecb kh\xf3a",INTIVE_TITLE:"M\u1eddi b\u1ea1n",NOTIFICATION_TITLE:"Th\xf4ng b\xe1o",MONEY:"Vin",GOLD:"Xu",VIETTEL:"Vietel",MOBIFONE:"Mobifone",VINAPHONE:"Vinaphone",GATE:"Gate",TOP_UP_ITEM_VALUE:"Th\u1ebb {0}",CHARGE_CARD_ITEM_VALUE:"{0}\u0110",TAI_XIU:"T\xe0i X\u1ec9u",MINI_POKER:"Mini Poker",MINI_BACAY:"Mini Ba C\xe2y",DIAMOND:"Kim C\u01b0\u01a1ng",LUCK_WHEEL:"V\xf2ng Quay May M\u1eafn",TREN_DUOI:"Cao Th\u1ea5p",DIAMOND_2:"H\u1ea3i T\u1eb7c",BAU_CUA:"B\u1ea7u Cua",INVITE_MESSAGE:"Ng\u01b0\u1eddi ch\u01a1i <color=green>{0}</color> m\u1eddi b\u1ea1n v\xe0o game <color=green>{1}</color>\nM\u1ee9c c\u01b0\u1ee3c: <color=yellow>{2} {3}</color>",GAME_DESCRIBE_TABLE_NAME:"B\xe0n {0} - Phi\xean {1}",GAME_DESCRIBE_TABLE_BET:"{0} {1}",REQUEST_LEFT_ROOM:"\u0110\u0103ng k\xfd r\u1eddi b\xe0n th\xe0nh c\xf4ng",IGNORE_REQUEST_LEFT_ROOM:"H\u1ee7y r\u1eddi b\xe0n th\xe0nh c\xf4ng",BACAY_WIN_ALL:"B\u1eaeT C\u1ea2 L\xc0NG",BACAY_LOSE_ALL:"PH\xc1T L\u01af\u01a0NG",BACAY_BET_PRIVATE_BUTTON:"\u0110\xc1NH BI\xcaN T\u1ea4T C\u1ea2 ({0})",MAU_BINH_BINH_LUNG_NOT_COMPLETE:"Binh l\u1ee7ng kh\xf4ng th\u1ec3 ho\xe0n th\xe0nh",MAU_BINH_KHONG_HOP_LE:"KH\xd4NG H\u1ee2P L\u1ec6",MAU_BINH_THUNG_PHA_SANH_LON:"TH\xd9NG PH\xc1 S\u1ea2NH \u0110\u1ea0I",MAU_BINH_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",MAU_BINH_TU_QUY:"T\u1ee8 QU\xdd",MAU_BINH_CU_LU:"C\xd9 L\u0168",MAU_BINH_THUNG:"TH\xd9NG",MAU_BINH_SANH_DAI:"S\u1ea2NH \u0110\u1ea0I",MAU_BINH_SANH_NHI:"S\u1ea2NH NH\u1eca",MAU_BINH_SANH_THUONG:"S\u1ea2NH",MAU_BINH_SAM:"S\xc1M",MAU_BINH_THU:"TH\xda",MAU_BINH_DOI:"\u0110\xd4I",MAU_BINH_MAU_THAU:"M\u1eacU TH\u1ea6U",MAU_BINH_COMPLETED:"HO\xc0N TH\xc0NH",MAU_BINH_RONG_CUON:"R\u1ed2NG CU\u1ed0N",MAU_BINH_SANH_RONG:"S\u1ea2NH R\u1ed2NG",MAU_BINH_MUOI_BA_LA_CUNG_MAU:"\u0110\u1ed2NG HOA",MAU_BINH_NAM_DOI_MOT_SAM:"N\u0102M \u0110\xd4I M\u1ed8T S\xc1M",MAU_BINH_LUC_PHE_BON:"L\u1ee4C PH\xc9 B\xd4N",MAU_BINH_BA_THUNG_TAI_BA_CHI:"BA TH\xd9NG BA CHI",MAU_BINH_BA_SANH_TAI_BA_CHI:"BA S\u1ea2NH BA CHI",MAU_BINH_THUNG_PHA_SANH_CHI_DAU:"TH\xd9NG PH\xc1 S\u1ea2NH CHI \u0110\u1ea6U",MAU_BINH_TU_QUY_CHI_DAU:"T\u1ee8 QU\xdd CHI \u0110\u1ea6U",MAU_BINH_THUNG_PHA_SANH_CHI_GIUA:"TH\xd9NG PH\xc1 S\u1ea2NH CHI GI\u1eeeA",MAU_BINH_TU_QUY_CHI_GIUA:"T\u1ee8 QU\xdd CHI GI\u1eeeA",MAU_BINH_CU_LU_CHI_GIUA:"C\xd9 L\u0168 CHI GI\u1eeeA",MAU_BINH_SAM_CHI_CUOI:"S\xc1M CHI CU\u1ed0I",MAU_BINH_BINH_LUNG:"BINH L\u1ee6NG",MAU_BINH_SAP_BA_CHI:"S\u1eacP BA CHI",MAU_BINH_THANG_BA_CHI:"TH\u1eaeNG BA CHI",MAU_BINH_CHI_TYPE:"{0} . {1}",TLMN_IGNORE_TURN:"B\u1ece L\u01af\u1ee2T",TLMN_BA_DOI_THONG:"BA \u0110\xd4I TH\xd4NG",TLMN_BON_DOI_THONG:"B\u1ed0N \u0110\xd4I TH\xd4NG",TLMN_MOT_TU_QUY:"T\u1ee8 QU\xdd",TLMN_CONG:"C\xd3NG",TLMN_THOI_HAI:"TH\u1ed0I HAI",TLMN_THOI_BA_DOI_THONG:"TH\u1ed0I BA \u0110\xd4I TH\xd4NG",TLMN_THOI_TU_QUY:"TH\u1ed0I T\u1ee8 QU\xdd",TLMN_THOI_BON_DOI_THONG:"TH\u1ed0I B\u1ed0N \u0110\xd4I TH\xd4NG",TLMN_SANH_RONG:"S\u1ea2NH R\u1ed2NG",TLMN_SAU_DOI_THONG:"S\xc1U \u0110\xd4I TH\xd4NG",TLMN_BON_BO_BA:"B\u1ed0N B\u1ed8 BA",TLMN_HAI_BO_TU_QUY:"HAI B\u1ed8 T\u1ee8 QU\xdd",TLMN_MUOI_HAI_CON_DONG_CHAT:"\u0110\u1ed2NG HOA",TLMN_NAM_DOI_THONG:"N\u0102M \u0110\xd4I TH\xd4NG",TLMN_TU_HAI:"T\u1ee8 QU\xdd HAI",TLMN_SAU_DOI:"S\xc1U \u0110\xd4I",TLMN_CHAN_KET_BA_BICH:"CH\u1eb6N K\u1ebeT BA B\xcdCH",TLMN_KET_BA_BICH:"K\u1ebeT BA B\xcdCH",SAM_BAO_MOT:"B\xc1O 1",SAM_THANG_BAO_MOT:"TH\u1eaeNG B\xc1O 1",SAM_THUA_BAO_MOT:"THUA B\xc1O 1",SAM_IGNORE_TURN:"B\u1ece L\u01af\u1ee2T",SAM_XIN_SAM:"XIN S\xc2M",SAM_CONG:"C\xd3NG",SAM_THOI_HAI:"TH\u1ed0I HAI",SAM_THUA_SAM:"THUA S\xc2M",SAM_THANG_SAM:"TH\u1eaeNG S\xc2M",POKER_CHECK:"XEM",POKER_FOLD:"B\u1ece B\xc0I",POKER_ALL_IN:"ALL IN",POKER_RAISE:"T\u1ed0",POKER_CALL:"THEO",POKER_THUNG_PHA_SANH_LON:"TH\xd9NG PH\xc1 S\u1ea2NH \u0110\u1ea0I",POKER_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",POKER_TU_QUY:"T\u1ee8 QU\xdd",POKER_CU_LU:"C\xd9 L\u0168",POKER_THUNG:"TH\xd9NG",POKER_SANH_DAI:"S\u1ea2NH \u0110\u1ea0I",POKER_SANH_NHI:"S\u1ea2NH NH\u1eca",POKER_SANH_THUONG:"S\u1ea2NH",POKER_SAM:"S\xc1M",POKER_THU:"TH\xda",POKER_DOI:"\u0110\xd4I",POKER_BAI_CAO:"B\xc0I CAO",LIENG_CHECK:"XEM",LIENG_FOLD:"B\u1ece B\xc0I",LIENG_ALL_IN:"ALL IN",LIENG_RAISE:"T\u1ed0",LIENG_CALL:"THEO",LIENG_SAP:"S\xc1P",LIENG_LIENG:"LI\xcaNG",LIENG_BO_DOI:"B\u1ed8 \u0110\u1ed8I",LIENG_BET_TEXT:"{0} ({1})",XOC_DIA_REGISTER_FORM_MESSAGE_HOME:"C\xe1i",XOC_DIA_REGISTER_FORM_MESSAGE_WAITING:"\u0110ang ch\u1edd",XOC_DIA_REGISTER_FORM_MESSAGE_IGNORE:"Ngh\u1ec9 l\xe0m c\xe1i",XOC_DIA_START_REGISTER_HOST:"B\u1eaft \u0111\u1ea7u \u0111\u0103ng k\xfd l\xe0m host",XOC_DIA_WAIT_NEXT_GAME:"Ch\u1edd \u0111\u1ec3 b\u1eaft \u0111\u1ea7u v\xe1n ch\u01a1i m\u1edbi",XOC_DIA_START_BET:"Vui l\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c",XOC_DIA_BUY_SELL_DOOR:"Th\u1eddi gian mua b\xe1n c\u1eeda",XOC_DIA_NOT_TIME_TO_BET:"Kh\xf4ng ph\u1ea3i th\u1eddi gian \u0111\u1ec3 \u0111\u1eb7t c\u1eeda",XOC_DIA_NOT_SELECT_CHIP:"B\u1ea1n ch\u01b0a ch\u1ecdn ti\u1ec1n c\u01b0\u1ee3c",XOC_DIA_BALANCE_DOOR:"C\xe2n c\u1eeda",XOC_DIA_RESULT:"V\xe1n ch\u01a1i k\u1ebft th\xfac",XOC_DIA_NOT_BET_NO_HOST:"Kh\xf4ng th\u1ec3 \u0111\u1eb7t c\u1eeda n\xe0y khi kh\xf4ng c\xf3 C\xe1i",XOC_DIA_HOST_NOT_BET:"C\xe1i kh\xf4ng th\u1ec3 \u0111\u1eb7t",XOC_DIA_ID:"#{0}",PHOM_SELECT_ONE_CARD:"B\u1ea1n ch\u01b0a ch\u1ecdn b\xe0i",PHOM_PLEASE_BOC_BAI:"B\u1ea1n ch\u01b0a b\u1ed1c b\xe0i",PHOM_PLEASE_SELECT_CARDS_HA:"Vui l\xf2ng ch\u1ecdn ph\u1ecfm c\u1ea7n h\u1ea1",PHOM_AN_CHOT:"\u0102N CH\u1ed0T",PHOM_BI_AN_CHOT:"B\u1eca \u0102N CH\u1ed0T",PHOM_U:"\xd9",PHOM_U_KHAN:"\xd9 KHAN",PHOM_U_TRON:"\xd9 TR\xd2N",PHOM_U_DEN:"\xd9 \u0110\u1ec0N",PHOM_DEN:"\u0110\u1ec0N L\xc0NG",PHOM_NHAT:"NH\u1ea4T",PHOM_NHI:"NH\xcc",PHOM_BA:"BA",PHOM_BET:"B\xc9T",PHOM_MOM:"M\xd3M",PHOM_SCORE:"{0} \u0110I\u1ec2M",XITO_CHECK:"XEM",XITO_FOLD:"B\u1ece B\xc0I",XITO_ALL_IN:"ALL IN",XITO_RAISE:"T\u1ed0",XITO_CALL:"THEO",XITO_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",XITO_TU_QUY:"T\u1ee8 QU\xdd",XITO_CU_LU:"C\xd9 L\u0168",XITO_THUNG:"TH\xd9NG",XITO_SANH:"S\u1ea2NH",XITO_SAM:"S\xc1M",XITO_THU:"TH\xda",XITO_DOI:"\u0110\xd4I",XITO_BAI_CAO:"B\xc0I CAO",PLAYING_NOT_CHANGE_BET:"Ch\u1edd h\u1ebft l\u01b0\u1ee3t \u0111\u1ec3 \u0111\u1ed5i c\u1eeda \u0111\u1eb7t",PLAYING_NOT_CHANGE_MONEY_TYPE:"Ch\u1edd h\u1ebft l\u01b0\u1ee3t \u0111\u1ec3 \u0111\u1ed5i lo\u1ea1i ti\u1ec1n",PLAYING_NOT_CHANGE_NUMBER_LINE:"Ch\u1edd h\u1ebft l\u01b0\u1ee3t \u0111\u1ec3 \u0111\u1ed5i s\u1ed1 d\xf2ng",AUTO_SPIN_NOT_CHANGE_BET:"\u0110ang t\u1ef1 \u0111\u1ed9ng quay kh\xf4ng \u0111\u01b0\u1ee3c thay \u0111\u1ed5i c\u1eeda \u0111\u1eb7t",AUTO_SPIN_NOT_CHANGE_MONEY_TYPE:"\u0110ang t\u1ef1 \u0111\u1ed9ng quay kh\xf4ng \u0111\u01b0\u1ee3c thay \u0111\u1ed5i lo\u1ea1i ti\u1ec1n",AUTO_SPIN_NOT_CHANGE_NUMBER_LINE:"\u0110ang t\u1ef1 \u0111\u1ed9ng quay kh\xf4ng \u0111\u01b0\u1ee3c thay \u0111\u1ed5i s\u1ed1 d\xf2ng",SPIN_TOO_FAST:"Quay qu\xe1 nhanh",MINIGAME_ID:"#{0}",TAIXIU_HISTORIES_DETAIL:"Phi\xean ch\u01a1i {0} - {1}",TAIXIU_BALANCE_DOOR:"Tr\u1ea3 ti\u1ec1n c\xe2n c\u1eeda",TAIXIU_YOU_NOT_BET:"Vui l\xf2ng nh\u1eadp ti\u1ec1n c\u01b0\u1ee3c",TRENDUOI_CLICK_PLAY:"B\u1ea5m v\xe0o PLAY \u0111\u1ec3 b\u1eaft \u0111\u1ea7u ch\u01a1i",TRENDUOI_FINISH:"K\u1ebft th\xfac",TRENDUOI_LOSE:"B\u1ea1n \u0111\xe3 thua. Ch\xfac b\u1ea1n may m\u1eafn l\u1ea7n sau",TRENDUOI_STOP_SPINING:"Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac",TAIXIU_YOU_ONLE_BET_A_DOOR:"B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1eb7t m\u1ed9t c\u1eeda",BAU_CUA_NEXT_TURN:"L\u01b0\u1ee3t ti\u1ebfp theo",BAU_CUA_BET:"\u0110\u1eb7t c\u01b0\u1ee3c",BAU_CUA_TOP_WEEK_TITLE:"Top tu\u1ea7n",TAIXIU_CHAIN_WIN:"D\xe2y hi\u1ec7n t\u1ea1i: {0}",TAIXIU_CHAIN_LOSE:"D\xe2y hi\u1ec7n t\u1ea1i: {0}",TAIXIU_CHAIN:"S\u1ef1 ki\u1ec7n \u0111ua d\xe2y t\xe0i x\u1ec9u",TAIXIU_CURRENT_CHAIN_WIN:"D\xe2y d\xe0i nh\u1ea5t: {0}",TAIXIU_CURRENT_CHAIN_LOSE:"D\xe2y d\xe0i nh\u1ea5t: {0}",DIAMOND_NO_LINE_SELECTED:"B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c",MINIGAME_LOTTERY_RESULT:"Th\u1eafng",MINIGAME_LOTTERY_YOU_NOT_BET:"Vui l\xf2ng nh\u1eadp ti\u1ec1n c\u01b0\u1ee3c",MINIGAME_LOTTERY_PLEASE_SELECT_BET:"Vui l\xf2ng nh\u1eadp s\u1ed1 mu\u1ed1n c\u01b0\u1ee3c",MINIGAME_LOTTERY_YOU_BET_NOT_VALID:"S\u1ed1 ch\u1ecdn kh\xf4ng h\u1ee3p l\u1ec7",MINIGAME_LOTTERY_LO:"L\xd4",MINIGAME_LOTTERY_XIEN_2:"XI\xcaN 2",MINIGAME_LOTTERY_XIEN_3:"XI\xcaN 3",MINIGAME_LOTTERY_XIEN_4:"XI\xcaN 4",MINIGAME_LOTTERY_DE:"\u0110\u1ec0",MINIGAME_LOTTERY_DAU:"\u0110\u1ea6U",MINIGAME_LOTTERY_DUOI:"\u0110U\xd4I",MINIGAME_LOTTERY_HU:"QUAY H\u0168",LUCKY_WHEEL_IS_SPINING:"Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac",LUCKY_WHEEL_CONGRATULATION:"Ch\xfac m\u1eebng b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c ph\u1ea7n th\u01b0\u1edfng t\u1eeb V\xf2ng Quay May M\u1eafn",SLOT_NOT_CHANGE_BET:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 thay \u0111\u1ed5i m\u1ee9c c\u01b0\u1ee3c",SLOT_NOT_AUTO_SPIN:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 t\u1ef1 \u0111\u1ed9ng quay",SLOT_NOT_TEST:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 ch\u01a1i th\u1eed",SLOT_BONUS_GAME_FINISH:"Ch\xfac m\u1eebng b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c <color=yellow>{0} VIN</color>",SLOT_NOT_CHANGE_SPIN:"Vui l\xf2ng \u0111\u1ee3i v\xf2ng quay k\u1ebft th\xfac",SLOT_CANCEL_BACK:"Vui l\xf2ng \u0111\u1ee3i v\xf2ng ch\u01a1i k\u1ebft th\xfac",SLOT_NOT_CHANGE_SELECT_LINE:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 ch\u1ecdn d\xf2ng c\u01b0\u1ee3c",SLOT2_NOT_SELECT_LINE:"Vui l\xf2ng ch\u1ecdn d\xf2ng c\u01b0\u1ee3c.",SLOT2_AUTOSPIN_NOT_CHANGE:"\u0110ang \u1edf ch\u1ebf \u0111\u1ed9 quay t\u1ef1 \u0111\u1ed9ng. B\u1ea1n kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao th\xe1c n\xe0y",SLOT2_RANK_1:"Ch\xfac m\u1eebng <color = #F7A200>{0}</color> \u0111\xe3 d\xe0nh \u0111\u01b0\u1ee3c H\u0169 <color = #F7A200>{1}</color> VIN v\xe0o l\xfac {2}",SLOT2_RANK_2:"TK <color = #F7A200>{0}</color> th\u1eafng <color = #F7A200>{1}</color> VIN {2} tr\u01b0\u1edbc",SLOT2_HISTORY:"B\u1ea1n ch\u01a1i ph\xf2ng {0} v\xe0 nh\u1eadn \u0111\u01b0\u1ee3c <color = #F7A200>{1}</color> {2} tr\u01b0\u1edbc",SLOT2_NOT_PLAY:"Vui l\xf2ng \u0111\u1ee3i v\xf2ng quay k\u1ebft th\xfac",SLOT3_NOT_SELECT_LINE:"Vui l\xf2ng ch\u1ecdn d\xf2ng c\u01b0\u1ee3c.",SLOT3_AUTOSPIN_NOT_CHANGE:"\u0110ang \u1edf ch\u1ebf \u0111\u1ed9 quay t\u1ef1 \u0111\u1ed9ng. B\u1ea1n kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao th\xe1c n\xe0y",SLOT3_RANK_1:"Ch\xfac m\u1eebng <color = #F7A200>{0}</color> \u0111\xe3 d\xe0nh \u0111\u01b0\u1ee3c h\u0169 <color = #F7A200>{1}</color> VIN v\xe0o l\xfac {2}",SLOT3_RANK_2:"TK <color = #F7A200>{0}</color> th\u1eafng <color = #F7A200>{1}</color> VIN {2} tr\u01b0\u1edbc",SLOT3_HISTORY:"B\u1ea1n ch\u01a1i ph\xf2ng {0} v\xe0 nh\u1eadn \u0111\u01b0\u1ee3c <color = #F7A200>{1}</color> {2} tr\u01b0\u1edbc",FIREFISH_MIN_BET:"MIN = {0} {1}",FIREFISH_FISHED:"Ng\u01b0\u1eddi ch\u01a1i <color=#FA3030>{0}</color> v\u1eeba gi\u1ebft ch\u1ebft <color=#56EA00>{1}</color> nh\u1eadn \u0111\u01b0\u1ee3c <color=#FAFF1A>{2}</color> {3}",MESSAGE_FORBIDDEN:["hu79","hu 79","game moi","tai.hu79.win","hu79.win","hu.79","hu_79","t\u1ea3i","link","game m\u1edbi"],HU_LOC_MESSAGE:"Ch\xfac m\u1eebng b\u1ea1n \u0111\xe3 r\xfat \u0111\u01b0\u1ee3c {0} L\u1ed9c",HU_LOC_REGISTER:"B\u1ea1n \u0111\xe3 \u0111\u0103ng k\xfd xin l\u1ed9c th\xe0nh c\xf4ng",TAN_LOC_MESSAGE:"Ch\xfac m\u1eebng b\u1ea1n \u0111\xe3 r\xfat \u0111\u01b0\u1ee3c {0} L\u1ed9c",TAN_LOC_REGISTER:"t\xe0i kho\u1ea3n {0} \u0111\xe3 T\xe1n L\u1ed9c {1} VIN"},cc._RF.pop()},{}],MiniBaCayCard:[function(t,e,i){"use strict";cc._RF.push(e,"00e7ah3NfVE2KMMQnwsaL1J","MiniBaCayCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MiniBaCayConstant:[function(t,e,i){"use strict";cc._RF.push(e,"dbf0bAXLmFCYpC31i6JhGjo","MiniBaCayConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"mini_3cay.ADD_EVENT",REMOVE_EVENT:"mini_3cay.REMOVE_EVENT",SPIN:"mini_3cay.SPIN",IS_SHOW:"mini_3cay_is_show",POSITION:"mini_3cay_position",IS_AUTO_SPIN:"mini_3cay_auto_spin",IS_SPIN_FAST:"mini_3cay_spin_fast",BET_VALUE:"mini_3cay_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,LINE_TYPE:"mini_3cay_line_type",MONEY_TYPE:"mini_3cay_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"mini_3cay.GET_TOP",MINIGAME_CONFIG_ID:7},cc._RF.pop()},{}],MiniBaCayHistories:[function(t,e,i){"use strict";cc._RF.push(e,"69b11gPzOhAW4b8h5A0iyCw","MiniBaCayHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyMiniBaCayItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryMiniBaCay(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyMiniBaCayItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("MiniPokerHistoryItem").init(t[e],e)}}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],MiniBaCayReels:[function(t,e,i){"use strict";cc._RF.push(e,"9ab07AaNndHqpuWrdlvzvNG","MiniBaCayReels");var n=t("./MiniBaCayReel"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{reels:[n],resultNode:cc.Node,moneyLabel:cc.Label},init:function(t){for(var e in this.MiniBaCay=t,this.reels)this.reels[e].init(t,this)},onEnable:function(){this.reset()},onDisable:function(){this.reset()},spinReelsShowMoney:function(t,e,i,n,o,a,r){for(var c in this.reels)c==this.reels.length-1?this.reels[c].spin(t[c],s.MINIPOKER_NUMBER_CARDS_SPIN+2*c,!0,!0,e,a,i,n,o,r):this.reels[c].spin(t[c],s.MINIPOKER_NUMBER_CARDS_SPIN+2*c,!0)},spinReelsNotShowMoney:function(t,e,i,n,o,a){for(var r in this.reels)r==this.reels.length-1?this.reels[r].spin(t[r],s.MINIPOKER_NUMBER_CARDS_SPIN+2*r,!1,!0,e,a,i,n,o,!0):this.reels[r].spin(t[r],s.MINIPOKER_NUMBER_CARDS_SPIN+2*r,!1)},showMoney:function(t){this.resultNode.active=!0,this.moneyLabel.string=o.numberWithCommas(t),clearTimeout(this.resultTimeout),this.resultTimeout=setTimeout(function(){this.reset()}.bind(this),1500)},isSpinning:function(){return 0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)},reset:function(){this.resultNode.active=!1,clearTimeout(this.resultTimeout)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","./MiniBaCayReel":"MiniBaCayReel"}],MiniBaCayReel:[function(t,e,i){"use strict";cc._RF.push(e,"c2a35BzKExNwZELdDXYID+0","MiniBaCayReel");var n=t("./MiniBaCayCard"),o=t("../MiniGameConstant"),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t,e){this.MiniBaCay=t,this.MiniBaCayUI=t.MiniBaCayUI,this.MiniGameResult=t.MiniGameResult,this.MiniBaCayReels=e},onLoad:function(){this.trueValue=null,this.pool=new cc.NodePool;for(var t=0;t<20;t++)this.pool.put(cc.instantiate(this.cardPrefab));this.randomCard()},spin:function(t,e,i,n,s,r,c,h,l,u){this.reset(),this.setCard(this.trueValue),this.trueValue=t;for(var d=1;d<e;d++){var m=t;d!=e-1&&(m=this.getRandomTrueValue());var f=this.instanceCard(m);f.setPosition(0,d*a.MINIBACAY_DISTANCE_TWO_CARD),f.parent=this.node}var p=(e-1)*a.MINIBACAY_DISTANCE_TWO_CARD*this.node.scale,_=p/a.MINIBACAY_SPEED_SPIN_CARD,S=cc.moveTo(_,this.node.x,-p).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.setCard(t),n&&this.MiniBaCay.node.active&&(u&&(h===o.WIN_TYPE_JACKPOT?this.MiniBaCayUI.showJackPot(r,l):this.MiniGameResult.show(r,c)),i&&this.MiniBaCayReels.showMoney(s))},this),C=this.MiniBaCay.isSpinFast()?cc.delayTime(0):cc.delayTime(a.MINIBACAY_DELAY_SPIN),N=cc.callFunc(function(){this.setCard(t),n&&this.MiniBaCay.node.active&&this.MiniBaCay.isAutoSpin()&&this.MiniBaCay.spin()},this);this.node.runAction(cc.sequence(S,g,C,N)),h!==o.WIN_TYPE_JACKPOT||this.MiniBaCay.node.active||(this.MiniBaCay.node.active=!0,this.MiniBaCayUI.showJackPot(r,l))},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t;var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("CardController"),o=new n(t);return i.init(o),i.reveal(!0),e.scale=a.MINIBACAY_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./MiniBaCayCard":"MiniBaCayCard"}],MiniBaCayUI:[function(t,e,i){"use strict";cc._RF.push(e,"5f179NuymBBObFu53nM6Fre","MiniBaCayUI");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1OnLabel:cc.Label,bet1OffLabel:cc.Label,bet2OnLabel:cc.Label,bet2OffLabel:cc.Label,bet3OnLabel:cc.Label,bet3OffLabel:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,bgSmallNode:cc.Node,bgBigNode:cc.Node,topNode:cc.Node,bottomNode:cc.Node,reels1Node:cc.Node,reels2Node:cc.Node,reels3Node:cc.Node,toggleNode:cc.Node,toggleLabel:cc.Label,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},showSmallReels:function(){this.bgSmallNode.active=!0,this.bgBigNode.active=!1,this.topNode.y=215,this.bottomNode.y=-105,this.node.height=350,this.reels1Node.active=!1,this.reels2Node.active=!0,this.reels3Node.active=!1,this.toggleNode.getComponent("Toggle").setOff(),this.toggleLabel.string="Quay 1 d\xf2ng"},showBigReels:function(){this.bgSmallNode.active=!1,this.bgBigNode.active=!0,this.topNode.y=345,this.bottomNode.y=-222.5,this.node.height=575,this.reels1Node.active=!0,this.reels2Node.active=!0,this.reels3Node.active=!0,this.toggleNode.getComponent("Toggle").setOn(),this.toggleLabel.string="Quay 3 d\xf2ng"},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setBetMoney:function(){var t=o.MINIBACAY_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=o.MINIBACAY_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetGoldByList:function(t,e,i){this.bet1OnLabel.string=n.nFormatter(t),this.bet1OffLabel.string=n.nFormatter(t),this.bet2OnLabel.string=n.nFormatter(e),this.bet2OffLabel.string=n.nFormatter(e),this.bet3OnLabel.string=n.nFormatter(i),this.bet3OffLabel.string=n.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],MiniBaCay:[function(t,e,i){"use strict";cc._RF.push(e,"dbd01NYvvxMeLQwSYzge2Jc","MiniBaCay");var n=t("../../../base/BaseController"),o=t("./MiniBaCayConstant"),s=t("./MiniBaCayUI"),a=t("./MiniBaCayReels"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../item/MiniGameXPer"),l=t("../../../helper/Config"),u=t("../../../helper/Constant"),d=t("../../../helper/Message"),m=t("../../../object/RoomType"),f=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,autoSpinToggle:cc.Toggle,spinFastToggle:cc.Toggle,MiniBaCayReels1:a,MiniBaCayReels2:a,MiniBaCayReels3:a,JackpotItem:c,MiniGameXPer:h,toastPrefab:cc.Prefab,MiniBaCayUI:s,MiniGameResult:r},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.data=null,this.isMoneyType=!0,this.is1LineType=!0,this.betOrder=0,this.intervalSpin=null,this.MiniBaCayReels1.init(this),this.MiniBaCayReels2.init(this),this.MiniBaCayReels3.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.setTypeLine(this.is1LineType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(o.ADD_EVENT),this.initMiniGameSpinFree(this.getUser().minigame_free)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(o.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[o.MONEY_TYPE]===o.MONEY_TYPE_GOLD&&(this.isMoneyType=!1),this.is1LineType=!0,!1===this.getTempData()[o.LINE_TYPE]&&(this.is1LineType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().mini_3cay_free,i=t[o.IS_AUTO_SPIN],n=t[o.IS_SPIN_FAST],s=t[o.BET_VALUE];switch(n&&this.spinFastToggle.check(),i&&(this.autoSpinToggle.check(),this.spin()),s){case o.BET_100:this.setBet1();break;case o.BET_1k:this.setBet2();break;case o.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(o.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case o.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i);break;case o.REQUEST_INFO:this.handleInfo(i);break;case o.REQUEST_SPIN:this.handleSpin(i);break;case o.REQUEST_MESSAGE:this.handleMessage(n)}},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationMini3Cay(!0,e):this.MiniGameCircleNotification.initShowNotificationMini3Cay(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationMini3Cay(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,n=t[e].quantity;i===o.MINIGAME_CONFIG_ID&&(n>0?this.MiniBaCayUI.showMiniGameSpinFree(n):this.MiniBaCayUI.hideMiniGameSpinFree())}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.showMessage(t),this.MiniBaCayUI.showStopAutoSpinNode()},handleSpin:function(t){this.setSendSpin(!1);var e=t.spin_id;if(this.idLabel.string=String.format(d.MINIGAME_ID,e),1===t.group_cards_type.length){var i=[t.slot_data[0],t.slot_data[1],t.slot_data[2]],n=t.group_cards_type[0],o=t.array_win_prize[0];this.MiniBaCayReels2.spinReelsNotShowMoney(i,o,n,t.win_type,this.isMoneyType,t.total_prize_value)}else if(3===t.group_cards_type.length){var s=[t.slot_data[0],t.slot_data[1],t.slot_data[2]],a=[t.slot_data[3],t.slot_data[4],t.slot_data[5]],r=[t.slot_data[6],t.slot_data[7],t.slot_data[8]],c=t.group_cards_type[0],h=this.getTotalGroupCards(t.array_win_prize,t.group_cards_type),l=t.group_cards_type[2],u=t.array_win_prize[0],m=t.array_win_prize[1],f=t.array_win_prize[2];this.MiniBaCayReels1.spinReelsShowMoney(s,u,c,t.win_type,this.isMoneyType,t.total_prize_value,!1),this.MiniBaCayReels2.spinReelsShowMoney(a,m,h,t.win_type,this.isMoneyType,t.total_prize_value,!0),this.MiniBaCayReels3.spinReelsShowMoney(r,f,l,t.win_type,this.isMoneyType,t.total_prize_value,!1)}},getTotalGroupCards:function(t,e){var i=[];for(var n in t)t[n]>0&&i.push(e[n]);return i.length>0?i.join(" - "):e[0]},onSpinClick:function(){this.isSpinning()||this.spin()},isSpinning:function(){return this.MiniBaCayReels2.isSpinning()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE,money_value:this.getCurrentBet(),number_line:this.is1LineType?1:3};this.sendRequest.sendNoPrefixToZone(o.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(u.MINI_BACAY)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showMiniBaCayHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(f.MINI_BACAY),this.controller.MiniGame.GameMiniRank.showDialog(),this.isMoneyType?this.controller.MiniGame.GameMiniRank.onMoneyClick():this.controller.MiniGame.GameMiniRank.onGoldClick()},onCloseClick:function(){this.setShowMiniBaCay(!1)},onGoldClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onToggleClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_NUMBER_LINE):this.setTypeLine(!this.is1LineType)},onBet1ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.MiniBaCayUI.enableBet1Button(),this.getTempData()[o.BET_VALUE]=o.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.MiniBaCayUI.enableBet2Button(),this.getTempData()[o.BET_VALUE]=o.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.MiniBaCayUI.enableBet3Button(),this.getTempData()[o.BET_VALUE]=o.BET_10k},onMiniBaCayClick:function(){this.setShowMiniBaCay(!this.node.active)},onStopAutoSpinClick:function(){this.autoSpinToggle.isChecked=!1,this.onAutoSpinToggle()},onAutoSpinToggle:function(){var t=this.isAutoSpin();this.getTempData()[o.IS_AUTO_SPIN]=t},onSpinFastToggle:function(){var t=this.isSpinFast();this.getTempData()[o.IS_SPIN_FAST]=t},setShowMiniBaCay:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().mini_3cay_free;this.getTempData()[o.IS_SHOW]=t,this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin();var t=this.isSpinFast()?l.MINIBACAY_TIME_FAST_SPIN:l.MINIBACAY_TIME_SPIN;this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*t)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=l.MINIGAME_SCALE_TOAST,e.setPosition(l.MINIGAME_POSITION_TOAST_X,l.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.MiniBaCayUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?o.MONEY_TYPE_MONEY:o.MONEY_TYPE_GOLD;this.getTempData()[o.MONEY_TYPE]=e},setTypeLine:function(t){this.is1LineType=t,this.is1LineType?this.MiniBaCayUI.showSmallReels():this.MiniBaCayUI.showBigReels()},getCurrentBet:function(){return(this.isMoneyType?l.MINIBACAY_LIST_BET_MONEY:l.MINIBACAY_LIST_BET_GOLD)[this.betOrder]},isAutoSpin:function(){return this.autoSpinToggle.isChecked},isSpinFast:function(){return this.spinFastToggle.isChecked},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./MiniBaCayConstant":"MiniBaCayConstant","./MiniBaCayReels":"MiniBaCayReels","./MiniBaCayUI":"MiniBaCayUI"}],MiniGameChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"cdc36jet+hN96APTHmjzEnK","MiniGameChatItem");t("../../../helper/Message");var n=t("../../../util/FormatUtil"),o=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{nicknameNode:cc.Node,prefixNickNameLabel:cc.Label,nameLabel:cc.Label,messageLabel:cc.Label},onLoad:function(){},init:function(t){if(t.nick_name){for(var e=["adminsunvin","adminvinxu","autobot","botgiftcode","admin01","Th\xf4ng b\xe1o"],i=0;i<e.length;i++){if(e[i]===t.nick_name){this.nameLabel.node.color=new cc.Color(108,194,243,255),this.prefixNickNameLabel.node.active=!1;break}this.prefixNickNameLabel.node.active=!0,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nameLabel.node.color=new cc.Color(255,244,141,255)}this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nameLabel.string=t.nick_name+":",this.nameLabel._updateRenderData(!0),this.prefixNickNameLabel._updateRenderData(!0);var s=this.nameLabel.node.width;s+=this.prefixNickNameLabel.node.active?this.prefixNickNameLabel.node.width:0;for(var a=Math.floor(s/4.5)+2,r=n.formatMessage(t.message||t.msg),c=0;c<a;c++)r=" "+r;this.messageLabel.string=r,this.messageLabel._updateRenderData(!0),this.node.height=this.messageLabel.node.height+5}else this.node.active=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],MiniGameCircleNotification:[function(t,e,i){"use strict";cc._RF.push(e,"d8876XRzmlAdJg/597XULN0","MiniGameCircleNotification"),cc.Class({extends:cc.Component,properties:{bomNotificationNode:cc.Node,bomNotificationLabel:cc.Label,diamondNotificationNode:cc.Node,diamondNotificationLabel:cc.Label,luckyWheelNotificationNode:cc.Node,luckyWheelNotificationLabel:cc.Label,mini3CayNotificationNode:cc.Node,mini3CayNotificationLabel:cc.Label,miniPokerNotificationNode:cc.Node,miniPokerNotificationLabel:cc.Label,wildNotificationNode:cc.Node,wildNotificationLabel:cc.Label},init:function(t){this.MiniGame=t,this.controller=t.controller},initShowNotificationBom:function(t,e){this.bomNotificationNode&&this.bomNotificationLabel&&(this.bomNotificationNode.active=t,this.bomNotificationLabel.string=e)},initShowNotificationDiamond:function(t,e){this.diamondNotificationNode&&this.diamondNotificationLabel&&(this.diamondNotificationNode.active=t,this.diamondNotificationLabel.string=e)},initShowNotificationLuckyWheel:function(t,e){this.luckyWheelNotificationNode&&this.luckyWheelNotificationLabel&&(this.luckyWheelNotificationNode.active=t,this.luckyWheelNotificationLabel.string=e)},initShowNotificationMini3Cay:function(t,e){this.mini3CayNotificationNode&&this.mini3CayNotificationLabel&&(this.mini3CayNotificationNode.active=t,this.mini3CayNotificationLabel.string=e)},initShowNotificationMiniPoker:function(t,e){this.miniPokerNotificationNode&&this.miniPokerNotificationLabel&&(this.miniPokerNotificationNode.active=t,this.miniPokerNotificationLabel.string=e)},initShowNotificationWild:function(t,e){this.wildNotificationNode&&this.wildNotificationLabel&&(this.wildNotificationNode.active=t,this.wildNotificationLabel.string=e)}}),cc._RF.pop()},{}],MiniGameCircle:[function(t,e,i){"use strict";cc._RF.push(e,"a4783J/PKxMzYPMDSDa5aOh","MiniGameCircle");var n=t("../../base/BaseController"),o=t("../../helper/Config"),s=t("../../util/NodeUtil"),a=t("./MiniGameConstant"),r=t("./tai-xiu/TaiXiuTime");cc.Class({extends:n,properties:{circleButtonNode:cc.Node,circleGamesNode:cc.Node,TaiXiuTime:r},init:function(t){this.MiniGame=t,this.controller=t.controller},onLoad:function(){var t=this;this._super(),this.isShow=!1,this.isMove=!1,this.startPosition=null,this.positionX=this.node.x,this.positionY=this.node.y,this.onTouchStart=function(e){t.isMove=!1,t.startPosition=t.node.getPosition()},this.onTouchMove=function(e){t.isMove=!0;var i=e.touch.getDelta(),n=t.node.x+i.x,s=t.node.y+i.y,a=o.CANVAS_WIDTH/2,r=-o.CANVAS_WIDTH/2,c=o.GAME_HEIGHT/2,h=-(o.CANVAS_HEIGHT-o.GAME_HEIGHT/2);n>a?n=a:n<r&&(n=r),s>c?s=c:s<h&&(s=h),t.node.x=n,t.node.y=s},this.onTouchEnd=function(e){t.isMove&&t.savePosition();var i=t.node.getPosition();s.getDistanceTwoNode(t.startPosition,i)<10&&t.onCircleButtonClick()},this.onMouseEnter=function(t){t.stopPropagation()},this.initData()},onEnable:function(){this.addEventMove()},addEventMove:function(){this.circleButtonNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleGamesNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleGamesNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleGamesNode),cc.sys.isBrowser&&this.circleGamesNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.circleGamesNode)},removeEventMove:function(){this.circleButtonNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleGamesNode),this.circleButtonNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleGamesNode),this.circleButtonNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleGamesNode),cc.sys.isBrowser&&this.circleGamesNode.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.circleGamesNode)},initData:function(){this.initSaveData(),this.setShowCircleGames(this.isShow),this.node.setPosition(this.positionX,this.positionY)},initSaveData:function(){var t=cc.sys.localStorage.getItem(a.MINIGAME_IS_SHOW);"true"!==t&&!0!==t||(this.isShow=!0);var e=this.getTempData()[a.MINIGAME_POSITION];if(e){this.positionX=e.x,this.positionY=e.y;var i=cc.winSize;this.positionX>i.width/2?this.positionX=i.width/2:this.positionX<-i.width/2&&(this.positionX=-i.width/2),this.positionY>i.height/2?this.positionY=i.height/2:this.positionY<-i.height/2&&(this.positionY=-i.height/2)}},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[a.MINIGAME_POSITION]=t},onCircleButtonClick:function(){this.setShowCircleGamesWithAnimation(!this.isShow)},setShowCircleGames:function(t){this.circleGamesNode.active=t,this.isShow=t,cc.sys.localStorage.setItem(a.MINIGAME_IS_SHOW,this.isShow),t&&(this.circleGamesNode.opacity=255,this.circleGamesNode.angle=0,this.circleGamesNode.scale=1),this.TaiXiuTime.setPositionBymoveByMiniGameCircleShow(t)},setShowCircleGamesWithAnimation:function(t){this.circleGamesNode.stopAllActions(),this.isShow=t,cc.sys.localStorage.setItem(a.MINIGAME_IS_SHOW,this.isShow),t?(this.circleGamesNode.active=!0,this.circleGamesNode.opacity=0,this.circleGamesNode.angle=360,this.circleGamesNode.scale=0,this.circleGamesNode.runAction(cc.spawn(cc.scaleTo(o.MINIGAME_TIME_SHOW,1),cc.fadeIn(o.MINIGAME_TIME_SHOW),cc.rotateBy(o.MINIGAME_TIME_SHOW,360)))):this.circleGamesNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(o.MINIGAME_TIME_SHOW,0),cc.fadeOut(o.MINIGAME_TIME_SHOW),cc.rotateBy(o.MINIGAME_TIME_SHOW,-360)),cc.callFunc(function(){this.circleGamesNode.active=!1},this))),this.TaiXiuTime.moveByMiniGameCircleShow(t)},onTaiXiuClick:function(){this.MiniGame.TaiXiu.onTaiXiuClick(),this.MiniGame.TaiXiu.node.active&&this.setShowCircleGamesWithAnimation(!1)},onLuckyWheelClick:function(){this.MiniGame.LuckyWheel?(this.MiniGame.LuckyWheel.node.active=!0,this.MiniGame.LuckyWheel.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createLuckyWheel(),this.setShowCircleGamesWithAnimation(!1))},onMiniPokerClick:function(){this.MiniGame.MiniPoker?(this.MiniGame.MiniPoker.onMiniPokerClick(),this.MiniGame.MiniPoker.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createMiniPoker(),this.setShowCircleGamesWithAnimation(!1))},onMiniBaCayClick:function(){this.MiniGame.MiniBaCay?(this.MiniGame.MiniBaCay.onMiniBaCayClick(),this.MiniGame.MiniBaCay.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createMini3Cay(),this.setShowCircleGamesWithAnimation(!1))},onDiamondClick:function(){this.MiniGame.Diamond?(this.MiniGame.Diamond.onDiamondClick(),this.MiniGame.Diamond.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createDiamond(),this.setShowCircleGamesWithAnimation(!1))},onTrenDuoiClick:function(){this.MiniGame.TrenDuoi?(this.MiniGame.TrenDuoi.onTrenDuoiClick(),this.MiniGame.TrenDuoi.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createTrenDuoi(),this.setShowCircleGamesWithAnimation(!1))},onBomClick:function(){this.MiniGame.Bom?(this.MiniGame.Bom.onBomClick(),this.MiniGame.Bom.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createbom(),this.setShowCircleGamesWithAnimation(!1))},onWildClick:function(){this.MiniGame.Wild?(this.MiniGame.Wild.onWildClick(),this.MiniGame.Wild.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createWild(),this.setShowCircleGamesWithAnimation(!1))},onMiniGameLotteryClick:function(){this.MiniGame.MiniGameLottery?(this.MiniGame.MiniGameLottery.onMiniGameLotteryClick(),this.MiniGame.MiniGameLottery.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createLottery(),this.setShowCircleGamesWithAnimation(!1))},onBauCuaClick:function(){this.MiniGame.BauCua?(this.MiniGame.BauCua.onBauCuaClick(),this.MiniGame.BauCua.node.active&&this.setShowCircleGamesWithAnimation(!1)):(this.MiniGame.createBauCua(),this.setShowCircleGamesWithAnimation(!1))}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Config":"Config","../../util/NodeUtil":"NodeUtil","./MiniGameConstant":"MiniGameConstant","./tai-xiu/TaiXiuTime":"TaiXiuTime"}],MiniGameConstant:[function(t,e,i){"use strict";cc._RF.push(e,"09d1bQBbfpKw5vHATLCnIJ0","MiniGameConstant");e.exports={MINIGAME_IS_SHOW:"minigame_is_show",MINIGAME_POSITION:"minigame_position",MINIGAME_EVENT_TOP_POSITION:"minigame_event_top_position",JACKPOT_IS_SHOW:"jackpot_is_show",JACKPOT_POSITION:"jackpot_position",LUCKY_WHEEL_LAST_DATE_SHOW:"luckywheel_last_date_show",TAIXIU:"tai_xiu",MINI_POKER:"mini_poker",MINI_POKER_2:"minipoker",MINI_BACAY:"mini_3cay",MINI_BACAY_2:"MINI3CAY",LUCKY_WHEEL:"lucky_wheel",JACKPOT:"jackpot",DIAMOND:"diamond",DIAMOND_2:"DIAMOND",DIAMOND_2_1:"diamond2",DIAMOND_2_2:"DIAMOND2",TREN_DUOI:"hilo",BOM:"bom",BOM_2:"BOM",WILD:"wild",WILD_2:"WILD",MINIGAME_LOTTERY:"minigame_lottery",BAU_CUA:"hooheyhow",HU_LOC:"hu_loc",TAN_LOC:"tan_loc",INFO:"INFO",WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_JACKPOT:3,NAME_MINI_3CAY:"Mini Ba C\xe2y",NAME_MINI_POKER:"Mini Poker",NAME_DIAMOND:"Kim C\u01b0\u01a1ng",NUMBER_DETAIL_ITEM:9,TIME_AUTO_SPIN_WHEN_HIDE_TAB:5e3,URL_MINIGAME_BAU_CUA:"prefab/mini-game/bau-cua-node",URL_MINIGAME_BOM:"prefab/mini-game/bom-node",URL_MINIGAME_DIAMOND:"prefab/mini-game/diamond-node",URL_MINIGAME_LUCKY_WHEEL:"prefab/mini-game/lucky-wheel-node",URL_MINIGAME_MINI_3_CAY:"prefab/mini-game/mini-bacay-node",URL_MINIGAME_MINI_POKER:"prefab/mini-game/mini-poker-node",URL_MINIGAME_TREN_DUOI:"prefab/mini-game/tren-duoi-node",URL_MINIGAME_WILD:"prefab/mini-game/wild-node",URL_MINIGAME_LOTTERY:"prefab/mini-game/minigame-lottery-node"},cc._RF.pop()},{}],MiniGameLotteryBetItem:[function(t,e,i){"use strict";cc._RF.push(e,"45538fPTcND3bHodyIULiJR","MiniGameLotteryBetItem");var n=t("../minigame-lottery/MiniGameLotteryConstant"),o=t("../../../helper/Message"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{betRichText:cc.RichText},init:function(t){this.data=t;var e=t.type,i=t.bets,n=t.total_bets,o=this.getTypeName(e)+": "+this.getBetsString(i)+" - "+s.nFormatter(n);this.betRichText.string=o},getTypeName:function(t){switch(t){case n.TYPE_LO:return o.MINIGAME_LOTTERY_LO;case n.TYPE_XIEN_2:return o.MINIGAME_LOTTERY_XIEN_2;case n.TYPE_XIEN_3:return o.MINIGAME_LOTTERY_XIEN_3;case n.TYPE_XIEN_4:return o.MINIGAME_LOTTERY_XIEN_4;case n.TYPE_DE:return o.MINIGAME_LOTTERY_DE;case n.TYPE_DAU:return o.MINIGAME_LOTTERY_DAU;case n.TYPE_DUOI:return o.MINIGAME_LOTTERY_DUOI;case n.TYPE_HU:return o.MINIGAME_LOTTERY_HU;default:return""}},getBetsString:function(t){var e="";for(var i in t)e+=t[i]+" ";return e}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../minigame-lottery/MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryBets:[function(t,e,i){"use strict";cc._RF.push(e,"12dfbXWLjtBxKjNmMI0dSlp","MiniGameLotteryBets");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{totalMyBetLabel:cc.Label,totalBetsLabel:cc.Label,totalBetsAmountLabel:cc.Label,betsScrollView:cc.ScrollView,betItemPrefab:cc.Prefab},init:function(t){this.MiniGameLottery=t},onLoad:function(){},setBets:function(t){this.reset(),t.total_bets&&(this.totalBets=t.number_bets),t.total_bets&&(this.totalBetAmount=t.total_bets),this.bets=t.bets;var e=0;for(var i in this.bets){var n=cc.instantiate(this.betItemPrefab);n.getComponent("MiniGameLotteryBetItem").init(this.bets[i]),n.parent=this.betsScrollView.content,e+=this.bets[i].total_bets}this.setTotalMyBetLabel(e),this.initTotalBets()},setTotalMyBetLabel:function(t){this.totalMyBetLabel.string=n.numberWithCommas(t)},initTotalBets:function(){this.totalBetsLabel.string=n.numberWithCommas(this.totalBets),this.totalBetsAmountLabel.string=n.numberWithCommas(this.totalBetAmount)},setTotalBets:function(t){this.totalBets=t},getTotalBets:function(){return this.totalBets},setTotalBetAmount:function(t){this.totalBetAmount=t},getTotalBetAmount:function(){return this.totalBetAmount},reset:function(){this.totalBets=0,this.totalBetAmount=0,this.initTotalBets(),this.setTotalMyBetLabel(0),this.betsScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],MiniGameLotteryBoardItem:[function(t,e,i){"use strict";cc._RF.push(e,"04d0cIiuhlFZaJ0MMpLW4Rl","MiniGameLotteryBoardItem"),cc.Class({extends:cc.Component,properties:{selectNode:cc.Node,numberLabel:cc.Label},init:function(t,e){this.MiniGameLottery=t,this.number=e,this.numberLabel.string=e<10?"0"+e:e+""},onLoad:function(){},onClick:function(){this.selectNode.active=!this.selectNode.active,this.MiniGameLottery.MiniGameLotteryBoard.itemClick(this.number)},show:function(){this.selectNode.active=!0},hide:function(){this.selectNode.active=!1},isSelected:function(){return this.selectNode.active},getNumber:function(){return this.number}}),cc._RF.pop()},{}],MiniGameLotteryBoard:[function(t,e,i){"use strict";cc._RF.push(e,"46815sssa9MQ4L2sh053Z5v","MiniGameLotteryBoard");var n=t("./MiniGameLotteryConstant"),o=t("../../../helper/Message"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{boardLayoutNode:cc.Node,typeLabel:cc.Label,noteLabel:cc.Label,toastPrefab:cc.Prefab},init:function(t){this.MiniGameLottery=t},onLoad:function(){this.listBoardItems=[];for(var t=this.boardLayoutNode.getChildren(),e=0;e<t.length;e++){var i=t[e].getComponent("MiniGameLotteryBoardItem");i.init(this.MiniGameLottery,e),this.listBoardItems.push(i)}this.node.zIndex=1e5},onEnable:function(){this.listXien=[],this.hideAll(),this.initPosition()},initPosition:function(){this.node.parent=this.MiniGameLottery.controller.MiniGame.node,this.node.setPosition(0,0,0)},setType:function(t){this.type=t,this.typeLabel.string=this.getTypeName()},getTypeName:function(){switch(this.type){case n.TYPE_LO:return o.MINIGAME_LOTTERY_LO;case n.TYPE_XIEN_2:return o.MINIGAME_LOTTERY_XIEN_2;case n.TYPE_XIEN_3:return o.MINIGAME_LOTTERY_XIEN_3;case n.TYPE_XIEN_4:return o.MINIGAME_LOTTERY_XIEN_4;case n.TYPE_DE:return o.MINIGAME_LOTTERY_DE;case n.TYPE_DAU:return o.MINIGAME_LOTTERY_DAU;case n.TYPE_DUOI:return o.MINIGAME_LOTTERY_DUOI;case n.TYPE_HU:return o.MINIGAME_LOTTERY_HU;default:return null}},getListBets:function(){var t=[];switch(this.type){case n.TYPE_LO:case n.TYPE_XIEN_2:case n.TYPE_XIEN_3:case n.TYPE_XIEN_4:case n.TYPE_DE:case n.TYPE_HU:t=this.getListBetsSelected();break;case n.TYPE_DAU:t=this.getListBetsDau();break;case n.TYPE_DUOI:t=this.getListBetsDuoi()}return t},getListBetsSelected:function(){var t=[];for(var e in this.listBoardItems)this.listBoardItems[e].isSelected()&&t.push(this.listBoardItems[e].getNumber());return t},getListBetsDau:function(){var t=[],e=new Set;for(var i in this.listBoardItems)if(this.listBoardItems[i].isSelected()){var n=this.listBoardItems[i].getNumber();e.add(parseInt(n/10))}var o=!0,s=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var h=r.value;t.push(h)}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return t},getListBetsDuoi:function(){var t=[],e=new Set;for(var i in this.listBoardItems)if(this.listBoardItems[i].isSelected()){var n=this.listBoardItems[i].getNumber();e.add(n%10)}var o=!0,s=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var h=r.value;t.push(h)}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return t},itemClick:function(t){switch(this.type){case n.TYPE_LO:case n.TYPE_DE:case n.TYPE_HU:break;case n.TYPE_DAU:this.itemDauClick(t);break;case n.TYPE_DUOI:this.itemDuoiClick(t);break;case n.TYPE_XIEN_2:case n.TYPE_XIEN_3:case n.TYPE_XIEN_4:this.itemXienClick(t)}},itemDauClick:function(t){var e=parseInt(t/10);this.listBoardItems[t].isSelected()?this.showRow(e):this.hideRow(e)},itemDuoiClick:function(t){var e=t%10;this.listBoardItems[t].isSelected()?this.showColumn(e):this.hideColumn(e)},itemXienClick:function(t){if(this.listBoardItems[t].isSelected()){this.listXien.push(this.listBoardItems[t]);var e=this.getLengthXien();this.listXien.length>e&&(this.listXien[0].hide(),this.listXien.splice(0,1))}else for(var i=0;i<this.listXien.length;i++)if(this.listXien[i]===this.listBoardItems[t]){this.listXien.splice(i,1);break}},getLengthXien:function(){switch(this.type){case n.TYPE_XIEN_2:return 2;case n.TYPE_XIEN_3:return 3;case n.TYPE_XIEN_4:return 4;default:return 1}},onBetClick:function(){var t=this.getListBets();this.checkBetsValid(t)?(this.getContent().setBets(t),this.node.active=!1):this.showMessage(o.MINIGAME_LOTTERY_YOU_BET_NOT_VALID)},checkBetsValid:function(t){switch(this.type){case n.TYPE_LO:return t.length>0;case n.TYPE_XIEN_2:return 2===t.length;case n.TYPE_XIEN_3:return 3===t.length;case n.TYPE_XIEN_4:return 4===t.length;case n.TYPE_DE:case n.TYPE_DAU:case n.TYPE_DUOI:return t.length>0;case n.TYPE_HU:return 10===t.length;default:return!1}},getContent:function(){switch(this.type){case n.TYPE_LO:return this.MiniGameLottery.MiniGameLotteryContentLo;case n.TYPE_XIEN_2:case n.TYPE_XIEN_3:case n.TYPE_XIEN_4:return this.MiniGameLottery.MiniGameLotteryContentXien;case n.TYPE_DE:return this.MiniGameLottery.MiniGameLotteryContentDe;case n.TYPE_DAU:case n.TYPE_DUOI:return this.MiniGameLottery.MiniGameLotteryContentDauDuoi;case n.TYPE_HU:return this.MiniGameLottery.MiniGameLotteryContentHu;default:return null}},onCloseClick:function(){this.node.active=!1},showColumn:function(t){for(var e in this.listBoardItems){this.listBoardItems[e].getNumber()%10===t&&this.listBoardItems[e].show()}},hideColumn:function(t){for(var e in this.listBoardItems){this.listBoardItems[e].getNumber()%10===t&&this.listBoardItems[e].hide()}},showRow:function(t){for(var e in this.listBoardItems){var i=this.listBoardItems[e].getNumber();parseInt(i/10)===t&&this.listBoardItems[e].show()}},hideRow:function(t){for(var e in this.listBoardItems){var i=this.listBoardItems[e].getNumber();parseInt(i/10)===t&&this.listBoardItems[e].hide()}},hideAll:function(){for(var t in this.listBoardItems)this.listBoardItems[t].hide()},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=s.MINIGAME_SCALE_TOAST,e.setPosition(0,0),e.parent=this.node,e.getComponent("Toast").showToast(t)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","./MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryChat:[function(t,e,i){"use strict";cc._RF.push(e,"17d21ghjvFM0ZpBpx1ku1RU","MiniGameLotteryChat");var n=t("../../../util/BrowserUtil"),o=t("./MiniGameLotteryConstant");cc.Class({extends:cc.Component,properties:{chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView,chatEditBox:cc.EditBox},init:function(t){this.MiniGameLottery=t},onLoad:function(){this.number=0},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(0),this.number++},initChat:function(t){this.chatScrollView.content.removeAllChildren(!0),this.instanceChat(t),this.scrollToBottom()},addChat:function(t){this.instanceChat(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChat:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.instanceChatItem(t[e]);else this.instanceChatItem(t)},instanceChatItem:function(t){var e=e=cc.instantiate(this.chatItemPrefab);e.getComponent("MiniGameChatItem").init(t),e.parent=this.chatScrollView.content},scrollToBottom:function(){this.number=0},onCloseClick:function(){this.MiniGameLottery.getTempData()[o.IS_SHOW_CHAT]=!this.node.active,this.node.active=!this.node.active},onSendClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(""!==t.trim()){var e={msg:t};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(o.CHAT,e),this.chatEditBox.string=""}},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=150}}),cc._RF.pop()},{"../../../util/BrowserUtil":"BrowserUtil","./MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryConstant:[function(t,e,i){"use strict";cc._RF.push(e,"f566bO00/pBBJBqNLTP1jo/","MiniGameLotteryConstant");e.exports={REQUEST_START:"START",REQUEST_UPDATE:"UPDATE",REQUEST_BET:"BET",REQUEST_FINISH:"FINISH",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_CHAT:"CHAT",GET_TOP_2:"GET_TOP",ADD_EVENT:"minigame_lottery.ADD_EVENT",REMOVE_EVENT:"minigame_lottery.REMOVE_EVENT",BET:"minigame_lottery.BET",CHAT:"minigame_lottery.CHAT",IS_SHOW:"minigame_lottery_is_show",IS_SHOW_CHAT:"minigame_lottery_is_show_chat",POSITION:"minigame_lottery_position",GET_TOP:"minigame_lottery.GET_TOP",TYPE_LO:"LO",TYPE_XIEN_2:"XIEN_2",TYPE_XIEN_3:"XIEN_3",TYPE_XIEN_4:"XIEN_4",TYPE_DE:"DE",TYPE_DAU:"DAU",TYPE_DUOI:"DUOI",TYPE_HU:"HU"},cc._RF.pop()},{}],MiniGameLotteryContentDauDuoi:[function(t,e,i){"use strict";cc._RF.push(e,"82c9bUxOZRCPJFXyDPcFhJh","MiniGameLotteryContentDauDuoi");var n=t("../MiniGameLotteryConstant"),o=t("../../../../util/FormatUtil"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{dauButtonOnNode:cc.Node,dauButtonOffNode:cc.Node,duoiButtonOnNode:cc.Node,duoiButtonOffNode:cc.Node,amountLabel:cc.Label,betsLabel:cc.Label},init:function(t){this.MiniGameLottery=t,this.MiniGameLotteryUI=t.MiniGameLotteryUI},onLoad:function(){},onEnable:function(){this.bets=[],this.initBetsLabel(),this.onDauClick()},onDauClick:function(){this.type=n.TYPE_DAU,this.dauButtonOnNode.active=!0,this.dauButtonOffNode.active=!1,this.duoiButtonOnNode.active=!1,this.duoiButtonOffNode.active=!0},onDuoiClick:function(){this.type=n.TYPE_DUOI,this.dauButtonOnNode.active=!1,this.dauButtonOffNode.active=!0,this.duoiButtonOnNode.active=!0,this.duoiButtonOffNode.active=!1},onNumberClick:function(){this.MiniGameLotteryUI.showBetsNode(),this.MiniGameLottery.MiniGameLotteryBoard.setType(this.type),this.MiniGameLotteryUI.showBoardNode()},onAmountClick:function(){this.MiniGameLotteryUI.showQuickSelectNode(),this.MiniGameLottery.MiniGameLotteryQuickSelect.setType(this.type)},onBetClick:function(){this.MiniGameLotteryUI.showBetsNode();var t=this.getAmount(),e=this.getBets();if(t>0)if(e.length>0){var i={bets:e,type:this.type,amount:t};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(n.BET,i)}else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_PLEASE_SELECT_BET);else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_YOU_NOT_BET)},initBetsLabel:function(){var t="";for(var e in this.bets)t+=this.bets[e]+" ";this.betsLabel.string=t},setBets:function(t){this.bets=t,this.initBetsLabel()},getBets:function(){return this.bets},getAmount:function(){return parseInt(o.getOnlyNumberInString(this.amountLabel.string))||0},setAmount:function(t){this.amountLabel.string=o.numberWithCommas(t)},resetAmount:function(){this.setAmount(0)},reset:function(){this.setAmount(0)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryContentDe:[function(t,e,i){"use strict";cc._RF.push(e,"d653fMOFJ9MUocUKAmaTVgb","MiniGameLotteryContentDe");var n=t("../MiniGameLotteryConstant"),o=t("../../../../util/FormatUtil"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{amountLabel:cc.Label,betsLabel:cc.Label},init:function(t){this.MiniGameLottery=t,this.MiniGameLotteryUI=t.MiniGameLotteryUI},onLoad:function(){},onEnable:function(){this.bets=[],this.initBetsLabel()},onNumberClick:function(){this.MiniGameLotteryUI.showBetsNode(),this.MiniGameLottery.MiniGameLotteryBoard.setType(n.TYPE_DE),this.MiniGameLotteryUI.showBoardNode()},onAmountClick:function(){this.MiniGameLotteryUI.showQuickSelectNode(),this.MiniGameLottery.MiniGameLotteryQuickSelect.setType(n.TYPE_DE)},onBetClick:function(){this.MiniGameLotteryUI.showBetsNode();var t=this.getAmount(),e=this.getBets();if(t>0)if(e.length>0){var i={bets:e,type:n.TYPE_DE,amount:t};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(n.BET,i)}else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_PLEASE_SELECT_BET);else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_YOU_NOT_BET)},initBetsLabel:function(){var t="";for(var e in this.bets)t+=this.bets[e]+" ";this.betsLabel.string=t},setBets:function(t){this.bets=t,this.initBetsLabel()},getBets:function(){return this.bets},getAmount:function(){return parseInt(o.getOnlyNumberInString(this.amountLabel.string))||0},setAmount:function(t){this.amountLabel.string=o.numberWithCommas(t)},resetAmount:function(){this.setAmount(0)},reset:function(){this.setAmount(0)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryContentHu:[function(t,e,i){"use strict";cc._RF.push(e,"9f3a66oUdhFoa7MvIcuXqrf","MiniGameLotteryContentHu");var n=t("../MiniGameLotteryConstant"),o=(t("../../../../util/FormatUtil"),t("../../../../helper/Message"));cc.Class({extends:cc.Component,properties:{betsLabel:cc.Label},init:function(t){this.MiniGameLottery=t,this.MiniGameLotteryUI=t.MiniGameLotteryUI},onLoad:function(){},onEnable:function(){this.bets=[],this.initBetsLabel()},onNumberClick:function(){this.MiniGameLotteryUI.showBetsNode(),this.MiniGameLottery.MiniGameLotteryBoard.setType(n.TYPE_HU),this.MiniGameLotteryUI.showBoardNode()},onBetClick:function(){this.MiniGameLotteryUI.showBetsNode();var t=this.getBets();if(10===t.length){var e={bets:t,type:n.TYPE_HU,amount:1e4};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(n.BET,e)}else this.MiniGameLottery.showMessage(o.MINIGAME_LOTTERY_PLEASE_SELECT_BET)},initBetsLabel:function(){var t="";for(var e in this.bets)t+=this.bets[e]+" ";this.betsLabel.string=t},setBets:function(t){this.bets=t,this.initBetsLabel()},getBets:function(){return this.bets},reset:function(){}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryContentLo:[function(t,e,i){"use strict";cc._RF.push(e,"7bd5bz4hCtCBrlDqacYSVv8","MiniGameLotteryContentLo");var n=t("../MiniGameLotteryConstant"),o=t("../../../../util/FormatUtil"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{amountLabel:cc.Label,betsLabel:cc.Label},init:function(t){this.MiniGameLottery=t,this.MiniGameLotteryUI=t.MiniGameLotteryUI},onLoad:function(){},onEnable:function(){this.bets=[],this.initBetsLabel()},onNumberClick:function(){this.MiniGameLotteryUI.showBetsNode(),this.MiniGameLottery.MiniGameLotteryBoard.setType(n.TYPE_LO),this.MiniGameLotteryUI.showBoardNode()},onAmountClick:function(){this.MiniGameLotteryUI.showQuickSelectNode(),this.MiniGameLottery.MiniGameLotteryQuickSelect.setType(n.TYPE_LO)},onBetClick:function(){this.MiniGameLotteryUI.showBetsNode();var t=this.getAmount(),e=this.getBets();if(t>0)if(e.length>0){var i={bets:e,type:n.TYPE_LO,amount:t};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(n.BET,i)}else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_PLEASE_SELECT_BET);else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_YOU_NOT_BET)},initBetsLabel:function(){var t="";for(var e in this.bets)t+=this.bets[e]+" ";this.betsLabel.string=t},setBets:function(t){this.bets=t,this.initBetsLabel()},getBets:function(){return this.bets},getAmount:function(){return parseInt(o.getOnlyNumberInString(this.amountLabel.string))||0},setAmount:function(t){this.amountLabel.string=o.numberWithCommas(t)},resetAmount:function(){this.setAmount(0)},reset:function(){this.setAmount(0)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryContentXien:[function(t,e,i){"use strict";cc._RF.push(e,"de311AuqmhM8JST/WGXk4zk","MiniGameLotteryContentXien");var n=t("../MiniGameLotteryConstant"),o=t("../../../../util/FormatUtil"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{xien2ButtonOnNode:cc.Node,xien2ButtonOffNode:cc.Node,xien3ButtonOnNode:cc.Node,xien3ButtonOffNode:cc.Node,xien4ButtonOnNode:cc.Node,xien4ButtonOffNode:cc.Node,amountLabel:cc.Label,rateLabel:cc.Label,betsLabel:cc.Label},init:function(t){this.MiniGameLottery=t,this.MiniGameLotteryUI=t.MiniGameLotteryUI},onLoad:function(){},onEnable:function(){this.onXien2Click()},onXien2Click:function(){this.type=n.TYPE_XIEN_2,this.xien2ButtonOnNode.active=!0,this.xien2ButtonOffNode.active=!1,this.xien3ButtonOnNode.active=!1,this.xien3ButtonOffNode.active=!0,this.xien4ButtonOnNode.active=!1,this.xien4ButtonOffNode.active=!0,this.rateLabel.string="X11",this.bets=[],this.initBetsLabel()},onXien3Click:function(){this.type=n.TYPE_XIEN_3,this.xien2ButtonOnNode.active=!1,this.xien2ButtonOffNode.active=!0,this.xien3ButtonOnNode.active=!0,this.xien3ButtonOffNode.active=!1,this.xien4ButtonOnNode.active=!1,this.xien4ButtonOffNode.active=!0,this.rateLabel.string="X45",this.bets=[],this.initBetsLabel()},onXien4Click:function(){this.type=n.TYPE_XIEN_4,this.xien2ButtonOnNode.active=!1,this.xien2ButtonOffNode.active=!0,this.xien3ButtonOnNode.active=!1,this.xien3ButtonOffNode.active=!0,this.xien4ButtonOnNode.active=!0,this.xien4ButtonOffNode.active=!1,this.rateLabel.string="X115",this.bets=[],this.initBetsLabel()},onNumberClick:function(){this.MiniGameLotteryUI.showBetsNode(),this.MiniGameLottery.MiniGameLotteryBoard.setType(this.type),this.MiniGameLotteryUI.showBoardNode()},onAmountClick:function(){this.MiniGameLotteryUI.showQuickSelectNode(),this.MiniGameLottery.MiniGameLotteryQuickSelect.setType(this.type)},onBetClick:function(){this.MiniGameLotteryUI.showBetsNode();var t=this.getAmount(),e=this.getBets();if(t>0)if(e.length>0){var i={bets:e,type:this.type,amount:t};this.MiniGameLottery.sendRequest.sendNoPrefixToZone(n.BET,i)}else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_PLEASE_SELECT_BET);else this.MiniGameLottery.showMessage(s.MINIGAME_LOTTERY_YOU_NOT_BET)},initBetsLabel:function(){var t="";for(var e in this.bets)t+=this.bets[e]+" ";this.betsLabel.string=t},setBets:function(t){this.bets=t,this.initBetsLabel()},getBets:function(){return this.bets},getAmount:function(){return parseInt(o.getOnlyNumberInString(this.amountLabel.string))||0},setAmount:function(t){this.amountLabel.string=o.numberWithCommas(t)},resetAmount:function(){this.setAmount(0)},reset:function(){this.setAmount(0)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryHistories:[function(t,e,i){"use strict";cc._RF.push(e,"653e0Aa5HBKpqrDOsgfi76c","MiniGameLotteryHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryMiniGameLottery(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("MiniGameLotteryHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],MiniGameLotteryHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a3a48CfGe1NH6mcBhe7/Tax","MiniGameLotteryHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,typeLabel:cc.Label,betLabel:cc.Label,detailLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},start:function(){},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.typeLabel.string=t.type,this.betLabel.string=n.numberWithCommas(t.amount),this.detailLabel.string=t.bets,this.getLabel.string=n.numberWithCommas(t.result_amount);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],MiniGameLotteryNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"f8b255gCBRCSaLdmGTXbLC6","MiniGameLotteryNumberItem"),cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},init:function(t){this.MiniGameLottery=t},onLoad:function(){},onNumberClick:function(){var t=this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().getAmount()+""+this.numberLabel.string;this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().setAmount(t)},onBackClick:function(){var t=this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().getAmount(),e=(t+="").slice(0,-1);this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().setAmount(e)}}),cc._RF.pop()},{}],MiniGameLotteryQuickSelect:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"aefe9YbFe1BKY6bVgZ/oZXZ","MiniGameLotteryQuickSelect");var s=t("../../../helper/Config"),a=t("../item/MiniGameLotterySelectItem"),r=t("../item/MiniGameLotteryNumberItem"),c=t("./MiniGameLotteryConstant");cc.Class((o(n={extends:cc.Component,properties:{selectNode:cc.Node,numberNode:cc.Node,selectButtonNode:cc.Node,numberButtonNode:cc.Node,listSelectItem:[a],listNumberItem:[r]},init:function(t){this.MiniGameLottery=t},onLoad:function(){this.initData()},initData:function(){for(var t=0;t<this.listSelectItem.length;t++)this.listSelectItem[t].init(this.MiniGameLottery,s.MINIGAME_LOTTERY_LIST_SELECT[t]);for(var e=0;e<this.listNumberItem.length;e++)this.listNumberItem[e].init(this.MiniGameLottery)},setType:function(t){this.type=t},onSelectClick:function(){this.selectNode.active=!0,this.numberNode.active=!1,this.selectButtonNode.active=!1,this.numberButtonNode.active=!0,this.getContent().resetAmount()},onNumberClick:function(){this.selectNode.active=!1,this.numberNode.active=!0,this.selectButtonNode.active=!0,this.numberButtonNode.active=!1,this.getContent().resetAmount()},getContent:function(){switch(this.type){case c.TYPE_LO:return this.MiniGameLottery.MiniGameLotteryContentLo;case c.TYPE_XIEN_2:case c.TYPE_XIEN_3:case c.TYPE_XIEN_4:return this.MiniGameLottery.MiniGameLotteryContentXien;case c.TYPE_DE:return this.MiniGameLottery.MiniGameLotteryContentDe;case c.TYPE_DAU:case c.TYPE_DUOI:return this.MiniGameLottery.MiniGameLotteryContentDauDuoi;case c.TYPE_HU:return this.MiniGameLottery.MiniGameLotteryContentHu;default:return null}},onBetClick:function(){this.MiniGameLottery.MiniGameLotteryUI.showBetsNode()}},"setType",function(t){this.type=t}),o(n,"onCloseClick",function(){this.getContent().resetAmount(),this.MiniGameLottery.MiniGameLotteryUI.showBetsNode()}),n)),cc._RF.pop()},{"../../../helper/Config":"Config","../item/MiniGameLotteryNumberItem":"MiniGameLotteryNumberItem","../item/MiniGameLotterySelectItem":"MiniGameLotterySelectItem","./MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotteryResults:[function(t,e,i){"use strict";cc._RF.push(e,"fe5a7hHRQdDEbvH49iDSLJO","MiniGameLotteryResults");var n=t("../../../helper/Message"),o=t("./MiniGameLotteryConstant");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,previousButtonNode:cc.Node,nextButtonNode:cc.Node,resultsRichText:[cc.RichText]},init:function(t){this.MiniGameLottery=t},onLoad:function(){},onDisable:function(){clearInterval(this.resultInterval)},setResults:function(t){this.results=t,t.length>0&&(this.index=t.length-1,this.initResult())},onPreviousClick:function(){this.index-=1,this.initResult()},onNextClick:function(){this.index+=1,this.initResult()},initResult:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearInterval(this.resultInterval);var e=this.results[this.index],i=e.results;if(this.idLabel.string=String.format(n.MINIGAME_ID,e.match_game_id),t){for(var o=0;o<this.resultsRichText.length;o++)this.resultsRichText[o].string="";var s=i.length-1;this.resultInterval=setInterval(function(){var t=i[s],e=this.isWinNumber(t),o=e?"<u>"+t+"</u>":t,a=parseInt(t/10);if(0===s){this.resultsRichText[a].string+=e?"<color=red>"+o+"</color> ":"<color=yellow>"+o+"</color> ";try{0!==this.MiniGameLottery.data.amount_change&&this.MiniGameLottery.MiniGameResult.show(this.MiniGameLottery.data.amount_change,n.MINIGAME_LOTTERY_RESULT)}catch(t){}}else this.resultsRichText[a].string+=e?"<color=green>"+o+"</color> ":o+" ";if(-1===--s){clearInterval(this.resultInterval);var r=this.getAmountChangeJackpot();r>0&&this.MiniGameLottery.MiniGameLotteryUI.showJackPot(r,!0)}}.bind(this),500)}else for(var a=0;a<this.resultsRichText.length;a++)this.resultsRichText[a].string=this.getTextByIndex(a);this.previousButtonNode.active=!0,this.nextButtonNode.active=!0,0===this.index&&(this.previousButtonNode.active=!1),this.index===this.results.length-1&&(this.nextButtonNode.active=!1)},getTextByIndex:function(t){var e="",i=[];for(var n in this.results[this.index].results)i.push(this.results[this.index].results[n]);var o=i[0],s=!1;i=i.sort(function(t,e){return t-e});for(var a=0;a<i.length;a++){parseInt(i[a]/10)===t&&(i[a]!==o||s?e+=i[a]:(e+="<color=yellow>"+i[a]+"</color>",s=!0),e+=" ")}return e},showResult:function(t){this.bets_win=t.bets_win;var e={match_game_id:this.MiniGameLottery.getMatchGameId(),total_bets:this.MiniGameLottery.MiniGameLotteryBets.getTotalBets(),total_bet_amount:this.MiniGameLottery.MiniGameLotteryBets.getTotalBetAmount(),results:t.result};this.results.push(e),this.index=this.results.length-1,this.initResult(!0)},isWinNumber:function(t){var e=this.getListBetsWinNumber();for(var i in e)if(t===e[i])return!0;return!1},getListBetsWinNumber:function(){if(this.bets_win){var t=[];for(var e in this.bets_win)if(this.bets_win[e].type===o.TYPE_LO||this.bets_win[e].type===o.TYPE_DE){var i=this.bets_win[e].bets;for(var n in i)t.push(i[n])}return t}return[]},getAmountChangeJackpot:function(){if(this.bets_win)for(var t in this.bets_win)if(this.bets_win[t].type===o.TYPE_HU)return this.bets_win[t].amount_change;return 0}}),cc._RF.pop()},{"../../../helper/Message":"Message","./MiniGameLotteryConstant":"MiniGameLotteryConstant"}],MiniGameLotterySelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"d99222jH0RJaYKS7X08zRSh","MiniGameLotterySelectItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label},init:function(t,e){this.MiniGameLottery=t,this.value=e,this.nameLabel.string=n.nFormatter(e)},onLoad:function(){},onClick:function(){var t=this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().getAmount()+this.value;this.MiniGameLottery.MiniGameLotteryQuickSelect.getContent().setAmount(t)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],MiniGameLotteryState:[function(t,e,i){"use strict";cc._RF.push(e,"498ackvSBRKIKHpuLwpIZp7","MiniGameLotteryState");e.exports={currentState:null,STOP:"STOP",BETTING:"BETTING",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setStop:function(){this.currentState=this.STOP},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isStop:function(){return this.currentState===this.STOP},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],MiniGameLotteryTime:[function(t,e,i){"use strict";cc._RF.push(e,"97db0+3fGpLCp506lfkgTdD","MiniGameLotteryTime"),cc.Class({extends:cc.Component,properties:{timeNode:cc.Node,spinNode:cc.Node,timeLabel:cc.Label},init:function(t){this.MiniGameLottery=t},onLoad:function(){},onDisable:function(){clearInterval(this.timeInterval),clearTimeout(this.spinTimeout)},showResults:function(t){this.showSpinNode(),clearInterval(this.spinTimeout),this.spinTimeout=setTimeout(function(){this.showTimeNode(),this.MiniGameLottery.MiniGameLotteryResults.showResult(t)}.bind(this),2e3)},setTime:function(t){this.time=t,this.setTimeLabel(t),clearInterval(this.timeInterval),this.time>0&&(this.MiniGameLottery.MiniGameLotteryState.isBetting()?this.timeLabel.node.color=new cc.Color(46,255,128,255):this.timeLabel.node.color=new cc.Color(65,65,255,255),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3))},setTimeLabel:function(t){this.timeLabel.string=parseInt(t)},showTimeNode:function(){this.timeNode.active=!0,this.spinNode.active=!1},showSpinNode:function(){this.timeNode.active=!1,this.spinNode.active=!0},reset:function(){this.setTimeLabel(0),this.showTimeNode()}}),cc._RF.pop()},{}],MiniGameLotteryUI:[function(t,e,i){"use strict";cc._RF.push(e,"bfe7cko8bNP8JCJag9m5e7v","MiniGameLotteryUI"),cc.Class({extends:cc.Component,properties:{loButtonOnNode:cc.Node,loButtonOffNode:cc.Node,xienButtonOnNode:cc.Node,xienButtonOffNode:cc.Node,deButtonOnNode:cc.Node,deButtonOffNode:cc.Node,dauDuoiButtonOffNode:cc.Node,dauDuoiButtonOnNode:cc.Node,huButtonOffNode:cc.Node,huButtonOnNode:cc.Node,loContentNode:cc.Node,xienContentNode:cc.Node,deContentNode:cc.Node,dauDuoiContentNode:cc.Node,huContentNode:cc.Node,betsNode:cc.Node,quickSelectNode:cc.Node,boardNode:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node},onLoad:function(){},showBetsNode:function(){this.betsNode.active=!0,this.quickSelectNode.active=!1},showQuickSelectNode:function(){this.betsNode.active=!1,this.quickSelectNode.active=!0},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},showLo:function(){this.initBeforeClick(),this.loButtonOnNode.active=!0,this.loButtonOffNode.active=!1,this.loContentNode.active=!0},showXien:function(){this.initBeforeClick(),this.xienButtonOnNode.active=!0,this.xienButtonOffNode.active=!1,this.xienContentNode.active=!0},showDe:function(){this.initBeforeClick(),this.deButtonOnNode.active=!0,this.deButtonOffNode.active=!1,this.deContentNode.active=!0},showDauDuoi:function(){this.initBeforeClick(),this.dauDuoiButtonOnNode.active=!0,this.dauDuoiButtonOffNode.active=!1,this.dauDuoiContentNode.active=!0},showHu:function(){this.initBeforeClick(),this.huButtonOnNode.active=!0,this.huButtonOffNode.active=!1,this.huContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.loButtonOffNode.active=!0,this.xienButtonOffNode.active=!0,this.deButtonOffNode.active=!0,this.dauDuoiButtonOffNode.active=!0,this.huButtonOffNode.active=!0},hideAllOnButtons:function(){this.loButtonOnNode.active=!1,this.xienButtonOnNode.active=!1,this.deButtonOnNode.active=!1,this.dauDuoiButtonOnNode.active=!1,this.huButtonOnNode.active=!1},hideAllContents:function(){this.loContentNode.active=!1,this.xienContentNode.active=!1,this.deContentNode.active=!1,this.dauDuoiContentNode.active=!1,this.huContentNode.active=!1},showBoardNode:function(){this.boardNode.active=!0},hideBoardNode:function(){this.boardNode.active=!1},reset:function(){this.showBetsNode()}}),cc._RF.pop()},{}],MiniGameLottery:[function(t,e,i){"use strict";cc._RF.push(e,"7c4141TE2dP/7sDXXyf5MYw","MiniGameLottery");var n=t("../../../base/BaseController"),o=t("./MiniGameLotteryState"),s=t("./MiniGameLotteryConstant"),a=t("./MiniGameLotteryTime"),r=t("./MiniGameLotteryResults"),c=t("./MiniGameLotteryBets"),h=t("./MiniGameLotteryQuickSelect"),l=t("./MiniGameLotteryBoard"),u=t("./MiniGameLotteryChat"),d=t("./MiniGameLotteryUI"),m=t("./content/MiniGameLotteryContentLo"),f=t("./content/MiniGameLotteryContentXien"),p=t("./content/MiniGameLotteryContentDe"),_=t("./content/MiniGameLotteryContentDauDuoi"),S=t("./content/MiniGameLotteryContentHu"),g=t("../item/JackpotItem"),C=t("../MiniGameResult"),N=t("../../../helper/Config"),E=t("../../../helper/Constant"),T=t("../../../helper/Message"),I=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,jackpotItem:g,MiniGameResult:C,MiniGameLotteryTime:a,MiniGameLotteryResults:r,MiniGameLotteryBets:c,MiniGameLotteryQuickSelect:h,MiniGameLotteryBoard:l,MiniGameLotteryChat:u,MiniGameLotteryUI:d,MiniGameLotteryContentLo:m,MiniGameLotteryContentXien:f,MiniGameLotteryContentDe:p,MiniGameLotteryContentDauDuoi:_,MiniGameLotteryContentHu:S,toastPrefab:cc.Prefab},init:function(t){this.controller=t},onLoad:function(){this._super(),this.MiniGameLotteryState=o,this.MiniGameLotteryTime.init(this),this.MiniGameLotteryResults.init(this),this.MiniGameLotteryBets.init(this),this.MiniGameLotteryQuickSelect.init(this),this.MiniGameLotteryBoard.init(this),this.MiniGameLotteryChat.init(this),this.MiniGameLotteryContentLo.init(this),this.MiniGameLotteryContentXien.init(this),this.MiniGameLotteryContentDe.init(this),this.MiniGameLotteryContentDauDuoi.init(this),this.MiniGameLotteryContentHu.init(this),this.initData()},onEnable:function(){this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),clearTimeout(this.resultTimeout),clearTimeout(this.timeOutGetFinish),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){!1===this.getTempData()[s.IS_SHOW_CHAT]&&(this.MiniGameLotteryChat.node.active=!1)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_START:this.handleStart(i);break;case s.REQUEST_UPDATE:this.handleUpdate(i);break;case s.REQUEST_BET:this.handleBet(i);break;case s.REQUEST_FINISH:this.handleFinish(i);break;case s.REQUEST_CHAT:this.handleChat(i);break;case s.REQUEST_MESSAGE:this.handleMessage(n);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataMiniGameLottery(i)}},handleInfo:function(t){this.data=t,this.matchGameId=t.match_game_id,this.idLabel.string=String.format(T.MINIGAME_ID,t.match_game_id),this.MiniGameLotteryState.setState(t.state),this.MiniGameLotteryTime.setTime(t.time_remain),this.MiniGameLotteryBets.setBets(t),this.MiniGameLotteryResults.setResults(t.histories),this.initJackpot(),this.initChat()},handleStart:function(t){this.data=t,this.matchGameId=t.match_game_id,this.idLabel.string=String.format(T.MINIGAME_ID,t.match_game_id),this.MiniGameLotteryState.setBetting(),this.MiniGameLotteryTime.setTime(t.time_remain),this.MiniGameLotteryBets.reset()},handleUpdate:function(t){this.data.jackpot=t.jackpot,this.initJackpot(),this.MiniGameLotteryBets.setTotalBets(t.number_bets),this.MiniGameLotteryBets.setTotalBetAmount(t.total_bets),this.MiniGameLotteryBets.initTotalBets()},handleBet:function(t){this.MiniGameLotteryBets.setBets(t),this.MiniGameLotteryBoard.getContent().reset()},handleFinish:function(t){this.data=t,this.MiniGameLotteryState.setFinish(),this.MiniGameLotteryTime.setTime(t.time_remain),this.MiniGameLotteryTime.showResults(t)},handleChat:function(t){this.MiniGameLotteryChat.addChat(t)},handleMessage:function(t){this.showMessage(t)},initJackpot:function(){this.data&&this.jackpotItem.setMoney(this.data.jackpot)},initChat:function(){this.data&&this.MiniGameLotteryChat.initChat(this.data.chats)},setShowMiniGameLottery:function(t){this.node.active=t,this.isShow=t,this.getTempData()[s.IS_SHOW]=this.isShow},onMiniGameLotteryClick:function(){this.setShowMiniGameLottery(!this.node.active)},onCloseClick:function(){this.setShowMiniGameLottery(!1)},onHistoryClick:function(){this.controller.MiniGame.GameMiniHistory.showMiniGameLotteryHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(E.MINIGAME_LOTTERY)},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(I.MINIGAME_LOTTERY),this.controller.MiniGame.GameMiniRank.showDialog(),this.controller.MiniGame.GameMiniRank.onMoneyClick()},onLoClick:function(){this.MiniGameLotteryUI.showLo()},onXienClick:function(){this.MiniGameLotteryUI.showXien()},onDeClick:function(){this.MiniGameLotteryUI.showDe()},onDauDuoiClick:function(){this.MiniGameLotteryUI.showDauDuoi()},onHuClick:function(){this.MiniGameLotteryUI.showHu()},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=N.MINIGAME_SCALE_TOAST,e.setPosition(N.MINIGAME_POSITION_TOAST_X,N.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},getMatchGameId:function(){return this.matchGameId},reset:function(){this.MiniGameLotteryTime.reset(),this.MiniGameLotteryBets.reset(),this.MiniGameLotteryUI.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","./MiniGameLotteryBets":"MiniGameLotteryBets","./MiniGameLotteryBoard":"MiniGameLotteryBoard","./MiniGameLotteryChat":"MiniGameLotteryChat","./MiniGameLotteryConstant":"MiniGameLotteryConstant","./MiniGameLotteryQuickSelect":"MiniGameLotteryQuickSelect","./MiniGameLotteryResults":"MiniGameLotteryResults","./MiniGameLotteryState":"MiniGameLotteryState","./MiniGameLotteryTime":"MiniGameLotteryTime","./MiniGameLotteryUI":"MiniGameLotteryUI","./content/MiniGameLotteryContentDauDuoi":"MiniGameLotteryContentDauDuoi","./content/MiniGameLotteryContentDe":"MiniGameLotteryContentDe","./content/MiniGameLotteryContentHu":"MiniGameLotteryContentHu","./content/MiniGameLotteryContentLo":"MiniGameLotteryContentLo","./content/MiniGameLotteryContentXien":"MiniGameLotteryContentXien"}],MiniGameResultTaiXiu:[function(t,e,i){"use strict";cc._RF.push(e,"dba1aM0OQFE15apQTmxKBsW","MiniGameResultTaiXiu");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{effectNode:cc.Node,winNode:cc.Node,loseNode:cc.Node,addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label,messageLabel:cc.Label,messageNode:cc.Node},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},show:function(t,e){this.reset(),(t=parseInt(t))>0?(this.node.active=!0,this.winNode.active=!0,this.addBalanceLabel.node.active=!0,this.addBalanceLabel.string="+"+n.numberWithCommas(t),this.initTimeout()):(this.node.active=!0,this.loseNode.active=!0,this.minusBalanceLabel.node.active=!0,this.minusBalanceLabel.string=n.numberWithCommas(t),this.initTimeout())},initTimeout:function(){clearTimeout(this.timeoutHide),this.timeoutHide=setTimeout(function(){this.node.active=!1}.bind(this),2500)},reset:function(){clearTimeout(this.timeoutHide),this.node.active=!1,this.loseNode.active=!1,this.winNode.active=!1,this.addBalanceLabel.node.active=!1,this.minusBalanceLabel.node.active=!1,this.messageNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],MiniGameResult:[function(t,e,i){"use strict";cc._RF.push(e,"4c92cMAdRtMU6hKWV2jlhwH","MiniGameResult");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label,messageLabel:cc.Label,messageNode:cc.Node,resultAnimation:cc.Animation},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},show:function(t,e){this.reset(),(t=parseInt(t))>0?(this.node.active=!0,this.addBalanceLabel.node.active=!0,this.addBalanceLabel.string="+"+n.numberWithCommas(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout()):0!==t&&(this.node.active=!0,this.minusBalanceLabel.node.active=!0,this.minusBalanceLabel.string=n.numberWithCommas(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout())},initTimeout:function(){clearTimeout(this.timeoutHide),this.timeoutHide=setTimeout(function(){this.node.active=!1}.bind(this),1e3*this.resultAnimation.defaultClip.duration)},reset:function(){clearTimeout(this.timeoutHide),this.node.active=!1,this.addBalanceLabel.node.active=!1,this.minusBalanceLabel.node.active=!1,this.messageNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],MiniGameXPer:[function(t,e,i){"use strict";cc._RF.push(e,"21b28b7S0JLRJSUMYiMNW3W","MiniGameXPer"),cc.Class({extends:cc.Component,properties:{eventNode:cc.Node,xperSprite:cc.Sprite,x2Mini:cc.SpriteFrame,x3Mini:cc.SpriteFrame,x4Mini:cc.SpriteFrame,x5Mini:cc.SpriteFrame,x6Mini:cc.SpriteFrame,x7Mini:cc.SpriteFrame,x8Mini:cc.SpriteFrame,x9Mini:cc.SpriteFrame,x10Mini:cc.SpriteFrame,x2Game:cc.SpriteFrame,x3Game:cc.SpriteFrame,x4Game:cc.SpriteFrame,x5Game:cc.SpriteFrame,x6Game:cc.SpriteFrame,x7Game:cc.SpriteFrame,x8Game:cc.SpriteFrame,x9Game:cc.SpriteFrame,x10Game:cc.SpriteFrame},onLoad:function(){this.hideX()},setXJackpot:function(t){this.hideX(),t>1&&this.showXJackpot(t)},setXMiniGame:function(t){this.hideX(),t>1&&this.showXGame(t)},showEventNode:function(t){if(this.hideX(),t)for(var e in t)t[e]>1&&(this.eventNode.active=!0)},showXGame:function(t){this.xperSprite.node.active=!0;var e=void 0;switch(t){case 2:e=this.x2Mini;break;case 3:e=this.x3Mini;break;case 4:e=this.x4Mini;break;case 5:e=this.x5Mini;break;case 6:e=this.x6Mini;break;case 7:e=this.x7Mini;break;case 8:e=this.x8Mini;break;case 9:e=this.x9Mini;break;case 10:e=this.x10Mini}e&&(this.xperSprite.spriteFrame=e)},showXJackpot:function(t){this.xperSprite.node.active=!0;var e=void 0;switch(t){case 2:e=this.x2Game;break;case 3:e=this.x3Game;break;case 4:e=this.x4Game;break;case 5:e=this.x5Game;break;case 6:e=this.x6Game;break;case 7:e=this.x7Game;break;case 8:e=this.x8Game;break;case 9:e=this.x9Game;break;case 10:e=this.x10Game}e&&(this.xperSprite.spriteFrame=e)},hideX:function(){this.xperSprite.node.active=!1,this.eventNode&&(this.eventNode.active=!1)}}),cc._RF.pop()},{}],MiniGame:[function(t,e,i){"use strict";cc._RF.push(e,"719e2f8spZEQokfMWimbxvq","MiniGame");var n=t("../../base/BaseController"),o=(t("../../helper/Constant"),t("../../util/Util")),s=t("./MiniGameCircle"),a=t("./MiniGameConstant"),r=t("./tai-xiu/TaiXiu"),c=(t("./mini-poker/MiniPoker"),t("./mini-bacay/MiniBaCay"),t("./diamond/Diamond"),t("./tren-duoi/TrenDuoi"),t("./bom/Bom"),t("./wild/Wild"),t("./minigame-lottery/MiniGameLottery"),t("./lucky-wheel/LuckyWheel"),t("./bau-cua/BauCua"),t("./jackpot/Jackpot")),h=t("./bonus-event/BonusEvent"),l=t("./form/TaiXiuDetail"),u=t("./form/TaiXiuChain"),d=t("./form/BauCuaRank"),m=t("./form/GameMiniRank"),f=t("./form/GameMiniHistory"),p=t("./form/GameMiniRankTanLoc"),_=t("./form/Event"),S=t("./form/event/EventCenter"),g=t("./tai-xiu/TaiXiuConstant"),C=t("./mini-poker/MiniPokerConstant"),N=t("./mini-bacay/MiniBaCayConstant"),E=t("./diamond/DiamondConstant"),T=t("./tren-duoi/TrenDuoiConstant"),I=t("./bom/BomConstant"),v=t("./wild/WildConstant"),y=t("./minigame-lottery/MiniGameLotteryConstant"),R=t("./bau-cua/BauCuaConstant"),L=t("./jackpot/JackpotConstant"),B=t("./MiniGameCircleNotification");cc.Class({extends:n,properties:{bauCuaContainerNode:cc.Node,bomContainerNode:cc.Node,diamondContainerNode:cc.Node,luckyWheelContainerNode:cc.Node,mini3CayContainerNode:cc.Node,miniPokerContainerNode:cc.Node,trenduoiContainerNode:cc.Node,wildContainerNode:cc.Node,lotteryContainerNode:cc.Node,TaiXiu:r,Jackpot:c,MiniGameCircle:s,BonusEvent:h,TaiXiuDetail:l,TaiXiuChain:u,BauCuaRank:d,GameMiniRank:m,GameMiniHistory:f,GameMiniRankTanLoc:p,Event:_,EventCenter:S,MiniGameCircleNotification:B},init:function(t){this.controller=t,this.MiniGameCircle.init(this),this.Jackpot.init(t),this.BonusEvent.init(t),this.BauCua&&this.BauCua.init(t),this.Bom&&this.Bom.init(t),this.Diamond&&this.Diamond.init(t),this.LuckyWheel&&this.LuckyWheel.init(t),this.MiniBaCay&&this.MiniBaCay.init(t),this.MiniPoker&&this.MiniPoker.init(t),this.TrenDuoi&&this.TrenDuoi.init(t),this.Wild&&this.Wild.init(t),this.MiniGameLottery&&this.MiniGameLottery.init(t),this.TaiXiu&&this.TaiXiu.init(t),this.TaiXiuDetail.init(t),this.TaiXiuChain.init(t),this.BauCuaRank.init(t),this.GameMiniRank.init(t),this.GameMiniHistory.init(t),this.GameMiniRankTanLoc.init(t),this.Event.init(t),this.EventCenter.init(t),this.MiniGameCircleNotification.init(this),this.preventDisconnectListener=null,this._onTouchBegan=this.onTouchBegan.bind(this),this._onTouchMoved=this.onTouchMoved.bind(this),this._onTouchEnded=this.onTouchEnded.bind(this)},onLoad:function(){this._super(),this.isPlaying=!0,this.initShowLuckyWheel(),this.initShowMiniGame(),this.sendRequest.sendNoPrefixToZone(g.GET_STATE),this.addGameEvent(),o.checkTimeStartByDate("Mar 15 2020")?this.EventCenter.node.active=!0:this.EventCenter.node.active=!1},onEnable:function(){var t=this;cc.V.miniGamePause||(cc.V.miniGamePause=cc.game.pause.bind(cc.game),cc.V.miniGameResume=cc.game.resume.bind(cc.game),cc.game.resume=function(){t.disableAutoSpinWhenHideTab()},cc.game.pause=function(){t.autoSpinMiniGameWhenHideTab()}),this.addEventPreventDisconnect()},onDisable:function(){this.removeEventPreventDisconnect()},onDestroy:function(){this.removeGameEvent()},addGameEvent:function(){cc.V.resume||(cc.V.resume=cc.game.resume.bind(cc.game),cc.V.pause=cc.game.pause.bind(cc.game));var t=this;cc.game.pause=function(){cc.V.pause&&cc.V.pause(),t.isPlaying=!1,t.removeEventMiniGame()},cc.game.resume=function(){cc.V.resume&&cc.V.resume(),t.isPlaying=!0,t.addEventMiniGame()}},removeGameEvent:function(){cc.V.resume&&(cc.game.resume=cc.V.resume,cc.game.pause=cc.V.pause)},addEventMiniGame:function(){this.TaiXiu&&(this.TaiXiu.node.active?this.sendRequest.sendNoPrefixToZone(g.ADD_EVENT):this.sendRequest.sendNoPrefixToZone(g.GET_STATE)),this.MiniPoker&&this.MiniPoker.node.active&&this.sendRequest.sendNoPrefixToZone(C.ADD_EVENT),this.MiniBaCay&&this.MiniBaCay.node.active&&this.sendRequest.sendNoPrefixToZone(N.ADD_EVENT),this.Diamond&&this.Diamond.node.active&&this.sendRequest.sendNoPrefixToZone(E.ADD_EVENT),this.TrenDuoi&&this.TrenDuoi.node.active&&this.sendRequest.sendNoPrefixToZone(T.ADD_EVENT),this.Bom&&this.Bom.node.active&&this.sendRequest.sendNoPrefixToZone(I.ADD_EVENT),this.Wild&&this.Wild.node.active&&this.sendRequest.sendNoPrefixToZone(v.ADD_EVENT),this.MiniGameLottery&&this.MiniGameLottery.node.active&&this.sendRequest.sendNoPrefixToZone(y.ADD_EVENT),this.BauCua&&this.BauCua.node.active&&this.sendRequest.sendNoPrefixToZone(R.ADD_EVENT),this.Jackpot&&this.Jackpot.node.active&&this.sendRequest.sendNoPrefixToZone(L.ADD_EVENT)},removeEventMiniGame:function(){this.TaiXiu&&this.TaiXiu.node.active&&this.sendRequest.sendNoPrefixToZone(g.REMOVE_EVENT),this.MiniPoker&&this.MiniPoker.node.active&&this.sendRequest.sendNoPrefixToZone(C.REMOVE_EVENT),this.MiniBaCay&&this.MiniBaCay.node.active&&this.sendRequest.sendNoPrefixToZone(N.REMOVE_EVENT),this.Diamond&&this.Diamond.node.active&&this.sendRequest.sendNoPrefixToZone(E.REMOVE_EVENT),this.TrenDuoi&&this.TrenDuoi.node.active&&this.sendRequest.sendNoPrefixToZone(T.REMOVE_EVENT),this.Bom&&this.Bom.node.active&&this.sendRequest.sendNoPrefixToZone(I.REMOVE_EVENT),this.Wild&&this.Wild.node.active&&this.sendRequest.sendNoPrefixToZone(v.REMOVE_EVENT),this.MiniGameLottery&&this.MiniGameLottery.node.active&&this.sendRequest.sendNoPrefixToZone(y.REMOVE_EVENT),this.BauCua&&this.BauCua.node.active&&this.sendRequest.sendNoPrefixToZone(R.REMOVE_EVENT),this.Jackpot&&this.Jackpot.node.active&&this.sendRequest.sendNoPrefixToZone(L.REMOVE_EVENT)},initShowMiniGame:function(){this.getTempData()[E.IS_SHOW]&&this.Diamond&&this.Diamond.setShowDiamond(!0),this.getTempData()[N.IS_SHOW]&&this.MiniBaCay&&this.MiniBaCay.setShowMiniBaCay(!0),this.getTempData()[C.IS_SHOW]&&this.MiniPoker&&this.MiniPoker.setShowMiniPoker(!0),this.getTempData()[T.IS_SHOW]&&this.TrenDuoi&&this.TrenDuoi.setShowTrenDuoi(!0),this.getTempData()[I.IS_SHOW]&&this.Bom&&this.Bom.setShowBom(!0),this.getTempData()[v.IS_SHOW]&&this.Wild&&this.Wild.setShowWild(!0),this.getTempData()[y.IS_SHOW]&&this.MiniGameLottery&&this.MiniGameLottery.setShowMiniGameLottery(!0),this.getTempData()[R.IS_SHOW]&&this.BauCua&&this.BauCua.setShowBauCua(!0),!1!==this.getTempData()[g.IS_SHOW]&&this.TaiXiu&&this.TaiXiu.setShowTaiXiu(!0)},initShowLuckyWheel:function(){if(this.getUser().is_new)this.showLuckyWheel();else{var t=cc.sys.localStorage.getItem(a.LUCKY_WHEEL_LAST_DATE_SHOW);if(t)t!==(new Date).toDateString()&&this.showLuckyWheel();else this.showLuckyWheel()}},showLuckyWheel:function(){this.LuckyWheel?this.LuckyWheel.node.active=!0:this.createLuckyWheel();var t=(new Date).toDateString();cc.sys.localStorage.setItem(a.LUCKY_WHEEL_LAST_DATE_SHOW,t)},addEventPreventDisconnect:function(){},removeEventPreventDisconnect:function(){},onTouchBegan:function(t){return this.controller.checkSendEventDisconnect(),!0},onTouchMoved:function(t){},onTouchEnded:function(t){},handleRequest:function(t){if(this.isPlaying&&t.status){var e=t.data.game_name,i=t.data;switch(e){case a.TAIXIU:this.TaiXiu&&this.TaiXiu.handleRequest(i);break;case a.MINI_POKER:case a.MINI_POKER_2:this.MiniPoker&&this.MiniPoker.handleRequest(i);break;case a.MINI_BACAY:case a.MINI_BACAY_2:this.MiniBaCay&&this.MiniBaCay.handleRequest(i);break;case a.LUCKY_WHEEL:this.LuckyWheel&&this.LuckyWheel.handleRequest(i);break;case a.JACKPOT:this.Jackpot&&this.Jackpot.handleRequest(i);break;case a.DIAMOND:case a.DIAMOND_2:this.Diamond&&this.Diamond.handleRequest(i);break;case a.TREN_DUOI:this.TrenDuoi&&this.TrenDuoi.handleRequest(i);break;case a.BOM:case a.BOM_2:this.Bom&&this.Bom.handleRequest(i);break;case a.WILD:case a.WILD_2:this.Wild&&this.Wild.handleRequest(i);break;case a.MINIGAME_LOTTERY:this.MiniGameLottery&&this.MiniGameLottery.handleRequest(i);break;case a.BAU_CUA:this.BauCua&&this.BauCua.handleRequest(i);break;case a.HU_LOC:case a.TAN_LOC:this.BonusEvent&&this.BonusEvent.handleRequest(t)}}},initNumberSpinFreeGame:function(t){var e=t.data;this.timeOutLuckyWheel=setTimeout(function(){this.getUser().minigame_free=e.minigame_free,this.MiniPoker&&this.MiniPoker.initMiniGameSpinFree(e.minigame_free),this.MiniBaCay&&this.MiniBaCay.initMiniGameSpinFree(e.minigame_free),this.Diamond&&this.Diamond.initMiniGameSpinFree(e.minigame_free)}.bind(this),1e3)},showBauCuaRankForm:function(){this.BauCuaRank.showDialog()},autoSpinMiniGameWhenHideTab:function(){clearTimeout(this.autoSpinHideTab),this.autoSpinHideTab=setInterval(function(){this.Diamond&&this.Diamond.isAutoSpin()&&this.Diamond.spin(),this.MiniBaCay&&this.MiniBaCay.isAutoSpin()&&this.MiniBaCay.spin(),this.MiniPoker&&this.MiniPoker.isAutoSpin()&&this.MiniPoker.spin(),this.controller&&this.controller.isSenceGameSlot&&this.controller.isSenceGameSlot()&&this.controller.isAutoSpin&&this.controller.isAutoSpin()&&this.controller.spin()}.bind(this),a.TIME_AUTO_SPIN_WHEN_HIDE_TAB)},disableAutoSpinWhenHideTab:function(){this.autoSpinHideTab&&clearTimeout(this.autoSpinHideTab)},onTopClick:function(){this.Event.showDialog()},createBauCua:function(){var t=this;if(!this.BauCua&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_BAU_CUA;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.BauCua=n.getComponent("BauCua"),t.BauCua.init(t.controller),n.parent=t.bauCuaContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createbom:function(){var t=this;if(!this.Bom&&!this.isLoadCreateMiniGame){var e=a.URL_MINIGAME_BOM;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.Bom=n.getComponent("Bom"),t.Bom.init(t.controller),n.parent=t.bomContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createDiamond:function(){var t=this;if(!this.Diamond&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_DIAMOND;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.Diamond=n.getComponent("Diamond"),t.Diamond.init(t.controller),n.parent=t.diamondContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createLuckyWheel:function(){},createMini3Cay:function(){var t=this;if(!this.MiniBaCay&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_MINI_3_CAY;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.MiniBaCay=n.getComponent("MiniBaCay"),t.MiniBaCay.init(t.controller),n.parent=t.mini3CayContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createMiniPoker:function(){var t=this;if(!this.MiniPoker&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_MINI_POKER;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.MiniPoker=n.getComponent("MiniPoker"),t.MiniPoker.init(t.controller),n.parent=t.miniPokerContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createTrenDuoi:function(){var t=this;if(!this.TrenDuoi&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_TREN_DUOI;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.TrenDuoi=n.getComponent("TrenDuoi"),t.TrenDuoi.init(t.controller),n.parent=t.trenduoiContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createWild:function(){var t=this;if(!this.Wild&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_WILD;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.Wild=n.getComponent("Wild"),t.Wild.init(t.controller),n.parent=t.wildContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createLottery:function(){var t=this;if(!this.MiniGameLottery&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_LOTTERY;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var n=cc.instantiate(i);n?(t.MiniGameLottery=n.getComponent("MiniGameLottery"),t.MiniGameLottery.init(t.controller),n.parent=t.lotteryContainerNode,n.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../util/Util":"Util","./MiniGameCircle":"MiniGameCircle","./MiniGameCircleNotification":"MiniGameCircleNotification","./MiniGameConstant":"MiniGameConstant","./bau-cua/BauCua":"BauCua","./bau-cua/BauCuaConstant":"BauCuaConstant","./bom/Bom":"Bom","./bom/BomConstant":"BomConstant","./bonus-event/BonusEvent":"BonusEvent","./diamond/Diamond":"Diamond","./diamond/DiamondConstant":"DiamondConstant","./form/BauCuaRank":"BauCuaRank","./form/Event":"Event","./form/GameMiniHistory":"GameMiniHistory","./form/GameMiniRank":"GameMiniRank","./form/GameMiniRankTanLoc":"GameMiniRankTanLoc","./form/TaiXiuChain":"TaiXiuChain","./form/TaiXiuDetail":"TaiXiuDetail","./form/event/EventCenter":"EventCenter","./jackpot/Jackpot":"Jackpot","./jackpot/JackpotConstant":"JackpotConstant","./lucky-wheel/LuckyWheel":"LuckyWheel","./mini-bacay/MiniBaCay":"MiniBaCay","./mini-bacay/MiniBaCayConstant":"MiniBaCayConstant","./mini-poker/MiniPoker":"MiniPoker","./mini-poker/MiniPokerConstant":"MiniPokerConstant","./minigame-lottery/MiniGameLottery":"MiniGameLottery","./minigame-lottery/MiniGameLotteryConstant":"MiniGameLotteryConstant","./tai-xiu/TaiXiu":"TaiXiu","./tai-xiu/TaiXiuConstant":"TaiXiuConstant","./tren-duoi/TrenDuoi":"TrenDuoi","./tren-duoi/TrenDuoiConstant":"TrenDuoiConstant","./wild/Wild":"Wild","./wild/WildConstant":"WildConstant"}],MiniPokerCard:[function(t,e,i){"use strict";cc._RF.push(e,"3b844lr/0lNgbVg5r5XjXQP","MiniPokerCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MiniPokerConstant:[function(t,e,i){"use strict";cc._RF.push(e,"3d167c0jsdANYwX2lRXQ2+3","MiniPokerConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"mini_poker.ADD_EVENT",REMOVE_EVENT:"mini_poker.REMOVE_EVENT",SPIN:"mini_poker.SPIN",IS_SHOW:"mini_poker_is_show",POSITION:"mini_poker_position",IS_AUTO_SPIN:"mini_poker_auto_spin",IS_SPIN_FAST:"mini_poker_spin_fast",BET_VALUE:"mini_poker_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,LINE_TYPE:"mini_poker_line_type",MONEY_TYPE:"mini_poker_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"mini_poker.GET_TOP",MINIGAME_CONFIG_ID:1},cc._RF.pop()},{}],MiniPokerHistories:[function(t,e,i){"use strict";cc._RF.push(e,"4788d7Qh1pMC5iqcI549fVe","MiniPokerHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyMiniPokerItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryMiniPoker(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyMiniPokerItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("MiniPokerHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],MiniPokerHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"db801KkLnVFhZFt7jNpXAnC","MiniPokerHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResultBySlotData(t.slot_data),this.getLabel.string=n.numberWithCommas(t.total_prize_value);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResultBySlotData:function(t){t=JSON.parse(t);var e="";for(var i in t){e+=" ",e+=this.getResultByTrueValue(t[i])}return e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],MiniPokerReels:[function(t,e,i){"use strict";cc._RF.push(e,"5c64aWRPy9Mm5wrEwoWwNxf","MiniPokerReels");var n=t("./MiniPokerReel"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{reels:[n],resultNode:cc.Node,moneyLabel:cc.Label},init:function(t){for(var e in this.MiniPoker=t,this.reels)this.reels[e].init(t,this)},onEnable:function(){this.reset()},onDisable:function(){this.reset()},spinReelsShowMoney:function(t,e,i,n,o,a,r){for(var c in this.reels)c==this.reels.length-1?this.reels[c].spin(t[c],s.MINIPOKER_NUMBER_CARDS_SPIN+2*c,!0,!0,e,a,i,n,o,r):this.reels[c].spin(t[c],s.MINIPOKER_NUMBER_CARDS_SPIN+2*c,!0)},spinReelsNotShowMoney:function(t,e,i,n,o,a){for(var r in this.reels)r==this.reels.length-1?this.reels[r].spin(t[r],s.MINIPOKER_NUMBER_CARDS_SPIN+2*r,!1,!0,e,a,i,n,o,!0):this.reels[r].spin(t[r],s.MINIPOKER_NUMBER_CARDS_SPIN+2*r,!1)},showMoney:function(t){this.resultNode.active=!0,this.moneyLabel.string=o.numberWithCommas(t),clearTimeout(this.resultTimeout),this.resultTimeout=setTimeout(function(){this.reset()}.bind(this),1500)},isSpinning:function(){return 0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)},reset:function(){this.resultNode.active=!1,clearTimeout(this.resultTimeout)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","./MiniPokerReel":"MiniPokerReel"}],MiniPokerReel:[function(t,e,i){"use strict";cc._RF.push(e,"90bf9xbmQhNeow9z/HlKWat","MiniPokerReel");var n=t("./MiniPokerCard"),o=t("../MiniGameConstant"),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t,e){this.MiniPoker=t,this.MiniPokerUI=t.MiniPokerUI,this.MiniGameResult=t.MiniGameResult,this.MiniPokerReels=e},onLoad:function(){this.trueValue=null,this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.cardPrefab);this.pool.put(e)}this.randomCard()},spin:function(t,e,i,n,s,r,c,h,l,u){this.reset(),this.setCard(this.trueValue),this.trueValue=t;for(var d=1;d<e;d++){var m=t;d!=e-1&&(m=this.getRandomTrueValue());var f=this.instanceCard(m);f.setPosition(0,d*a.MINIPOKER_DISTANCE_TWO_CARD),f.parent=this.node}var p=(e-1)*a.MINIPOKER_DISTANCE_TWO_CARD,_=p/(this.MiniPoker.isSpinFast()?a.MINIPOKER_SPEED_FAST_SPIN_CARD:a.MINIPOKER_SPEED_SPIN_CARD),S=cc.moveTo(_,this.node.x,-p).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.setCard(t),n&&this.MiniPoker.node.active&&(u&&(h===o.WIN_TYPE_JACKPOT?this.MiniPokerUI.showJackPot(r,l):this.MiniGameResult.show(r,c)),i&&this.MiniPokerReels.showMoney(s))},this),C=this.MiniPoker.isSpinFast()?cc.delayTime(0):cc.delayTime(a.MINIPOKER_DELAY_SPIN),N=cc.callFunc(function(){this.setCard(t),n&&this.MiniPoker.node.active&&this.MiniPoker.isAutoSpin()&&this.MiniPoker.spin()},this);this.node.runAction(cc.sequence(S,g,C,N)),h!==o.WIN_TYPE_JACKPOT||this.MiniPoker.node.active||(this.MiniPoker.node.active=!0,this.MiniPokerUI.showJackPot(r,l))},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t;var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("CardController"),o=new n(t);return i.init(o),i.reveal(!0),e.scale=a.MINIPOKER_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./MiniPokerCard":"MiniPokerCard"}],MiniPokerUI:[function(t,e,i){"use strict";cc._RF.push(e,"11859dR/fNBRZ281RbwHHTm","MiniPokerUI");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1OnLabel:cc.Label,bet1OffLabel:cc.Label,bet2OnLabel:cc.Label,bet2OffLabel:cc.Label,bet3OnLabel:cc.Label,bet3OffLabel:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,bgSmallNode:cc.Node,bgBigNode:cc.Node,topNode:cc.Node,bottomNode:cc.Node,reels1Node:cc.Node,reels2Node:cc.Node,reels3Node:cc.Node,toggleNode:cc.Node,toggleLabel:cc.Label,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},showSmallReels:function(){this.bgSmallNode.active=!0,this.bgBigNode.active=!1,this.topNode.y=220,this.bottomNode.y=-105,this.node.height=335,this.reels1Node.active=!1,this.reels2Node.active=!0,this.reels3Node.active=!1,this.toggleNode.getComponent("Toggle").setOff(),this.toggleLabel.string="Quay 1 d\xf2ng"},showBigReels:function(){this.bgSmallNode.active=!1,this.bgBigNode.active=!0,this.topNode.y=350,this.bottomNode.y=-225,this.node.height=580,this.reels1Node.active=!0,this.reels2Node.active=!0,this.reels3Node.active=!0,this.toggleNode.getComponent("Toggle").setOn(),this.toggleLabel.string="Quay 3 d\xf2ng"},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setBetMoney:function(){var t=o.MINIPOKER_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=o.MINIPOKER_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1OnLabel.string=n.nFormatter(t),this.bet1OffLabel.string=n.nFormatter(t),this.bet2OnLabel.string=n.nFormatter(e),this.bet2OffLabel.string=n.nFormatter(e),this.bet3OnLabel.string=n.nFormatter(i),this.bet3OffLabel.string=n.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],MiniPoker:[function(t,e,i){"use strict";cc._RF.push(e,"93290oJAe5H2Y7Is3BhEFnC","MiniPoker");var n=t("../../../base/BaseController"),o=t("./MiniPokerConstant"),s=t("./MiniPokerUI"),a=t("./MiniPokerReels"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../item/MiniGameXPer"),l=t("../../../helper/Config"),u=t("../../../helper/Constant"),d=t("../../../helper/Message"),m=t("../../../object/RoomType"),f=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,autoSpinToggle:cc.Toggle,spinFastToggle:cc.Toggle,MiniPokerReels1:a,MiniPokerReels2:a,MiniPokerReels3:a,JackpotItem:c,MiniGameXPer:h,toastPrefab:cc.Prefab,MiniPokerUI:s,MiniGameResult:r},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.data=null,this.isShow=!0,this.isMoneyType=!0,this.is1LineType=!0,this.betOrder=0,this.intervalSpin=null,this.MiniPokerReels1.init(this),this.MiniPokerReels2.init(this),this.MiniPokerReels3.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.setTypeLine(this.is1LineType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(o.ADD_EVENT),this.initMiniGameSpinFree(this.getUser().minigame_free)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(o.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[o.MONEY_TYPE]===o.MONEY_TYPE_GOLD&&(this.isMoneyType=!1),this.is1LineType=!0,!1===this.getTempData()[o.LINE_TYPE]&&(this.is1LineType=!1)},setTypeLine:function(t){this.is1LineType=t,this.is1LineType?this.MiniPokerUI.showSmallReels():this.MiniPokerUI.showBigReels()},initTempData:function(){var t=this.getTempData(),e=this.getUser().mini_poker_free,i=t[o.IS_AUTO_SPIN],n=t[o.IS_SPIN_FAST],s=t[o.BET_VALUE];switch(n&&this.spinFastToggle.check(),i&&(this.autoSpinToggle.check(),this.spin()),s){case o.BET_100:this.setBet1();break;case o.BET_1k:this.setBet2();break;case o.BET_10k:this.setBet3()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(o.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationMiniPoker(!0,e):this.MiniGameCircleNotification.initShowNotificationMiniPoker(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationMiniPoker(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,n=t[e].quantity;i===o.MINIGAME_CONFIG_ID&&(n>0?this.MiniPokerUI.showMiniGameSpinFree(n):this.MiniPokerUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case o.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i);break;case o.REQUEST_INFO:this.handleInfo(i);break;case o.REQUEST_SPIN:this.handleSpin(i);break;case o.REQUEST_MESSAGE:this.handleMessage(n)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.showMessage(t)},handleSpin:function(t){this.setSendSpin(!1);var e=t.spin_id;if(this.idLabel.string=String.format(d.MINIGAME_ID,e),1===t.group_cards_type.length){var i=[t.slot_data[0],t.slot_data[1],t.slot_data[2],t.slot_data[3],t.slot_data[4]],n=t.group_cards_type[0],o=t.array_win_prize[0];this.MiniPokerReels2.spinReelsNotShowMoney(i,o,n,t.win_type,this.isMoneyType,t.total_prize_value)}else if(3===t.group_cards_type.length){var s=[t.slot_data[0],t.slot_data[1],t.slot_data[2],t.slot_data[3],t.slot_data[4]],a=[t.slot_data[5],t.slot_data[6],t.slot_data[7],t.slot_data[8],t.slot_data[9]],r=[t.slot_data[10],t.slot_data[11],t.slot_data[12],t.slot_data[13],t.slot_data[14]],c=t.group_cards_type[0],h=this.getTotalGroupCards(t.array_win_prize,t.group_cards_type),l=t.group_cards_type[2],u=t.array_win_prize[0],m=t.array_win_prize[1],f=t.array_win_prize[2];this.MiniPokerReels1.spinReelsShowMoney(s,u,c,t.win_type,this.isMoneyType,t.total_prize_value,!1),this.MiniPokerReels2.spinReelsShowMoney(a,m,h,t.win_type,this.isMoneyType,t.total_prize_value,!0),this.MiniPokerReels3.spinReelsShowMoney(r,f,l,t.win_type,this.isMoneyType,t.total_prize_value,!1)}},getTotalGroupCards:function(t,e){var i=[];for(var n in t)t[n]>0&&i.push(e[n]);return i.length>0?i.join(" - "):e[0]},onSpinClick:function(){this.isSpinning()||this.spin()},isSpinning:function(){return this.MiniPokerReels2.isSpinning()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE,money_value:this.getCurrentBet(),number_line:this.is1LineType?1:3};this.sendRequest.sendNoPrefixToZone(o.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(u.MINI_POKER)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showMiniPokerHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(f.MINI_POKER),this.controller.MiniGame.GameMiniRank.showDialog(),this.isMoneyType?this.controller.MiniGame.GameMiniRank.onMoneyClick():this.controller.MiniGame.GameMiniRank.onGoldClick()},onCloseClick:function(){this.setShowMiniPoker(!1)},onGoldClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onToggleClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_NUMBER_LINE):this.setTypeLine(!this.is1LineType)},onBet1ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.MiniPokerUI.enableBet1Button(),this.getTempData()[o.BET_VALUE]=o.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.MiniPokerUI.enableBet2Button(),this.getTempData()[o.BET_VALUE]=o.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(d.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.MiniPokerUI.enableBet3Button(),this.getTempData()[o.BET_VALUE]=o.BET_10k},onMiniPokerClick:function(){this.setShowMiniPoker(!this.node.active)},onAutoSpinToggle:function(){var t=this.isAutoSpin();this.getTempData()[o.IS_AUTO_SPIN]=t},onSpinFastToggle:function(){var t=this.isSpinFast();this.getTempData()[o.IS_SPIN_FAST]=t},setShowMiniPoker:function(t){var e=this.getUser();this.node.active=t,this.isShow=t;var i=e.mini_poker_free;this.getTempData()[o.IS_SHOW]=t,this.initMiniGameNotification(this.isAutoSpin(),i)},initIntervalSpin:function(){this.removeIntervalSpin();var t=this.isSpinFast()?l.MINIPOKER_TIME_FAST_SPIN:l.MINIPOKER_TIME_SPIN;this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*t)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=l.MINIGAME_SCALE_TOAST,e.setPosition(l.MINIGAME_POSITION_TOAST_X,l.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.MiniPokerUI.setBetByRoomType(this.isMoneyType)},getCurrentBet:function(){return(this.isMoneyType?l.MINIPOKER_LIST_BET_MONEY:l.MINIPOKER_LIST_BET_GOLD)[this.betOrder]},isAutoSpin:function(){return this.autoSpinToggle.isChecked},isSpinFast:function(){return this.spinFastToggle.isChecked},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./MiniPokerConstant":"MiniPokerConstant","./MiniPokerReels":"MiniPokerReels","./MiniPokerUI":"MiniPokerUI"}],Music:[function(t,e,i){"use strict";cc._RF.push(e,"dccf06mRztJGIIuAQH9EWrn","Music");var n=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{menuNode:cc.Node,soundOnNode:cc.Node,soundOffNode:cc.Node,musicOnNode:cc.Node,musicOffNode:cc.Node,slotMusic:{type:cc.AudioClip,default:null},spinAudio:{type:cc.AudioClip,default:null},winNormalAudio:{type:cc.AudioClip,default:null},bigWinAudio:{type:cc.AudioClip,default:null},megaWinAudio:{type:cc.AudioClip,default:null},jackpotAudio:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.isMusic=!0,this.loadConfig(),this.startMusic()},loadConfig:function(){var t=cc.sys.localStorage.getItem(n.IS_SOUND_SLOT),e=cc.sys.localStorage.getItem(n.IS_MUSIC_SLOT);t="true"===t||!0===t||"false"!==t&&!1!==t,e="true"===e||!0===e||"false"!==e&&!1!==e,this.isSound=t,this.isMusic=e,this.initSound(),this.initMusic()},onMenuClick:function(){this.menuNode.active=!this.menuNode.active},onSoundClick:function(){this.setSound(!this.isSound)},onMusicClick:function(){this.setMusic(!this.isMusic),this.isMusic?this.resumeMusic():this.pauseMusic()},initSound:function(){this.soundOnNode.active=this.isSound,this.soundOffNode.active=!this.isSound},initMusic:function(){this.musicOnNode.active=this.isMusic,this.musicOffNode.active=!this.isMusic},startMusic:function(){cc.audioEngine.stopAll(),this.isMusic&&(this.musicId=cc.audioEngine.play(this.slotMusic,!0,.4))},pauseMusic:function(){this.musicId?cc.audioEngine.pause(this.musicId):cc.audioEngine.stopAll()},resumeMusic:function(){this.musicId?cc.audioEngine.resume(this.musicId):this.startMusic()},stopMusic:function(){this.musicId&&cc.audioEngine.stop(this.musicId)},setSound:function(t){this.isSound=t,cc.sys.localStorage.setItem(n.IS_SOUND_SLOT,t),this.initSound()},setMusic:function(t){this.isMusic=t,cc.sys.localStorage.setItem(n.IS_MUSIC_SLOT,t),this.initMusic()},onDisable:function(){this.musicId&&cc.audioEngine.stopAll()},soundSpin:function(){this.isSound&&cc.audioEngine.playEffect(this.spinAudio,!1)},soundWinNormal:function(){this.isSound&&cc.audioEngine.playEffect(this.winNormalAudio,!1)},soundBigWin:function(){this.isSound&&cc.audioEngine.playEffect(this.bigWinAudio,!1)},soundMegaWin:function(){this.isSound&&cc.audioEngine.playEffect(this.megaWinAudio,!1)},soundJackpot:function(){this.isSound&&cc.audioEngine.playEffect(this.jackpotAudio,!1)}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],MyPlayerHover:[function(t,e,i){"use strict";cc._RF.push(e,"38978egV/tKCqJvaVDzzslc","MyPlayerHover");var n=t("../../util/BrowserUtil");cc.Class({extends:cc.Component,properties:{baseSprite:cc.Sprite,baseNormalSpriteFrame:cc.SpriteFrame,baseActiveSpriteFrame:cc.SpriteFrame},init:function(t,e){this.FireFishGame=t,this.FireFish=t.FireFish,this.MyPlayer=e,this.listGunChoise=e.listGunChoise},onLoad:function(){var t=this;this.onMouseEnter=function(){t.baseSprite.spriteFrame=t.baseActiveSpriteFrame,n.showCursorPointer()},this.onMouseLeave=function(){t.baseSprite.spriteFrame=t.baseNormalSpriteFrame,n.showCursorAuto()}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.FireFish.AudioFireFish.playClick(),this.MyPlayer.isShowGunChoise()?this.MyPlayer.hideGunChoise():this.MyPlayer.showGunChoise()}}),cc._RF.pop()},{"../../util/BrowserUtil":"BrowserUtil"}],NewsItem:[function(t,e,i){"use strict";cc._RF.push(e,"09ca9rttK5Av4AotsiJp1bK","NewsItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Constant"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{newRickTextNode:cc.Node,newLabelNode:cc.Node,newsRichText:cc.RichText,nickNameLabel:cc.Label,moneylabel:cc.Label,moneyNameLabel:cc.Label,gameNameLabel:cc.Label},init:function(t,e,i,a){this.News=t,a&&"big_win"===a.type?(this.newLabelNode.active=!0,this.newRickTextNode.active=!1,this.nickNameLabel.string=s.getServerID(a.server_id)+a.nick_name||"",this.moneyNameLabel.string=o.MONEY_NAME.toLocaleUpperCase(),this.nickNameLabel._updateRenderData(!0),this.moneylabel.string=n.numberWithCommas(a.amount),this.moneylabel._updateRenderData(!0),this.gameNameLabel.string="("+s.getGameNameByShortName(a.game_name)+")",this.gameNameLabel._updateRenderData(!0),this.node.width=this.nickNameLabel.node.width+this.nickNameLabel.node.width+this.gameNameLabel.node.width+100):(this.newRickTextNode.active=!0,this.newLabelNode.active=!1,this.newsRichText.string=e,this.node.width=this.newsRichText.node.width),this.url=i},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],News:[function(t,e,i){"use strict";cc._RF.push(e,"4863a4o7cVHEZJfI+HuFdAw","News");var n=t("../base/BaseController"),o=t("../helper/Config"),s=t("../helper/Constant");cc.Class({extends:n,properties:{newsItemPrefab:cc.Prefab,newsContent:cc.Node,checkShowNode:cc.Node},onLoad:function(){this._super(),this.listNews=[],this.pool=new cc.NodePool;for(var t=0;t<o.NEWS_MAX;t++){var e=cc.instantiate(this.newsItemPrefab);this.pool.put(e)}this.getSceneName()!==s.SCENE_GAME_CENTER||this.isConnected()?this.node.active=!1:this.addDefaultTextMarquee()},addNews:function(t){if(this.getSceneName()===s.SCENE_GAME_CENTER){var e=t.data.msg,i=t.data.url,n=t.data.order;-1===e.indexOf("Ch\u1eb5n L\u1ebb")&&this.addNewsNode(e,i,n,t.data)}},addNewsNode:function(t,e,i,n){if(this.checkShowNode&&!this.checkShowNode.active);else if(t&&!cc.game.isPaused()&&(this.listNews.length<=o.NEWS_MAX||i)){var s=void 0;this.pool&&(s=this.pool.get()),s||(s=cc.instantiate(this.newsItemPrefab)),s.getComponent("NewsItem").init(this,t,e,n),s.parent=this.newsContent,this.moveItem(s),this.listNews.push(s)}},moveItem:function(t){this.node.active=!0,t.y=0;var e=0,i=-t.width-this.newsContent.width/2-250;0===this.listNews.length?e=this.newsContent.width/2:(e+=this.listNews[this.listNews.length-1].x,e+=this.listNews[this.listNews.length-1].width,(e+=o.DISTANCE_TWO_NEWS)<this.newsContent.width/2&&(e=this.newsContent.width/2)),t.x=e;var n=(e-i)/o.SPEED_MOVE_NEWS;t.runAction(cc.sequence(cc.moveTo(n,i,0),cc.callFunc(function(){this.pool.put(t),this.removeItemFromListItems(t),0===this.listNews.length&&(this.getSceneName()!==s.SCENE_GAME_CENTER||this.isConnected()?this.node.active=!1:this.addDefaultTextMarquee())},this)))},addDefaultTextMarquee:function(){var t=this.getGeneralConfig();if(t){var e=t.DEFAULT_TEXT_MARQUEE.content,i=t.DEFAULT_TEXT_MARQUEE.url,n={data:{msg:e||"",url:i}};this.addNews(n)}else this.node.active=!1},removeItemFromListItems:function(t){for(var e=0,i=this.listNews.length;e<i;e++)if(this.listNews[e]===t)return void this.listNews.splice(e,1)}}),cc._RF.pop()},{"../base/BaseController":"BaseController","../helper/Config":"Config","../helper/Constant":"Constant"}],NodeUtil:[function(t,e,i){"use strict";cc._RF.push(e,"17792Be7J9O5pw0vd39rBfR","NodeUtil");var n={getDistanceTwoNode:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}};e.exports=n,cc._RF.pop()},{}],OTPLogin:[function(t,e,i){"use strict";cc._RF.push(e,"68f50as3FVOlbGUGvWzinW2","OTPLogin");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{otpEditBox:cc.EditBox,syntaxSMSRichText:cc.RichText},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){this.initData()},onEnable:function(){this.clear()},initData:function(){var t=this.Login.getGeneralConfig();if(t){var e=t.OTP_FORGOT_PASS;if(e){var i=e.content,o=e.service_number,s=String.format(n.LOGIN_SECURITY_SMS_2,i,o);this.syntaxSMSRichText.getComponent(cc.RichText).string=s}}},setAccount:function(t,e,i){this.isLoginFacebook=!1,this.username=t,this.password=e,this.captcha=i},setLoginFacebook:function(t,e,i,n){this.isLoginFacebook=!0,this.socialId=t,this.email=e,this.socialType=i,this.accessToken=n,this.isShow=!0},onConfirmClick:function(){this.Login.Audio.playClick();var t=this.otpEditBox.string;t?this.isLoginFacebook?(this.Login.showProcessingNode(),this.Login.LoginMenu.loginSocial(this.socialId,this.email,this.socialType,this.accessToken,t),this.clear()):this.username&&(this.Login.showProcessingNode(),this.Login.LoginLogin.login(this.username,this.password,t,this.captcha),this.clear()):this.Login.showDialogMessage(n.OTP_LOGIN_TITLE,n.MISSING_INFO)},onGetOTPClick:function(){var t=this,e=this.Login.getTime(),i=void 0;i=this.isLoginFacebook?{social_id:this.socialId,email:this.email,social_type:this.socialType,access_token:this.accessToken}:{username:this.username,password:this.password,time:e,sign:this.Login.getDK(this.username,e)};var o=function(e){t.Login.hideProcessingNode(),t.Login.showDialogMessage(n.OTP_LOGIN_TITLE,e.msg),t.clear()},s=function(e){t.Login.hideProcessingNode(),t.Login.showDialogMessage(n.OTP_LOGIN_TITLE,e.msg),t.clear()};this.Login.showProcessingNode(),this.isLoginFacebook?this.Login.api.getOTPLoginSocial(i,o,s):this.Login.api.getOTPLogin(i,o,s)},isShowForm:function(){return this.isShow},clear:function(){this.otpEditBox.string=""}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],Online:[function(t,e,i){"use strict";cc._RF.push(e,"782e9Y26gJNabU6bEjinbsa","Online");var n=t("../../../base/BaseController"),o=t("../../../helper/Constant");cc.Class({extends:n,properties:{playerOnlineItemPrefab:cc.Prefab,listPlayersScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){var t=this;this._super(),this.onUserEnterRoom=function(e){e.room.name.indexOf(o.LOBBY)>-1&&t.addPlayer(e.user)},this.onUserExitRoom=function(e){e.room.name.indexOf(o.LOBBY)>-1&&(e.user.isItMe||t.removePlayer(e.user))}},onEnable:function(){this.listPlayers=[],this.initPlayersOnline(),this.GameCenter.getSFS()&&(this.GameCenter.getSFS().addEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.GameCenter.getSFS().addEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom))},onDisable:function(){this.GameCenter.getSFS()&&(this.GameCenter.getSFS().removeEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.GameCenter.getSFS().removeEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom))},initPlayersOnline:function(){this.listPlayersScrollView.content.removeAllChildren(!0);var t=this.GameCenter.getListUserByRoom();for(var e in t)this.addPlayer(t[e])},addPlayer:function(t){var e=this.GameCenter.getSFSMySelf();if(t.variables.user_id.value!==e.variables.user_id.value&&!this.getPlayerByUserId(t.variables.user_id.value)){var i=cc.instantiate(this.playerOnlineItemPrefab),n=i.getComponent("PlayerOnlineItem"),o=t.variables.avatar.value,s=t.variables.nick_name.value;n.setAvatar(o),n.setNickname(s),i.parent=this.listPlayersScrollView.content,t.playerNode=i,this.listPlayers.push(t)}},removePlayer:function(t){var e=t.variables.user_id.value,i=this.getPlayerByUserId(e);i&&(this.removePlayerFromListByPlayer(i),i.playerNode.removeFromParent(!0))},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].variables.user_id.value===t)return this.listPlayers[e];return null},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t)return void this.listPlayers.splice(e,1)}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Constant":"Constant"}],OtpFirstAccount:[function(t,e,i){"use strict";cc._RF.push(e,"b9a57qg7fpK5KIxX9Vb1Bc3","OtpFirstAccount");var n=t("../../../helper/Message");t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.initData()},initData:function(){if(this.GameCenter.getGeneralConfig()){var t=n.OTP_FIRST_ACCOUNT;this.messageRichText.string=t}},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],PaginationItem:[function(t,e,i){"use strict";cc._RF.push(e,"ce9e4ewsI9EbpuZcPFCXtiN","PaginationItem"),cc.Class({extends:cc.Component,properties:{pageOnButtonNode:cc.Node,pageOffButtonNode:cc.Node,pageOnLabel:cc.Label,pageOffLabel:cc.Label},init:function(t,e){this.pageOnLabel.string=t,this.pageOffLabel.string=t,this.page=e},onLoad:function(){},enable:function(){this.pageOnButtonNode.active=!1,this.pageOffButtonNode.active=!0},disable:function(){this.pageOnButtonNode.active=!0,this.pageOffButtonNode.active=!1},getPage:function(){return this.page}}),cc._RF.pop()},{}],PhomCardController:[function(t,e,i){"use strict";cc._RF.push(e,"6ed9a6W30dDsrOMCSOhIXNz","PhomCardController");var n=t("../PhomConfig"),o=t("../../../util/NodeUtil");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController"),this.startZIndex=this.node.zIndex},onEnable:function(){},init:function(t){var e=this;this.Phom=t,this.PhomUI=t.PhomUI,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this.startPosition=null,this._moveUpAction=cc.moveBy(n.TIME_TOUCH_CARD,0,n.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(n.TIME_TOUCH_CARD,0,-n.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.isAn()&&!e.PhomUI.isShowHaButton()||e.cardController.showHighLight()},this._onMouseLeave=function(t){e.isAn()&&!e.PhomUI.isShowHaButton()||e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(e.startPosition=e.node.getPosition(),e.isAn()&&!e.PhomUI.isShowHaButton()||(this.stopAllActions(),this.cardController.showHighLight()))},this._onTouchMove=function(t){if(!e.isInAction){var i=t.touch.getDelta();this.x+=i.x;var n=e.node.getPosition();o.getDistanceTwoNode(e.startPosition,n)>=5&&0===e.node.zIndex&&(e.node.zIndex=1e3,e.cardController.hideHighLight(),e.cardController.showDarkEffect())}},this._onTouchUp=function(t){if(!e.isInAction){var i=e.node.getPosition();if(o.getDistanceTwoNode(e.startPosition,i)>=5){for(var n=e.Phom.PhomHandlerEffect.getListCards(),s=e.Phom.PhomHandlerEffect.getListCardsAn(),a=e.Phom.getLeftNearestNode(e.node),r=0;r<n.length;r++)if(n[r]===e.node.trueValue){n.splice(r,1);break}if(a){for(var c=0;c<n.length;c++)if(n[c]===a.trueValue){n.splice(c+1,0,e.node.trueValue);break}}else n.splice(0,0,e.node.trueValue);e.Phom.PhomHandlerEffect.initMyCards(n,!1,s)}else{if(e.isAn()&&!e.PhomUI.isShowHaButton())return;this.stopAllActions(),e.node.zIndex=e.startZIndex,e.node.setPosition(e.startPosition),this.cardController.hideHighLight(),this.cardController.hideDarkEffect(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(e._moveDownaction,e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(e._moveUpAction,e._resetInAction))),e.Phom.PhomHandlerEffect.checkShowButtons()}}},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=n.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.isAn()||this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(n.TIME_TOUCH_CARD,this._initScale),cc.moveTo(n.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected},setAn:function(t){this.an=t,this.node.getComponent("CardController").showHighLightBlue()},isAn:function(){return this.an}}),cc._RF.pop()},{"../../../util/NodeUtil":"NodeUtil","../PhomConfig":"PhomConfig"}],PhomCard:[function(t,e,i){"use strict";cc._RF.push(e,"6cad5DXW5dHJoZHNf7PYhAb","PhomCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],PhomConfig:[function(t,e,i){"use strict";cc._RF.push(e,"491e7ExZ1pHWoY/RPGYApuA","PhomConfig");e.exports={NUMBER_PLAYERS:4,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:75,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-305,POSITION_MY_CARDS_Y:-220,DISTANCE_CARD_IN_TABLE:30,DISTANCE_TWO_CARDS_IN_TABLE:40,DISTANCE_Y_TWO_CARDS_IN_TABLE:30,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.5,TIME_FLIP_CARD_IN_TABLE:.25,POSITION_TABLE_CARDS_X:0,POSITION_TABLE_CARDS_Y:35,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:25,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.5,TIME_SHOW_CARDS_OTHER_PLAYERS:.5,POSITION_PLAYER_SCORE_X:0,POSITION_PLAYER_SCORE_Y:-100},cc._RF.pop()},{}],PhomConstant:[function(t,e,i){"use strict";cc._RF.push(e,"e9acbULx+ZLir0K/a3DoeZQ","PhomConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",DANH_BAI:"DANH_BAI",GUI_BAI:"GUI_BAI",AN_BAI:"AN_BAI",BOC_BAI:"BOC_BAI",U:"U",HA_BAI:"HA_BAI",RESULT:"RESULT",AUTO_HA_BAI:"AUTO_HA_BAI",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],PhomHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"c2b40ju711LPLgNCHNslg0B","PhomHandlerEffect");var n=t("./PhomCard"),o=t("./item/PhomCardController"),s=t("./PhomConfig"),a=t("./PhomWinType"),r=t("./PhomUtil"),c={init:function(t){this.Phom=t,this.PhomUI=t.PhomUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.lastCardPlay=null,this.lastPlayerId=null},dealCards:function(t){for(var e=0;e<this.listPlayers.length;e++)this.listPlayers[e].isItMe?(t=r.sortCards(t),this.initMyCards(t)):this.listPlayers[e].PhomPlayer.showCardBack()},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];this.Phom.myCardsNode.removeAllChildren(!0),this.PhomUI.showXepButton();for(var n=0;n<t.length;n++){var a=this.initNewCardNode(t[n]);a.parent=this.Phom.myCardsNode,a.scale=s.SCALE_CARDS_IN_HAND;var r=a.addComponent(o);r.init(this.Phom),a.phomCardController=r;var c=s.DISTANCE_TWO_CARDS_IN_HAND*n+s.POSITION_MY_CARDS_X,h=s.POSITION_MY_CARDS_Y;if(e?(a.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),a.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,c,h))):a.setPosition(c,h),i)for(var l=0;l<i.length;l++)if(t[n]===i[l]){r.setAn(!0);break}}},initNewCardNode:function(t){var e=cc.instantiate(this.Phom.cardPrefab);e.trueValue=t;var i=new n(t),o=e.getComponent("CardController");return o.init(i),e.cardController=o,e},handleStartGame:function(t){var e=t.data.id_playing,i=this.Phom.getPlayerByUserId(e);i&&i.PhomPlayer.showChotHa()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_boc_bai,n=t.data.is_ha,o=t.data.is_chot_ha,s=this.Phom.getPlayerByUserId(e);s&&(this.Phom.idPlaying=e,this.Phom.isBocBai=i,this.Phom.isHa=n,this.Phom.isGui=o&&!i,this.Phom.isChotHa=o,s.isItMe?this.checkShowButtons():(this.PhomUI.hideAllButtons(),this.Phom.myPlayer.is_player&&this.PhomUI.showXepButton()),this.Phom.startCountDownPlayer(s,t.time_remain,t.time))},handlePlayedPlayer:function(t){var e=t.data.card,i=t.data.id_played;this.lastCardPlay=e,this.lastPlayerId=i;var o=this.Phom.getPlayerByUserId(i);if(o)if(this.showDarkEffectAllCardsPlay(o),o.isItMe){var a=this.Phom.getCardsNodeByCard(e);if(a){var r=a.x-o.node.x-o.PhomPlayer.cardPlayNode.x,c=a.y-o.node.y-o.PhomPlayer.cardPlayNode.y;a.stopAllActions(),a.setPosition(r,c),a.scale=s.SCALE_CARDS_IN_HAND,a.cardController.hideHighLight(),a.cardController.hideDarkEffect(),a.phomCardController.disableEvents(),a.zIndex=0;var h=o.PhomPlayer.cardPlayNode.getChildrenCount();a.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,h*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE))),a.parent=o.PhomPlayer.cardPlayNode}this.sortMyCards(),this.checkShowButtons()}else{var l=o.PhomPlayer.cardBackNode.x-o.PhomPlayer.cardPlayNode.x,u=o.PhomPlayer.cardBackNode.y-o.PhomPlayer.cardPlayNode.y,d=o.PhomPlayer.cardPlayNode.getChildrenCount(),m=cc.instantiate(this.Phom.cardPrefab);m.trueValue=e,m.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,m.parent=o.PhomPlayer.cardPlayNode,m.setPosition(l,u);var f=m.getComponent("CardController"),p=new n(e);f.init(p),m.cardController=f,m.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,d*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.hideTextAllPlayers()},handleBocBai:function(t){var e=t.data.id_playing,i=t.data.card,a=this.Phom.getPlayerByUserId(e);if(a)if(a.isItMe){var r=this.Phom.myCardsNode.getChildrenCount(),c=cc.instantiate(this.Phom.cardPrefab);c.trueValue=i,c.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,c.parent=this.Phom.myCardsNode,c.setPosition(s.POSITION_TABLE_CARDS_X,s.POSITION_TABLE_CARDS_Y);var h=c.getComponent("CardController"),l=new n(i);h.init(l),c.cardController=h;var u=c.addComponent(o);u.init(this.Phom),c.phomCardController=u;var d=r*s.DISTANCE_TWO_CARDS_IN_HAND+s.POSITION_MY_CARDS_X,m=s.POSITION_MY_CARDS_Y;c.cardController.revealWithAnimationFlipMoveScale(!0,s.TIME_MOVE_CARDS_TO_TABLE,d,m,s.SCALE_CARDS_IN_HAND),this.PhomUI.hideAnButton()}else{var f=cc.instantiate(this.Phom.cardBackPrefab);f.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,f.parent=this.Phom.tableCardsNode,f.setPosition(s.POSITION_TABLE_CARDS_X,s.POSITION_TABLE_CARDS_Y);var p=a.node.getPosition().x+a.PhomPlayer.cardBackNode.x,_=a.node.getPosition().y+a.PhomPlayer.cardBackNode.y;f.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,p,_),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARDS_IN_OTHER_PLAYER)),cc.callFunc(function(){f.removeFromParent(!0)},this)))}this.minusNumberTableCards()},handleAnBai:function(t){var e=t.data.id_an_bai,i=t.data.id_chot_ha,n=this.Phom.getPlayerByUserId(this.lastPlayerId),a=this.Phom.getPlayerByUserId(e),r=this.Phom.getPlayerByUserId(i);if(a&&n){var c=n.PhomPlayer.cardPlayNode.getChildren();for(var h in c)if(c[h].getComponent("CardController").trueValue===this.lastCardPlay){var l=c[h];if(a.isItMe){var u=this.Phom.myCardsNode.getChildrenCount()*s.DISTANCE_TWO_CARDS_IN_HAND+s.POSITION_MY_CARDS_X,d=s.POSITION_MY_CARDS_Y,m=n.PhomPlayer.cardPlayNode.convertToNodeSpaceAR(l.getPosition()),f=this.Phom.myCardsNode.convertToNodeSpaceAR(m),p=l.addComponent(o);p.init(this.Phom),p.setAn(!0),l.phomCardController=p,l.setPosition(f),l.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,u,d),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARDS_IN_HAND))),l.parent=this.Phom.myCardsNode}else{var _=a.PhomPlayer.cardAnNode.getChildrenCount()*s.DISTANCE_BACK_CARD_OTHER_PLAYER,S=n.PhomPlayer.cardPlayNode.convertToNodeSpaceAR(l.getPosition()),g=a.PhomPlayer.cardAnNode.convertToNodeSpaceAR(S);l.setPosition(g),l.runAction(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,_,0)),l.parent=a.PhomPlayer.cardAnNode}break}}this.clearChotHaAllPlayers(),r&&r.PhomPlayer.showChotHa(),this.lastCardPlay=null,this.showAnBaiMoneyChange(t)},handleHaBai:function(t){var e=t.data.id_playing,i=t.data.cards,o=this.Phom.getPlayerByUserId(e);if(o){var a=o.PhomPlayer.getCardsHa().length;if(o.PhomPlayer.addCardsHa(i),o.isItMe){for(var r=0;r<i.length;r++)for(var c=i[r],h=this.Phom.getCardsNodeByCards(c),l=0;l<h.length;l++){var u=this.Phom.myCardsNode.convertToNodeSpaceAR(h[l].getPosition()),d=o.PhomPlayer.cardHaNode.convertToNodeSpaceAR(u);h[l].stopAllActions(),h[l].parent=o.PhomPlayer.cardHaNode,h[l].scale=s.SCALE_CARDS_IN_HAND,h[l].setPosition(d),h[l].cardController.hideHighLight(),h[l].cardController.hideDarkEffect(),h[l].phomCardController.disableEvents(),h[l].zIndex=r+1+a,h[l].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,l*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(r+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.sortMyCards(),this.checkShowButtons()}else for(var m=o.PhomPlayer.cardAnNode.getChildren(),f=0;f<i.length;f++)for(var p=i[f],_=0;_<p.length;_++){var S=null;for(var g in m)m[g].getComponent("CardController").trueValue===p[_]&&(S=m[g]);if(S){var C=o.PhomPlayer.cardAnNode.convertToNodeSpaceAR(S.getPosition()),N=o.PhomPlayer.cardHaNode.convertToNodeSpaceAR(C);S.stopAllActions(),S.parent=o.PhomPlayer.cardHaNode,S.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,S.setPosition(N),S.cardController.hideHighLight(),S.zIndex=f+1+a,S.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,_*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(f+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}else{var E=o.PhomPlayer.cardBackNode.convertToNodeSpaceAR(new cc.Vec2(0,0)),T=o.PhomPlayer.cardHaNode.convertToNodeSpaceAR(E),I=cc.instantiate(this.Phom.cardPrefab),v=I.getComponent("CardController"),y=new n(p[_]);v.init(y),I.trueValue=p[_],I.cardController=v,I.parent=o.PhomPlayer.cardHaNode,I.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,I.setPosition(T),I.zIndex=f+1,I.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,_*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(f+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}}}},handleGuiBai:function(t){var e=t.data.id_playing,i=t.data.card,o=t.data.cards,a=t.data.id_nhan,r=this.Phom.getPlayerByUserId(e),c=this.Phom.getPlayerByUserId(a);if(r&&c)if(r.isItMe){var h=this.Phom.getCardsNodeByCard(i),l=this.Phom.myCardsNode.convertToNodeSpaceAR(h.getPosition()),u=c.PhomPlayer.cardHaNode.convertToNodeSpaceAR(l);h.stopAllActions(),h.setPosition(u),h.cardController.hideHighLight(),h.cardController.hideDarkEffect(),h.phomCardController.disableEvents(),h.zIndex=0;var d=this.getGuiPositonData(c,i,o);h.zIndex=d.zIndex,h.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,d.position),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)),cc.callFunc(function(){},this))),h.parent=c.PhomPlayer.cardHaNode,this.sortMyCards(),this.checkShowButtons()}else{var m=r.PhomPlayer.cardBackNode.convertToNodeSpaceAR(new cc.Vec2(0,0)),f=c.PhomPlayer.cardHaNode.convertToNodeSpaceAR(m),p=cc.instantiate(this.Phom.cardPrefab);p.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,p.setPosition(f),p.trueValue=i;var _=p.getComponent("CardController"),S=new n(i);_.init(S),p.cardController=_;var g=this.getGuiPositonData(c,i,o);p.zIndex=g.zIndex,p.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,g.position),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)),cc.callFunc(function(){},this))),p.parent=c.PhomPlayer.cardHaNode}},getGuiPositonData:function(t,e,i){var n=t.PhomPlayer.getCardsHa();if(n){for(var o=0,a=!1,c=0;c<n.length;c++){for(var h=0;h<n[c].length;h++)if(n[c][h]===i[0]){o=c,a=!0;break}if(a)break}var l=-o*s.DISTANCE_Y_TWO_CARDS_IN_TABLE;if(r.checkPhomNgang(i)){var u=t.PhomPlayer.getMaxXCardHaByPositionY(l)+s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS;return{position:new cc.Vec2(u,l),zIndex:o+1}}if(r.checkPhomDoc(i)){var d=0,m=0;return e<i[0]?(d=t.PhomPlayer.getMinXCardHaByPositionY(l)-s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,m=o):(d=t.PhomPlayer.getMaxXCardHaByPositionY(l)+s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,m=o+1),{position:new cc.Vec2(d,l),zIndex:m}}}},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.showOtherPlayerCards(t,e),this.showResultMoneyChange(t)},sort:function(){var t=this.getListCards(),e=this.getListCardsAn();this.initMyCards(r.sortCards(t,e),!0,e)},getListCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)e.push(t[i].getComponent("CardController").getTrueValue());return e},getListMyCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].getComponent("PhomCardController").isAn()||e.push(t[i].getComponent("CardController").getTrueValue());return e},getListCardsAn:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].getComponent("PhomCardController").isAn()&&e.push(t[i].getComponent("CardController").getTrueValue());return e},getListPhomHa:function(){for(var t=[],e=0;e<this.listPlayers.length;e++)if(!this.listPlayers[e].isItMe){for(var i=this.listPlayers[e].PhomPlayer.cardHaNode.getChildren(),n=[],o=0;o<i.length;o++)n.push(i[o].getComponent("CardController").getTrueValue());n.length>0&&t.push(n)}return t},sortMyCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=0;e<t.length;e++){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,n=s.POSITION_MY_CARDS_Y;t[e].phomCardController.isSelected=!1,t[e].phomCardController.moveTo(i,n)}},showDarkEffectAllCardsPlay:function(t){for(var e=t.PhomPlayer.cardPlayNode.getChildren(),i=0;i<e.length;i++)e[i].cardController.showDarkEffect()},checkShowButtons:function(){if(this.Phom.PhomState.isPlaying()){for(var t=!1,e=this.Phom.myCardsNode.getChildren(),i=0;i<e.length;i++)if(e[i].phomCardController.isSelected){t=!0;break}this.Phom.checkIsMyTurn()&&(t?this.PhomUI.showDanhButton():this.PhomUI.hideDanhButton(),this.Phom.isBocBai?this.PhomUI.showBocButton():this.PhomUI.hideBocButton(),this.Phom.isBocBai&&this.checkCanAn()?this.PhomUI.showAnButton():this.PhomUI.hideAnButton(),!this.Phom.isBocBai&&this.Phom.isChotHa&&this.checkCanHa()?(this.PhomUI.showHaButton(),this.PhomUI.showHaTuDongButton()):(this.PhomUI.hideHaButton(),this.PhomUI.hideHaTuDongButton()),this.Phom.isGui&&!this.PhomUI.isShowHaButton()&&this.checkCanGui()&&!this.Phom.myPlayer.PhomPlayer.isMom()?this.PhomUI.showGuiButton():this.PhomUI.hideGuiButton(),!this.Phom.isBocBai&&this.checkU()?this.PhomUI.showUButton():this.PhomUI.hideUButton())}},checkCanAn:function(){if(this.lastCardPlay){var t=this.getListMyCards(),e=this.getListCardsAn();return e.push(this.lastCardPlay),r.checkCardAnValid(e,t)}return!1},checkCanHa:function(){var t=this.getListMyCards();return this.getListCardsAn().length>0||r.checkCoPhom(t)},checkCanGui:function(){var t=this.getListMyCards(),e=this.getListPhomHa();if(e.length>0&&t.length>0)for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++){var o=r.cloneCards(e[i]),s=t[n];if(o.push(s),0===r.getMaxCardsData([],o).cardsRemain.length)return!0}return!1},checkU:function(){var t=this.getListCards(),e=r.getMaxCardsData([],t),i=0;for(var n in e.listPhom)for(var o in e.listPhom[n])i++;return i>=3&&i>=t.length-1},resumeCards:function(t){for(var e=t.data.players,i=0;i<e.length;i++)if(e[i].is_player){var n=e[i].cards_play,o=e[i].cards_ha;if(e[i].isItMe){var s=e[i].cards,a=e[i].cards_an;s=s.concat(a),this.initMyCards(r.sortCards(s,a),!1,a)}else e[i].PhomPlayer.showCardBack();e[i].PhomPlayer.showCardsPlay(n),e[i].PhomPlayer.showCardsHa(o)}},showOtherPlayerCards:function(t,e){var i=t.cards||t.data.cards,n=t.win_type||t.data.win_type;for(var o in i){var s=i[o].cards,c=i[o].cards_an,h=i[o].user_id,l=i[o].is_mom,u=i[o].score,d=i[o].rank,m=this.Phom.getPlayerByUserId(h);m&&(m.isItMe||(m.PhomPlayer.cardAnNode.removeAllChildren(!0),m.PhomPlayer.showCards(r.sortCards(s),c,e)),l&&d>1?m.PhomPlayer.showEffectMom():(m.PhomPlayer.showEffectByRank(d),n===a.TINH_DIEM&&m.PhomPlayer.showScore(u)))}},showAnBaiMoneyChange:function(t){var e=t.data.is_chot_ha,i=t.data.money_change;for(var n in i){var o=i[n].user_id,s=i[n].money_change,a=this.Phom.getPlayerByUserId(o);a&&(a.BasePlayer.showChangeBalance(s),e&&(s>0?a.PhomPlayer.showEffectAnChot():s<0&&a.PhomPlayer.showEffectBiAnChot()))}},showResultMoneyChange:function(t){var e=t.data||t,i=e.win_type,n=e.money_change;for(var o in n){var s=n[o].user_id,a=n[o].money_change,r=this.Phom.getPlayerByUserId(s);r&&(r.BasePlayer.showChangeBalance(a),r.PhomPlayer.showEffectResultByMoneyChange(a,i),r.isItMe&&a>0&&this.GameCommon.Audio.playWin())}},minusNumberTableCards:function(){var t=this.PhomUI.numberCards;--t,this.PhomUI.showTableCard(t)},hideTextAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.hideText(),this.listPlayers[t].BasePlayer.hideWinLoseEffect()},clearChotHaAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].PhomPlayer.setChotHa(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){for(var e=t.time,i=t.time_remain,n=0;n<this.listPlayers.length;n++)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},reset:function(){this.lastCardPlay=null,this.lastPlayerId=null}};e.exports=c,cc._RF.pop()},{"./PhomCard":"PhomCard","./PhomConfig":"PhomConfig","./PhomUtil":"PhomUtil","./PhomWinType":"PhomWinType","./item/PhomCardController":"PhomCardController"}],PhomHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"e435fT40PFPQLdATP9wcbMs","PhomHandlerRequest");var n=t("./PhomConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{Phom:null,init:function(t){this.Phom=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Phom.showChat(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,n=0;n<i.length;n++)switch(i[n]){case o.GOLD:this.Phom.initGold(e);break;case o.MONEY:this.Phom.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){for(var e=t.changedVars,i=0;i<e.length;i++)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.ROOM_INFO:this.Phom.handleRoomInfo(e);break;case n.START:this.Phom.handleStart(e);break;case n.COUNT_DOWN:this.Phom.handleCountDown(e);break;case n.DANH_BAI:this.Phom.handleDanhBai(e);break;case n.BOC_BAI:this.Phom.handleBocBai(e);break;case n.AN_BAI:this.Phom.handleAnBai(e);break;case n.HA_BAI:this.Phom.handleHaBai(e);break;case n.GUI_BAI:this.Phom.handleGuiBai(e);break;case n.RESULT:this.Phom.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.Phom.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.Phom.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.Phom.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Phom.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./PhomConstant":"PhomConstant"}],PhomPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"00708ZDte1HPL12f/c4t3Yi","PhomPlayer");var n=t("./PhomCard"),o=t("./PhomConfig"),s=t("../../helper/Message"),a=t("./PhomWinType");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,chotHaNode:cc.Node,cardPlayNode:cc.Node,cardAnNode:cc.Node,cardHaNode:cc.Node},onLoad:function(){},isMom:function(){return 0===this.cardHaNode.getChildrenCount()},showCards:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.cardsNode.removeAllChildren(!0),t=t.concat(e);for(var s=0;s<t.length;s++){var a=new n(t[s]),r=cc.instantiate(this.cardPrefab);r.trueValue=t[s],r.parent=this.cardsNode,r.scale=o.SCALE_CARDS_IN_OTHER_PLAYE;var c=r.getComponent("CardController");c.init(a),r.cardController=c;var h=0;for(var l in h=this.cardsNode.x>0?s*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-s-1)*-o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,i?(r.setPosition(0,0),r.runAction(cc.moveTo(o.TIME_SHOW_CARDS_OTHER_PLAYERS,h,0))):r.setPosition(h,0),e)if(t[s]===e[l]){c.showHighLightBlue();break}}},showCardsAn:function(t){this.cardAnNode.removeAllChildren(!0);for(var e=0;e<t.length;e++){var i=new n(t[e]),s=cc.instantiate(this.cardPrefab);s.trueValue=t[e],s.parent=this.cardAnNode,s.scale=o.SCALE_CARDS_IN_OTHER_PLAYER;var a=s.getComponent("CardController");a.init(i),s.cardController=a,s.setPosition(e*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0)}},showCardsPlay:function(t){this.cardPlayNode.removeAllChildren(!0);for(var e=0;e<t.length;e++){var i=new n(t[e]),s=cc.instantiate(this.cardPrefab);s.trueValue=t[e],s.parent=this.cardPlayNode,s.scale=o.SCALE_CARDS_IN_OTHER_PLAYER;var a=s.getComponent("CardController");a.init(i),s.cardController=a,s.setPosition(e*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),e!==t.length-1&&a.showDarkEffect()}},showCardsHa:function(t){this.cardHaNode.removeAllChildren(!0);for(var e=0;e<t.length;e++)for(var i=t[e],s=0;s<i.length;s++){var a=new n(i[s]),r=cc.instantiate(this.cardPrefab);r.trueValue=i[s],r.parent=this.cardHaNode,r.scale=o.SCALE_CARDS_IN_OTHER_PLAYER;var c=r.getComponent("CardController");c.init(a),r.cardController=c,r.setPosition(s*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-o.DISTANCE_Y_TWO_CARDS_IN_TABLE*e)}},getMinXCardHaByPositionY:function(t){var e=this.cardHaNode.getChildren(),i=1e3;for(var n in e)Math.abs(e[n].y-t<1)&&e[n].x<i&&(i=e[n].x);return i},getMaxXCardHaByPositionY:function(t){var e=this.cardHaNode.getChildren(),i=-1e3;for(var n in e)Math.abs(e[n].y-t<1)&&e[n].x>i&&(i=e[n].x);return i},addCardsHa:function(t){this.cardsHa=this.cardsHa.concat(t)},getCardsHa:function(){return this.cardsHa},showCardBack:function(){this.cardBackNode.active=!0},hideCardBack:function(){this.cardBackNode.active=!1},setChotHa:function(t){this.chotHaNode.active=t},showChotHa:function(){this.chotHaNode.active=!0},hideChotHa:function(){this.chotHaNode.active=!1},showEffectAnChot:function(){this.node.getComponent("BasePlayer").showTextLight(s.PHOM_AN_CHOT)},showEffectBiAnChot:function(){this.node.getComponent("BasePlayer").showTextDark(s.PHOM_BI_AN_CHOT)},showEffectMom:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_MOM)},showEffectByRank:function(t){var e="";switch(t){case 1:e=s.PHOM_NHAT;break;case 2:e=s.PHOM_NHI;break;case 3:e=s.PHOM_BA;break;case 4:e=s.PHOM_BET}0===t||(1===t?this.node.getComponent("BasePlayer").showWinEffect(e):this.node.getComponent("BasePlayer").showLoseEffect(e))},showScore:function(t){var e=String.format(s.PHOM_SCORE,t);this.cardsNode.x>0?this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(o.POSITION_PLAYER_SCORE_X,o.POSITION_PLAYER_SCORE_Y)):this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(-o.POSITION_PLAYER_SCORE_X,o.POSITION_PLAYER_SCORE_Y))},showEffectResultByMoneyChange:function(t,e){switch(e){case a.TINH_DIEM:break;case a.U:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U);break;case a.U_DEN:t>0?this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_DEN):t<0&&this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_DEN);break;case a.U_TRON_DEN:t>0?this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_TRON):t<0&&this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_DEN);break;case a.U_TRON:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_TRON);break;case a.U_KHAN:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_KHAN)}},reset:function(){this.listPhom=null,this.cardsHa=[],this.hideChotHa(),this.hideCardBack(),this.cardsNode.removeAllChildren(!0),this.cardPlayNode.removeAllChildren(!0),this.cardAnNode.removeAllChildren(!0),this.cardHaNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./PhomCard":"PhomCard","./PhomConfig":"PhomConfig","./PhomWinType":"PhomWinType"}],PhomState:[function(t,e,i){"use strict";cc._RF.push(e,"295fdbohvNGVZkMrtE0sQSN","PhomState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],PhomUI:[function(t,e,i){"use strict";cc._RF.push(e,"9e7fbj4STxLBI2L3tAo86b9","PhomUI"),cc.Class({extends:cc.Component,properties:{xepButton:cc.Node,anButton:cc.Node,bocButton:cc.Node,uButton:cc.Node,haButton:cc.Node,haTuDongButton:cc.Node,guiButton:cc.Node,danhButton:cc.Node,tableCardNode:cc.Node,tableCardLabel:cc.Label,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t=0;t<this.playersNode.length;t++)this.playersNode[t].active=!1},showTableCard:function(t){this.numberCards=t,this.tableCardLabel.string=t,this.tableCardNode.active=!(t<=0)},hideTableCard:function(){this.tableCardNode.active=!1},showXepButton:function(){this.xepButton.active=!0},hideXepButton:function(){this.xepButton.active=!1},showAnButton:function(){this.anButton.active=!0},hideAnButton:function(){this.anButton.active=!1},isShowBocButton:function(){return this.bocButton.active},showBocButton:function(){this.bocButton.active=!0},hideBocButton:function(){this.bocButton.active=!1},showUButton:function(){this.uButton.active=!0},hideUButton:function(){this.uButton.active=!1},isShowHaButton:function(){return this.haButton.active},showHaButton:function(){this.haButton.active=!0},hideHaButton:function(){this.haButton.active=!1},showHaTuDongButton:function(){this.haTuDongButton.active=!0},hideHaTuDongButton:function(){this.haTuDongButton.active=!1},showGuiButton:function(){this.guiButton.active=!0},hideGuiButton:function(){this.guiButton.active=!1},showDanhButton:function(){this.danhButton.active=!0},hideDanhButton:function(){this.danhButton.active=!1},disableAllPlaceHolder:function(){for(var t=0;t<this.playersPlaceHolderNode.length;t++)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},hideAllButtons:function(){this.hideAnButton(),this.hideBocButton(),this.hideDanhButton(),this.hideGuiButton(),this.hideHaButton(),this.hideHaTuDongButton(),this.hideUButton(),this.hideXepButton()},reset:function(){this.hideTableCard(),this.hideAllButtons()}}),cc._RF.pop()},{}],PhomUtil:[function(t,e,i){"use strict";cc._RF.push(e,"d80b0bEOztHw7qSo7tr9ZLm","PhomUtil");var n={checkCoPhom:function(t){var e=this.cloneCards(t),i=this.cloneCards(t);this.sortCardsASC(e),this.sortCardsTypeASC(i);for(var n=0;n<e.length-2;n++){var o=[];if(o.push(e[n]),o.push(e[n+1]),o.push(e[n+2]),this.checkPhomNgang(o))return!0}for(var s=0;s<i.length-2;s++){var a=[];if(a.push(i[s]),a.push(i[s+1]),a.push(i[s+2]),this.checkPhomDoc(a))return!0}return!1},checkCardAnValid:function(t,e){var i=this.cloneCards(e),n=this.cloneCards(e);this.sortCardsASC(i),this.sortCardsTypeASC(n);var o=!1,s=!1;if(0===t.length)return!0;for(var a=0;a<t.length;a++)for(var r=0;r<i.length-1;r++){var c=[];if(c.push(i[r]),c.push(i[r+1]),c.push(t[a]),this.checkPhomNgang(c)){var h=this.cloneCards(t);if(0===(h=this.removeCard(h,t[a])).length)return!0;var l=this.cloneCards(i);l=this.removeCards(l,c),o=this.checkCardAnValid(h,l)}}for(var u=0;u<t.length;u++)for(var d=0;d<n.length-1;d++){var m=[];if(m.push(n[d]),m.push(n[d+1]),m.push(t[u]),this.checkPhomDoc(m)){var f=this.cloneCards(t);if(0===(f=this.removeCard(f,t[u])).length)return!0;var p=this.cloneCards(n);p=this.removeCards(p,m),s=this.checkCardAnValid(f,p)}}return o||s},sortCards:function(t,e){t=this.cloneCards(t),this.sortCardsASC(t);for(var i=[],n=this.getMaxCardsData([],t,e),o=n.listPhom,s=n.cardsRemain,a=0;a<o.length;a++)for(var r=0;r<o[a].length;r++)i.push(o[a][r]);var c=this.sortCa([],s).cardsCa;return i=i.concat(c)},sortCa:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e);this.sortCardsASC(n);var o=this.getArrayCa(i,n);return i=o.cardsCa,(n=o.cardsRemain).length>0?this.sortCa(i,n):{cardsCa:i,cardsRemain:n}},getArrayCa:function(t,e){var i=this.cloneCards(t),n=this.cloneCards(e);this.sortCardsASC(n);for(var o=0;o<n.length;o++)for(var s=0;s<i.length;s++)if(this.checkCa(n[o],i[s])){i.push(n[o]),n.splice(o,1),o--;break}for(var a=!1,r=0;r<n.length-1&&!a;r++)for(var c=r+1;c<n.length;c++)if(this.checkCa(n[r],n[c])){i.push(n[r]),n.splice(r,1),a=!0;break}for(var h=0;h<n.length;h++)if(a){for(var l=0;l<i.length;l++)if(this.checkCa(n[h],i[l])){i.push(n[h]),n.splice(h,1),h--;break}}else i.push(n[h]),n.splice(h,1),h--;return{cardsCa:i,cardsRemain:n}},checkCa:function(t,e){return this.getValue(t)===this.getValue(e)||Math.abs(this.getValue(t)-this.getValue(e))<3&&this.getType(t)===this.getType(e)},getMaxCardsData:function(t,e,i){var n=this.cloneListPhom(t),o=this.cloneCards(e);this.sortCardsASC(o);var s=this.cloneCards(e);this.sortCardsTypeASC(s);var a=this.getScoreByCards(e),r=this.cloneListPhom(t),c=this.cloneCards(e);if(o.length>=3)for(var h=0;h<o.length-2;h++)for(var l=h+3;l<=o.length;l++){var u=this.cloneListPhom(n),d=this.cloneCards(o),m=d.slice(h,l);if(!this.checkPhomNgang(m))break;var f=this.cloneListPhom(u),p=this.cloneCards(d);f.push(m),p=this.removeCards(p,m);var _=this.getMaxCardsData(f,p,i);this.checkListPhomValid(_,i)&&_.maxScore<a&&(a=_.maxScore,r=_.listPhom,c=_.cardsRemain)}if(s.length>=3)for(var S=0;S<s.length-2;S++)for(var g=S+3;g<=s.length;g++){var C=this.cloneListPhom(n),N=this.cloneCards(s),E=(N=this.sortCardsTypeASC(N)).slice(S,g);if(!this.checkPhomDoc(E))break;var T=this.cloneListPhom(C),I=this.cloneCards(N);T.push(E),I=this.removeCards(I,E);var v=this.getMaxCardsData(T,I,i);this.checkListPhomValid(v,i)&&v.maxScore<a&&(a=v.maxScore,r=v.listPhom,c=v.cardsRemain)}return{maxScore:a,listPhom:r,cardsRemain:c}},checkListPhomValid:function(t,e){for(var i in e){var n=!1;for(var o in t.listPhom){var s=0;for(var a in t.listPhom[o])t.listPhom[o][a]===e[i]&&(s++,n=!0);if(s>1)return!1}if(!n)return!1}return!0},removeCard:function(t,e){return this.removeCards(t,[e])},removeCards:function(t,e){return t.filter(function(t){return-1==e.indexOf(t)})},checkPhom:function(t){return this.checkPhomNgang(t)||this.checkPhomDoc(t)},checkPhomNgang:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,n=0,o=0;o<e.length;o++)if(n++,0===i)i=e[o];else if(this.getValue(e[o])!==this.getValue(i))return!1;return n>=3},checkPhomDoc:function(t){var e=this.cloneCards(t);this.sortCardsTypeASC(e);for(var i=0,n=0,o=0;o<e.length;o++)if(n++,0===i)i=e[o];else{if(this.getValue(e[o])!==this.getValue(i)+1||this.getType(e[o])!==this.getType(i))return!1;i=e[o]}return n>=3},getScoreByCards:function(t){for(var e=0,i=0;i<t.length;i++)e+=this.getValue(t[i]);return e},sortCardsASC:function(t){return t.length>1?t.sort(function(t,e){return t-e}):t},sortCardsTypeASC:function(t){if(t.length>1){var e=this;return t.sort(function(t,i){return e.getValue(t)+100*e.getType(t)-(e.getValue(i)+100*e.getType(i))})}return t},cloneListPhom:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.cloneCards(t[i]));return e},cloneCards:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getValue:function(t){return parseInt(t/100)},getType:function(t){return t%4},arrayDiff:function(t,e){for(var i=[],n=[],o=0;o<t.length;o++)i[t[o]]=!0;for(var s=0;s<e.length;s++)i[e[s]]?delete i[e[s]]:i[e[s]]=!0;for(var a in i)n.push(a);return n}};e.exports=n,cc._RF.pop()},{}],PhomWinType:[function(t,e,i){"use strict";cc._RF.push(e,"e7c16m7CjxIu6OQjrlMZHut","PhomWinType");e.exports={KHONG_U:"KHONG_U",TINH_DIEM:"TINH_DIEM",U:"U",U_KHAN:"U_KHAN",U_TRON:"U_TRON",U_DEN:"U_DEN",U_TRON_DEN:"U_TRON_DEN"},cc._RF.pop()},{}],Phom:[function(t,e,i){"use strict";cc._RF.push(e,"2eb98yZ+Z9Psr5xqaQxfV4n","Phom");var n=t("../../base/BaseController"),o=t("./PhomConstant"),s=t("./PhomConfig"),a=t("./PhomUI"),r=t("./PhomState"),c=t("./PhomHandlerRequest"),h=t("./PhomHandlerEffect"),l=t("./PhomWinType"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),f=t("../../helper/Message");cc.Class({extends:n,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,tableCardsNode:cc.Node,myCardsNode:cc.Node,PhomUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_PHOM),this.sfsManager.setController(this),this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.isBocBai=!1,this.isHa=!1,this.isGui=!1,this.isChotHa=!1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.PhomUI.playersNode,this.isMoneyType||this.PhomUI.disableAllPlaceHolder(),this.PhomConstant=o,this.PhomConfig=s,this.PhomState=r,this.PhomHandlerRequest=c,this.PhomHandlerRequest.init(this),this.PhomHandlerEffect=h,this.PhomHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.PhomHandlerRequest.onPublicMessage.bind(this.PhomHandlerRequest),this.onRoomVarsUpdate=this.PhomHandlerRequest.onRoomVarsUpdate.bind(this.PhomHandlerRequest),this.onUserVarsUpdate=this.PhomHandlerRequest.onUserVarsUpdate.bind(this.PhomHandlerRequest),this.onResponse=this.PhomHandlerRequest.onResponse.bind(this.PhomHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners(),this.clearAllTimeout()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;this.PhomUI.hideAllPlayers(),this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i=0;i<t.length;i++)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e=0;e<t.length;e++)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("PhomPlayer");t.BasePlayer=n,t.PhomPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRequestLeftRoom(t.request_left_room),n.setRoomMaster(!1),n.setPlayerName(t.nick_name),n.setBalance(t.balance),o.setChotHa(t.is_chot_ha),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.PhomState.setState(e),this.PhomState.isStop()?this.reset():this.PhomState.isWaiting()?this.resumeStateWaiting(t):this.PhomState.isPlaying()?this.resumeStatePlaying(t):this.PhomState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.PhomHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.number_table_cards;this.PhomUI.showTableCard(e),this.PhomHandlerEffect.handlePlayingPlayer(t),this.PhomHandlerEffect.resumeCards(t)},resumeStateFinish:function(t){this.PhomHandlerEffect.resumeCards(t),this.PhomHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){for(var t=this.getTempRequests(),e=0;e<t.length;e++)this.PhomHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.PhomState.setWaiting(),this.GameCommon.hideWaitingNode(),this.PhomHandlerEffect.startCountDownAllPlayers(t)):(this.PhomState.setStop(),this.PhomHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.cards,i=t.data.number_table_cards;this.PhomState.setPlaying(),this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.dealCards(e),this.PhomUI.showTableCard(i),this.PhomHandlerEffect.handlePlayingPlayer(t),this.PhomHandlerEffect.handleStartGame(t)},handleDanhBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handlePlayedPlayer(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleBocBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleBocBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleAnBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleAnBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleHaBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleHaBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleGuiBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleGuiBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleResult:function(t){var e=t.data.win_type;this.PhomState.setFinish(),this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomUI.hideAllButtons(),e===l.U_KHAN?this.timeoutResult=setTimeout(function(){this.PhomHandlerEffect.handleResult(t)}.bind(this),2e3):this.PhomHandlerEffect.handleResult(t),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.PhomState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){for(var e=t.data.players,i=0;i<e.length;i++)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.PhomHandlerEffect.clearRequestLeftRoomAllPlayers();for(var i=!1,n=t.data.players,o=0;o<n.length;o++){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(f.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(f.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onXepClick:function(){this.GameCommon.Audio.playClick(),this.PhomHandlerEffect.sort()},onAnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.AN_BAI)},onBocClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.BOC_BAI)},onUClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.U)},onHaClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(t.length>=3){var e={},i=[];for(var n in t)i.push(t[n].trueValue);e.cards=i,this.sendRequest.send(o.HA_BAI,e)}else this.showToast(f.PHOM_PLEASE_SELECT_CARDS_HA)},onHaTuDongClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.AUTO_HA_BAI)},onGuiClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(1===t.length){var e={};e.card=t[0].trueValue,this.sendRequest.send(o.GUI_BAI,e)}else this.showToast(f.PHOM_SELECT_ONE_CARD)},onDanhClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(this.PhomUI.isShowBocButton())this.showToast(f.PHOM_PLEASE_BOC_BAI);else if(1===t.length){var e={};e.card=t[0].trueValue,this.sendRequest.send(o.DANH_BAI,e)}else this.showToast(f.PHOM_SELECT_ONE_CARD)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getLeftNearestNode:function(t){for(var e=this.myCardsNode.getChildren(),i=0,n=null,o=0;o<e.length;o++)e[o]!=t&&t.x-e[o].x>0&&(0===i?(i=t.x-e[o].x,n=e[o]):t.x-e[o].x<i&&(i=t.x-e[o].x,n=e[o]));return n},getListCardsSelected:function(){for(var t=this.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].phomCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCard:function(t){for(var e=this.myCardsNode.getChildren(),i=0;i<e.length;i++)if(e[i].trueValue===t)return e[i];return null},getCardsNodeByCards:function(t){for(var e=this.myCardsNode.getChildren(),i=[],n=0;n<e.length;n++)for(var o in t)if(e[n].trueValue===t[o]){i.push(e[n]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t=0;t<this.listPlayers.length;t++)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.PhomHandlerEffect.clearAllTimeout()},reset:function(){this.idPlaying=-1,this.isBocBai=!1,this.isHa=!1,this.isGui=!1,this.isChotHa=!1,this.PhomUI.reset(),this.PhomHandlerEffect.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0);for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].PhomPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./PhomConfig":"PhomConfig","./PhomConstant":"PhomConstant","./PhomHandlerEffect":"PhomHandlerEffect","./PhomHandlerRequest":"PhomHandlerRequest","./PhomState":"PhomState","./PhomUI":"PhomUI","./PhomWinType":"PhomWinType"}],PlasticityPositionType:[function(t,e,i){"use strict";cc._RF.push(e,"d096fGDKbZE/496bkCmgIn6","PlasticityPositionType");e.exports={NO:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},cc._RF.pop()},{}],PlayHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"f9907hg641KIq7nVtlLFbeL","PlayHistoryItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.playBalanceLabel.string=n.numberWithCommas(t.money_change),this.remainBalanceLabel.string=n.numberWithCommas(t.balance);var i=t.content||"",s=t.game_name||"";i.length>o.MAX_LENGTH_CONTENT&&(i=i.substring(0,o.MAX_LENGTH_CONTENT-3)+"..."),s.length>o.MAX_LENGTH_CONTENT-7&&(s=s.substring(0,o.MAX_LENGTH_CONTENT-10)+"..."),this.noteLabel.string=i,this.nameLabel.string=s;var a=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=a},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],PlayerInvite:[function(t,e,i){"use strict";cc._RF.push(e,"17e39TMQWFOsr+oSPhEHQcu","PlayerInvite");var n=t("../../../helper/Constant"),o=t("../../../helper/Message"),s=t("../../../util/Util"),a=t("../../../util/FormatUtil"),r=t("../../../object/RoomType");cc.Class({extends:cc.Component,init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},properties:{contentRichText:cc.RichText,inviteToggle:cc.Toggle},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},initData:function(t){this.data=t;var e=s.getGameNameByRoomName(t.game_name),i=a.numberWithCommas(t.min_bet),n=t.nick_name,r=s.getRoomTypeByRoomTypeCode(t.room_type+"");this.contentRichText.string=String.format(o.INVITE_MESSAGE,n,e,i,r),this.inviteToggle.isChecked=!0},onInviteToggle:function(){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.updateInviteGame(t,function(t){},function(t){}),this.GameCenter.getUser().invite_on=1==this.GameCenter.getUser().invite_on?0:1},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){if(this.GameCenter.Audio.playClick(),this.data.is_buy_in)this.initBuyInForm(),this.GameCenterUI.showBuyInFormNode();else{var t={room_name:this.data.room_name};this.GameCenter.sendRequest.sendNoPrefixToZone(n.REQUEST_ACCEPT_INVITE,t)}this.saveInvite(),this.dialogForm.hideDialog()},initBuyInForm:function(){var t=this.data.game_name,e=this.data.min_bet,i=this.GameCenter.BuyInForm,c=0;this.data.room_type==r.GOLD_CODE?c=this.GameCenter.getGold():this.data.room_type==r.MONEY_CODE&&(c=this.GameCenter.getMoney());var h=this.getGameDataByGameList(t),l=h[n.MIN_BUY]*e,u=h[n.MAX_BUY]*e,d=s.getRoomTypeByRoomTypeCode(this.data.room_type);if(l>c){var m=String.format(o.NOT_ENOUGH_MONEY_TO_JOIN_GAME,a.numberWithCommas(l),d);this.GameCenter.showDialogMessage(o.JOIN_ROOM_TITLE,m)}else u>c&&(u=c),i.setInvite(!0),i.initDataInvite(this.data),i.setRound(e),i.setMinValue(l),i.setMaxValue(u),this.GameCenterUI.showBuyInFormNode()},getGameDataByGameList:function(t){var e=this.GameCenter.getConfig().list_game;for(var i in e)if(e[i][n.SHORT_NAME]===t)return e[i]},saveInvite:function(){if(!this.inviteToggle.isChecked){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.updateInviteGame(t,function(t){},function(t){}),this.GameCenter.getUser().invite_on=1==this.GameCenter.getUser().invite_on?0:1}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],PlayerOnlineItem:[function(t,e,i){"use strict";cc._RF.push(e,"97a92qpC6VNI6MSnccS5KID","PlayerOnlineItem"),cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label},onLoad:function(){},init:function(t,e){this.setNickname(t),this.setAvatar(e)},setNickname:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var n=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=n}})}}),cc._RF.pop()},{}],PokerBetState:[function(t,e,i){"use strict";cc._RF.push(e,"6db845IwhJEmbVltqCXSmXN","PokerBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],PokerCard:[function(t,e,i){"use strict";cc._RF.push(e,"92b86eAQmpD5qd/8mauG98o","PokerCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],PokerConfig:[function(t,e,i){"use strict";cc._RF.push(e,"69ddbQHtfFEpa1vA+Vxdvfa","PokerConfig");e.exports={NUMBER_CARDS_EACH_PLAYERS:2,NUMBER_CARDS_TABLE:5,NUMBER_PLAYERS:6,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CARDS_DEALDER_X:0,POSITION_CARDS_DEALDER_Y:150,SCALE_CARD_DEALDER:.7,SCALE_CARD_IN_TABLE:.85,TIME_SHOW_TABLE_CARDS:.5,DISTANCE_TWO_CARDS_TABLE:95,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_RESULT_X:180,POSITION_PLAYER_RESULT_Y:-80},cc._RF.pop()},{}],PokerConstant:[function(t,e,i){"use strict";cc._RF.push(e,"9b2644o8ehGGrFHNEphDI2k","PokerConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",FLOP:"FLOP",TURN:"TURN",RIVER:"RIVER",FOLD:"FOLD",CHECK:"CHECK",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],PokerGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"1416e229idE8KRwUx8cYckk","PokerGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",THUNG_PHA_SANH_LON:"THUNG_PHA_SANH_LON",THUNG_PHA_SANH:"THUNG_PHA_SANH",TU_QUY:"TU_QUY",CU_LU:"CU_LU",THUNG:"THUNG",SANH_DAI:"SANH_DAI",SANH_NHI:"SANH_NHI",SANH_THUONG:"SANH_THUONG",SAM:"SAM",THU:"THU",DOI:"DOI",BAI_CAO:"BAI_CAO"},cc._RF.pop()},{}],PokerHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"1dc8fBS1rxMMakKyDAJoQH/","PokerHandlerEffect");var n=t("./PokerConfig"),o=t("./PokerBetState"),s=t("./PokerCard"),a=t("../../helper/Message"),r={init:function(t){this.Poker=t,this.PokerUI=t.PokerUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.timeoutResult=null},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].PokerPlayer.showCards(t,!0):this.listPlayers[e].PokerPlayer.showBackCards(!0)},startGame:function(t){this.PokerUI.hideAllButtons();var e=t.data.big_blind,i=e.user_id,n=e.bet_amount_round,o=this.Poker.getPlayerByUserId(i);o&&o.BasePlayer.showBetNode(n);var s=t.data.small_blind,a=s.user_id,r=s.bet_amount_round,c=this.Poker.getPlayerByUserId(a);c&&c.BasePlayer.showBetNode(r),this.PokerUI.showTotalChip(0)},handlePlayingPlayer:function(t){this.stopCountDownAllPlayers();var e=t.data.playing_player||t.data,i=e.user_id,n=e.balance,o=e.min_bet,s=this.Poker.getPlayerByUserId(i);s&&(s.isItMe?(this.PokerUI.showAllButtons(),this.displayButtons(n,o),o>0?this.GameCommon.setMinMaxBetForm(o,n):this.GameCommon.setMinMaxBetForm(this.Poker.minBet,n)):this.PokerUI.hideAllButtons(),this.Poker.startCountDownPlayer(s,t.time_remain,t.time))},showFirstResponseTableCards:function(t){var e=t.data.cards;for(var i in e){var o=cc.instantiate(this.Poker.cardPrefab);o.setPosition(n.POSITION_CARDS_DEALDER_X,n.POSITION_CARDS_DEALDER_Y),o.scale=n.SCALE_CARD_DEALDER,o.parent=this.Poker.tableCardNode;var a=o.getComponent("CardController"),r=new s(e[i]);o.trueValue=e[i],a.init(r),a.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_TABLE_CARDS,(i-2)*n.DISTANCE_TWO_CARDS_TABLE,0,n.SCALE_CARD_IN_TABLE)}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;this.PokerUI.showTotalChip(e);for(var i=0,n=this.listPlayers.length;i<n;i++)this.listPlayers[i].PokerPlayer.moveToCenterTable()},showCards:function(t,e){var i=t.data.cards[0],o=cc.instantiate(this.Poker.cardPrefab);o.setPosition(n.POSITION_CARDS_DEALDER_X,n.POSITION_CARDS_DEALDER_Y),o.scale=n.SCALE_CARD_DEALDER,o.parent=this.Poker.tableCardNode;var a=o.getComponent("CardController"),r=new s(i);o.trueValue=i,a.init(r),a.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_TABLE_CARDS,e*n.DISTANCE_TWO_CARDS_TABLE,0,n.SCALE_CARD_IN_TABLE)},showResult:function(t){var e=t.data.players,i=t.data.cards;this.showCardsInTable(i),this.GameCommon.BetForm.hideDialog(!1),this.PokerUI.hideAllButtons(),this.timeoutResult=setTimeout(function(){for(var t in e){var i=e[t].money_change,n=e[t].user_id,o=e[t].cards,s=e[t].cards_high,a=e[t].type_cards_high,r=this.Poker.getPlayerByUserId(n);r&&(r.BasePlayer.showChangeBalance(i),r.PokerPlayer.isFold()||r.BasePlayer.showEffectByChangeBalance(i),r.PokerPlayer.showEffectByGroupCardsType(a),r.isItMe?(this.showEffectHighCards(s),i>0&&this.GameCommon.Audio.playWin()):o&&r.PokerPlayer.showCards(o),i>0&&this.PokerUI.getTotalChip()>0&&this.showEffectWinCenterBalance(r))}}.bind(this),1500)},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.Poker.chipPrefab);e.parent=this.Poker.gameNode,e.setPosition(n.POSITION_CENTER_MONEY_X,n.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.Poker.isMoneyType),e.runAction(cc.sequence(cc.moveTo(n.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.PokerUI.showTotalChip(0)},showCardsInTable:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)for(var i in t)if(this.Poker.getNumberCardInTable()<=i){var o=cc.instantiate(this.Poker.cardPrefab);o.parent=this.Poker.tableCardNode;var a=o.getComponent("CardController"),r=new s(t[i]);o.trueValue=t[i],a.init(r),e?(o.setPosition(n.POSITION_CARDS_DEALDER_X,n.POSITION_CARDS_DEALDER_Y),o.scale=n.SCALE_CARD_DEALDER,a.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_TABLE_CARDS,(i-2)*n.DISTANCE_TWO_CARDS_TABLE,0,n.SCALE_CARD_IN_TABLE)):(a.reveal(!0),o.scale=n.SCALE_CARD_IN_TABLE,o.setPosition((i-2)*n.DISTANCE_TWO_CARDS_TABLE,0))}},showEffectHighCards:function(t){if(t&&t.length>0){this.showDarkEffectAllCards();var e=this.Poker.myPlayer.PokerPlayer.cardsNode.getChildren(),i=this.Poker.tableCardNode.getChildren();for(var n in e)for(var o in t)if(e[n].trueValue===t[o]){var s=e[n].getComponent("CardController");s.hideDarkEffect(),s.showHighLight();break}for(var a in i)for(var r in t)if(i[a].trueValue===t[r]){var c=i[a].getComponent("CardController");c.hideDarkEffect(),c.showHighLight();break}}},showDarkEffectAllCards:function(){var t=this.Poker.myPlayer.PokerPlayer.cardsNode.getChildren(),e=this.Poker.tableCardNode.getChildren();for(var i in e){e[i].getComponent("CardController").showDarkEffect()}for(var n in t){t[n].getComponent("CardController").showDarkEffect()}},displayButtons:function(t,e){this.PokerUI.showAllButtons(),this.PokerUI.setAllInLabelValue(0),this.PokerUI.setCallLabelValue(0),e>0?(this.PokerUI.hideCheckButton(),this.PokerUI.setCallLabelValue(e)):this.PokerUI.hideCallButton(),e>=t?(this.PokerUI.hideCallButton(),this.PokerUI.hideRaiseButton(),this.PokerUI.hideCheckButton(),this.PokerUI.setAllInLabelValue(t)):this.PokerUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].PokerPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===a.POKER_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===o.CHECK?t.PokerPlayer.showEffectCheck():e===o.ALL_IN?t.PokerPlayer.showEffectAllIn():e===o.FOLD&&t.PokerPlayer.showEffectFold()},setRoomMasterPlayer:function(t){this.clearRoomMasterAllPlayers();var e=this.Poker.getPlayerByUserId(t);e&&e.BasePlayer.setRoomMaster(!0)},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutResult)}};e.exports=r,cc._RF.pop()},{"../../helper/Message":"Message","./PokerBetState":"PokerBetState","./PokerCard":"PokerCard","./PokerConfig":"PokerConfig"}],PokerHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"fde23yrKg9EHaFWjbrWjscs","PokerHandlerRequest");var n=t("./PokerConstant"),o=t("../../helper/Constant"),s={Poker:null,init:function(t){this.Poker=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Poker.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.BALANCE:this.Poker.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.COUNT_DOWN:this.Poker.handleCountDown(e);break;case n.START_GAME:this.Poker.handleStartGame(e);break;case n.PLAYER_PLAY:this.Poker.handlePlayerPlay(e);break;case n.BET:this.Poker.handlePlayerBet(e);break;case n.FLOP:this.Poker.handlePlayerFlop(e);break;case n.TURN:this.Poker.handlePlayerTurn(e);break;case n.RIVER:this.Poker.handlePlayerRiver(e);break;case n.FOLD:this.Poker.handlePlayerFold(e);break;case n.CHECK:this.Poker.handlePlayerCheck(e);break;case n.BUY_IN:this.Poker.handlePlayerBuyIn(e);break;case n.RESULT:this.Poker.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.Poker.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.Poker.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.Poker.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Poker.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./PokerConstant":"PokerConstant"}],PokerPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"5f2ba31uE5JnZjSnVSG5nRo","PokerPlayer");var n=t("./PokerConfig"),o=t("./PokerGroupCardsType"),s=t("./PokerCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var o=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=n.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(o),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_CARDS,n.DISTANCE_TWO_CARDS*i,0,n.SCALE_CARD)):(r.reveal(!0),a.setPosition(n.DISTANCE_TWO_CARDS*i,0))}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=n.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var o=cc.instantiate(this.cardBackPrefab);o.parent=this.cardsNode,o.scale=n.SCALE_CARD,t?(o.setPosition(0,0),o.runAction(cc.moveTo(n.TIME_SHOW_CARDS,n.DISTANCE_TWO_CARDS*i,0))):o.setPosition(n.DISTANCE_TWO_CARDS*i,0)}},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=n.POSITION_CENTER_MONEY_X-this.node.x,i=n.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(.5,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.POKER_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case o.THUNG_PHA_SANH_LON:e=a.POKER_THUNG_PHA_SANH_LON;break;case o.THUNG_PHA_SANH:e=a.POKER_THUNG_PHA_SANH;break;case o.TU_QUY:e=a.POKER_TU_QUY;break;case o.CU_LU:e=a.POKER_CU_LU;break;case o.THUNG:e=a.POKER_THUNG;break;case o.SANH_DAI:e=a.POKER_SANH_DAI;break;case o.SANH_NHI:e=a.POKER_SANH_NHI;break;case o.SANH_THUONG:e=a.POKER_SANH_THUONG;break;case o.SAM:e=a.POKER_SAM;break;case o.THU:e=a.POKER_THU;break;case o.DOI:e=a.POKER_DOI;break;case o.BAI_CAO:e=a.POKER_BAI_CAO}e&&this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(n.POSITION_PLAYER_RESULT_X,n.POSITION_PLAYER_RESULT_Y))},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./PokerCard":"PokerCard","./PokerConfig":"PokerConfig","./PokerGroupCardsType":"PokerGroupCardsType"}],PokerState:[function(t,e,i){"use strict";cc._RF.push(e,"c6af7RoaPlEHYZmtFGFp6jL","PokerState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.Poker=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.Poker.GameCommon.showBuyInButton():this.Poker.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],PokerUI:[function(t,e,i){"use strict";cc._RF.push(e,"4f054BlE/lBMbZ5gZltpasW","PokerUI");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{tableCardsNode:cc.Node,totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.totalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?n.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.totalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_CALL,n.numberWithCommas(t)):o.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_ALL_IN,n.numberWithCommas(t)):o.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.totalChip=0,this.hideTotalChip(),this.hideAllButtons(),this.tableCardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Poker:[function(t,e,i){"use strict";cc._RF.push(e,"4770119rqlOz4QXQB36dC8i","Poker");var n=t("../../base/BaseController"),o=t("./PokerConstant"),s=t("./PokerConfig"),a=t("./PokerUI"),r=t("./PokerState"),c=t("./PokerHandlerRequest"),h=t("./PokerHandlerEffect"),l=t("./PokerBetState"),u=t("../../prefab/GameCommon"),d=t("../../helper/Constant"),m=t("../../helper/Message"),f=t("../../object/RoomType");cc.Class({extends:n,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,tableCardNode:cc.Node,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,PokerUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_POKER),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==f.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.PokerUI.playersNode,this.isMoneyType||this.PokerUI.disableAllPlaceHolder(),this.PokerConstant=o,this.PokerConfig=s,this.PokerState=r,this.PokerState.init(this),this.PokerHandlerRequest=c,this.PokerHandlerRequest.init(this),this.PokerHandlerEffect=h,this.PokerHandlerEffect.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.PokerHandlerRequest.onPublicMessage.bind(this.PokerHandlerRequest),this.onRoomVarsUpdate=this.PokerHandlerRequest.onRoomVarsUpdate.bind(this.PokerHandlerRequest),this.onUserVarsUpdate=this.PokerHandlerRequest.onUserVarsUpdate.bind(this.PokerHandlerRequest),this.onResponse=this.PokerHandlerRequest.onResponse.bind(this.PokerHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners(),cc.test=this},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.active=!1}this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("PokerPlayer");t.BasePlayer=n,t.PokerPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRoomMaster(t.is_small_blind),n.setRequestLeftRoom(t.request_left_room),n.setPlayerName(t.nick_name),n.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.PokerState.setState(e),this.PokerState.isStop()?this.reset():this.PokerState.isWaiting()?this.resumeStateWaiting(t):this.PokerState.isPlaying()?this.resumeStatePlaying(t):this.PokerState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.PokerHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.cards,n=t.data.bet_amount,o=t.data.table_cards;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=this.getPlayerByUserId(a);h&&(r>0&&h.BasePlayer.showBetNodeWithoutAnimation(r),this.PokerHandlerEffect.setPlayerStatusByBetState(h,c),h.isItMe||h.PokerPlayer.showBackCards(!1))}this.PokerUI.showTotalChip(n),this.myPlayer.PokerPlayer.showCards(i,!1),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showCardsInTable(o,!1)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.cards,n=t.data.bet_amount,o=t.data.table_cards;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=e[s].money_change,l=this.getPlayerByUserId(a);l&&(r>0&&l.BasePlayer.showBetNodeWithoutAnimation(r),l.BasePlayer.showChangeBalance(h),l.BasePlayer.showEffectByChangeBalance(h),this.PokerHandlerEffect.setPlayerStatusByBetState(l,c),l.isItMe||l.PokerPlayer.showBackCards(!1))}this.PokerUI.showTotalChip(n),this.myPlayer.PokerPlayer.showCards(i,!1),this.PokerUI.hideAllButtons(),this.PokerHandlerEffect.showCardsInTable(o,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.PokerHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.PokerState.setWaiting(),this.GameCommon.hideWaitingNode(),this.PokerHandlerEffect.startCountDownAllPlayers(t)):(this.PokerState.setStop(),this.PokerHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){var e=t.data.cards,i=t.data.small_blind.user_id;this.PokerState.setPlaying(),this.PokerHandlerEffect.setRoomMasterPlayer(i),this.PokerHandlerEffect.dealCards(e),this.PokerHandlerEffect.startGame(t),this.PokerHandlerEffect.handlePlayingPlayer(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.handlePlayingPlayer(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount_round,n=t.data.is_all_in,o=this.getPlayerByUserId(e);o&&(o.BasePlayer.hideText(),o.BasePlayer.showChangeBalance(-i),i>0&&o.BasePlayer.showBetNode(i),n&&o.PokerPlayer.showEffectAllIn()),this.PokerHandlerEffect.stopCountDownAllPlayers()},handlePlayerFlop:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showFirstResponseTableCards(t),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerTurn:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showCards(t,1),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerRiver:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showCards(t,2),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.PokerPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.PokerPlayer.showEffectCheck()},handleResult:function(t){this.PokerState.setFinish(),this.PokerHandlerEffect.stopCountDownAllPlayers(),this.PokerHandlerEffect.resetPlayerNameAllPlayers(),this.PokerHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.PokerState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.PokerHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(o.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(o.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getNumberCardInTable:function(){return this.tableCardNode.getChildren().length},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.PokerHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.PokerUI.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].PokerPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./PokerBetState":"PokerBetState","./PokerConfig":"PokerConfig","./PokerConstant":"PokerConstant","./PokerHandlerEffect":"PokerHandlerEffect","./PokerHandlerRequest":"PokerHandlerRequest","./PokerState":"PokerState","./PokerUI":"PokerUI"}],Processing:[function(t,e,i){"use strict";cc._RF.push(e,"bb9764pvXJAsbMOgTzWN97c","Processing");var n=t("../helper/Config");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.timeoutProcessing=null,this.timeoutCallback=function(){t.node.active=!1}},onEnable:function(){clearTimeout(this.timeoutProcessing),this.timeoutProcessing=setTimeout(this.timeoutCallback,1e3*n.PROCESSING_TIME_OUT)},onDisable:function(){clearTimeout(this.timeoutProcessing)},clearTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){clearTimeout(this.timeoutProcessing)})}),cc._RF.pop()},{"../helper/Config":"Config"}],QuestNotificationItem:[function(t,e,i){"use strict";cc._RF.push(e,"ec1a2VO1DNN74u89Se3mN+o","QuestNotificationItem");var n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label},onLoad:function(){this.initY=this.node.parent.height/2;var t=this.initY+200;this.node.y=t,this.node.runAction(cc.moveTo(.5,this.node.x,this.initY)),this.hideAction=cc.sequence(cc.moveTo(.5,this.node.x,t),cc.callFunc(function(){this.node.removeFromParent(!0)},this)),this.hideTimeout=setTimeout(function(){this.node.runAction(this.hideAction)}.bind(this),1e3*n.QUEST_TIME_SHOW_NOTIFICATION)},onDestroy:function(){clearTimeout(this.hideTimeout)},setMessage:function(t){this.messageLabel.string=t},onCloseClick:function(){clearTimeout(this.hideTimeout),this.node.runAction(this.hideAction)}}),cc._RF.pop()},{"../../helper/Config":"Config"}],QuickChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"133edh2JF5Pl70SZEFuICJM","QuickChatItem"),cc.Class({extends:cc.Component,properties:{textLabel:cc.Label},init:function(t,e){this.GameCommon=t,this.textLabel.string=e},onLoad:function(){},onClick:function(){this.GameCommon.sendChat(this.textLabel.string),this.GameCommon.hideQuickChatNode()}}),cc._RF.pop()},{}],RandomUtil:[function(t,e,i){"use strict";cc._RF.push(e,"96681onZOpKKqSVyoK05Khb","RandomUtil");var n={getRandom:function(t,e){return Math.random()*(e-t)+t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}};e.exports=n,cc._RF.pop()},{}],RankEventItem:[function(t,e,i){"use strict";cc._RF.push(e,"92a32xC1k5MeZE9vuKOIyLO","RankEventItem");var n=t("../../../util/FormatUtil"),o=(t("../../../helper/Constant"),t("../../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,timeLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,prizeLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.noLabel.string=e+1,this.prefixNickNameLabel&&(this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)),this.nickNameLabel.string=t.nick_name,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.prizeLabel.string=n.nFormatter(t.prize);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"b7888h/DQ1JHbhoQLHq9BQs","RankItem");var n=t("../../util/FormatUtil"),o=t("../../util/Util");cc.Class({extends:cc.Component,properties:{noSprite:cc.Sprite,noSpriteFrames:[cc.SpriteFrame],noLabel:cc.Label,nameLabel:cc.Label,valueLabel:cc.Label,avatarSprite:cc.Sprite},onLoad:function(){},init:function(t,e){this.initNo(e),this.nameLabel.string=o.getServerID(t.server_id)+t.nick_name;var i=t.sum_total_amount||t.best_money_win;this.valueLabel.string=n.numberWithCommas(i),this.setAvatar(t.avatar)},initNo:function(t){if(t<3){this.noSprite.node.active=!0,this.noLabel.node.active=!1;var e=this.noSpriteFrames[t];this.noSprite.spriteFrame=e}else this.noSprite.node.active=!1,this.noLabel.node.active=!0,this.noLabel.string=parseInt(t)+1},setAvatar:function(t){var e=t,i=this;e&&n.validateUrlImage(e)&&cc.loader.load(e,function(t,e){if(e instanceof cc.Texture2D){var n=new cc.SpriteFrame(e,cc.Rect(0,0,90,128));i.avatarSprite.spriteFrame=n}})}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],RechargeButtonCard:[function(t,e,i){"use strict";cc._RF.push(e,"b014eqtrHZE56GuF3nPQDit","RechargeButtonCard");var n=t("./RechargeMoney"),o=t("./RechargeSMS"),s=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,vietteBonusNode:cc.Node,mobiBonusNode:cc.Node,vinaBonusNode:cc.Node,megaBonusNode:cc.Node,gateBonusNode:cc.Node,viettelBonusLabel:cc.Label,mobiBonusLabel:cc.Label,vinaBonusLabel:cc.Label,megaBonusLabel:cc.Label,gateBonusLabel:cc.Label,RechargeMoney:n,RechargeSMS:o},init:function(t){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.RechargeMoney.init(t),this.RechargeSMS.init(t)},onLoad:function(){this.reset(),this.initBonus()},initBonus:function(){var t=this.GameCenter.getConfig().telco;for(var e in t){var i=t[e].name;if(0!==t[e].bonus){var n=100*t[e].bonus+"%";this.showCard(i,n)}}},showCard:function(t,e){var i=void 0,n=void 0;switch(t){case s.VIETEL:i=this.vietteBonusNode,n=this.viettelBonusLabel;break;case s.MOBIFONE:i=this.mobiBonusNode,n=this.mobiBonusLabel;break;case s.VINAPHONE:i=this.vinaBonusNode,n=this.vinaBonusLabel;break;case s.GATE:i=this.gateBonusNode,n=this.gateBonusLabel;break;case s.MEGACARD:i=this.megaBonusNode,n=this.megaBonusLabel}i&&(i.active=!0,n.string=e)},onRechargeCardViettelClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectVietel()},onRechargeCardVinaPhoneClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectVinaphone()},onRechargeCardMobifoneClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectMobifone()},onRechargeCardMegaCardClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(!1),this.RechargeMoney.selectMegaCard()},onRechargeCardGateCardClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(!1),this.RechargeMoney.selectGate()},onRechargeCardSMSClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeSMSContentNode.active=!0},showRechargeMoneyContentNode:function(){this.hideAllContents(),this.rechargeMoneyContentNode.active=!0},hideAllContents:function(){this.node.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1},reset:function(){this.vietteBonusNode.active=!1,this.mobiBonusNode.active=!1,this.vinaBonusNode.active=!1,this.gateBonusNode.active=!1,this.megaBonusNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","./RechargeMoney":"RechargeMoney","./RechargeSMS":"RechargeSMS"}],RechargeCardItem:[function(t,e,i){"use strict";cc._RF.push(e,"33c67dny9FJv6OpDYqHaxmP","RechargeCardItem");t("../../util/BrowserUtil");var n=t("../../util/FormatUtil"),o=t("../../helper/Message"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,valueLabel:cc.Label,seriLabel:cc.Label,codeLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.data=e,this.nameLabel.string=e.type_card,this.valueLabel.string=String.format(o.CHARGE_CARD_ITEM_VALUE,n.numberWithCommas(e.amount)),this.seriLabel.string=e.seri_card,this.codeLabel.string=e.number_card},onLoad:function(){},onRechargeClick:function(){if(this.data){var t=this.data.seri_card,e=this.data.number_card,i=this.data.type_card,n=this.data.amount,o=String.format(s.HOST_RECHARGE_CARD,t,e,i,n);console.log(o),cc.sys.openURL(o)}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],RechargeGoldForm:[function(t,e,i){"use strict";cc._RF.push(e,"f35e4CEs8VCxrNcs26gh0p5","RechargeGoldForm");t("../../../util/BrowserUtil");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{valueEditBox:cc.EditBox,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.controller=t},onLoad:function(){this.editboxs=[this.valueEditBox]},onEnable:function(){this.clear(),this.initData()},initData:function(){this.moneyLabel.string=n.numberWithCommas(this.controller.getMoney())},onChangeValue:function(){this.initTotalGold()},initTotalGold:function(){var t=parseInt(this.controller.getConfig().RATE_CONVERT_MONEY_TO_GOLD),e=parseInt(this.valueEditBox.string||0);this.goldLabel.string=n.numberWithCommas(e*t)},onConfirmClick:function(){this.controller.Audio.playClick();var t=this.valueEditBox.string;this.checkAllEditboxNotEmpty()?(t=parseInt(t))>0?this.rechargeGold(t):this.controller.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.NUMBER_MONEY_LARGER_ZERO):this.controller.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.MISSING_INFO)},rechargeGold:function(t){this.controller.showProcessingNode();var e={money:t};this.controller.sendRequest.sendToZone(o.REQUEST_RECHARGE_GOLD,e)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initTotalGold(),this.initData()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeGoldHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"b8e082sJ7xN5LJkDf6k7Uky","RechargeGoldHistoryItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.nameLabel.string=o.RECHARGE_GOLD_HISTORY_NAME,this.playBalanceLabel.string=n.numberWithCommas(t.money),this.remainBalanceLabel.string="",this.noteLabel.string=String.format(o.RECHARGE_GOLD_HISTORY_NOTE,n.numberWithCommas(t.gold));var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],RechargeGold:[function(t,e,i){"use strict";cc._RF.push(e,"c7c1cLiWf5Nr4H2VaX/Gkv5","RechargeGold");t("../../../util/BrowserUtil");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{valueEditBox:cc.EditBox,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.valueEditBox]},onEnable:function(){this.clear(),this.initData()},initData:function(){this.moneyLabel.string=n.numberWithCommas(this.GameCenter.getMoney())},onChangeValue:function(){this.initTotalGold()},initTotalGold:function(){var t=parseInt(this.GameCenter.getConfig().RATE_CONVERT_MONEY_TO_GOLD),e=parseInt(this.valueEditBox.string||0);this.goldLabel.string=n.numberWithCommas(e*t)},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.valueEditBox.string;this.checkAllEditboxNotEmpty()?(t=parseInt(t))>0?this.rechargeGold(t):this.GameCenter.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.NUMBER_MONEY_LARGER_ZERO):this.GameCenter.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.MISSING_INFO)},rechargeGold:function(t){this.GameCenter.showProcessingNode();var e={money:t};this.GameCenter.sendRequest.sendToZone(o.REQUEST_RECHARGE_GOLD,e)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initData(),this.initTotalGold()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"9fa7frrAH5AgY2ujfEygUiH","RechargeHistoryItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.nameLabel.string=t.service_name,this.playBalanceLabel.string=n.numberWithCommas(t.money),this.remainBalanceLabel.string=n.numberWithCommas(t.amount),this.noteLabel.string=t.content;var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],RechargeIAP:[function(t,e,i){"use strict";cc._RF.push(e,"30400ZqLA5Mq7Nd9qV7tqzj","RechargeIAP");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameRecharge=t.GameRecharge},onLoad:function(){this.initIAP()},initIAP:function(){if("undefined"!=typeof sdkbox)if(void 0!==sdkbox.IAP){var t=this;sdkbox.IAP.init(),sdkbox.IAP.setDebug(!0);var e={onSuccess:function(e){console.log("Purchase successful: "+e.name),console.log("product: "+JSON.stringify(e)),t.GameCenter.showProcessingNode();var i={token:t.GameCenter.getToken(),product_id:e.id,receipt:e.receiptCipheredPayload},o=t.GameCenter.getOSTypeCode();i.type=o,t.GameCenter.api.rechargeIAP(i,function(e){console.log("MUA IAP THANH CONG"),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.RECHARGE_MONEY_TITLE,e.msg)}.bind(t),function(e){console.log("MUA IAP MUA THAT BAI"),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.RECHARGE_MONEY_TITLE,e.msg)}.bind(t)),"undefined"!=typeof sdkbox&&void 0===sdkbox.PluginGoogleAnalytics&&sdkbox.PluginGoogleAnalytics.logEvent("iap","purchase","purchase success:"+e.price,0)},onFailure:function(t,e){console.log("Purchase failed: "+t.name+" error: "+e),"undefined"!=typeof sdkbox&&void 0===sdkbox.PluginGoogleAnalytics&&sdkbox.PluginGoogleAnalytics.logEvent("iap","purchase","purchase failed",0)},onCanceled:function(t){console.log("Purchase canceled: "+t.name),"undefined"!=typeof sdkbox&&void 0===sdkbox.PluginGoogleAnalytics&&sdkbox.PluginGoogleAnalytics.logEvent("iap","purchase","purchase canceled",0)},onRestored:function(t){console.log("Restored: "+t.name)},onProductRequestSuccess:function(e){t.resetProductsList(e)},onProductRequestFailure:function(t){console.log("Failed to get products")}};sdkbox.IAP.setListener(e),sdkbox.IAP.enableUserSideVerification(!0)}else console.log("sdkbox.IAP is undefined");else console.log("sdkbox is undefined")},resetProductsList:function(t){console.log("resetProductsList")},onRechargeClick:function(){console.log(this.GameCenter.rechargeIAP),sdkbox.IAP.purchase("vin.xu.4.99")}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],RechargeMessage:[function(t,e,i){"use strict";cc._RF.push(e,"bd7afZR0ZRAk54t5djrt3H1","RechargeMessage"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active},onConfirmClick:function(){this.dialogForm.hideDialog(!1),this.FireFishUI.showRechargeForm()}}),cc._RF.pop()},{}],RechargeMoneyForm:[function(t,e,i){"use strict";cc._RF.push(e,"5fe59XsPKpIg7bgKe5ZBO/o","RechargeMoneyForm");var n=t("../../../helper/Constant"),o=t("../../../helper/Message"),s=(t("../../../util/BrowserUtil"),t("../../../util/Track")),a=t("../../../util/Util"),r=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{rechargeCardRateItemPrefab:cc.Prefab,listCardRateNode:cc.Node,listCardRateBonusNode:cc.Node,seriEditBox:cc.EditBox,codeEditBox:cc.EditBox,cardTypeDropDownList:r},init:function(t){this.controller=t},onLoad:function(){this.editboxs=[this.seriEditBox,this.codeEditBox],this.pool=new cc.NodePool;for(var t=0;t<5;t++){var e=cc.instantiate(this.rechargeCardRateItemPrefab);this.pool.put(e)}this.initData()},onEnable:function(){this.clear()},initData:function(){var t=this.controller.getConfig().telco;for(var e in t){var i=t[e].name;i===n.GATE&&(this.cardTypeDropDownList.addItem(i),this.cardTypeDropDownList.setCallback(this.resetListCardRate,this))}var o=this.controller.getConfig().recharge_config;this.initListRate(o)},resetListCardRate:function(t){var e=this.convertCardName(t.value),i=this.controller.getConfig().telco;for(var n in i)if(e===i[n].name){var o=i[n].bonus;if(0!==o)return this.onOffListRate(!0),void this.initListRateBonus(o)}this.onOffListRate()},initListRate:function(t){for(var e in this.listCardRateNode.removeAllChildren(!0),t){var i=cc.instantiate(this.rechargeCardRateItemPrefab);i.getComponent("AwardCardRateItem").init(t[e]),i.parent=this.listCardRateNode}},initListRateBonus:function(t){this.putAllChipToPool();var e=this.controller.getConfig().recharge_config;for(var i in e){var n=void 0;this.pool&&(n=this.pool.get()),n||(n=cc.instantiate(this.rechargeCardRateItemPrefab)),n.getComponent("AwardCardRateItem").initSale(e[i],t),n.parent=this.listCardRateBonusNode}},onOffListRate:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(this.listCardRateNode.active=!1,this.listCardRateBonusNode.active=!0):(this.listCardRateNode.active=!0,this.listCardRateBonusNode.active=!1)},convertCardName:function(t){var e=this.controller.getConfig().telco;for(var i in e){var n=e[i].name;if(0!==e[i].bonus&&t===(n+=" (+ "+100*e[i].bonus+"%)"))return e[i].name}return t},putAllChipToPool:function(){if(this.pool){var t=this.listCardRateBonusNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},onConfirmClick:function(){this.controller.Audio.playClick();var t=this.seriEditBox.string,e=this.codeEditBox.string;this.checkAllEditboxNotEmpty()?this.rechargeCard(t,e):this.controller.showDialogMessage(o.RECHARGE_MONEY_TITLE,o.MISSING_INFO)},rechargeCard:function(t,e){var i=this;this.controller.showProcessingNode();var n=this.convertCardName(this.cardTypeDropDownList.getValue()),r={token:this.controller.getToken(),user_id:this.controller.getUserId(),seri_card:t,number_card:e,type_card:a.getShortNameTelcoByName(n),register_code:this.controller.getRegisterCode(),mkt_code:this.controller.getMarketingCode()};this.controller.api.rechargeCard(r,function(t){i.controller.hideProcessingNode(),i.clear();var e=t.data.amount,n=String.format(o.RECHARGE_MONEY_SUCCESS,e,o.MONEY);i.controller.showDialogMessage(o.RECHARGE_MONEY_TITLE,n),s.addTrackPurchase(),s.addTrackLead()},function(t){i.controller.hideProcessingNode(),i.clear(),i.controller.showDialogMessage(o.RECHARGE_MONEY_TITLE,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../util/BrowserUtil":"BrowserUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],RechargeMoney:[function(t,e,i){"use strict";cc._RF.push(e,"83c47094F5CMqtjgtLhhP8C","RechargeMoney");t("../../../util/BrowserUtil");var n=t("../../../util/Util"),o=t("../../../util/FormatUtil"),s=t("../../../util/Track"),a=t("../../../helper/Constant"),r=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,vietelOnButtonNode:cc.Node,vietelOffButtonNode:cc.Node,mobifoneOnButtonNode:cc.Node,mobifoneOffButtonNode:cc.Node,vinaphoneOnButtonNode:cc.Node,vinaphoneOffButtonNode:cc.Node,megacardOnButtonNode:cc.Node,megacardOffButtonNode:cc.Node,gateOnButtonNode:cc.Node,gateOffButtonNode:cc.Node,allCardphoneButtonNode:cc.Node,allCardGameButtonNode:cc.Node,awardCardRateItemPrefab:cc.Prefab,listCardRateNode:cc.Node,listCardRateBonusNode:cc.Node,gateBonusNode:cc.Node,gateBonusLabel:cc.Label,seriEditBox:cc.EditBox,codeEditBox:cc.EditBox,rechargeAllButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRecharge=this.GameCenter.GameRecharge},onLoad:function(){this.editboxs=[this.seriEditBox,this.codeEditBox],this.selectedCard="",this.listCard=[],this.initData(),this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.awardCardRateItemPrefab);this.pool.put(e)}this.selectVietel(),this.initBonus()},onEnable:function(){this.clear(),this.backButtonNode.active=!1},onDisable:function(){this.backButtonNode.active=!0},initData:function(){var t=this.GameCenter.getConfig().recharge_config,e=this.getBonusCard(a.MEGACARD);this.initListRate(t),this.initListRateBonus(e)},initListRate:function(t){for(var e in this.listCardRateNode.removeAllChildren(!0),t){var i=void 0;this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.awardCardRateItemPrefab)),i.getComponent("AwardCardRateItem").init(t[e]),i.parent=this.listCardRateNode}},initListRateBonus:function(t){this.putAllChipToPool();var e=this.GameCenter.getConfig().recharge_config;for(var i in e){var n=void 0;this.pool&&(n=this.pool.get()),n||(n=cc.instantiate(this.awardCardRateItemPrefab)),n.getComponent("AwardCardRateItem").initSale(e[i],t),n.parent=this.listCardRateBonusNode}},putAllChipToPool:function(){if(this.pool){var t=this.listCardRateBonusNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},initByData:function(t){switch(this.seriEditBox.string=t.seri_card,this.codeEditBox.string=t.number_card,n.getNameTelcoByShortName(t.type_card)){case a.VIETEL:this.showCardPhone(!0),this.selectVietel();break;case a.MOBIFONE:this.showCardPhone(!0),this.selectMobifone();break;case a.VINAPHONE:this.showCardPhone(!0),this.selectVinaphone();break;case a.MEGACARD:this.showCardPhone(!1),this.selectMegaCard();break;case a.GATE:this.showCardPhone(!1),this.selectGate()}},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.seriEditBox.string,e=this.codeEditBox.string;this.checkAllEditboxNotEmpty()?this.rechargeCard(t,e):this.GameCenter.showDialogMessage(r.RECHARGE_MONEY_TITLE,r.MISSING_INFO)},rechargeCard:function(t,e){var i=this;this.GameCenter.showProcessingNode();var a={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),seri_card:t,number_card:e,type_card:n.getShortNameRechargeProviderByName(this.selectedCard),register_code:this.GameCenter.getRegisterCode(),mkt_code:this.GameCenter.getMarketingCode()};this.GameCenter.api.rechargeCard(a,function(t){i.GameCenter.hideProcessingNode(),i.clear();var e=t.data.amount,n=String.format(r.RECHARGE_MONEY_SUCCESS,o.numberWithCommas(e),r.MONEY);i.GameCenter.showDialogMessage(r.RECHARGE_MONEY_TITLE,n),s.addTrackPurchase(),s.addTrackLead()},function(t){i.GameCenter.hideProcessingNode(),i.GameCenter.showDialogMessage(r.RECHARGE_MONEY_TITLE,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onVietelClick:function(){this.GameCenter.Audio.playClick(),this.selectVietel()},selectVietel:function(){this.showCardPhone(),this.selectedCard=a.VIETEL,this.vietelOnButtonNode.active=!0,this.vietelOffButtonNode.active=!1,this.mobifoneOnButtonNode.active=!1,this.mobifoneOffButtonNode.active=!0,this.vinaphoneOnButtonNode.active=!1,this.vinaphoneOffButtonNode.active=!0},onMobifoneClick:function(){this.GameCenter.Audio.playClick(),this.selectMobifone()},selectMobifone:function(){this.showCardPhone(),this.selectedCard=a.MOBIFONE,this.vietelOnButtonNode.active=!1,this.vietelOffButtonNode.active=!0,this.mobifoneOnButtonNode.active=!0,this.mobifoneOffButtonNode.active=!1,this.vinaphoneOnButtonNode.active=!1,this.vinaphoneOffButtonNode.active=!0,this.showRateBonus()},onVinaphoneClick:function(){this.GameCenter.Audio.playClick(),this.selectVinaphone()},selectVinaphone:function(){this.showCardPhone(),this.selectedCard=a.VINAPHONE,this.vietelOnButtonNode.active=!1,this.vietelOffButtonNode.active=!0,this.mobifoneOnButtonNode.active=!1,this.mobifoneOffButtonNode.active=!0,this.vinaphoneOnButtonNode.active=!0,this.vinaphoneOffButtonNode.active=!1,this.showRateBonus()},onMegaCardClick:function(){this.GameCenter.Audio.playClick(),this.selectMegaCard()},selectMegaCard:function(){this.showCardPhone(!1);var t=this.getBonusCard(a.MEGACARD);this.selectedCard=a.MEGACARD,this.megacardOffButtonNode.active=!1,this.megacardOnButtonNode.active=!0,this.gateOffButtonNode.active=!0,this.gateOnButtonNode.active=!1,this.showRateBonus(t)},onGateClick:function(){this.GameCenter.Audio.playClick(),this.selectGate()},selectGate:function(){this.showCardPhone(!1),this.selectedCard=a.GATE,this.megacardOffButtonNode.active=!0,this.megacardOnButtonNode.active=!1,this.gateOffButtonNode.active=!1,this.gateOnButtonNode.active=!0,this.showRateBonus()},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""},showRateBonus:function(t){t?(this.listCardRateBonusNode.active=!0,this.listCardRateNode.active=!1,this.initListRateBonus(t)):(this.listCardRateBonusNode.active=!1,this.listCardRateNode.active=!0)},showCardPhone:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.allCardphoneButtonNode.active=!0,this.allCardGameButtonNode.active=!1):(this.allCardphoneButtonNode.active=!1,this.allCardGameButtonNode.active=!0)},getBonusCard:function(t){var e=this.GameCenter.getConfig().telco;for(var i in e)if(t===e[i].name)return e[i].bonus},onBackClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1,this.rechargeAllButtonNode.active=!0},initBonus:function(){var t=this.GameCenter.getConfig().telco;for(var e in t){var i=t[e].name;if(0!==t[e].bonus){var n=100*t[e].bonus+"%";this.showCard(i,n)}}},showCard:function(t,e){var i=void 0,n=void 0;switch(t){case a.VIETEL:case a.MOBIFONE:case a.VINAPHONE:break;case a.GATE:i=this.gateBonusNode,n=this.gateBonusLabel;break;case a.MEGACARD:}i&&(i.active=!0,n.string=e)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],RechargeSMSForm:[function(t,e,i){"use strict";cc._RF.push(e,"9c3a2+LJ45CvI9bUNmlY/rg","RechargeSMSForm"),cc.Class({extends:cc.Component,properties:{smsItemPrefab:cc.Prefab,listSMSNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.initListData()},initListData:function(){this.listSMSNode.removeAllChildren(!0);var t=this.controller.getGeneralConfig();if(t){var e=t.SMS_RECHARGE;if(e){var i=e.service_number,n=e.content.MOBIFONE;if(n)for(var o in n){var s=cc.instantiate(this.smsItemPrefab);s.getComponent("SMSItem").init(this.controller,n[o],i),s.parent=this.listSMSNode}}}}}),cc._RF.pop()},{}],RechargeSMS:[function(t,e,i){"use strict";cc._RF.push(e,"445b8zu4FpNbIKaDxD8T6J1","RechargeSMS"),cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,smsItemPrefab:cc.Prefab,listSMSNode:cc.Node,listSMSViettelNode:cc.Node,vinaButtonOnNode:cc.Node,mobiButtonOnNode:cc.Node,viettelButtonOnNode:cc.Node,vinaButtonOffNode:cc.Node,mobiButtonOffNode:cc.Node,viettelButtonOffNode:cc.Node,contentSMSVinaMobiNode:cc.Node,contentSMSViettelNode:cc.Node,rechargeAllButtonNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.initListData()},onEnable:function(){this.backButtonNode.active=!1},onDisable:function(){this.backButtonNode.active=!0},initListData:function(){this.listSMSNode.removeAllChildren(!0);var t=this.GameCenter.getGeneralConfig();if(t){var e=t.SMS_RECHARGE;if(e){var i=e.service_number,n=e.content.MOBIFONE;if(n)for(var o in n){var s=cc.instantiate(this.smsItemPrefab);s.getComponent("SMSItem").init(this.GameCenter,n[o],i),s.parent=this.listSMSNode}}}},initViettel:function(){this.listSMSViettelNode.removeAllChildren(!0);var t=cc.instantiate(this.smsItemPrefab);t.getComponent("SMSItem").init(this.GameCenter,{CODE:"NAP ROY tendangnhap",MONEY:6e3,TELCO:"VIETTEL",VND:15e3},7778),t.parent=this.listSMSViettelNode},onVinaClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSVinaMobiNode.active=!0,this.vinaButtonOnNode.active=!0,this.vinaButtonOffNode.active=!1},onMobiClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSVinaMobiNode.active=!0,this.mobiButtonOnNode.active=!0,this.mobiButtonOffNode.active=!1},onViettelClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSViettelNode.active=!0,this.viettelButtonOnNode.active=!0,this.viettelButtonOffNode.active=!1},hideAllButton:function(){this.vinaButtonOnNode.active=!1,this.mobiButtonOnNode.active=!1,this.viettelButtonOnNode.active=!1,this.vinaButtonOffNode.active=!0,this.mobiButtonOffNode.active=!0,this.viettelButtonOffNode.active=!0},hideAllContent:function(){this.contentSMSViettelNode.active=!1,this.contentSMSVinaMobiNode.active=!1},onBackClick:function(){this.rechargeAllButtonNode.active=!0,this.node.active=!1}}),cc._RF.pop()},{}],Recharge:[function(t,e,i){"use strict";cc._RF.push(e,"b03eetU7VRJsJMPrppIkE/f","Recharge");var n=t("./recharge/RechargeMoneyForm"),o=t("./recharge/RechargeSMSForm"),s=t("./recharge/RechargeGoldForm"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeSMSOnButtonNode:cc.Node,rechargeSMSOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,rechargeGoldContentNode:cc.Node,RechargeMoneyForm:n,RechargeSMSForm:o,RechargeGoldForm:s},init:function(t){this.controller=t,this.RechargeMoneyForm.init(t),this.RechargeSMSForm.init(t),this.RechargeGoldForm.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.showRechargeMoney()},onRechargeMoneyClick:function(){this.controller.Audio.playClick(),this.showRechargeMoney()},showRechargeMoney:function(){this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeMoneyContentNode.active=!0},onRechargeSMSClick:function(){this.controller.Audio.playClick(),this.controller.showDialogMessage(a.RECHARGE_MONEY_TITLE,"H\u1ec7 th\u1ed1ng n\u1ea1p SMS \u0111ang b\u1ea3o tr\xec")},showRechargeSMS:function(){this.initBeforeClick(),this.rechargeSMSOnButtonNode.active=!0,this.rechargeSMSOffButtonNode.active=!1,this.rechargeSMSContentNode.active=!0},onRechargeGoldClick:function(){this.controller.Audio.playClick(),this.showRechargeGold()},showRechargeGold:function(){this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rechargeMoneyOffButtonNode.active=!0,this.rechargeSMSOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0},hideAllOnButtons:function(){this.rechargeMoneyOnButtonNode.active=!1,this.rechargeSMSOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1},hideAllContents:function(){this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1,this.rechargeGoldContentNode.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","./recharge/RechargeGoldForm":"RechargeGoldForm","./recharge/RechargeMoneyForm":"RechargeMoneyForm","./recharge/RechargeSMSForm":"RechargeSMSForm"}],RoomItem:[function(t,e,i){"use strict";cc._RF.push(e,"760c4v9ytFLl7yvACeZGVDR","RoomItem");var n=t("../../object/RoomType"),o=t("../../util/FormatUtil"),s=t("../../helper/Constant"),a=t("../../helper/Message"),r=t("../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,money100BgSpriteFrame:cc.SpriteFrame,money1kBgSpriteFrame:cc.SpriteFrame,money10kBgSpriteFrame:cc.SpriteFrame,gold100BgSpriteFrame:cc.SpriteFrame,gold1kBgSpriteFrame:cc.SpriteFrame,gold10kBgSpriteFrame:cc.SpriteFrame,enableColor:cc.Color,disableColor:cc.Color},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRoom=t.GameRoom,this.data=e,this.minBet=e.min_bet,this.moneyType=e.money_type,this.status=e.status,this.bgSprite.spriteFrame=this.getSpriteFrame(),this.initInteracable()},onLoad:function(){},onClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getLastJoinedRoom().groupId,e=r.getGameConfigByRoomName(t),i=0;this.moneyType==n.GOLD_CODE?i=this.GameCenter.getGold():this.moneyType==n.MONEY_CODE&&(i=this.GameCenter.getMoney());var c=e[s.MIN_BUY]*this.minBet,h=e[s.MAX_BUY]*this.minBet,l=r.getRoomTypeByRoomTypeCode(this.moneyType),u=String.format(a.NOT_ENOUGH_MONEY_TO_JOIN_GAME,o.numberWithCommas(c),l);if(1==e[s.IS_BUY_IN]){var d=this.GameCenter.BuyInForm;c>i?this.GameCenter.showDialogMessage(a.JOIN_ROOM_TITLE,u):(h>i&&(h=i),d.setInvite(!1),d.setRound(this.minBet),d.setMinValue(c),d.setMaxValue(h),this.GameCenterUI.showBuyInFormNode())}else c>i?this.GameCenter.showDialogMessage(a.JOIN_ROOM_TITLE,u):(this.GameCenter.showProcessingNode(),this.GameCenter.sfsManager.joinRoom(t,this.minBet,this.moneyType));this.GameRoom.minBet=this.minBet},initInteracable:function(){var t=this.GameCenter.getLastJoinedRoom().groupId,e=r.getGameConfigByRoomName(t);if(e){var i=e[s.MIN_BUY]*this.minBet;if(this.moneyType==n.GOLD_CODE)this.GameCenter.getGold()>=i?this.enableButton():this.disableButton();else this.GameCenter.getMoney()>=i?this.enableButton():this.disableButton()}},enableButton:function(){this.node.getComponent(cc.Button).interactable=!0,this.bgSprite.node.color=this.enableColor},disableButton:function(){this.node.getComponent(cc.Button).interactable=!1,this.bgSprite.node.color=this.disableColor},getSpriteFrame:function(){return this.moneyType==n.MONEY_CODE?100===this.minBet?this.money100BgSpriteFrame:1e3===this.minBet?this.money1kBgSpriteFrame:this.money10kBgSpriteFrame:this.moneyType==n.GOLD_CODE?100===this.minBet?this.gold100BgSpriteFrame:1e3===this.minBet?this.gold1kBgSpriteFrame:this.gold10kBgSpriteFrame:void 0}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],RoomType:[function(t,e,i){"use strict";cc._RF.push(e,"7a8caNDKwpE5qVeREkdyI05","RoomType");e.exports={MONEY:"MONEY",GOLD:"GOLD",MONEY_CODE:"0",GOLD_CODE:"1"},cc._RF.pop()},{}],Room:[function(t,e,i){"use strict";cc._RF.push(e,"2dc07cGtxVMYJEsyPipirBS","Room"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],SFS2X_API_JS:[function(t,e,i){"use strict";cc._RF.push(e,"683aaS+NLNDwJB8/UpFbdbo","SFS2X_API_JS");var n,o,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={};o=(n={SmartFox:function(t){this._majVersion=1,this._minVersion=2,this._subVersion=0,this._socketEngine=new n.SocketEngine,this._eventDispatcher=new n.EventDispatcher,this._lagMonitor=null,this._log=n.Logger,this._inited=this._isJoining=!1,this._currentZone=null,this._clientDetails="JavaScript",this.version=this._majVersion+"."+this._minVersion+"."+this._subVersion,this.config=t,this.debug=!1,null!=this.config&&this.config.debug&&(this.debug=!0),this.logger=this._log,this.lastJoinedRoom=this.mySelf=this.buddyManager=this.userManager=this.roomManager=this.sessionToken=null,this._controllers={},this._initialize(),this._log.info("SmartFox instance ready!")}}).SmartFox,n.SmartFox.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},n.SmartFox.prototype.removeEventListener=function(t,e){this._eventDispatcher.removeEventListener(t,e)},n.SmartFox.prototype.setClientDetails=function(t,e){this.isConnected()?this._log.warn("SetClientDetails must be called before the connection is started"):(this._clientDetails=null!=t?t.replace(":"," "):"",this._clientDetails+=":",this._clientDetails+=null!=e?e.replace(":"," "):"")},n.SmartFox.prototype.connect=function(t,e,i){if(this.isConnected())this._log.warn("Already connected");else if(this._socketEngine.isConnecting)this._log.warn("A connection attempt is already in progress");else{var n=null!=this.config&&null!=this.config.host?this.config.host:null,o=null!=this.config&&null!=this.config.port?this.config.port:null,s=null!=this.config&&this.config.useSSL;null!=t&&(n=t),null!=e&&(o=e),null!=i&&(s=i),null==n||0==n.length?this._log.error("Invalid connection host/address"):"number"!=typeof o||0>o||65535<o?this._log.error("Invalid TCP port"):("boolean"!=typeof s&&(s=!1),this._socketEngine.connect(n,o,s))}},n.SmartFox.prototype.disconnect=function(){this.isConnected()?(0<this._socketEngine.reconnectionSeconds&&this.send(new n.Requests.System.ManualDisconnectionRequest),setTimeout(function(t){t._handleClientDisconnection(n.Utils.ClientDisconnectionReason.MANUAL)},100,this)):this._log.info("You are not connected")},n.SmartFox.prototype.enableLagMonitor=function(t,e,i){null==this.mySelf?this._log.warn("Lag Monitoring requires that you are logged in a Zone; please retry after completing the login process"):(null!=this._lagMonitor&&this._lagMonitor.destroy(),t&&(this._lagMonitor=new n.Utils.LagMonitor(this,e,i),this._lagMonitor.start()))},n.SmartFox.prototype.isConnected=function(){return null!=this._socketEngine&&this._socketEngine.isConnected},n.SmartFox.prototype.getMaxMessageSize=function(){return null!=this._socketEngine?this._socketEngine._maxMessageSize:0},n.SmartFox.prototype.send=function(t){if(this.isConnected()){if(null!=t.validate&&null!=t.execute){try{t.validate(this),t.execute(this)}catch(i){if(!(i instanceof n.Exceptions.SFSValidationError&&null!=i.getMessage))throw i;if(t=i.getMessage(),null!=i.getErrors()){t=t+":";for(var e=0;e<i.getErrors().length;e++)1<i.getErrors().length&&(t+=" "+(e+1)+")"),t+=" "+i.getErrors()[e]}return this._log.error("Request failed | "+t),!1}return this.debug&&(this._log.info("OUTGOING DATA\n"+n.DebugHelper.getDump(t.getMessage())),this._log.info("OUT > "+n.Requests.getRequestNameFromId(t._id))),this._socketEngine.send(t.getMessage()),!0}this._log.error("An invalid request was passed: "+t),this._log.debug("Object dump:\n"+n.DebugHelper.getDump(t))}else this._log.error("You are not connected. Request cannot be sent: "+n.Requests.getRequestNameFromId(t._id))},n.SmartFox.prototype.getRoomById=function(t){return this.roomManager.getRoomById(t)},n.SmartFox.prototype.getRoomByName=function(t){return this.roomManager.getRoomByName(t)},n.SmartFox.prototype.getRoomList=function(){return this.roomManager.getRoomList()},n.SmartFox.prototype.getRoomListFromGroup=function(t){return this.roomManager.getRoomListFromGroup(t)},n.SmartFox.prototype.getJoinedRooms=function(){return this.roomManager.getJoinedRooms()},n.SmartFox.prototype._initialize=function(){this._inited||(this._socketEngine=new n.SocketEngine(this),this._socketEngine.addEventListener(n.SocketEvent.CONNECT,this._onSocketConnect,this),this._socketEngine.addEventListener(n.SocketEvent.DISCONNECT,this._onSocketDisconnect,this),this._socketEngine.addEventListener(n.SocketEvent.DATA,this._onSocketData,this),this._socketEngine.addEventListener(n.SocketEvent.IOERROR,this._onSocketIOError,this),this._controllers[0]=new n.Controllers.SystemController(this),this._controllers[1]=new n.Controllers.ExtensionController(this),this._inited=!0,this._reset())},n.SmartFox.prototype._reset=function(t){null!=this.buddyManager&&this.buddyManager._clearAll(),this.userManager=new n.Managers.GlobalUserManager(this),this.roomManager=new n.Managers.RoomManager(this),this.buddyManager=new n.Managers.BuddyManager(this),null!=this._lagMonitor&&this._lagMonitor.destroy(),this._isJoining=!1,this.mySelf=this.lastJoinedRoom=this._currentZone=null,t&&(this.sessionToken=null)},n.SmartFox.prototype._dispatchEvent=function(t,e){this._eventDispatcher.dispatchEvent(t,e)},n.SmartFox.prototype._onSocketConnect=function(t){t.success?(t=new n.Requests.System.HandshakeRequest(this.version,this._clientDetails,t.isReconnection?this.sessionToken:null),this.send(t)):this._dispatchEvent(n.SFSEvent.CONNECTION,{success:!1})},n.SmartFox.prototype._onSocketDisconnect=function(t){this._dispatchEvent(n.SFSEvent.CONNECTION_LOST,{reason:t.reason}),this._reset(!0)},n.SmartFox.prototype._onSocketData=function(t){this.debug&&this._log.info("INCOMING DATA\n"+n.DebugHelper.getDump(t));var e=t[n.Controllers.CONTROLLER_ID],i=t[n.Controllers.ACTION_ID];t=t[n.Controllers.PARAM_ID];null==e?this._log.error("Message rejected: Controller ID is missing"):null==e?this._log.error("Message rejected: Action ID missing"):this._controllers[e].handleMessage(t,i)},n.SmartFox.prototype._onSocketIOError=function(t){this._dispatchEvent(n.SFSEvent.SOCKET_ERROR,{message:t})},n.SmartFox.prototype._handleHandShake=function(t){var e=t[n.Controllers.KEY_ERROR_CODE];null==e?(this.sessionToken=t[n.Requests.System.HandshakeRequest.KEY_SESSION_TOKEN],this._socketEngine._maxMessageSize=t[n.Requests.System.HandshakeRequest.KEY_MAX_MESSAGE_SIZE],this._socketEngine._isReconnecting?this._socketEngine._isReconnecting=!1:this._dispatchEvent(n.SFSEvent.CONNECTION,{success:!0})):(t={success:!1,errorMessage:n.ErrorCodes.getErrorMessage(e,t[n.Controllers.KEY_ERROR_PARAMS]),errorCode:e},this._dispatchEvent(n.SFSEvent.CONNECTION,t))},n.SmartFox.prototype._handleLogout=function(){this._reset(!1)},n.SmartFox.prototype._handleClientDisconnection=function(t){this.isConnected()&&this._socketEngine.disconnect(t)},function(){var t=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},this.Class.extend=function i(n){function o(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var a=new this;for(var r in t=!1,n)a[r]="function"==typeof n[r]&&"function"==typeof s[r]&&e.test(n[r])?function(t,e){return function(){var i=this._super;this._super=s[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,n[r]):n[r];return o.prototype=a,o.prototype.constructor=o,o.extend=i,o}}.bind(r)();var c=0,h="";function l(t){return d(u(m(t)))}function u(t){return p(_(f(t),8*t.length))}function d(t){for(var e,i=c?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<t.length;o++)e=t.charCodeAt(o),n+=i.charAt(e>>>4&15)+i.charAt(15&e);return n}function m(t){for(var e,i,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),i=o+1<t.length?t.charCodeAt(o+1):0,55296<=e&&56319>=e&&56320<=i&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),o++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}function f(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function p(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function _(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,n=-271733879,o=-1732584194,s=271733878,a=0;a<t.length;a+=16){var r=i,c=n,h=o,l=s;n=E(n=E(n=E(n=E(n=N(n=N(n=N(n=N(n=C(n=C(n=C(n=C(n=g(n=g(n=g(n=g(n,o=g(o,s=g(s,i=g(i,n,o,s,t[a+0],7,-680876936),n,o,t[a+1],12,-389564586),i,n,t[a+2],17,606105819),s,i,t[a+3],22,-1044525330),o=g(o,s=g(s,i=g(i,n,o,s,t[a+4],7,-176418897),n,o,t[a+5],12,1200080426),i,n,t[a+6],17,-1473231341),s,i,t[a+7],22,-45705983),o=g(o,s=g(s,i=g(i,n,o,s,t[a+8],7,1770035416),n,o,t[a+9],12,-1958414417),i,n,t[a+10],17,-42063),s,i,t[a+11],22,-1990404162),o=g(o,s=g(s,i=g(i,n,o,s,t[a+12],7,1804603682),n,o,t[a+13],12,-40341101),i,n,t[a+14],17,-1502002290),s,i,t[a+15],22,1236535329),o=C(o,s=C(s,i=C(i,n,o,s,t[a+1],5,-165796510),n,o,t[a+6],9,-1069501632),i,n,t[a+11],14,643717713),s,i,t[a+0],20,-373897302),o=C(o,s=C(s,i=C(i,n,o,s,t[a+5],5,-701558691),n,o,t[a+10],9,38016083),i,n,t[a+15],14,-660478335),s,i,t[a+4],20,-405537848),o=C(o,s=C(s,i=C(i,n,o,s,t[a+9],5,568446438),n,o,t[a+14],9,-1019803690),i,n,t[a+3],14,-187363961),s,i,t[a+8],20,1163531501),o=C(o,s=C(s,i=C(i,n,o,s,t[a+13],5,-1444681467),n,o,t[a+2],9,-51403784),i,n,t[a+7],14,1735328473),s,i,t[a+12],20,-1926607734),o=N(o,s=N(s,i=N(i,n,o,s,t[a+5],4,-378558),n,o,t[a+8],11,-2022574463),i,n,t[a+11],16,1839030562),s,i,t[a+14],23,-35309556),o=N(o,s=N(s,i=N(i,n,o,s,t[a+1],4,-1530992060),n,o,t[a+4],11,1272893353),i,n,t[a+7],16,-155497632),s,i,t[a+10],23,-1094730640),o=N(o,s=N(s,i=N(i,n,o,s,t[a+13],4,681279174),n,o,t[a+0],11,-358537222),i,n,t[a+3],16,-722521979),s,i,t[a+6],23,76029189),o=N(o,s=N(s,i=N(i,n,o,s,t[a+9],4,-640364487),n,o,t[a+12],11,-421815835),i,n,t[a+15],16,530742520),s,i,t[a+2],23,-995338651),o=E(o,s=E(s,i=E(i,n,o,s,t[a+0],6,-198630844),n,o,t[a+7],10,1126891415),i,n,t[a+14],15,-1416354905),s,i,t[a+5],21,-57434055),o=E(o,s=E(s,i=E(i,n,o,s,t[a+12],6,1700485571),n,o,t[a+3],10,-1894986606),i,n,t[a+10],15,-1051523),s,i,t[a+1],21,-2054922799),o=E(o,s=E(s,i=E(i,n,o,s,t[a+8],6,1873313359),n,o,t[a+15],10,-30611744),i,n,t[a+6],15,-1560198380),s,i,t[a+13],21,1309151649),o=E(o,s=E(s,i=E(i,n,o,s,t[a+4],6,-145523070),n,o,t[a+11],10,-1120210379),i,n,t[a+2],15,718787259),s,i,t[a+9],21,-343485551),i=T(i,r),n=T(n,c),o=T(o,h),s=T(s,l)}return[i,n,o,s]}function S(t,e,i,n,o,s){return T(I(T(T(e,t),T(n,s)),o),i)}function g(t,e,i,n,o,s,a){return S(e&i|~e&n,t,e,o,s,a)}function C(t,e,i,n,o,s,a){return S(e&n|i&~n,t,e,o,s,a)}function N(t,e,i,n,o,s,a){return S(e^i^n,t,e,o,s,a)}function E(t,e,i,n,o,s,a){return S(i^(e|~n),t,e,o,s,a)}function T(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function I(t,e){return t<<e|t>>>32-e}n.Utils={},n.Utils.md5_crypt=function(t,e){"undefined"!=typeof VarType&&(t=VarType.toStr(t),e=VarType.toStr(e));var i=h;h="";var n=chrsz;chrsz=8,"$1$"==e.substr(0,3)&&(e=e.substr(3)),(0>(a=e.indexOf("$"))||8<a)&&(a=8);for(var o=t+"$1$"+(e=e.substr(0,a)),s=str_md5(t+e+t),a=t.length;0<a;a-=16)o=16<=a?o+s:o+s.substr(0,a);for(a=t.length;0!=a;a>>=1)o=0!=(1&a)?o+String.fromCharCode(0):o+t.charAt(0);var r="$1$"+e+"$";for(s=str_md5(o),a=0;1e3>a;a++)o="",o=0!=(1&a)?o+t:o+s,0!=a%3&&(o+=e),0!=a%7&&(o+=t),o=0!=(1&a)?o+s:o+t,s=str_md5(o);for(s+=s.charAt(5),a=0;5>a;a++)o=s.charCodeAt(a)<<16|s.charCodeAt(a+6)<<8|s.charCodeAt(a+12),r+=md5_to64(o,4);return o=s.charCodeAt(11),r+=md5_to64(o,2),h=i,chrsz=n,r},n.Utils.ClientDisconnectionReason={IDLE:"idle",KICK:"kick",BAN:"ban",MANUAL:"manual",UNKNOWN:"unknown"},n.Utils.ClientDisconnectionReason.getReason=function(t){switch(t){case 0:return this.IDLE;case 1:return this.KICK;case 2:return this.BAN;case 3:return this.MANUAL;case 4:return this.UNKNOWN}},n.Utils.ArrayUtil={},n.Utils.ArrayUtil.objToArray=function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i},n.Utils.ArrayUtil.removeItem=function(t,e){var i=t.indexOf(e);-1<i&&t.splice(i,1)},n.Utils.HashTable=function(t){for(var e in this.length=0,this.items={},t)t.hasOwnProperty(e)&&(this.items[e]=t[e],this.length++)},n.Utils.HashTable.prototype.setItem=function(t,e){var i=void 0;return this.hasItem(t)?i=this.items[t]:this.length++,this.items[t]=e,i},n.Utils.HashTable.prototype.getItem=function(t){return this.hasItem(t)?this.items[t]:void 0},n.Utils.HashTable.prototype.hasItem=function(t){return this.items.hasOwnProperty(t)},n.Utils.HashTable.prototype.removeItem=function(t){if(this.hasItem(t))return s=this.items[t],this.length--,delete this.items[t],s},n.Utils.HashTable.prototype.keys=function(){var t,e=[];for(t in this.items)this.hasItem(t)&&e.push(t);return e},n.Utils.HashTable.prototype.values=function(){var t,e=[];for(t in this.items)this.hasItem(t)&&e.push(this.items[t]);return e},n.Utils.HashTable.prototype.each=function(t){for(var e in this.items)this.hasItem(e)&&t(e,this.items[e])},n.Utils.HashTable.prototype.clear=function(){this.items={},this.length=0},n.Utils.LagMonitor=function(t,e,i){(null==e||1>e)&&(e=4),(null==i||1>i)&&(i=10),this._sfs=t,this._valueQueue=[],this._interval=e,this._queueSize=i,this._thread=null,this._lastReqTime=-1},n.Utils.LagMonitor.prototype.start=function(){!this.isRunning()&&null!=this._sfs&&(this._thread=setInterval(this._threadRunner,1e3*this._interval,this))},n.Utils.LagMonitor.prototype.stop=function(){this.isRunning()&&(clearInterval(this._thread),this._thread=null,this._valueQueue=[])},n.Utils.LagMonitor.prototype.destroy=function(){this.stop(),this._sfs=null},n.Utils.LagMonitor.prototype.isRunning=function(){return null!=this._thread},n.Utils.LagMonitor.prototype.getLastPingTime=function(){return 0<this._valueQueue.length?this._valueQueue[this._valueQueue.length-1]:0},n.Utils.LagMonitor.prototype._threadRunner=function(t){t._lastReqTime=(new Date).getTime(),t._sfs.send(new n.Requests.System.PingPongRequest)},n.Utils.LagMonitor.prototype._onPingPong=function(){var t=(new Date).getTime()-this._lastReqTime;return this._valueQueue.length>=this._queueSize&&this._valueQueue.shift(),this._valueQueue.push(t),this._getAveragePingTime()},n.Utils.LagMonitor.prototype._getAveragePingTime=function(){if(0==this._valueQueue.length)return 0;for(var t=0,e=0;e<this._valueQueue.length;e++)t+=this._valueQueue[e];return t/this._valueQueue.length},n.Utils.BuddyOnlineState={ONLINE:0,OFFLINE:1,LEFT_THE_SERVER:2},n.Controllers={},n.Controllers.CONTROLLER_ID="c",n.Controllers.ACTION_ID="a",n.Controllers.PARAM_ID="p",n.Controllers.KEY_ERROR_CODE="ec",n.Controllers.KEY_ERROR_PARAMS="ep",n.Controllers.ROOM_PARAM="r",n.Controllers.USER_PARAM="u",n.Controllers.USER_COUNT_PARAM="uc",n.Controllers.SPECT_COUNT_PARAM="sc",n.Controllers.SystemController=function(t){this._sfs=t,this._id=0,this._requestHandlers={},this._initRequestHandlers(),this._log=n.Logger},n.Controllers.SystemController.prototype.getId=function(){return this._id},n.Controllers.SystemController.prototype.handleMessage=function(t,e){this._sfs.debug&&this._log.info("IN < "+this._getEvtName(e));var i=this._requestHandlers[e];null!=i?this[i](t):this._log.warn("Unknown message id: "+t.id)},n.Controllers.SystemController.prototype._initRequestHandlers=function(){this._requestHandlers[n.Requests.Handshake]="_fnHandshake",this._requestHandlers[n.Requests.Login]="_fnLogin",this._requestHandlers[n.Requests.Logout]="_fnLogout",this._requestHandlers[n.Requests.JoinRoom]="_fnJoinRoom",this._requestHandlers[n.Requests.CreateRoom]="_fnCreateRoom",this._requestHandlers[n.Requests.ChangeRoomName]="_fnChangeRoomName",this._requestHandlers[n.Requests.ChangeRoomPassword]="_fnChangeRoomPassword",this._requestHandlers[n.Requests.ChangeRoomCapacity]="_fnChangeRoomCapacity",this._requestHandlers[n.Requests.GenericMessage]="_fnGenericMessage",this._requestHandlers[n.Requests.SetRoomVariables]="_fnSetRoomVariables",this._requestHandlers[n.Requests.SetUserVariables]="_fnSetUserVariables",this._requestHandlers[n.Requests.SubscribeRoomGroup]="_fnSubscribeRoomGroup",this._requestHandlers[n.Requests.UnsubscribeRoomGroup]="_fnUnsubscribeRoomGroup",this._requestHandlers[n.Requests.SpectatorToPlayer]="_fnSpectatorToPlayer",this._requestHandlers[n.Requests.PlayerToSpectator]="_fnPlayerToSpectator",this._requestHandlers[n.Requests.InitBuddyList]="_fnInitBuddyList",this._requestHandlers[n.Requests.AddBuddy]="_fnAddBuddy",this._requestHandlers[n.Requests.RemoveBuddy]="_fnRemoveBuddy",this._requestHandlers[n.Requests.BlockBuddy]="_fnBlockBuddy",this._requestHandlers[n.Requests.GoOnline]="_fnGoOnline",this._requestHandlers[n.Requests.SetBuddyVariables]="_fnSetBuddyVariables",this._requestHandlers[n.Requests.FindRooms]="_fnFindRooms",this._requestHandlers[n.Requests.FindUsers]="_fnFindUsers",this._requestHandlers[n.Requests.InviteUsers]="_fnInviteUsers",this._requestHandlers[n.Requests.InvitationReply]="_fnInvitationReply",this._requestHandlers[n.Requests.QuickJoinGame]="_fnQuickJoinGame",this._requestHandlers[n.Requests.PingPong]="_fnPingPong",this._requestHandlers[n.Requests.SetUserPosition]="_fnSetUserPosition",this._requestHandlers[1e3]="_fnUserEnterRoom",this._requestHandlers[1001]="_fnUserCountChange",this._requestHandlers[1002]="_fnUserLost",this._requestHandlers[1003]="_fnRoomLost",this._requestHandlers[1004]="_fnUserExitRoom",this._requestHandlers[1005]="_fnClientDisconnection",this._requestHandlers[1007]="_fnSetMMOItemVariables"},n.Controllers.SystemController.prototype._getEvtName=function(t){return this._requestHandlers[t].substr(3)},n.Controllers.SystemController.prototype._fnHandshake=function(t){this._sfs._handleHandShake(t)},n.Controllers.SystemController.prototype._fnLogin=function(t){if(null==t[n.Controllers.KEY_ERROR_CODE]){this._populateRoomList(t[n.Requests.System.LoginRequest.KEY_ROOMLIST]),this._sfs.mySelf=new n.Entities.SFSUser(t[n.Requests.System.LoginRequest.KEY_ID],t[n.Requests.System.LoginRequest.KEY_USER_NAME],!0),this._sfs.mySelf._setUserManager(this._sfs.userManager),this._sfs.mySelf.privilegeId=t[n.Requests.System.LoginRequest.KEY_PRIVILEGE_ID],this._sfs.userManager._addUser(this._sfs.mySelf),this._sfs._socketEngine.reconnectionSeconds=t[n.Requests.System.LoginRequest.KEY_RECONNECTION_SECONDS];var e={};e.zone=t[n.Requests.System.LoginRequest.KEY_ZONE_NAME],e.user=this._sfs.mySelf,e.data=t[n.Requests.System.LoginRequest.KEY_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.LOGIN,e)}else e=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(e,t[n.Controllers.KEY_ERROR_PARAMS]),this._sfs._dispatchEvent(n.SFSEvent.LOGIN_ERROR,{errorMessage:t,errorCode:e})},n.Controllers.SystemController.prototype._fnLogout=function(t){this._sfs._handleLogout();var e={};e.zone=t[n.Requests.System.LogoutRequest.KEY_ZONE_NAME],this._sfs._dispatchEvent(n.SFSEvent.LOGOUT,e)},n.Controllers.SystemController.prototype._fnJoinRoom=function(t){var e=this._sfs.roomManager,i={};this._sfs._isJoining=!1;var o=t[n.Controllers.KEY_ERROR_CODE];if(null==o){for(o=t[n.Requests.System.JoinRoomRequest.KEY_USER_LIST],(t=n.Entities.SFSRoom.fromArray(t[n.Requests.System.JoinRoomRequest.KEY_ROOM]))._setRoomManager(e),t=e._replaceRoom(t,e.containsGroup(t.groupId)),e=0;e<o.length;e++){var s=o[e],a=this._getOrCreateUser(s,!0,t);a._setPlayerId(s[3],t),t._addUser(a)}t.isJoined=!0,this._sfs.lastJoinedRoom=t,i.room=t,this._sfs._dispatchEvent(n.SFSEvent.ROOM_JOIN,i)}else t=n.ErrorCodes.getErrorMessage(o,t[n.Controllers.KEY_ERROR_PARAMS]),i.errorMessage=t,i.errorCode=o,this._sfs._dispatchEvent(n.SFSEvent.ROOM_JOIN_ERROR,i)},n.Controllers.SystemController.prototype._fnCreateRoom=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager;(t=n.Entities.SFSRoom.fromArray(t[n.Requests.System.CreateRoomRequest.KEY_ROOM]))._setRoomManager=i,i._addRoom(t),e.room=t,this._sfs._dispatchEvent(n.SFSEvent.ROOM_ADD,e)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_CREATION_ERROR,e)},n.Controllers.SystemController.prototype._fnChangeRoomName=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[n.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(e.oldName=i.name,this._sfs.roomManager._changeRoomName(i,t[n.Requests.System.ChangeRoomNameRequest.KEY_NAME]),e.room=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_NAME_CHANGE,e)):this._log.warn("RoomNameChange event, unknown Room id: "+rId)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_NAME_CHANGE_ERROR,e)},n.Controllers.SystemController.prototype._fnChangeRoomPassword=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[n.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(this._sfs.roomManager._changeRoomPasswordState(i,t[n.Requests.System.ChangeRoomPasswordStateRequest.KEY_PASS]),e.room=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_PASSWORD_STATE_CHANGE,e)):this._log.warn("RoomPasswordChange event, unknown Room id: "+rId)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_PASSWORD_STATE_CHANGE_ERROR,e)},n.Controllers.SystemController.prototype._fnChangeRoomCapacity=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[n.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(this._sfs.roomManager._changeRoomCapacity(i,t[n.Requests.System.ChangeRoomCapacityRequest.KEY_USER_SIZE],t[n.Requests.System.ChangeRoomCapacityRequest.KEY_SPEC_SIZE]),e.room=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_CAPACITY_CHANGE,e)):this._log.warn("RoomPasswordChange event, unknown Room id: "+rId)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_CAPACITY_CHANGE_ERROR,e)},n.Controllers.SystemController.prototype._fnGenericMessage=function(t){switch(t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE]){case n.Requests.GenericMessageType.PUBLIC_MSG:this._handlePublicMessage(t);break;case n.Requests.GenericMessageType.PRIVATE_MSG:this._handlePrivateMessage(t);break;case n.Requests.GenericMessageType.BUDDY_MSG:this._handleBuddyMessage(t);break;case n.Requests.GenericMessageType.MODERATOR_MSG:this._handleModMessage(t);break;case n.Requests.GenericMessageType.ADMING_MSG:this._handleAdminMessage(t);break;case n.Requests.GenericMessageType.OBJECT_MSG:this._handleObjectMessage(t)}},n.Controllers.SystemController.prototype._handlePublicMessage=function(t){var e={},i=t[n.Requests.System.GenericMessageRequest.KEY_ROOM_ID],o=this._sfs.roomManager.getRoomById(i);null!=o?(e.room=o,e.sender=this._sfs.userManager.getUserById(t[n.Requests.System.GenericMessageRequest.KEY_USER_ID]),e.message=t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.PUBLIC_MESSAGE,e)):this._log.warn("Unexpected, public message target Room doesn't exist; Room id: "+i)},n.Controllers.SystemController.prototype._handlePrivateMessage=function(t){var e={},i=this._sfs.userManager.getUserById(t[n.Requests.System.GenericMessageRequest.KEY_USER_ID]);if(null==i){if(null==t[n.Requests.System.GenericMessageRequest.KEY_SENDER_DATA])return void this._log.warn("Unexpected, private message has no sender details");i=n.Entities.SFSUser.fromArray(t[n.Requests.System.GenericMessageRequest.KEY_SENDER_DATA])}e.sender=i,e.message=t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.PRIVATE_MESSAGE,e)},n.Controllers.SystemController.prototype._handleBuddyMessage=function(t){var e={},i=t[n.Requests.System.GenericMessageRequest.KEY_USER_ID],o=this._sfs.buddyManager.getBuddyById(i);e.isItMe=this._sfs.mySelf.id==i,e.buddy=o,e.message=t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_MESSAGE,e)},n.Controllers.SystemController.prototype._handleModMessage=function(t){var e={};e.sender=n.Entities.SFSUser.fromArray(t[n.Requests.System.GenericMessageRequest.KEY_SENDER_DATA]),e.message=t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.MODERATOR_MESSAGE,e)},n.Controllers.SystemController.prototype._handleAdminMessage=function(t){var e={};e.sender=n.Entities.SFSUser.fromArray(t[n.Requests.System.GenericMessageRequest.KEY_SENDER_DATA]),e.message=t[n.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.ADMIN_MESSAGE,e)},n.Controllers.SystemController.prototype._handleObjectMessage=function(t){var e={};e.sender=this._sfs.userManager.getUserById(t[n.Requests.System.GenericMessageRequest.KEY_USER_ID]),e.message=t[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(n.SFSEvent.OBJECT_MESSAGE,e)},n.Controllers.SystemController.prototype._fnSetRoomVariables=function(t){var e=t[n.Requests.System.SetRoomVariablesRequest.KEY_VAR_ROOM],i=t[n.Requests.System.SetRoomVariablesRequest.KEY_VAR_LIST],o=[];if(null!=(t=this._sfs.roomManager.getRoomById(e))){for(e=0;e<i.length;e++){var s=n.Entities.Variables.SFSRoomVariable.fromArray(i[e]);t._setVariable(s),o.push(s.name)}(i={}).changedVars=o,i.room=t,this._sfs._dispatchEvent(n.SFSEvent.ROOM_VARIABLES_UPDATE,i)}else this._log.warn("RoomVariablesUpdate event, unknown Room id: "+e)},n.Controllers.SystemController.prototype._fnSetUserVariables=function(t){var e=t[n.Requests.System.SetUserVariablesRequest.KEY_USER],i=t[n.Requests.System.SetUserVariablesRequest.KEY_VAR_LIST],o=[];if(null!=(t=this._sfs.userManager.getUserById(e))){for(e=0;e<i.length;e++){var s=n.Entities.Variables.SFSUserVariable.fromArray(i[e]);t._setVariable(s),o.push(s.name)}(i={}).changedVars=o,i.user=t,this._sfs._dispatchEvent(n.SFSEvent.USER_VARIABLES_UPDATE,i)}else this._log.warn("UserVariablesUpdate event, unknown User id: "+e)},n.Controllers.SystemController.prototype._fnSubscribeRoomGroup=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.System.SubscribeRoomGroupRequest.KEY_GROUP_ID];t=t[n.Requests.System.SubscribeRoomGroupRequest.KEY_ROOM_LIST];this._sfs.roomManager.containsGroup(i)&&this._log.warn("Subscribe Group error: Group '"+i+"' already subscribed"),this._populateRoomList(t),e.groupId=i,e.newRooms=this._sfs.roomManager.getRoomListFromGroup(i),this._sfs._dispatchEvent(n.SFSEvent.ROOM_GROUP_SUBSCRIBE,e)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_GROUP_SUBSCRIBE_ERROR,e)},n.Controllers.SystemController.prototype._fnUnsubscribeRoomGroup=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.System.UnsubscribeRoomGroupRequest.KEY_GROUP_ID];this._sfs.roomManager.containsGroup(i)||this._log.warn("Unsubscribe Group error: Group '"+i+"' not found (maybe never subscribed, or the Room Manager doesn't contain Rooms belonging to that Group)"),this._sfs.roomManager._removeGroup(i),e.groupId=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_GROUP_UNSUBSCRIBE,e)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_GROUP_UNSUBSCRIBE_ERROR,e)},n.Controllers.SystemController.prototype._fnSpectatorToPlayer=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.System.SpectatorToPlayerRequest.KEY_ROOM_ID],o=t[n.Requests.System.SpectatorToPlayerRequest.KEY_USER_ID],s=(t=t[n.Requests.System.SpectatorToPlayerRequest.KEY_PLAYER_ID],this._sfs.userManager.getUserById(o)),a=this._sfs.roomManager.getRoomById(i);null!=a?null!=s?s.isJoinedInRoom(a)?(s._setPlayerId(t,a),e.room=a,e.user=s,e.playerId=t,this._sfs._dispatchEvent(n.SFSEvent.SPECTATOR_TO_PLAYER,e)):this._log.warn("SpectatorToPlayer event, user "+s+" not joined in Room ",a):this._log.warn("SpectatorToPlayer event, unknown User id: "+o):this._log.warn("SpectatorToPlayer event, unknown Room id: "+i)}else i=t[n.Controllers.KEY_ERROR_CODE],o=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=o,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.SPECTATOR_TO_PLAYER_ERROR,e)},n.Controllers.SystemController.prototype._fnPlayerToSpectator=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.System.PlayerToSpectatorRequest.KEY_ROOM_ID],o=(t=t[n.Requests.System.PlayerToSpectatorRequest.KEY_USER_ID],this._sfs.userManager.getUserById(t)),s=this._sfs.roomManager.getRoomById(i);null!=s?null!=o?o.isJoinedInRoom(s)?(o._setPlayerId(-1,s),e.room=s,e.user=o,this._sfs._dispatchEvent(n.SFSEvent.PLAYER_TO_SPECTATOR,e)):this._log.warn("PlayerToSpectator event, user "+o+" not joined in Room ",s):this._log.warn("PlayerToSpectator event, unknown User id: "+t):this._log.warn("PlayerToSpectator event, unknown Room id: "+i)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.PLAYER_TO_SPECTATOR_ERROR,e)},n.Controllers.SystemController.prototype._fnFindRooms=function(t){for(var e={},i=(t=t[n.Requests.System.FindRoomsRequest.KEY_FILTERED_ROOMS],[]),o=0;o<t.length;o++){var s=n.Entities.SFSRoom.fromArray(t[o]),a=this._sfs.roomManager.getRoomById(s.id);null!=a&&(s.isJoined=a.isJoined),i.push(s)}e.rooms=i,this._sfs._dispatchEvent(n.SFSEvent.ROOM_FIND_RESULT,e)},n.Controllers.SystemController.prototype._fnFindUsers=function(t){for(var e={},i=(t=t[n.Requests.System.FindUsersRequest.KEY_FILTERED_USERS],[]),o=this._sfs.mySelf,s=0;s<t.length;s++){var a=n.Entities.SFSUser.fromArray(t[s]);a.id==o.id&&(a=o),i.push(a)}e.users=i,this._sfs._dispatchEvent(n.SFSEvent.USER_FIND_RESULT,e)},n.Controllers.SystemController.prototype._fnInviteUsers=function(t){var e={},i=null!=t[n.Requests.Game.InviteUsersRequest.KEY_USER_ID]?this._sfs.userManager.getUserById(t[n.Requests.Game.InviteUsersRequest.KEY_USER_ID]):n.Entities.SFSUser.fromArray(t[n.Requests.Game.InviteUsersRequest.KEY_USER]),o=t[n.Requests.Game.InviteUsersRequest.KEY_INVITATION_ID];(t=new n.Entities.Invitation.SFSInvitation(i,this._sfs.mySelf,t[n.Requests.Game.InviteUsersRequest.KEY_TIME],t[n.Requests.Game.InviteUsersRequest.KEY_PARAMS])).id=o,e.invitation=t,this._sfs._dispatchEvent(n.SFSEvent.INVITATION,e)},n.Controllers.SystemController.prototype._fnInvitationReply=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=null,o=(i=null!=t[n.Requests.Game.InviteUsersRequest.KEY_USER_ID]?this._sfs.userManager.getUserById(t[n.Requests.Game.InviteUsersRequest.KEY_USER_ID]):n.Entities.SFSUser.fromArray(t[n.Requests.Game.InviteUsersRequest.KEY_USER]),t[n.Requests.Game.InviteUsersRequest.KEY_REPLY_ID]);t=t[n.Requests.Game.InviteUsersRequest.KEY_PARAMS];e.invitee=i,e.reply=o,e.data=t,this._sfs._dispatchEvent(n.SFSEvent.INVITATION_REPLY,e)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSEvent.INVITATION_REPLY_ERROR,e)},n.Controllers.SystemController.prototype._fnQuickJoinGame=function(t){if(null!=t[n.Controllers.KEY_ERROR_CODE]){var e=t[n.Controllers.KEY_ERROR_CODE],i=(t=n.ErrorCodes.getErrorMessage(e,t[n.Controllers.KEY_ERROR_PARAMS]),{});i.errorMessage=t,i.errorCode=e,this._sfs._dispatchEvent(n.SFSEvent.ROOM_JOIN_ERROR,i)}},n.Controllers.SystemController.prototype._fnPingPong=function(){var t=this._sfs._lagMonitor._onPingPong(),e={};e.lagValue=t,this._sfs._dispatchEvent(n.SFSEvent.PING_PONG,e)},n.Controllers.SystemController.prototype._fnSetUserPosition=function(t){var e={},i=this._sfs.roomManager.getRoomById(t[n.Requests.MMO.SetUserPositionRequest.KEY_ROOM]),o=t[n.Requests.MMO.SetUserPositionRequest.KEY_MINUS_USER_LIST],s=t[n.Requests.MMO.SetUserPositionRequest.KEY_PLUS_USER_LIST],a=t[n.Requests.MMO.SetUserPositionRequest.KEY_MINUS_ITEM_LIST],r=(t=t[n.Requests.MMO.SetUserPositionRequest.KEY_PLUS_ITEM_LIST],[]),c=[],h=[],l=[],u=0;if(null!=o)for(u=0;u<o.length;u++){var d=i.getUserById(o[u]);null!=d&&(i._removeUser(d),c.push(d))}if(null!=s)for(u=0;u<s.length;u++)d=s[u],o=this._getOrCreateUser(d,!0,i),r.push(o),i._addUser(o),null!=(d=d[5])&&(o.aoiEntryPoint=n.Entities.Data.Vec3D.fromArray(d));if(null!=a)for(u=0;u<a.length;u++)null!=(s=i.getMMOItem(a[u]))&&(i._removeItem(s),l.push(s));if(null!=t)for(u=0;u<t.length;u++)s=t[u],a=n.Entities.MMOItem.fromArray(s),h.push(a),i._addMMOItem(a),null!=(s=s[2])&&(a.aoiEntryPoint=n.Entities.Data.Vec3D.fromArray(s));e.addedItems=h,e.removedItems=l,e.removedUsers=c,e.addedUsers=r,e.room=i,this._sfs._dispatchEvent(n.SFSEvent.PROXIMITY_LIST_UPDATE,e)},n.Controllers.SystemController.prototype._fnSetMMOItemVariables=function(t){var e={},i=this._sfs.roomManager.getRoomById(t[n.Requests.MMO.SetMMOItemVariables.KEY_ROOM_ID]),o=t[n.Requests.MMO.SetMMOItemVariables.KEY_ITEM_ID],s=(t=t[n.Requests.MMO.SetMMOItemVariables.KEY_VAR_LIST],[]);if(null!=i&&null!=(o=i.getMMOItem(o))){for(var a=0;a<t.length;a++){var r=n.Entities.Variables.MMOItemVariable.fromArray(t[a]);o._setVariable(r),s.push(r.name)}e.changedVars=s,e.mmoItem=o,e.room=i,this._sfs._dispatchEvent(n.SFSEvent.MMOITEM_VARIABLES_UPDATE,e)}},n.Controllers.SystemController.prototype._fnUserEnterRoom=function(t){var e=this._sfs.roomManager.getRoomById(t[n.Controllers.ROOM_PARAM]);if(null!=e){t=this._getOrCreateUser(t[n.Controllers.USER_PARAM],!0,e),e._addUser(t);var i={};i.user=t,i.room=e,this._sfs._dispatchEvent(n.SFSEvent.USER_ENTER_ROOM,i)}},n.Controllers.SystemController.prototype._fnUserCountChange=function(t){var e=this._sfs.roomManager.getRoomById(t[n.Controllers.ROOM_PARAM]);if(null!=e){var i=t[n.Controllers.USER_COUNT_PARAM],o=0;null!=t.sc&&(o=t[n.Controllers.SPECT_COUNT_PARAM]),e._userCount=i,e._specCount=o,(t={}).room=e,t.uCount=i,t.sCount=o,this._sfs._dispatchEvent(n.SFSEvent.USER_COUNT_CHANGE,t)}},n.Controllers.SystemController.prototype._fnUserLost=function(t){if(null!=(t=this._sfs.userManager.getUserById(t[n.Controllers.USER_PARAM]))){var e=this._sfs.roomManager.getUserRooms(t);this._sfs.roomManager._removeUser(t),this._sfs.userManager._removeUser(t);for(var i=0;i<e.length;i++){var o={};o.user=t,o.room=e[i],this._sfs._dispatchEvent(n.SFSEvent.USER_EXIT_ROOM,o)}}},n.Controllers.SystemController.prototype._fnRoomLost=function(t){t=this._sfs.roomManager.getRoomById(t[n.Controllers.ROOM_PARAM]);var e=this._sfs.userManager;if(null!=t){this._sfs.roomManager._removeRoom(t);for(var i=t.getUserList(),o=0;o<i.length;o++)e._removeUser(i[o]);(e={}).room=t,this._sfs._dispatchEvent(n.SFSEvent.ROOM_REMOVE,e)}},n.Controllers.SystemController.prototype._fnUserExitRoom=function(t){var e=this._sfs.roomManager.getRoomById(t[n.Controllers.ROOM_PARAM]);t=this._sfs.userManager.getUserById(t[n.Controllers.USER_PARAM]);if(null!=e&&null!=t){e._removeUser(t),this._sfs.userManager._removeUser(t),t.isItMe&&e.isJoined&&(e.isJoined=!1,0==this._sfs.roomManager.getJoinedRooms().length&&(this._sfs.lastJoinedRoom=null),e._isManaged||this._sfs.roomManager._removeRoom(e));var i={};i.user=t,i.room=e,this._sfs._dispatchEvent(n.SFSEvent.USER_EXIT_ROOM,i)}else this._log.debug("Failed to handle UserExit event. Room: "+e+", User: "+t)},n.Controllers.SystemController.prototype._fnClientDisconnection=function(t){this._sfs._handleClientDisconnection(n.Utils.ClientDisconnectionReason.getReason(t.dr))},n.Controllers.SystemController.prototype._fnInitBuddyList=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.BuddyList.InitBuddyListRequest.KEY_BLIST],o=t[n.Requests.BuddyList.InitBuddyListRequest.KEY_MY_VARS],s=t[n.Requests.BuddyList.InitBuddyListRequest.KEY_BUDDY_STATES];for(this._sfs.buddyManager._clearAll(),t=0;t<i.length;t++){var a=n.Entities.SFSBuddy.fromArray(i[t]);this._sfs.buddyManager._addBuddy(a)}for(null!=s&&this._sfs.buddyManager._setBuddyStates(s),i=[],t=0;t<o.length;t++)s=n.Entities.Variables.SFSBuddyVariable.fromArray(o[t]),i.push(s);this._sfs.buddyManager._setMyVariables(i),this._sfs.buddyManager._setInited(),e.buddyList=this._sfs.buddyManager.getBuddyList(),e.myVariables=this._sfs.buddyManager.getMyVariables(),this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_LIST_INIT,e)}else o=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(o,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=o,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._fnAddBuddy=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=n.Entities.SFSBuddy.fromArray(t[n.Requests.BuddyList.AddBuddyRequest.KEY_BUDDY_NAME]);this._sfs.buddyManager._addBuddy(i),e.buddy=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ADD,e)}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._fnRemoveBuddy=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.BuddyList.RemoveBuddyRequest.KEY_BUDDY_NAME];null!=(t=this._sfs.buddyManager._removeBuddyByName(i))?(e.buddy=t,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_REMOVE,e)):this._log.warn("Unexpected: buddy removal failed, can't find "+i+" in local buddy list")}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._fnBlockBuddy=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_NAME],o=this._sfs.buddyManager.getBuddyByName(i);null!=o?(o.blocked=t[n.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE],e.buddy=o,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_BLOCK,e)):this._log.warn("Unexpected: buddy blocking/unblocking failed, can't find "+i+" in local buddy list")}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._fnGoOnline=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){var i=t[n.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_NAME],o=this._sfs.buddyManager.getBuddyByName(i),s=i==this._sfs.mySelf.name,a=t[n.Requests.BuddyList.GoOnlineRequest.KEY_ONLINE],r=a==n.Utils.BuddyOnlineState.ONLINE,c=!0;if(s)this._sfs.buddyManager.getMyOnlineState()!=r&&(this._log.warn("Unexpected: myOnlineState is not in synch with the server; resynching to: "+r),this._sfs.buddyManager._setMyOnlineState(r));else{if(null==o)return void this._log.warn("Unexpected:  buddy '"+i+"' not found in local Buddy List when trying to set his online state");o.id=t[n.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_ID],o._setVariable(new n.Entities.Variables.SFSBuddyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_ONLINE,r)),a==n.Utils.BuddyOnlineState.LEFT_THE_SERVER&&o._clearVolatileVariables(),c=this._sfs.buddyManager.getMyOnlineState()}c&&(e.buddy=o,e.isItMe=s,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ONLINE_STATE_CHANGE,e))}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._fnSetBuddyVariables=function(t){var e={};if(null==t[n.Controllers.KEY_ERROR_CODE]){for(var i=t[n.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_NAME],o=(t=t[n.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_VARS],this._sfs.buddyManager.getBuddyByName(i)),s=i==this._sfs.mySelf.name,a=[],r=[],c=!0,h=0;h<t.length;h++){var l=n.Entities.Variables.SFSBuddyVariable.fromArray(t[h]);r.push(l),a.push(l.name)}if(s)this._sfs.buddyManager._setMyVariables(r);else{if(null==o)return void this._log.warn("Unexpected:  buddy '"+i+"' not found in local Buddy List when trying to set his Buddy Variables");o._setVariables(r),c=sfs.buddyManager.getMyOnlineState()}c&&(e.buddy=o,e.isItMe=s,e.changedVars=a,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_VARIABLES_UPDATE,e))}else i=t[n.Controllers.KEY_ERROR_CODE],t=n.ErrorCodes.getErrorMessage(i,t[n.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(n.SFSBuddyEvent.BUDDY_ERROR,e)},n.Controllers.SystemController.prototype._populateRoomList=function(t){for(var e=this._sfs.roomManager,i=0;i<t.length;i++){var o=n.Entities.SFSRoom.fromArray(t[i]);e._replaceRoom(o)}},n.Controllers.SystemController.prototype._getOrCreateUser=function(t,e,i){null==e&&(e=!1);var o=this._sfs.userManager.getUserById(t[0]);if(null==o)(o=n.Entities.SFSUser.fromArray(t,i))._setUserManager(this._sfs.userManager);else if(null!=i)for(o._setPlayerId(t[3],i),t=t[4],i=0;i<t.length;i++)o._setVariable(n.Entities.Variables.SFSUserVariable.fromArray(t[i]));return e&&this._sfs.userManager._addUser(o),o},n.Controllers.ExtensionController=function(t){this.KEY_CMD="c",this.KEY_PARAMS="p",this.KEY_ROOM="r",this._sfs=t,this._id=1,this._log=n.Logger},n.Controllers.ExtensionController.prototype.getId=function(){return this._id},n.Controllers.ExtensionController.prototype.handleMessage=function(t){this._sfs.debug&&this._log.info("IN < ExtensionResponse");var e={};e.cmd=t[this.KEY_CMD],e.params=t[this.KEY_PARAMS],null!=t[this.KEY_ROOM]&&(e.sourceRoom=t[this.KEY_ROOM]),this._sfs._dispatchEvent(n.SFSEvent.EXTENSION_RESPONSE,e)},n.DebugHelper={},n.DebugHelper.getDump=function(t){return void 0==t?"<Null>":t instanceof Object?this._dumpObject(t):"<Not An Object>"},n.DebugHelper._dumpObject=function(t){var e=[];return function t(e,i,o){var s=null;for(var a in n.DebugHelper._getTabs(o),e){var r=e[a];if(null==r)s="Null";else{var c=r.constructor,h=void 0;c===Array||c===Object?(s=null,h=c===Array?"[Array]":"[Object]",t(r,i,o+1)):s=r.constructor===Number?"Num":r.constructor===Boolean?"Bool":r.constructor===String?"Str":"Unsupported"}i.push(n.DebugHelper._getTabs(o)+a+": "+(void 0==h?r:h)+(void 0==s?"":" ("+s+")"))}}(t,e,0),n.DebugHelper._prettyPrint(e)},n.DebugHelper._getTabs=function(t){if(0>=t)return"";if(1==t)return"\t";for(var e="",i=0;i<t;i++)e+="\t";return e},n.DebugHelper._prettyPrint=function(t){for(var e="",i=t.length-1;-1<i;i--)e+=t[i]+"\n";return e},n.Entities={},n.Entities.Data={},n.Entities.Variables={},n.Entities.Match={},n.Entities.Invitation={},n.Entities.SFSRoom=r.Class.extend({init:function(t,e,i){this.id=t,this.name=e,this.groupId=null!=i?i:"default",this.isPasswordProtected=this.isJoined=this.isHidden=this.isGame=!1,this._specCount=this._userCount=this.maxSpectators=this.maxUsers=0,this._isManaged=!0,this.variables={},this.properties={},this._userManager=new n.Managers.UserManager,this._roomManager=null},toString:function(){return"[Room: "+this.name+", Id: "+this.id+", Group id: "+this.groupId+"]"},getUserCount:function(){return this.isJoined?this.isGame?this.getPlayerList().length:this._userManager.getUserCount():this._userCount},getSpectatorCount:function(){return this.isGame?this.isJoined?this.getSpectatorList().length:this._specCount:0},getCapacity:function(){return this.maxUsers+this.maxSpectators},getUserByName:function(t){return this._userManager.getUserByName(t)},getUserById:function(t){return this._userManager.getUserById(t)},containsUser:function(t){return this._userManager.containsUser(t)},getUserList:function(){return this._userManager.getUserList()},getPlayerList:function(){for(var t=[],e=this._userManager.getUserList(),i=0;i<e.length;i++){var n=e[i];n.isPlayerInRoom(this)&&t.push(n)}return t},getSpectatorList:function(){for(var t=[],e=this._userManager.getUserList(),i=0;i<e.length;i++){var n=e[i];n.isSpectatorInRoom(this)&&t.push(n)}return t},getVariable:function(t){return this.variables[t]},containsVariable:function(t){return null!=this.variables[t]},getVariables:function(){return n.Utils.ArrayUtil.objToArray(this.variables)},getRoomManager:function(){return this._roomManager},_addUser:function(t){this._userManager._addUser(t)},_removeUser:function(t){this._userManager._removeUser(t)},_setVariables:function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},_setVariable:function(t){t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t},_setRoomManager:function(t){if(null!=this._roomManager)throw new n.Exceptions.SFSError("Room Manager already assigned to Room "+this.toString());this._roomManager=t},_merge:function(t){for(var e in this.variables=[],t.variables)this.variables[e]=t.variables[e];for(this._userManager._clearAll(),t=t.getUserList(),e=0;e<t.length;e++)this._userManager._addUser(t[e])}}),n.Entities.SFSRoom.fromArray=function(t){var e=14==t.length,i=null;(i=e?new n.Entities.MMORoom(t[0],t[1],t[2]):new n.Entities.SFSRoom(t[0],t[1],t[2])).isGame=t[3],i.isHidden=t[4],i.isPasswordProtected=t[5],i._userCount=t[6],i.maxUsers=t[7];var o=t[8];if(null!=o)for(var s=0;s<o.length;s++){var a=n.Entities.Variables.SFSRoomVariable.fromArray(o[s]);i._setVariable(a)}return i.isGame&&(i._specCount=t[9],i.maxSpectators=t[10]),e&&(i.defaultAOI=n.Entities.Data.Vec3D.fromArray(t[11]),null!=t[13]&&(i.lowerMapLimit=n.Entities.Data.Vec3D.fromArray(t[12]),i.higherMapLimit=n.Entities.Data.Vec3D.fromArray(t[13]))),i},n.Entities.MMORoom=n.Entities.SFSRoom.extend({init:function(t,e,i){this._super(t,e,i),this.higherMapLimit=this.lowerMapLimit=this.defaultAOI=null,this._itemsById={}},getMMOItem:function(t){return this._itemsById[t]},getMMOItems:function(){return n.Utils.ArrayUtil.objToArray(this._itemsById)},_addMMOItem:function(t){this._itemsById[t.id]=t},_removeItem:function(t){delete this._itemsById[t]}}),n.Entities.SFSUser=function(t,e,i){this.id=t,this.name=e,this.isItMe=null!=i&&i,this.privilegeId=0,this.properties={},this.aoiEntryPoint=null,this.variables={},this._playerIdByRoomId={},this._userManager=null},n.Entities.SFSUser.fromArray=function(t,e){var i=new n.Entities.SFSUser(t[0],t[1]);i.privilegeId=t[2],null!=e&&i._setPlayerId(t[3],e);var o=t[4];if(null!=o)for(var s=0;s<o.length;s++){var a=n.Entities.Variables.SFSUserVariable.fromArray(o[s]);i._setVariable(a)}return i},n.Entities.SFSUser.prototype.toString=function(){return"[User: "+this.name+", Id: "+this.id+", Is me: "+this.isItMe+"]"},n.Entities.SFSUser.prototype.isJoinedInRoom=function(t){return t.containsUser(this)},n.Entities.SFSUser.prototype.isGuest=function(){return this.privilegeId==n.Entities.UserPrivileges.GUEST},n.Entities.SFSUser.prototype.isStandardUser=function(){return this.privilegeId==n.Entities.UserPrivileges.STANDARD},n.Entities.SFSUser.prototype.isModerator=function(){return this.privilegeId==n.Entities.UserPrivileges.MODERATOR},n.Entities.SFSUser.prototype.isAdmin=function(){return this.privilegeId==n.Entities.UserPrivileges.ADMINISTRATOR},n.Entities.SFSUser.prototype.isPlayer=function(){return this.isPlayerInRoom(this._userManager._sfs.lastJoinedRoom)},n.Entities.SFSUser.prototype.isSpectator=function(){return this.isSpectatorInRoom(this._userManager._sfs.lastJoinedRoom)},n.Entities.SFSUser.prototype.getPlayerId=function(t){var e=0;return null!=this._playerIdByRoomId[t.id]&&(e=this._playerIdByRoomId[t.id]),e},n.Entities.SFSUser.prototype.isPlayerInRoom=function(t){return!(null==t||!t.isGame)&&0<this._playerIdByRoomId[t.id]},n.Entities.SFSUser.prototype.isSpectatorInRoom=function(t){return!(null==t||!t.isGame)&&0>this._playerIdByRoomId[t.id]},n.Entities.SFSUser.prototype.getVariable=function(t){return this.variables[t]},n.Entities.SFSUser.prototype.containsVariable=function(t){return null!=this.variables[t]},n.Entities.SFSUser.prototype.getVariables=function(){return n.Utils.ArrayUtil.objToArray(this.variables)},n.Entities.SFSUser.prototype.getUserManager=function(){return this._userManager},n.Entities.SFSUser.prototype._setPlayerId=function(t,e){this._playerIdByRoomId[e.id]=t},n.Entities.SFSUser.prototype._removePlayerId=function(t){delete this._playerIdByRoomId[t.id]},n.Entities.SFSUser.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},n.Entities.SFSUser.prototype._setVariable=function(t){t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t},n.Entities.SFSUser.prototype._setUserManager=function(t){if(null!=this._userManager)throw new n.Exceptions.SFSError("User Manager already assigned to user "+this.toString());this._userManager=t},n.Entities.SFSBuddy=function(t,e,i,n){this.id=t,this.name=e,this.blocked=null!=i&&i,this.temp=null!=n&&n,this.variables={}},n.Entities.SFSBuddy.fromArray=function(t){for(var e=new n.Entities.SFSBuddy(t[0],t[1],t[2],4<t.length&&t[4]),i=(t=t[3],0);i<t.length;i++){var o=n.Entities.Variables.SFSBuddyVariable.fromArray(t[i]);e._setVariable(o)}return e},n.Entities.SFSBuddy.prototype.toString=function(){return"[Buddy: "+this.name+", Id: "+this.id+"]"},n.Entities.SFSBuddy.prototype.isBlocked=function(){return this.blocked},n.Entities.SFSBuddy.prototype.isTemp=function(){return this.temp},n.Entities.SFSBuddy.prototype.isOnline=function(){var t=!0,e=n.Entities.Variables.ReservedBuddyVariables.BV_ONLINE;return this.containsVariable(e)&&(t=this.getVariable(e).value),t&&-1<this.id},n.Entities.SFSBuddy.prototype.getState=function(){var t=n.Entities.Variables.ReservedBuddyVariables.BV_STATE;return this.containsVariable(t)?this.getVariable(t).value:null},n.Entities.SFSBuddy.prototype.getNickName=function(){var t=n.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME;return this.containsVariable(t)?this.getVariable(t).value:null},n.Entities.SFSBuddy.prototype.getVariable=function(t){return this.variables[t]},n.Entities.SFSBuddy.prototype.containsVariable=function(t){return null!=this.variables[t]},n.Entities.SFSBuddy.prototype.getVariables=function(){return n.Utils.ArrayUtil.objToArray(this.variables)},n.Entities.SFSBuddy.prototype.getOfflineVariables=function(){var t,e=[];for(t in this.variables){var i=this.variables[t];i.name.charAt(0)==n.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&e.push(i)}return e},n.Entities.SFSBuddy.prototype.getOnlineVariables=function(){var t,e=[];for(t in this.variables){var i=this.variables[t];i.name.charAt(0)!=n.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&e.push(i)}return e},n.Entities.SFSBuddy.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},n.Entities.SFSBuddy.prototype._setVariable=function(t){t.isNull()?this._removeVariable(t.name):this.variables[t.name]=t},n.Entities.SFSBuddy.prototype._removeVariable=function(t){delete this.variables[t]},n.Entities.SFSBuddy.prototype._clearVolatileVariables=function(){for(var t in this.variables){var e=this.variables[t];e.name.charAt(0)!=n.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&this._removeVariable(e.name)}},n.Entities.MMOItem=function(t){this.id=t,this.aoiEntryPoint=null,this.variables={}},n.Entities.MMOItem.fromArray=function(t){var e=new n.Entities.MMOItem(t[0]);if(null!=(t=t[1]))for(var i=0;i<t.length;i++){var o=n.Entities.Variables.MMOItemVariable.fromArray(t[i]);e._setVariable(o)}return e},n.Entities.MMOItem.prototype.toString=function(){return"[Item: "+this.id+"]"},n.Entities.MMOItem.prototype.getVariable=function(t){return this.variables[t]},n.Entities.MMOItem.prototype.containsVariable=function(t){return null!=this.variables[t]},n.Entities.MMOItem.prototype.getVariables=function(){return n.Utils.ArrayUtil.objToArray(this.variables)},n.Entities.MMOItem.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},n.Entities.MMOItem.prototype._setVariable=function(t){null!=t&&(t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t)},n.Entities.Variables.SFSUserVariable=r.Class.extend({init:function(t,e,i){this.name=t,this.value=e,this._setType(i)},toString:function(){return"[UserVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"},toArray:function(){return[this.name,n.Entities.Variables.VariableType.getTypeIdFromName(this.type),this.value]},isNull:function(){return n.Entities.Variables.VariableType.getTypeIdFromName(this.type)==n.Entities.Variables.VariableType.NULL},_setType:function(t){null==t&&(t=-1),-1<t?this.type=this.getTypeName(t):null==this.value?this.type=this.getTypeName(n.Entities.Variables.VariableType.NULL):"boolean"==(t=a(this.value))?this.type=this.getTypeName(n.Entities.Variables.VariableType.BOOL):"number"==t?this.type=this.value===+this.value&&this.value===(0|this.value)?this.getTypeName(n.Entities.Variables.VariableType.INT):this.getTypeName(n.Entities.Variables.VariableType.DOUBLE):"string"==t?this.type=this.getTypeName(n.Entities.Variables.VariableType.STRING):"object"==t&&(this.type=this.value instanceof Array?this.getTypeName(n.Entities.Variables.VariableType.ARRAY):this.getTypeName(n.Entities.Variables.VariableType.OBJECT))},getTypeName:function(t){return n.Entities.Variables.VariableType.getTypeName(t)}}),n.Entities.Variables.SFSUserVariable.fromArray=function(t){return new n.Entities.Variables.SFSUserVariable(t[0],t[2],t[1])},n.Entities.Variables.SFSRoomVariable=n.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i),this.isPersistent=this.isPrivate=!1},toString:function(){return"[RoomVar: "+this.name+", Type: "+this.type+", Value: "+this.value+", Is private: "+this.isPrivate+"]"},toArray:function(){var t=this._super();return t.push(this.isPrivate),t.push(this.isPersistent),t}}),n.Entities.Variables.SFSRoomVariable.fromArray=function(t){var e=new n.Entities.Variables.SFSRoomVariable(t[0],t[2],t[1]);return e.isPrivate=t[3],e.isPersistent=t[4],e},n.Entities.Variables.SFSBuddyVariable=n.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i)},toString:function(){return"[BuddyVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"},isOffline:function(){return this.name.charAt(0)==n.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX}}),n.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX="$",n.Entities.Variables.SFSBuddyVariable.fromArray=function(t){return new n.Entities.Variables.SFSBuddyVariable(t[0],t[2],t[1])},n.Entities.Variables.MMOItemVariable=n.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i)},toString:function(){return"[ItemVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"}}),n.Entities.Variables.MMOItemVariable.fromArray=function(t){return new n.Entities.Variables.MMOItemVariable(t[0],t[2],t[1])},n.Entities.Variables.VariableType={_typeStrings:"Null Bool Int Double String Object Array".split(" "),NULL:0,BOOL:1,INT:2,DOUBLE:3,STRING:4,OBJECT:5,ARRAY:6},n.Entities.Variables.VariableType.getTypeName=function(t){return this._typeStrings[t]},n.Entities.Variables.VariableType.getTypeIdFromName=function(t){return this._typeStrings.indexOf(t)},n.Entities.Variables.ReservedBuddyVariables={},n.Entities.Variables.ReservedBuddyVariables.BV_ONLINE="$__BV_ONLINE__",n.Entities.Variables.ReservedBuddyVariables.BV_STATE="$__BV_STATE__",n.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME="$__BV_NICKNAME__",n.Entities.Variables.ReservedRoomVariables={},n.Entities.Variables.ReservedRoomVariables.RV_GAME_STARTED="$GS",n.Entities.UserPrivileges={},n.Entities.UserPrivileges.GUEST=0,n.Entities.UserPrivileges.STANDARD=1,n.Entities.UserPrivileges.MODERATOR=2,n.Entities.UserPrivileges.ADMINISTRATOR=3,n.Entities.Match.MatchExpression=function(t,e,i){this.varName=t,this.condition=e,this.value=i,this._parent=this.next=this.logicOp=null},n.Entities.Match.MatchExpression.chainedMatchExpression=function(t,e,i,o,s){return(t=new n.Entities.Match.MatchExpression(t,e,i)).logicOp=o,t._parent=s,t},n.Entities.Match.MatchExpression.prototype.and=function(t,e,i){return this.next=n.Entities.Match.MatchExpression.chainedMatchExpression(t,e,i,n.Entities.Match.LogicOperator.AND,this)},n.Entities.Match.MatchExpression.prototype.or=function(t,e,i){return this.next=n.Entities.Match.MatchExpression.chainedMatchExpression(t,e,i,n.Entities.Match.LogicOperator.OR,this)},n.Entities.Match.MatchExpression.prototype.hasNext=function(){return null!=this.next},n.Entities.Match.MatchExpression.prototype.rewind=function(){for(var t=this;null!=t._parent;)t=t._parent;return t},n.Entities.Match.MatchExpression.prototype.toString=function(){for(var t=this.rewind(),e=t._asString();t.hasNext();)e+=(t=t.next)._asString();return e},n.Entities.Match.MatchExpression.prototype._asString=function(){var t="";return null!=this.logicOp&&(t+=" "+this.logicOp.id+" "),(t=t+"("+this.varName+" "+this.condition.symbol+" "+("string"==typeof this.value?"'"+this.value+"'":this.value))+")"},n.Entities.Match.MatchExpression.prototype._toArray=function(){var t=this.rewind(),e=[];for(e.push(t._expressionAsArray());t.hasNext();)t=t.next,e.push(t._expressionAsArray());return e},n.Entities.Match.MatchExpression.prototype._expressionAsArray=function(){var t=[];return null!=this.logicOp?t.push(this.logicOp.id):t.push(null),t.push(this.varName),t.push(this.condition.type),t.push(this.condition.symbol),t.push(this.value),t},n.Entities.Match.LogicOperator=function(t){this.id=t},n.Entities.Match.LogicOperator.AND=new n.Entities.Match.LogicOperator("AND"),n.Entities.Match.LogicOperator.OR=new n.Entities.Match.LogicOperator("OR"),n.Entities.Match.BoolMatch=function(t){this.type=0,this.symbol=t},n.Entities.Match.BoolMatch.EQUALS=new n.Entities.Match.BoolMatch("=="),n.Entities.Match.BoolMatch.NOT_EQUALS=new n.Entities.Match.BoolMatch("!="),n.Entities.Match.NumberMatch=function(t){this.type=1,this.symbol=t},n.Entities.Match.NumberMatch.EQUALS=new n.Entities.Match.NumberMatch("=="),n.Entities.Match.NumberMatch.NOT_EQUALS=new n.Entities.Match.NumberMatch("!="),n.Entities.Match.NumberMatch.GREATER_THAN=new n.Entities.Match.NumberMatch(">"),n.Entities.Match.NumberMatch.GREATER_THAN_OR_EQUAL_TO=new n.Entities.Match.NumberMatch(">="),n.Entities.Match.NumberMatch.LESS_THAN=new n.Entities.Match.NumberMatch("<"),n.Entities.Match.NumberMatch.LESS_THAN_OR_EQUAL_TO=new n.Entities.Match.NumberMatch("<="),n.Entities.Match.StringMatch=function(t){this.type=2,this.symbol=t},n.Entities.Match.StringMatch.EQUALS=new n.Entities.Match.StringMatch("=="),n.Entities.Match.StringMatch.NOT_EQUALS=new n.Entities.Match.StringMatch("!="),n.Entities.Match.StringMatch.CONTAINS=new n.Entities.Match.StringMatch("contains"),n.Entities.Match.StringMatch.STARTS_WITH=new n.Entities.Match.StringMatch("startsWith"),n.Entities.Match.StringMatch.ENDS_WITH=new n.Entities.Match.StringMatch("endsWith"),n.Entities.Match.RoomProperties={},n.Entities.Match.RoomProperties.NAME="${N}",n.Entities.Match.RoomProperties.GROUP_ID="${G}",n.Entities.Match.RoomProperties.MAX_USERS="${MXU}",n.Entities.Match.RoomProperties.MAX_SPECTATORS="${MXS}",n.Entities.Match.RoomProperties.USER_COUNT="${UC}",n.Entities.Match.RoomProperties.SPECTATOR_COUNT="${SC}",n.Entities.Match.RoomProperties.IS_GAME="${ISG}",n.Entities.Match.RoomProperties.IS_PRIVATE="${ISP}",n.Entities.Match.RoomProperties.HAS_FREE_PLAYER_SLOTS="${HFP}",n.Entities.Match.RoomProperties.IS_TYPE_SFSGAME="${IST}",n.Entities.Match.UserProperties={},n.Entities.Match.UserProperties.NAME="${N}",n.Entities.Match.UserProperties.IS_PLAYER="${ISP}",n.Entities.Match.UserProperties.IS_SPECTATOR="${ISS}",n.Entities.Match.UserProperties.IS_NPC="${ISN}",n.Entities.Match.UserProperties.PRIVILEGE_ID="${PRID}",n.Entities.Match.UserProperties.IS_IN_ANY_ROOM="${IAR}",n.Entities.Invitation.SFSInvitation=function(t,e,i,n){this.id=-1,this.inviter=t,this.invitee=e,this.secondsForAnswer=null!=i?i:15,this.params=n},n.Entities.Invitation.InvitationReply={},n.Entities.Invitation.InvitationReply.ACCEPT=0,n.Entities.Invitation.InvitationReply.REFUSE=1,n.Entities.Data.Vec3D=function(t,e,i){this.px=null!=t?t:0,this.py=null!=e?e:0,this.pz=null!=i?i:0},n.Entities.Data.Vec3D.fromArray=function(t){return new n.Entities.Data.Vec3D(t[0],t[1],t[2])},n.Entities.Data.Vec3D.prototype.isFloat=function(){return!(this.px===parseInt(this.px)&&this.py===parseInt(this.py)&&this.pz===parseInt(this.pz))},n.Entities.Data.Vec3D.prototype._toString=function(){return"("+this.px+", "+this.py+", "+this.pz+")"},n.Entities.Data.Vec3D.prototype._toArray=function(){return[this.px,this.py,this.pz]},n.ErrorCodes={},n.ErrorCodes._errorsByCode=["Phi\xean b\u1ea3n c\u1ee7a ng\u01b0\u1eddi d\xf9ng \u0111\xe3 l\u1ed7i th\u1eddi: {0}; Phi\xean b\u1ea3n y\xeau c\u1ea7u: {1}","Y\xeau c\u1ea7u Zone {0} kh\xf4ng t\u1ed3n t\u1ea1i","Ng\u01b0\u1eddi d\xf9ng {0} kh\xf4ng t\u1ed3n t\u1ea1i","Sai m\u1eadt kh\u1ea9u {0}","Ng\u01b0\u1eddi d\xf9ng {0} \u0111\xe3 b\u1ecb x\xf3a","Zone {0} \u0111\xe3 \u0111\u1ea7y","T\xe0i kho\u1ea3n n\xe0y \u0111ang \u0111\u0103ng nh\u1eadp tr\xean thi\u1ebft b\u1ecb kh\xe1c ","Server \u0111\xe3 \u0111\u1ea7y","Zone {0} hi\u1ec7n kh\xf4ng ho\u1ea1t \u0111\u1ed9ng","Ng\u01b0\u1eddi d\xf9ng {0} ch\u1ee9a t\u1eeb nh\u1ea1y c\u1ea3m; L\u1ecdc ra: {1}","Ng\u01b0\u1eddi d\xf9ng kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p v\xe0o Zone {0}","\u0110\u1ecba ch\u1ec9 {0} \u0111\xe3 b\u1ecb x\xf3a","Room \u0111\xe3 t\u1ed3n t\u1ea1i: {0}","Y\xeau c\u1ea7u Group kh\xf4ng c\xf3 s\u1eb5n - Room: {0}; Group: {1}","Chi\u1ec1u d\xe0i t\xean Room kh\xf4ng h\u1ee3p l\u1ec7 -  Min: {0}; max: {1}; \u0111\xe3 v\u01b0\u1ee3t qua: {2} k\xfd t\u1ef1","T\xean Room ch\u1ee9a t\u1eeb ng\u1eef kh\xf4ng h\u1ee3p l\u1ec7: {0}","Zone \u0111\xe3 \u0111\u1ea7y; Kh\xf4ng th\u1ec3 th\xeam Room Game","B\u1ea1n kh\xf4ng th\u1ec3 t\u1ea1o th\xeam Room cho phi\xean l\xe0n vi\u1ec7c hi\u1ec7n t\u1ea1i: {0}","T\u1ea1o Room kh\xf4ng th\xe0nh c\xf4ng, sai th\xf4ng s\u1ed1: {0}","Ng\u01b0\u1eddi d\xf9ng {0} \u0111\xe3 v\xe0o Room","Room {0} \u0111\xe3 \u0111\u1ea7y","M\u1eadt kh\u1ea9u sai cho Room {0}","Y\xeau c\u1ea7u Room kh\xf4ng t\u1ed3n t\u1ea1i","Room {0} \u0111\xe3 kh\xf3a","Group {0} \u0111\xe3 \u0111\u0103ng \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd","Group {0} kh\xf4ng t\u1ed3n t\u1ea1i","Group {0} kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd","Group {0} kh\xf4ng t\u1ed3n t\u1ea1i","{0}","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 \u0111\u1ed5i t\xean","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 thay \u0111\u1ed5i m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 thay \u0111\u1ed5i s\u1ee9c ch\u1ee9a","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; kh\xf4ng c\xf3 'slot' n\xe0o cho ng\u01b0\u1eddi d\xf9ng trong Room {0}","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; Kh\xf4ng c\xf3 kh\xe1n gi\u1ea3 trong Room {0}","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; Room {0} kh\xf4ng ph\u1ea3i Game Room","Chuy\u1ec3n h\u01b0\u1edbng ng\u01b0\u1eddi d\xf9ng; B\u1ea1n kh\xf4ng th\u1ec3 tham gia Room {0}","Buddy Manager initialization error, could not load buddy list: {0}","Buddy Manager error, your buddy list is full; size is {0}","Buddy Manager error, was not able to block buddy {0} because offline","Buddy Manager error, you are attempting to set too many Buddy Variables; limit is {0}","Game {0} access denied, user does not match access criteria","QuickJoinGame action failed: no matching Rooms were found","Your previous invitation reply was invalid or arrived too late"],n.ErrorCodes.setErrorMessage=function(t,e){this._errorsByCode[t]=e},n.ErrorCodes.getErrorMessage=function(t,e){return this.stringFormat(this._errorsByCode[t],e)},n.ErrorCodes.stringFormat=function(t,e){if(null==t)return"";if(null!=e)for(var i=0;i<e.length;i++)t=t.replace("{"+i+"}",e[i]);return t},n.EventDispatcher=function(){this.listenersByEvent={}},n.EventDispatcher.prototype.addEventListener=function(t,e,i){null==this.listenersByEvent[t]&&(this.listenersByEvent[t]=[]),this.listenersByEvent[t].push({listener:e,scope:i})},n.EventDispatcher.prototype.removeEventListener=function(t,e){var i=this.listenersByEvent[t];if(null!=i)for(var n=0;n<i.length;n++)if(i[n].listener===e){i.splice(n,1);break}},n.EventDispatcher.prototype.dispatchEvent=function(t,e){var i=this.listenersByEvent[t];if(i&&0<i.length)for(var n=0;n<i.length;n++)i[n].listener.call(i[n].scope,e)},n.EventDispatcher.prototype.getListeners=function(t){return listeners[t]},n.SFSEvent={HANDSHAKE:"handshake",CONNECTION:"connection",CONNECTION_LOST:"connectionLost",CONNECTION_RETRY:"connectionRetry",CONNECTION_RESUME:"connectionResume",LOGIN:"login",LOGIN_ERROR:"loginError",LOGOUT:"logout",ROOM_ADD:"roomAdd",ROOM_CREATION_ERROR:"roomCreationError",ROOM_REMOVE:"roomRemove",ROOM_JOIN:"roomJoin",ROOM_JOIN_ERROR:"roomJoinError",USER_ENTER_ROOM:"userEnterRoom",USER_EXIT_ROOM:"userExitRoom",USER_COUNT_CHANGE:"userCountChange",PROXIMITY_LIST_UPDATE:"proximityListUpdate",PLAYER_TO_SPECTATOR:"playerToSpectator",PLAYER_TO_SPECTATOR_ERROR:"playerToSpectatorError",SPECTATOR_TO_PLAYER:"spectatorToPlayer",SPECTATOR_TO_PLAYER_ERROR:"spectatorToPlayerError",ROOM_NAME_CHANGE:"roomNameChange",ROOM_NAME_CHANGE_ERROR:"roomNameChangeError",ROOM_PASSWORD_STATE_CHANGE:"roomPasswordStateChange",ROOM_PASSWORD_STATE_CHANGE_ERROR:"roomPasswordStateChangeError",ROOM_CAPACITY_CHANGE:"roomCapacityChange",ROOM_CAPACITY_CHANGE_ERROR:"roomCapacityChangeError",PUBLIC_MESSAGE:"publicMessage",PRIVATE_MESSAGE:"privateMessage",OBJECT_MESSAGE:"objectMessage",MODERATOR_MESSAGE:"moderatorMessage",ADMIN_MESSAGE:"adminMessage",EXTENSION_RESPONSE:"extensionResponse",ROOM_VARIABLES_UPDATE:"roomVariablesUpdate",USER_VARIABLES_UPDATE:"userVariablesUpdate",MMOITEM_VARIABLES_UPDATE:"mmoItemVariablesUpdate",ROOM_GROUP_SUBSCRIBE:"roomGroupSubscribe",ROOM_GROUP_SUBSCRIBE_ERROR:"roomGroupSubscribeError",ROOM_GROUP_UNSUBSCRIBE:"roomGroupUnsubscribe",ROOM_GROUP_UNSUBSCRIBE_ERROR:"roomGroupUnsubscribeError",ROOM_FIND_RESULT:"roomFindResult",USER_FIND_RESULT:"userFindResult",INVITATION:"invitation",INVITATION_REPLY:"invitationReply",INVITATION_REPLY_ERROR:"invitationReplyError",PING_PONG:"pingPong",SOCKET_ERROR:"socketError"},n.SFSBuddyEvent={BUDDY_LIST_INIT:"buddyListInit",BUDDY_ADD:"buddyAdd",BUDDY_REMOVE:"buddyRemove",BUDDY_BLOCK:"buddyBlock",BUDDY_ERROR:"buddyError",BUDDY_ONLINE_STATE_CHANGE:"buddyOnlineStateChange",BUDDY_VARIABLES_UPDATE:"buddyVariablesUpdate",BUDDY_MESSAGE:"buddyMessage"},n.Exceptions={},n.Exceptions.SFSError=r.Class.extend({init:function(t){this._messsage=t},getMessage:function(){return this._messsage}}),n.Exceptions.SFSValidationError=n.Exceptions.SFSError.extend({init:function(t,e){this._super(t),this._errrors=e},getErrors:function(){return this._errrors}}),n.LogLevel={DEBUG:0,INFO:1,WARN:2,ERROR:3},n._Logger=function(){this.isAvailable=void 0!=console,this.level=n.LogLevel.INFO},n.Logger=new n._Logger,n._Logger.prototype.setLevel=function(t){t<n.LogLevel.DEBUG||t>n.LogLevel.ERROR||(this.level=t)},n._Logger.prototype.debug=function(t){this.isAvailable&&this.level<=n.LogLevel.DEBUG&&console.log("[DEBUG] "+t)},n._Logger.prototype.info=function(t){this.isAvailable&&this.level<=n.LogLevel.INFO&&console.log("[INFO] "+t)},n._Logger.prototype.warn=function(t){this.isAvailable&&this.level<=n.LogLevel.WARN&&console.log("[WARN] "+t)},n._Logger.prototype.error=function(t){this.isAvailable&&console.log("[ERROR] "+t)},n.Managers={},n.Managers.UserManager=r.Class.extend({init:function(t){this._sfs=t,this._usersById=new n.Utils.HashTable,this._usersByName=new n.Utils.HashTable},containsUserName:function(t){return this._usersByName.hasItem(t)},containsUserId:function(t){return this._usersById.hasItem(t)},containsUser:function(t){return this._usersById.hasItem(t.id)},getUserById:function(t){return this._usersById.getItem(t)},getUserByName:function(t){return this._usersByName.getItem(t)},getUserCount:function(){return this._usersById.length},getUserList:function(){return this._usersById.values()},_addUser:function(t){this._usersById.hasItem(t.id)&&n.Logger.warn("Unexpected, duplicate user in UserManager: "+t.toString()),this.__addUser(t)},__addUser:function(t){this._usersByName.setItem(t.name,t),this._usersById.setItem(t.id,t)},_removeUser:function(t){this.__removeUser(t)},__removeUser:function(t){this._usersById.removeItem(t.id),this._usersByName.removeItem(t.name)},_removeUserById:function(){this._usersById.removeItem(user.id),this._usersByName.removeItem(user.name)},_clearAll:function(){this._usersById.clear(),this._usersByName.clear()}}),n.Managers.GlobalUserManager=n.Managers.UserManager.extend({init:function(t){this._super(t),this._roomRefCount=[]},_addUser:function(t){null==this._roomRefCount[t]?this._roomRefCount[t]=1:this._roomRefCount[t]++,this.__addUser(t)},_removeUser:function(t){null!=this._roomRefCount?1>this._roomRefCount[t]?n.Logger.warn("GlobalUserManager RefCount is already at zero. User: "+t):(this._roomRefCount[t]--,0==this._roomRefCount[t]&&(this.__removeUser(t),delete this._roomRefCount[t])):n.Logger.warn("Can't remove User from GlobalUserManager. RefCount missing. User: "+t)},dumpRefCount:function(){}}),n.Managers.RoomManager=function(t){this._sfs=t,this._ownerZone=null,this._groups=[],this._roomsById=new n.Utils.HashTable,this._roomsByName=new n.Utils.HashTable},n.Managers.RoomManager.prototype.getRoomGroups=function(){return this._groups},n.Managers.RoomManager.prototype.containsGroup=function(t){return-1<this._groups.indexOf(t)},n.Managers.RoomManager.prototype.containsRoom=function(t){return"number"==typeof t?this._roomsById.hasItem(t):this._roomsByName.hasItem(t)},n.Managers.RoomManager.prototype.containsRoomInGroup=function(t,e){var i,o=this.getRoomListFromGroup(e),s=!1,a="number"==typeof t;for(i in o){var r=o[i];if(r instanceof n.Entities.SFSRoom)if(a){if(r.id==t){s=!0;break}}else if(r.name==t){s=!0;break}}return s},n.Managers.RoomManager.prototype.getRoomById=function(t){return this._roomsById.getItem(t)},n.Managers.RoomManager.prototype.getRoomByName=function(t){return this._roomsByName.getItem(t)},n.Managers.RoomManager.prototype.getRoomList=function(){return this._roomsById.values()},n.Managers.RoomManager.prototype.getRoomCount=function(){return this._roomsById.length},n.Managers.RoomManager.prototype.getRoomListFromGroup=function(t){var e,i=[];for(e in this._roomsById.items){var o=this._roomsById.items[e];o instanceof n.Entities.SFSRoom&&o.groupId==t&&i.push(o)}return i},n.Managers.RoomManager.prototype.getJoinedRooms=function(){var t,e=[];for(t in this._roomsById.items){var i=this._roomsById.items[t];i instanceof n.Entities.SFSRoom&&i.isJoined&&e.push(i)}return e},n.Managers.RoomManager.prototype.getUserRooms=function(t){var e,i=[];for(e in this._roomsById.items){var o=this._roomsById.items[e];o instanceof n.Entities.SFSRoom&&o.containsUser(t)&&i.push(o)}return i},n.Managers.RoomManager.prototype._addRoom=function(t,e){null==e&&(e=!0),this._roomsById.setItem(t.id,t),this._roomsByName.setItem(t.name,t),e?this.containsGroup(t.groupId)||this._addGroup(t.groupId):t._isManaged=!1},n.Managers.RoomManager.prototype._replaceRoom=function(t,e){null==e&&(e=!0);var i=this.getRoomById(t.id);return null!=i?(i._merge(t),i):(this._addRoom(t,e),t)},n.Managers.RoomManager.prototype._removeRoom=function(t){this._roomsById.removeItem(t.id),this._roomsByName.removeItem(t.name)},n.Managers.RoomManager.prototype._removeRoomById=function(t){null!=(t=this.getRoomById(t))&&this._removeRoom(t)},n.Managers.RoomManager.prototype._removeRoomByName=function(t){null!=(t=this.getRoomByName(t))&&this._removeRoom(t)},n.Managers.RoomManager.prototype._changeRoomName=function(t,e){var i=t.name;t.name=e,this._roomsByName.setItem(e,t),this._roomsByName.removeItem(i)},n.Managers.RoomManager.prototype._changeRoomPasswordState=function(t,e){t.isPasswordProtected=e},n.Managers.RoomManager.prototype._changeRoomCapacity=function(t,e,i){t.maxUsers=e,t.maxSpectators=i},n.Managers.RoomManager.prototype._addGroup=function(t){this._groups.push(t)},n.Managers.RoomManager.prototype._removeGroup=function(t){n.Utils.ArrayUtil.removeItem(this._groups,t);var e;t=this.getRoomListFromGroup(t);for(e in t){var i=t[e];i instanceof n.Entities.SFSRoom&&(i.isJoined?i._isManaged=!1:this._removeRoom(i))}},n.Managers.RoomManager.prototype._removeUser=function(t){for(var e in this._roomsById.items){var i=this._roomsById.items[e];i instanceof n.Entities.SFSRoom&&i.containsUser(t)&&i._removeUser(t)}},n.Managers.BuddyManager=function(t){this._sfs=t,this._buddiesByName=[],this._myVariables=[],this._inited=!1,this._buddyStates=[]},n.Managers.BuddyManager.prototype.isInited=function(){return this._inited},n.Managers.BuddyManager.prototype.containsBuddy=function(t){return null!=this.getBuddyByName(t)},n.Managers.BuddyManager.prototype.getBuddyById=function(t){if(-1<t)for(var e in this._buddiesByName){var i=this._buddiesByName[e];if(i instanceof n.Entities.SFSBuddy&&i.id==t)return i}return null},n.Managers.BuddyManager.prototype.getBuddyByName=function(t){return this._buddiesByName[t]},n.Managers.BuddyManager.prototype.getBuddyByNickName=function(t){for(var e in this._buddiesByName){var i=this._buddiesByName[e];if(i instanceof n.Entities.SFSBuddy&&i.nickName==t)return i}return null},n.Managers.BuddyManager.prototype.getOfflineBuddies=function(){var t,e=[];for(t in this._buddiesByName){var i=this._buddiesByName[t];i instanceof n.Entities.SFSBuddy&&!i.isOnline()&&e.push(i)}return e},n.Managers.BuddyManager.prototype.getOnlineBuddies=function(){var t,e=[];for(t in this._buddiesByName){var i=this._buddiesByName[t];i instanceof n.Entities.SFSBuddy&&i.isOnline()&&e.push(i)}return e},n.Managers.BuddyManager.prototype.getBuddyList=function(){return n.Utils.ArrayUtil.objToArray(this._buddiesByName)},n.Managers.BuddyManager.prototype.getMyVariable=function(t){return this._myVariables[t]},n.Managers.BuddyManager.prototype.getMyVariables=function(){return n.Utils.ArrayUtil.objToArray(this._myVariables)},n.Managers.BuddyManager.prototype.getMyOnlineState=function(){if(!this._inited)return!1;var t=!0,e=this.getMyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_ONLINE);return null!=e&&(t=e.value),t},n.Managers.BuddyManager.prototype.getMyNickName=function(){var t=this.getMyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME);return null!=t?t.value:null},n.Managers.BuddyManager.prototype.getMyState=function(){var t=this.getMyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_STATE);return null!=t?t.value:null},n.Managers.BuddyManager.prototype.getBuddyStates=function(){return this._buddyStates},n.Managers.BuddyManager.prototype._setInited=function(){this._inited=!0},n.Managers.BuddyManager.prototype._addBuddy=function(t){this._buddiesByName[t.name]=t},n.Managers.BuddyManager.prototype._clearAll=function(){this._buddiesByName=[]},n.Managers.BuddyManager.prototype._removeBuddyById=function(t){return null!=(t=this.getBuddyById(t))&&delete this._buddiesByName[t.name],t},n.Managers.BuddyManager.prototype._removeBuddyByName=function(t){var e=this.getBuddyByName(t);return null!=e&&delete this._buddiesByName[t],e},n.Managers.BuddyManager.prototype._setMyVariables=function(t){for(var e=0;e<t.length;e++)this._setMyVariable(t[e])},n.Managers.BuddyManager.prototype._setMyVariable=function(t){t.isNull()?delete this._myVariables[t.name]:this._myVariables[t.name]=t},n.Managers.BuddyManager.prototype._setMyOnlineState=function(t){t=new n.Entities.Variables.SFSBuddyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_ONLINE,t),this._setMyVariable(t)},n.Managers.BuddyManager.prototype._setMyNickName=function(t){t=new n.Entities.Variables.SFSBuddyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME,t),this._setMyVariable(t)},n.Managers.BuddyManager.prototype._setMyState=function(t){t=new n.Entities.Variables.SFSBuddyVariable(n.Entities.Variables.ReservedBuddyVariables.BV_STATE,t),this._setMyVariable(t)},n.Managers.BuddyManager.prototype._setBuddyStates=function(t){this._buddyStates=t},n.Requests={},n.Requests.System={},n.Requests.MMO={},n.Requests.BuddyList={},n.Requests.Game={},n.Requests._BaseRequest=r.Class.extend({init:function(t){this._reqObj={},this._id=t,this._targetController=0,this._log=n.Logger},getMessage:function(){return{a:this._id,c:this._targetController,p:this._reqObj}},validate:function(){this._log.error("BaseRequest.validate = no child-class implementation found!")},execute:function(){this._log.error("BaseRequest.execute = no child-class implementation found!")}}),n.Requests.System.HandshakeRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.Handshake),this._apiVersion=t,this._clientDetails=e,this._reconnectionToken=i},validate:function(){},execute:function(){this._reqObj[this.constructor.KEY_API]=this._apiVersion,this._reqObj[this.constructor.KEY_CLIENT_TYPE]=this._clientDetails,null!=this._reconnectionToken&&(this.reqObj[this.constructor.KEY_RECONNECTION_TOKEN]=this._reconnectionToken)}}),n.Requests.System.HandshakeRequest.KEY_SESSION_TOKEN="tk",n.Requests.System.HandshakeRequest.KEY_API="api",n.Requests.System.HandshakeRequest.KEY_COMPRESSION_THRESHOLD="ct",n.Requests.System.HandshakeRequest.KEY_RECONNECTION_TOKEN="rt",n.Requests.System.HandshakeRequest.KEY_CLIENT_TYPE="cl",n.Requests.System.HandshakeRequest.KEY_MAX_MESSAGE_SIZE="ms",n.Requests.System.LoginRequest=n.Requests._BaseRequest.extend({init:function(t,e,i,o){this._super(n.Requests.Login),this._userName=t,this._password=e,this._params=i,this._zoneName=o},validate:function(t){if(null!=t.mySelf)throw new n.Exceptions.SFSValidationError("LoginRequest error",["You are already logged in; logout before attempting a new login"]);if(t=null!=t.config&&null!=t.config.zone?t.config.zone:null,null!=this._zoneName&&(t=this._zoneName),null==t||0==t.length)throw new n.Exceptions.SFSValidationError("LoginRequest Error",["Missing Zone name"]);this._zoneName=t,null==this._userName&&(this._userName=""),null==this._password&&(this._password="")},execute:function(t){this._reqObj[this.constructor.KEY_ZONE_NAME]=this._zoneName,this._reqObj[this.constructor.KEY_USER_NAME]=this._userName,this._reqObj[this.constructor.KEY_PASSWORD]=0<this._password.length?l(t.sessionToken+this._password):"",null!=this._params&&(this._reqObj[this.constructor.KEY_PARAMS]=this._params)}}),n.Requests.System.LoginRequest.KEY_ZONE_NAME="zn",n.Requests.System.LoginRequest.KEY_USER_NAME="un",n.Requests.System.LoginRequest.KEY_PASSWORD="pw",n.Requests.System.LoginRequest.KEY_PARAMS="p",n.Requests.System.LoginRequest.KEY_PRIVILEGE_ID="pi",n.Requests.System.LoginRequest.KEY_ID="id",n.Requests.System.LoginRequest.KEY_ROOMLIST="rl",n.Requests.System.LoginRequest.KEY_RECONNECTION_SECONDS="rs",n.Requests.System.LogoutRequest=n.Requests._BaseRequest.extend({init:function(){this._super(n.Requests.Logout)},validate:function(t){if(null==t.mySelf)throw new n.Exceptions.SFSValidationError("LogoutRequest error",["You are not logged in"])},execute:function(){}}),n.Requests.System.LogoutRequest.KEY_ZONE_NAME="zn",n.Requests.System.JoinRoomRequest=n.Requests._BaseRequest.extend({init:function(t,e,i,o){this._super(n.Requests.JoinRoom),"string"==typeof t?this._rName=t:"number"==typeof t?this._rId=t:t instanceof n.Entities.SFSRoom&&(this._rId=t.id,this._rName=t.name),this._password=e,this._roomIdToLeave=i,this._asSpectator="boolean"==typeof o&&o},validate:function(){if(null==this._rId&&null==this._rName)throw new n.Exceptions.SFSValidationError("JoinRoomRequest Error",["Missing Room id or name, please provide one of the two or an existing Room object"])},execute:function(t){t._isJoining=!0,0<=this._rId?this._reqObj[this.constructor.KEY_ROOM_ID]=this._rId:null!=this._rName&&(this._reqObj[this.constructor.KEY_ROOM_NAME]=this._rName),null!=this._password&&(this._reqObj[this.constructor.KEY_PASS]=this._password),null!=this._roomIdToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomIdToLeave),this._asSpectator&&(this._reqObj[this.constructor.KEY_AS_SPECTATOR]=this._asSpectator)}}),n.Requests.System.JoinRoomRequest.KEY_ROOM="r",n.Requests.System.JoinRoomRequest.KEY_USER_LIST="ul",n.Requests.System.JoinRoomRequest.KEY_ROOM_NAME="n",n.Requests.System.JoinRoomRequest.KEY_ROOM_ID="i",n.Requests.System.JoinRoomRequest.KEY_PASS="p",n.Requests.System.JoinRoomRequest.KEY_ROOM_TO_LEAVE="rl",n.Requests.System.JoinRoomRequest.KEY_AS_SPECTATOR="sp",n.Requests.System.CreateRoomRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.CreateRoom),this._settings=t,this._autoJoin="boolean"==typeof e&&e,this._roomToLeave=i},validate:function(){var t=[];if((null==this._settings.name||0==this._settings.name.length)&&t.push("Missing Room name"),0>=this._settings.maxUsers&&t.push("Max number of users must be > 0"),null!=this._settings.extension&&((null==this._settings.extension.className||0==this._settings.extension.className.length)&&t.push("Missing Extension class name"),(null==this._settings.extension.id||0==this._settings.extension.id.length)&&t.push("Missing Extension id")),this._settings instanceof n.Requests.MMO.MMORoomSettings&&(null==this._settings.defaultAOI&&t.push("Missing default AoI (Area of Interest)"),null!=this._settings.mapLimits&&(null==this._settings.mapLimits.lowerLimit||null==this._settings.mapLimits.higherLimit)&&t.push("Map limits must be both defined")),0<t.length)throw new n.Exceptions.SFSValidationError("CreateRoomRequest Error",t)},execute:function(){if(this._reqObj[this.constructor.KEY_NAME]=this._settings.name,this._reqObj[this.constructor.KEY_GROUP_ID]=this._settings.groupId,this._reqObj[this.constructor.KEY_PASSWORD]=this._settings.password,this._reqObj[this.constructor.KEY_ISGAME]=this._settings.isGame,this._reqObj[this.constructor.KEY_MAXUSERS]=this._settings.maxUsers,this._reqObj[this.constructor.KEY_MAXSPECTATORS]=this._settings.maxSpectators,this._reqObj[this.constructor.KEY_MAXVARS]=this._settings.maxVariables,null!=this._settings.variables&&0<this._settings.variables.length){var t,e=[];for(t in this._settings.variables){var i=this._settings.variables[t];i instanceof n.Entities.Variables.SFSRoomVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_ROOMVARS]=e}null!=this._settings.permissions&&((e=[]).push(this._settings.permissions.allowNameChange),e.push(this._settings.permissions.allowPasswordStateChange),e.push(this._settings.permissions.allowPublicMessages),e.push(this._settings.permissions.allowResizing),this._reqObj[this.constructor.KEY_PERMISSIONS]=e),null!=this._settings.events&&((e=[]).push(this._settings.events.allowUserEnter),e.push(this._settings.events.allowUserExit),e.push(this._settings.events.allowUserCountChange),e.push(this._settings.events.allowUserVariablesUpdate),this._reqObj[this.constructor.KEY_EVENTS]=e),null!=this._settings.extension&&(this._reqObj[this.constructor.KEY_EXTID]=this._settings.extension.id,this._reqObj[this.constructor.KEY_EXTCLASS]=this._settings.extension.className,null!=this._settings.extension.propertiesFile&&0<this._settings.extension.propertiesFile.length&&(this._reqObj[this.constructor.KEY_EXTPROP]=this._settings.extension.propertiesFile)),this._settings instanceof n.Requests.MMO.MMORoomSettings&&(this._reqObj[this.constructor.KEY_MMO_DEFAULT_AOI]=this._settings.defaultAOI._toArray(),null!=this._settings.mapLimits&&(this._reqObj[this.constructor.KEY_MMO_MAP_LOW_LIMIT]=this._settings.mapLimits.lowerLimit._toArray(),this._reqObj[this.constructor.KEY_MMO_MAP_HIGH_LIMIT]=this._settings.mapLimits.higherLimit._toArray()),this._reqObj[this.constructor.KEY_MMO_USER_MAX_LIMBO_SECONDS]=this._settings.userMaxLimboSeconds,this._reqObj[this.constructor.KEY_MMO_PROXIMITY_UPDATE_MILLIS]=this._settings.proximityListUpdateMillis,this._reqObj[this.constructor.KEY_MMO_SEND_ENTRY_POINT]=this._settings.sendAOIEntryPoint),this._reqObj[this.constructor.KEY_AUTOJOIN]=this._autoJoin,null!=this._roomToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomToLeave.id)}}),n.Requests.System.CreateRoomRequest.KEY_ROOM="r",n.Requests.System.CreateRoomRequest.KEY_NAME="n",n.Requests.System.CreateRoomRequest.KEY_PASSWORD="p",n.Requests.System.CreateRoomRequest.KEY_GROUP_ID="g",n.Requests.System.CreateRoomRequest.KEY_ISGAME="ig",n.Requests.System.CreateRoomRequest.KEY_MAXUSERS="mu",n.Requests.System.CreateRoomRequest.KEY_MAXSPECTATORS="ms",n.Requests.System.CreateRoomRequest.KEY_MAXVARS="mv",n.Requests.System.CreateRoomRequest.KEY_ROOMVARS="rv",n.Requests.System.CreateRoomRequest.KEY_PERMISSIONS="pm",n.Requests.System.CreateRoomRequest.KEY_EVENTS="ev",n.Requests.System.CreateRoomRequest.KEY_EXTID="xn",n.Requests.System.CreateRoomRequest.KEY_EXTCLASS="xc",n.Requests.System.CreateRoomRequest.KEY_EXTPROP="xp",n.Requests.System.CreateRoomRequest.KEY_AUTOJOIN="aj",n.Requests.System.CreateRoomRequest.KEY_ROOM_TO_LEAVE="rl",n.Requests.System.CreateRoomRequest.KEY_MMO_DEFAULT_AOI="maoi",n.Requests.System.CreateRoomRequest.KEY_MMO_MAP_LOW_LIMIT="mllm",n.Requests.System.CreateRoomRequest.KEY_MMO_MAP_HIGH_LIMIT="mlhm",n.Requests.System.CreateRoomRequest.KEY_MMO_USER_MAX_LIMBO_SECONDS="muls",n.Requests.System.CreateRoomRequest.KEY_MMO_PROXIMITY_UPDATE_MILLIS="mpum",n.Requests.System.CreateRoomRequest.KEY_MMO_SEND_ENTRY_POINT="msep",n.Requests.System.GenericMessageRequest=n.Requests._BaseRequest.extend({init:function(){this._super(n.Requests.GenericMessage),this._type=-1,this._recipient=this._params=this._message=this._user=this._room=null,this._sendMode=-1},validate:function(t){if(0>this._type)throw new n.Exceptions.SFSValidationError("GenericMessageRequest Error",["Unsupported message type: "+this._type]);var e=[];switch(this._type){case n.Requests.GenericMessageType.PUBLIC_MSG:this._validatePublicMessage(t,e);break;case n.Requests.GenericMessageType.PRIVATE_MSG:this._validatePrivateMessage(t,e);break;case n.Requests.GenericMessageType.OBJECT_MSG:this._validateObjectMessage(t,e);break;case n.Requests.GenericMessageType.BUDDY_MSG:this._validateBuddyMessage(t,e);break;default:this._validateSuperUserMessage(t,e)}if(0<e.length)throw new n.Exceptions.SFSValidationError("GenericMessageRequest Error",e)},execute:function(t){switch(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE]=this._type,this._type){case n.Requests.GenericMessageType.PUBLIC_MSG:this._executePublicMessage(t);break;case n.Requests.GenericMessageType.PRIVATE_MSG:this._executePrivateMessage(t);break;case n.Requests.GenericMessageType.OBJECT_MSG:this._executeObjectMessage(t);break;case n.Requests.GenericMessageType.BUDDY_MSG:this._executeBuddyMessage(t);break;default:this._executeSuperUserMessage(t)}},_validatePublicMessage:function(t,e){(null==this._message||0==this._message.length)&&e.push("Public message is empty"),null!=this._room&&!t.mySelf.isJoinedInRoom(this._room)&&e.push("You are not joined in the target Room: "+this._room)},_validatePrivateMessage:function(t,e){(null==this._message||0==this._message.length)&&e.push("Private message is empty"),0>this._recipient&&e.push("Invalid recipient id: "+this._recipient)},_validateObjectMessage:function(t,e){null==this._params&&e.push("Object message is null")},_validateBuddyMessage:function(t,e){t.buddyManager.isInited||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.myOnlineState&&e.push("Can't send messages while you are offline in the Buddy List system"),(null==this._message||0==this._message.length)&&e.push("Buddy message is empty"),0>this._recipient&&e.push("Recipient is offline or not in your Buddy List")},_validateSuperUserMessage:function(t,e){switch((null==this._message||0==this._message.length)&&e.push("Moderator message is empty"),this._sendMode){case n.Requests.MessageRecipientMode.TO_USER:this._recipient instanceof n.Entities.SFSUser||e.push("SFSUser object expected as recipient");break;case n.Requests.MessageRecipientMode.TO_ROOM:this._recipient instanceof n.Entities.SFSRoom||e.push("SFSRoom object expected as recipient");break;case n.Requests.MessageRecipientMode.TO_GROUP:"string"!=typeof this._recipient&&e.push("String object (the groupId) expected as recipient")}},_executePublicMessage:function(t){if(null==this._room&&(this._room=t.lastJoinedRoom),null==this._room)throw new n.Exceptions.SFSError("User should be joined in a Room in order to send a public message");this._reqObj[n.Requests.System.GenericMessageRequest.KEY_ROOM_ID]=this._room.id,this._reqObj[n.Requests.System.GenericMessageRequest.KEY_USER_ID]=t.mySelf.id,this._reqObj[n.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executePrivateMessage:function(){this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient,this._reqObj[n.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executeBuddyMessage:function(){this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient,this._reqObj[n.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executeSuperUserMessage:function(){switch(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params),this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT_MODE]=this._sendMode,this._sendMode){case n.Requests.MessageRecipientMode.TO_USER:case n.Requests.MessageRecipientMode.TO_ROOM:this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient.id;break;case n.Requests.MessageRecipientMode.TO_GROUP:this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient}},_executeObjectMessage:function(t){if(null==this._room&&(this._room=t.lastJoinedRoom),null==this._room)throw new n.Exceptions.SFSError("User should be joined in a Room in order to send an object message");if(t=[],null!=this._recipient&&this._recipient instanceof Array){var e=this._recipient;if(e.length>this._room.capacity)throw new n.Exceptions.SFSError("The number of recipients is bigger than the target Room capacity: "+e.length);for(var i in e){var o=e[i];o instanceof n.Entities.SFSUser?t.push(o.id):this._log.warn("Bad recipient in ObjectMessage recipient list: "+(void 0===o?"undefined":a(o))+"; expected type: SFSUser")}}this._reqObj[n.Requests.System.GenericMessageRequest.KEY_ROOM_ID]=this._room.id,this._reqObj[n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params,0<t.length&&(this._reqObj[n.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=t)}}),n.Requests.System.GenericMessageRequest.KEY_ROOM_ID="r",n.Requests.System.GenericMessageRequest.KEY_USER_ID="u",n.Requests.System.GenericMessageRequest.KEY_MESSAGE="m",n.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE="t",n.Requests.System.GenericMessageRequest.KEY_RECIPIENT="rc",n.Requests.System.GenericMessageRequest.KEY_RECIPIENT_MODE="rm",n.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS="p",n.Requests.System.GenericMessageRequest.KEY_SENDER_DATA="sd",n.Requests.System.ChangeRoomNameRequest=n.Requests._BaseRequest.extend({init:function(t,e){this._super(n.Requests.ChangeRoomName),this._room=t,this._newName=e},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),(null==this._newName||0==this._newName.length)&&t.push("Invalid new room name: it must be a non-null and non-empty string"),0<t.length)throw new n.Exceptions.SFSValidationError("ChangeRoomNameRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_NAME]=this._newName}}),n.Requests.System.ChangeRoomNameRequest.KEY_ROOM="r",n.Requests.System.ChangeRoomNameRequest.KEY_NAME="n",n.Requests.System.ChangeRoomPasswordStateRequest=n.Requests._BaseRequest.extend({init:function(t,e){this._super(n.Requests.ChangeRoomPassword),this._room=t,this._newPass=e},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),null==this._newPass&&t.push("Invalid new room name: it must be a non-null string"),0<t.length)throw new n.Exceptions.SFSValidationError("ChangeRoomPasswordStateRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_PASS]=this._newPass}}),n.Requests.System.ChangeRoomPasswordStateRequest.KEY_ROOM="r",n.Requests.System.ChangeRoomPasswordStateRequest.KEY_PASS="p",n.Requests.System.ObjectMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=n.Requests.GenericMessageType.OBJECT_MSG,this._params=t,this._room=e,this._recipient=i}}),n.Requests.System.SetRoomVariablesRequest=n.Requests._BaseRequest.extend({init:function(t,e){this._super(n.Requests.SetRoomVariables),this._roomVariables=t,this._room=e},validate:function(t){var e=[];if(null!=this._room?this._room.containsUser(t.mySelf)||e.push("You are not joined in the target Room"):null==t.lastJoinedRoom&&e.push("You are not joined in any Room"),(null==this._roomVariables||0==this._roomVariables.length)&&e.push("No variables were specified"),0<e.length)throw new n.Exceptions.SFSValidationError("SetRoomVariablesRequest Error",e)},execute:function(t){var e,i=[];for(e in this._roomVariables){var o=this._roomVariables[e];o instanceof n.Entities.Variables.SFSRoomVariable&&i.push(o.toArray())}null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_VAR_LIST]=i,this._reqObj[this.constructor.KEY_VAR_ROOM]=this._room.id}}),n.Requests.System.SetRoomVariablesRequest.KEY_VAR_ROOM="r",n.Requests.System.SetRoomVariablesRequest.KEY_VAR_LIST="vl",n.Requests.System.SetUserVariablesRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.SetUserVariables),this._userVariables=t},validate:function(){var t=[];if((null==this._userVariables||0==this._userVariables.length)&&t.push("No variables were specified"),0<t.length)throw new n.Exceptions.SFSValidationError("SetUserVariablesRequest Error",t)},execute:function(){var t,e=[];for(t in this._userVariables){var i=this._userVariables[t];i instanceof n.Entities.Variables.SFSUserVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_VAR_LIST]=e}}),n.Requests.System.SetUserVariablesRequest.KEY_USER="u",n.Requests.System.SetUserVariablesRequest.KEY_VAR_LIST="vl",n.Requests.System.ExtensionRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.CallExtension),this._targetController=1,this._extCmd=t,this._params=e,this._room=i,null==this._params&&(this._params={})},validate:function(){var t=[];if((null==this._extCmd||0==this._extCmd.length)&&t.push("Missing extension command"),0<t.length)throw new n.Exceptions.SFSValidationError("ExtensionRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_CMD]=this._extCmd,this._reqObj[this.constructor.KEY_ROOM]=null==this._room?-1:this._room.id,this._reqObj[this.constructor.KEY_PARAMS]=this._params}}),n.Requests.System.ExtensionRequest.KEY_CMD="c",n.Requests.System.ExtensionRequest.KEY_PARAMS="p",n.Requests.System.ExtensionRequest.KEY_ROOM="r",n.Requests.System.LeaveRoomRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.LeaveRoom),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new n.Exceptions.SFSValidationError("LeaveRoomRequest Error",["You are not joined in any room"])},execute:function(){null!=this._room&&(this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id)}}),n.Requests.System.LeaveRoomRequest.KEY_ROOM_ID="r",n.Requests.System.SubscribeRoomGroupRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.SubscribeRoomGroup),this._groupId=t},validate:function(){var t=[];if((null==this._groupId||0==this._groupId.length)&&t.push("Invalid group id passed; must be a string with at least one character"),0<t.length)throw new n.Exceptions.SFSValidationError("SubscribeGroupRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_GROUP_ID]=this._groupId}}),n.Requests.System.SubscribeRoomGroupRequest.KEY_GROUP_ID="g",n.Requests.System.SubscribeRoomGroupRequest.KEY_ROOM_LIST="rl",n.Requests.System.UnsubscribeRoomGroupRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.UnsubscribeRoomGroup),this._groupId=t},validate:function(){var t=[];if((null==this._groupId||0==this._groupId.length)&&t.push("Invalid group id passed; must be a string with at least one character"),0<t.length)throw new n.Exceptions.SFSValidationError("UnsubscribeGroupRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_GROUP_ID]=this._groupId}}),n.Requests.System.UnsubscribeRoomGroupRequest.KEY_GROUP_ID="g",n.Requests.System.SpectatorToPlayerRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.SpectatorToPlayer),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new n.Exceptions.SFSValidationError("SpectatorToPlayerRequest Error",["You are not joined in any room"])},execute:function(t){null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id}}),n.Requests.System.SpectatorToPlayerRequest.KEY_ROOM_ID="r",n.Requests.System.SpectatorToPlayerRequest.KEY_USER_ID="u",n.Requests.System.SpectatorToPlayerRequest.KEY_PLAYER_ID="p",n.Requests.System.PlayerToSpectatorRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.PlayerToSpectator),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new n.Exceptions.SFSValidationError("PlayerToSpectatorRequest Error",["You are not joined in any room"])},execute:function(t){null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id}}),n.Requests.System.PlayerToSpectatorRequest.KEY_ROOM_ID="r",n.Requests.System.PlayerToSpectatorRequest.KEY_USER_ID="u",n.Requests.System.ChangeRoomCapacityRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.ChangeRoomCapacity),this._room=t,this._newMaxUsers=e,this._newMaxSpect=i},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),0<t.length)throw new n.Exceptions.SFSValidationError("ChangeRoomCapacityRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_USER_SIZE]=this._newMaxUsers,this._reqObj[this.constructor.KEY_SPEC_SIZE]=this._newMaxSpect}}),n.Requests.System.ChangeRoomCapacityRequest.KEY_ROOM="r",n.Requests.System.ChangeRoomCapacityRequest.KEY_USER_SIZE="u",n.Requests.System.ChangeRoomCapacityRequest.KEY_SPEC_SIZE="s",n.Requests.System.PublicMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=n.Requests.GenericMessageType.PUBLIC_MSG,this._message=t,this._room=i,this._params=e}}),n.Requests.System.PrivateMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=n.Requests.GenericMessageType.PRIVATE_MSG,this._message=t,this._recipient=e,this._params=i}}),n.Requests.System.ModeratorMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){if(this._super(),null==e)throw new n.Exceptions.SFSError("Recipient mode cannot be null");this._type=n.Requests.GenericMessageType.MODERATOR_MSG,this._message=t,this._params=i,this._recipient=e.target,this._sendMode=e.mode}}),n.Requests.System.AdminMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){if(this._super(),null==e)throw new n.Exceptions.SFSError("Recipient mode cannot be null");this._type=n.Requests.GenericMessageType.ADMING_MSG,this._message=t,this._params=i,this._recipient=e.target,this._sendMode=e.mode}}),n.Requests.System.KickUserRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.KickUser),null==i&&(i=5),0>i&&(i=0),this._userId=t,this._message=e,this._delay=i},validate:function(t){var e=[];if(!t.mySelf.isModerator()&&!t.mySelf.isAdmin()&&e.push("You don't have enough permissions to execute this request"),0<e.length)throw new n.Exceptions.SFSValidationError("KickUserRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_USER_ID]=this._userId,this._reqObj[this.constructor.KEY_DELAY]=this._delay,null!=this._message&&0<this._message.length&&(this._reqObj[this.constructor.KEY_MESSAGE]=this._message)}}),n.Requests.System.KickUserRequest.KEY_USER_ID="u",n.Requests.System.KickUserRequest.KEY_MESSAGE="m",n.Requests.System.KickUserRequest.KEY_DELAY="d",n.Requests.System.BanUserRequest=n.Requests._BaseRequest.extend({init:function(t,e,i,o,s){this._super(n.Requests.BanUser),null==i&&(i=1),null==o&&(o=5),null==s&&(s=24),this._userId=t,this._message=e,this._banMode=i,this._delay=o,this._durationHours=s},validate:function(t){var e=[];if(!t.mySelf.isModerator()&&!t.mySelf.isAdmin()&&e.push("You don't have enough permissions to execute this request"),0<e.length)throw new n.Exceptions.SFSValidationError("BanUserRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_USER_ID]=this._userId,this._reqObj[this.constructor.KEY_DELAY]=this._delay,this._reqObj[this.constructor.KEY_BAN_MODE]=this._banMode,this._reqObj[this.constructor.KEY_BAN_DURATION_HOURS]=this._durationHours,null!=this._message&&0<this._message.length&&(this._reqObj[this.constructor.KEY_MESSAGE]=this._message)}}),n.Requests.System.BanUserRequest.KEY_USER_ID="u",n.Requests.System.BanUserRequest.KEY_MESSAGE="m",n.Requests.System.BanUserRequest.KEY_DELAY="d",n.Requests.System.BanUserRequest.KEY_BAN_MODE="b",n.Requests.System.BanUserRequest.KEY_BAN_DURATION_HOURS="dh",n.Requests.System.ManualDisconnectionRequest=n.Requests._BaseRequest.extend({init:function(){this._super(n.Requests.ManualDisconnection)},validate:function(){},execute:function(){}}),n.Requests.System.FindRoomsRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.FindRooms),null==i&&(i=0),this._matchExpr=t,this._groupId=e,this._limit=i},validate:function(){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),0<t.length)throw new n.Exceptions.SFSValidationError("FindRoomsRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_EXPRESSION]=this._matchExpr._toArray(),null!=this._groupId&&(this._reqObj[this.constructor.KEY_GROUP]=this._groupId),0<this._limit&&(this._reqObj[this.constructor.KEY_LIMIT]=this._limit)}}),n.Requests.System.FindRoomsRequest.KEY_EXPRESSION="e",n.Requests.System.FindRoomsRequest.KEY_GROUP="g",n.Requests.System.FindRoomsRequest.KEY_LIMIT="l",n.Requests.System.FindRoomsRequest.KEY_FILTERED_ROOMS="fr",n.Requests.System.FindUsersRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.FindUsers),null==i&&(i=0),this._matchExpr=t,this._target=e,this._limit=i},validate:function(){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),0<t.length)throw new n.Exceptions.SFSValidationError("FindUsersRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_EXPRESSION]=this._matchExpr._toArray(),null!=this._target&&(this._target instanceof n.Entities.SFSRoom?this._reqObj[this.constructor.KEY_ROOM]=this._target.id:"string"==typeof this._target?this._reqObj[this.constructor.KEY_GROUP]=this._target:this._log.warn("Unsupport target type for FindUsersRequest: "+this._target)),0<this._limit&&(this._reqObj[this.constructor.KEY_LIMIT]=this._limit)}}),n.Requests.System.FindUsersRequest.KEY_EXPRESSION="e",n.Requests.System.FindUsersRequest.KEY_GROUP="g",n.Requests.System.FindUsersRequest.KEY_ROOM="r",n.Requests.System.FindUsersRequest.KEY_LIMIT="l",n.Requests.System.FindUsersRequest.KEY_FILTERED_USERS="fu",n.Requests.System.PingPongRequest=n.Requests._BaseRequest.extend({init:function(){this._super(n.Requests.PingPong)},validate:function(){},execute:function(){}}),n.Requests.MMO.SetUserPositionRequest=n.Requests._BaseRequest.extend({init:function(t,e){this._super(n.Requests.SetUserPosition),this._pos=t,this._room=e},validate:function(t){var e=[];if(null==this._pos&&e.push("Position must be a Vec3D instance"),null==this._room&&(this._room=t.lastJoinedRoom),this._room instanceof n.Entities.MMORoom||e.push("Passed Room is not an MMORoom"),0<e.length)throw new n.Exceptions.SFSValidationError("SetUserPosition Error",e)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_VEC3D]=this._pos._toArray()}}),n.Requests.MMO.SetUserPositionRequest.KEY_ROOM="r",n.Requests.MMO.SetUserPositionRequest.KEY_VEC3D="v",n.Requests.MMO.SetUserPositionRequest.KEY_PLUS_USER_LIST="p",n.Requests.MMO.SetUserPositionRequest.KEY_MINUS_USER_LIST="m",n.Requests.MMO.SetUserPositionRequest.KEY_PLUS_ITEM_LIST="q",n.Requests.MMO.SetUserPositionRequest.KEY_MINUS_ITEM_LIST="n",n.Requests.MMO.SetMMOItemVariables={},n.Requests.MMO.SetMMOItemVariables.KEY_ROOM_ID="r",n.Requests.MMO.SetMMOItemVariables.KEY_ITEM_ID="i",n.Requests.MMO.SetMMOItemVariables.KEY_VAR_LIST="v",n.Requests.BuddyList.InitBuddyListRequest=n.Requests._BaseRequest.extend({init:function(){this._super(n.Requests.InitBuddyList)},validate:function(t){var e=[];if(t.buddyManager.isInited()&&e.push("Buddy List is already initialized"),0<e.length)throw new n.Exceptions.SFSValidationError("InitBuddyListRequest Error",e)},execute:function(){}}),n.Requests.BuddyList.InitBuddyListRequest.KEY_BLIST="bl",n.Requests.BuddyList.InitBuddyListRequest.KEY_BUDDY_STATES="bs",n.Requests.BuddyList.InitBuddyListRequest.KEY_MY_VARS="mv",n.Requests.BuddyList.AddBuddyRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.AddBuddy),this._name=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),(null==this._name||1>this._name.length)&&e.push("Invalid buddy name (null or empty string)"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't add a buddy while you are offline in the Buddy List system"),null!=(t=t.buddyManager.getBuddyByName(this._name))&&!t.isTemp()&&e.push("Can't add buddy '"+this._name+"' because it is already in your list"),0<e.length)throw new n.Exceptions.SFSValidationError("AddBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name}}),n.Requests.BuddyList.AddBuddyRequest.KEY_BUDDY_NAME="bn",n.Requests.BuddyList.BlockBuddyRequest=n.Requests._BaseRequest.extend({init:function(t,e){this._super(n.Requests.BlockBuddy),this._name=t,this._blocked=e},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),(null==this._name||1>this._name.length)&&e.push("Invalid buddy name (null or empty string)"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't block a buddy while you are offline in the Buddy List system"),null==(t=t.buddyManager.getBuddyByName(this._name))?e.push("Can't block buddy '"+this._name+"' because it isn't in your list"):t.isBlocked()==this._blocked&&e.push("Block flag is already in the requested '"+this._blocked+"' state for buddy "+this._name),0<e.length)throw new n.Exceptions.SFSValidationError("BlockBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name,this._reqObj[this.constructor.KEY_BUDDY_BLOCK_STATE]=this._blocked}}),n.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_NAME="bn",n.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE="bs",n.Requests.BuddyList.RemoveBuddyRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.RemoveBuddy),this._name=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't remove a buddy while you are offline in the Buddy List system"),t.buddyManager.containsBuddy(this._name)||e.push("Can't remove buddy '"+this._name+"' because it isn't in your list"),0<e.length)throw new n.Exceptions.SFSValidationError("RemoveBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name}}),n.Requests.BuddyList.RemoveBuddyRequest.KEY_BUDDY_NAME="bn",n.Requests.BuddyList.SetBuddyVariablesRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.SetBuddyVariables),this._buddyVariables=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't set Buddy Variables while you are offline in the Buddy List system"),(null==this._buddyVariables||0==this._buddyVariables.length)&&e.push("No Buddy Variables to set have been specified"),0<e.length)throw new n.Exceptions.SFSValidationError("SetBuddyVariablesRequest Error",e)},execute:function(){var t,e=[];for(t in this._buddyVariables){var i=this._buddyVariables[t];i instanceof n.Entities.Variables.SFSBuddyVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_BUDDY_VARS]=e}}),n.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_NAME="bn",n.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_VARS="bv",n.Requests.BuddyList.GoOnlineRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.GoOnline),this._online=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0<e.length)throw new n.Exceptions.SFSValidationError("GoOnlineRequest Error",e)},execute:function(t){t.buddyManager._setMyOnlineState(this._online),this._reqObj[this.constructor.KEY_ONLINE]=this._online}}),n.Requests.BuddyList.GoOnlineRequest.KEY_ONLINE="o",n.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_NAME="bn",n.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_ID="bi",n.Requests.BuddyList.BuddyMessageRequest=n.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=n.Requests.GenericMessageType.BUDDY_MSG,this._message=t,this._recipient=null!=e?e.id:-1,this._params=i}}),n.Requests.Game.InviteUsersRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.InviteUsers),this._invitedUsers=t,this._secondsForAnswer=e,this._params=i},validate:function(){var t=[];if((null==this._invitedUsers||1>this._invitedUsers.length)&&t.push("No invitation(s) to send"),this._invitedUsers.length>this.constructor.MAX_INVITATIONS_FROM_CLIENT_SIDE&&t.push("Too many invitations; "+this.constructor.MAX_INVITATIONS_FROM_CLIENT_SIDE+" max are allowed from client side"),(this._secondsForAnswer<this.constructor.MIN_EXPIRY_TIME||this._secondsForAnswer>this.constructor.MAX_EXPIRY_TIME)&&t.push("secondsForAnswer value is out of range (min: "+this.constructor.MIN_EXPIRY_TIME+"; max: "+this.constructor.MAX_EXPIRY_TIME+")"),0<t.length)throw new n.Exceptions.SFSValidationError("InviteUsersRequest Error",t)},execute:function(t){var e,i=[];for(e in this._invitedUsers){var o=this._invitedUsers[e];(o instanceof n.Entities.SFSUser||o instanceof n.Entities.SFSBuddy)&&o!=t.mySelf&&i.push(o.id)}this._reqObj[this.constructor.KEY_INVITED_USERS]=i,this._reqObj[this.constructor.KEY_TIME]=this._secondsForAnswer,null!=this._params&&(this._reqObj[this.constructor.KEY_PARAMS]=this._params)}}),n.Requests.Game.InviteUsersRequest.KEY_USER="u",n.Requests.Game.InviteUsersRequest.KEY_USER_ID="ui",n.Requests.Game.InviteUsersRequest.KEY_INVITATION_ID="ii",n.Requests.Game.InviteUsersRequest.KEY_TIME="t",n.Requests.Game.InviteUsersRequest.KEY_PARAMS="p",n.Requests.Game.InviteUsersRequest.KEY_INVITEE_ID="ee",n.Requests.Game.InviteUsersRequest.KEY_INVITED_USERS="iu",n.Requests.Game.InviteUsersRequest.KEY_REPLY_ID="ri",n.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE=8,n.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME=5,n.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME=300,n.Requests.Game.InvitationReplyRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.InvitationReply),this._invitation=t,this._reply=e,this._params=i},validate:function(){var t=[];if(null==this._invitation&&t.push("Missing invitation object"),0<t.length)throw new n.Exceptions.SFSValidationError("InvitationReplyRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_INVITATION_ID]=this._invitation.id,this._reqObj[this.constructor.KEY_INVITATION_REPLY]=this._reply,null!=this._params&&(this._reqObj[this.constructor.KEY_INVITATION_PARAMS]=this._params)}}),n.Requests.Game.InvitationReplyRequest.KEY_INVITATION_ID="i",n.Requests.Game.InvitationReplyRequest.KEY_INVITATION_REPLY="r",n.Requests.Game.InvitationReplyRequest.KEY_INVITATION_PARAMS="p",n.Requests.Game.CreateSFSGameRequest=n.Requests._BaseRequest.extend({init:function(t){this._super(n.Requests.CreateSFSGame),this._settings=t,this._createRoomRequest=new n.Requests.System.CreateRoomRequest(t,!1,null)},validate:function(t){var e=[];try{this._createRoomRequest.validate(t)}catch(t){e=t.getErrors()}if(this._settings.minPlayersToStartGame>this._settings.maxUsers&&e.push("Minimum number of players to start the game can't be greater than the Room's maximum number of users"),(this._settings.invitationExpiryTime<n.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME||this._settings.invitationExpiryTime>n.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME)&&e.push("Invitation expiration time value is out of range (min: "+n.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME+"; max: "+n.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME+")"),null!=this._settings.invitedPlayers&&this._settings.invitedPlayers.length>n.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE&&e.push("Can't invite more than "+n.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE+" players from client side"),0<e.length)throw new n.Exceptions.SFSValidationError("CreateSFSGameRequest Error",e)},execute:function(t){if(this._createRoomRequest.execute(t),this._reqObj=this._createRoomRequest._reqObj,this._reqObj[this.constructor.KEY_IS_PUBLIC]=this._settings.isPublic,this._reqObj[this.constructor.KEY_MIN_PLAYERS]=this._settings.minPlayersToStartGame,this._reqObj[this.constructor.KEY_INVITATION_EXPIRY]=this._settings.invitationExpiryTime,this._reqObj[this.constructor.KEY_LEAVE_ROOM]=this._settings.leaveLastJoinedRoom,this._reqObj[this.constructor.KEY_NOTIFY_GAME_STARTED]=this._settings.notifyGameStarted,null!=this._settings.playerMatchExpression&&(this._reqObj[this.constructor.KEY_PLAYER_MATCH_EXP]=this._settings.playerMatchExpression._toArray()),null!=this._settings.spectatorMatchExpression&&(this._reqObj[this.constructor.KEY_SPECTATOR_MATCH_EXP]=this._settings.spectatorMatchExpression._toArray()),null!=this._settings.invitedPlayers){var e;t=[];for(e in this._settings.invitedPlayers){var i=this._settings.invitedPlayers[e];(i instanceof n.Entities.SFSUser||i instanceof n.Entities.SFSBuddy)&&t.push(i.id)}this._reqObj[this.constructor.KEY_INVITED_PLAYERS]=t}null!=this._settings.searchableRooms&&(this._reqObj[this.constructor.KEY_SEARCHABLE_ROOMS]=this._settings.searchableRooms),null!=this._settings.invitationParams&&(this._reqObj[this.constructor.KEY_INVITATION_PARAMS]=this._settings.invitationParams)}}),n.Requests.Game.CreateSFSGameRequest.KEY_IS_PUBLIC="gip",n.Requests.Game.CreateSFSGameRequest.KEY_MIN_PLAYERS="gmp",n.Requests.Game.CreateSFSGameRequest.KEY_INVITED_PLAYERS="ginp",n.Requests.Game.CreateSFSGameRequest.KEY_SEARCHABLE_ROOMS="gsr",n.Requests.Game.CreateSFSGameRequest.KEY_PLAYER_MATCH_EXP="gpme",n.Requests.Game.CreateSFSGameRequest.KEY_SPECTATOR_MATCH_EXP="gsme",n.Requests.Game.CreateSFSGameRequest.KEY_INVITATION_EXPIRY="gie",n.Requests.Game.CreateSFSGameRequest.KEY_LEAVE_ROOM="glr",n.Requests.Game.CreateSFSGameRequest.KEY_NOTIFY_GAME_STARTED="gns",n.Requests.Game.CreateSFSGameRequest.KEY_INVITATION_PARAMS="ip",n.Requests.Game.QuickJoinGameRequest=n.Requests._BaseRequest.extend({init:function(t,e,i){this._super(n.Requests.QuickJoinGame),this._matchExpression=t,this._whereToSearch=e,this._roomToLeave=i},validate:function(){var t=[];if(null==this._whereToSearch||1>this._whereToSearch.length?t.push("Missing lis of Rooms or Group name where to search the game to join"):this._whereToSearch.length>this.constructor.MAX_ROOMS&&t.push("Too many Rooms specified in list where to search the game to join; client limit is: "+this.constructor.MAX_ROOMS),0<t.length)throw new n.Exceptions.SFSValidationError("CreateSFSGameRequest Error",t)},execute:function(){if("string"==typeof this._whereToSearch[0])this._reqObj[this.constructor.KEY_GROUP_LIST]=this._whereToSearch;else{if(!(this._whereToSearch[0]instanceof n.Entities.SFSRoom))throw new n.Exceptions.SFSError("Invalid type in whereToSearch parameter");for(var t=[],e=0;e<this._whereToSearch.length;e++){var i=this._whereToSearch[e];i instanceof n.Entities.SFSRoom&&t.push(i.id)}this._reqObj[this.constructor.KEY_ROOM_LIST]=t}null!=this._roomToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomToLeave.id),null!=this._matchExpression&&(this._reqObj[this.constructor.KEY_MATCH_EXPRESSION]=this._matchExpression._toArray())}}),n.Requests.Game.QuickJoinGameRequest.KEY_ROOM_LIST="rl",n.Requests.Game.QuickJoinGameRequest.KEY_GROUP_LIST="gl",n.Requests.Game.QuickJoinGameRequest.KEY_ROOM_TO_LEAVE="tl",n.Requests.Game.QuickJoinGameRequest.KEY_MATCH_EXPRESSION="me",n.Requests.Game.QuickJoinGameRequest.MAX_ROOMS=32,n.Requests.Handshake=0,n.Requests.Login=1,n.Requests.Logout=2,n.Requests.JoinRoom=4,n.Requests.CreateRoom=6,n.Requests.GenericMessage=7,n.Requests.ChangeRoomName=8,n.Requests.ChangeRoomPassword=9,n.Requests.SetRoomVariables=11,n.Requests.SetUserVariables=12,n.Requests.CallExtension=13,n.Requests.LeaveRoom=14,n.Requests.SubscribeRoomGroup=15,n.Requests.UnsubscribeRoomGroup=16,n.Requests.SpectatorToPlayer=17,n.Requests.PlayerToSpectator=18,n.Requests.ChangeRoomCapacity=19,n.Requests.KickUser=24,n.Requests.BanUser=25,n.Requests.ManualDisconnection=26,n.Requests.FindRooms=27,n.Requests.FindUsers=28,n.Requests.PingPong=29,n.Requests.SetUserPosition=30,n.Requests.InitBuddyList=200,n.Requests.AddBuddy=201,n.Requests.BlockBuddy=202,n.Requests.RemoveBuddy=203,n.Requests.SetBuddyVariables=204,n.Requests.GoOnline=205,n.Requests.InviteUsers=300,n.Requests.InvitationReply=301,n.Requests.CreateSFSGame=302,n.Requests.QuickJoinGame=303,n.Requests.getRequestNameFromId=function(t){for(var e in n.Requests)if(n.Requests[e]==t)return e;return null},n.Requests.RoomSettings=r.Class.extend({init:function(t){this.name=t,this.password="",this.groupId="default",this.isGame=!1,this.maxUsers=10,this.maxSpectators=0,this.maxVariables=5,this.variables=[],this.extension=this.events=this.permissions=null}}),n.Requests.Game.SFSGameSettings=n.Requests.RoomSettings.extend({init:function(t){this._super(t),this.isPublic=!0,this.minPlayersToStartGame=2,this.searchableRooms=this.invitedPlayers=null,this.invitationExpiryTime=15,this.leaveLastJoinedRoom=!0,this.notifyGameStarted=!1,this.invitationParams=this.spectatorMatchExpression=this.playerMatchExpression=null}}),n.Requests.MMO.MMORoomSettings=n.Requests.RoomSettings.extend({init:function(t){this._super(t),this.mapLimits=this.defaultAOI=null,this.userMaxLimboSeconds=50,this.proximityListUpdateMillis=250,this.sendAOIEntryPoint=!0}}),n.Requests.RoomPermissions=function(){this.allowPasswordStateChange=this.allowNameChange=!1,this.allowPublicMessages=!0,this.allowResizing=!1},n.Requests.RoomEvents=function(){this.allowUserVariablesUpdate=this.allowUserExit=this.allowUserEnter=this.allowUserCountChange=!1},n.Requests.RoomExtension=function(t,e){this.id=t,this.className=e,this.propertiesFile=""},n.Requests.MMO.MapLimits=function(t,e){if(null==t||null==e)throw new n.Exceptions.SFSError("Map limits arguments must be both non null!");this.lowerLimit=t,this.higherLimit=e},n.Requests.GenericMessageType={},n.Requests.GenericMessageType.PUBLIC_MSG=0,n.Requests.GenericMessageType.PRIVATE_MSG=1,n.Requests.GenericMessageType.MODERATOR_MSG=2,n.Requests.GenericMessageType.ADMING_MSG=3,n.Requests.GenericMessageType.OBJECT_MSG=4,n.Requests.GenericMessageType.BUDDY_MSG=5,n.Requests.MessageRecipientMode=function(t,e){if(t<this.TO_USER||t>this.TO_ZONE)throw new n.Exceptions.SFSError("Illegal recipient mode: "+t);this.mode=t,this.target=e},n.Requests.MessageRecipientMode.TO_USER=0,n.Requests.MessageRecipientMode.TO_ROOM=1,n.Requests.MessageRecipientMode.TO_GROUP=2,n.Requests.MessageRecipientMode.TO_ZONE=3,n.Requests.BanMode={},n.Requests.BanMode.BY_ADDRESS=0,n.Requests.BanMode.BY_NAME=1,n.SocketEngine=function(t){this.isConnecting=this.isConnected=!1,this.reconnectionSeconds=0,this._controllers={},this._log=n.Logger,this._socket=null,this._maxMessageSize=1e4,this._sfs=t,this._lastTcpPort=0,this._reconnectionDelayMillis=1e3,this._attemptingReconnection=this._isReconnecting=!1,this._eventDispatcher=new n.EventDispatcher,this._disconnectionReason=n.Utils.ClientDisconnectionReason.UNKNOWN},n.SocketEngine.prototype.connect=function(t,e,i){this.isConnected?this._log.error("Connection is already active"):this.isConnecting?this._log.error("A connection attempt is already in progress"):(this.isConnecting=!0,this._socket=new WebSocket("ws"+(i?"s":"")+"://"+t+":"+e+"/websocket",[],cc.url.raw("resources/raw/cacert.pem")),this._socket._scope=this,this._socket.onopen=this._onSocketConnect,this._socket.onclose=this._onSocketDisconnect,this._socket.onmessage=this._onSocketData,this._socket.onerror=this._onSocketError)},n.SocketEngine.prototype.disconnect=function(t){this._disconnectionReason=t,this._socket.close()},n.SocketEngine.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},n.SocketEngine.prototype.removeEventListener=function(t,e){this._eventDispatcher.removeEventListener(t,e)},n.SocketEngine.prototype.addController=function(t,e){null==this._controllers[t]&&(this._controllers[t]=e)},n.SocketEngine.prototype.removeController=function(t){delete this._controllers[t]},n.SocketEngine.prototype.send=function(t){t=this._encodeMessage(t),this._socket.send(t)},n.SocketEngine.prototype._decodeMessage=function(t){return JSON.parse(t)},n.SocketEngine.prototype._encodeMessage=function(t){return JSON.stringify(t)},n.SocketEngine.prototype._onSocketConnect=function(){this._scope.isConnected=!0,this._scope.isConnecting=!1,this._scope._log.debug("SOCKET CONNECTION OK"),this._scope._eventDispatcher.dispatchEvent(n.SocketEvent.CONNECT,{success:!0,isReconnection:this._scope._attemptingReconnection})},n.SocketEngine.prototype._onSocketDisconnect=function(){if(this._scope.isConnected=!1,this._scope.isConnecting){this._scope.isConnecting=!1;var t={success:!1,isReconnection:this._scope._attemptingReconnection};this._scope._eventDispatcher.dispatchEvent(n.SocketEvent.CONNECT,t)}else t={reason:this._scope._disconnectionReason},this._scope._eventDispatcher.dispatchEvent(n.SocketEvent.DISCONNECT,t),this._scope._disconnectionReason=n.Utils.ClientDisconnectionReason.UNKNOWN},n.SocketEngine.prototype._onSocketData=function(t){this._scope._eventDispatcher.dispatchEvent(n.SocketEvent.DATA,this._scope._decodeMessage(t.data))},n.SocketEngine.prototype._onSocketError=function(t){this._scope._eventDispatcher.dispatchEvent(n.SocketEvent.IOERROR,t.data)},n.SocketEvent={CONNECT:"socketConnect",DISCONNECT:"socketDisconnect",DATA:"data",IOERROR:"socketIOError"},e.exports={SFS2X:n,SmartFox:o},cc._RF.pop()},{}],SFSManager:[function(t,e,i){"use strict";cc._RF.push(e,"708e2ZyKKBOC6wP3rHU/+jc","SFSManager");var n=t("../lib/SFS2X_API_JS"),o=t("./SFSSendRequest"),s=t("../helper/Constant"),a=t("../helper/Message"),r=t("../util/Util"),c={sfs:null,config:{host:"game.xuvin.net",port:443,useSSL:!0,zone:"GameBai",debug:!1},SmartFox:n.SmartFox,SFS2X:n.SFS2X,init:function(){this.onResponseBind=this.onResponse.bind(this),this.isAddEventResponse=!1,this.sfs=new this.SmartFox(this.config),this.sfs.addEventListener(this.SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGIN,this.onLogin,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGOUT,this.onLogout,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoin,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdate,this),this.sendRequest=o,this.sendRequest.init(this)},onUserEnterRoom:function(t){},onUserExitRoom:function(t){},onUserVariablesUpdate:function(t){},connect:function(t){this.controller=t,this.sfs.connect()},setController:function(t){this.controller=t},addEventResponse:function(){this.isAddEventResponse||(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.isAddEventResponse=!0)},removeEventResponse:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.isAddEventResponse=!1},onConnection:function(t){if(t.success){var e=cc.V.user,i=(e.server_id||s.SERVER_ID_1)+e.username,n={password:e.token,time:e.time,server_id:e.server_id||s.SERVER_ID_1,user_id:e.user_id};this.sfs.send(new this.SFS2X.Requests.System.LoginRequest(i,e.login_game_token,n))}else this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.LOGIN_TITLE,a.CONNECT_SFS_ERROR)},onConnectionLost:function(t){if(cc.V.sfsManager&&!cc.V.sfsManager.sfs.isConnected()){switch(t.reason){case"idle":case"kick":case"ban":case"unknown":this.controller.setAutoLogin(!1)}this.controller.clearSFSManager(),cc.director.loadScene(s.SCENE_LOGIN)}},onLoginError:function(t){this.controller.clearSFSManager(),this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.LOGIN_TITLE,t.errorMessage)},onLogin:function(t){this.controller.initBaseController()},onLogout:function(t){},onRoomJoinError:function(t){},onRoomJoin:function(t){var e=t.room.name,i=cc.V.sceneName;r.isLobbyRoom(e)?i===s.SCENE_GAME_SLOT||i===s.SCENE_GAME_SLOT_2||i===s.SCENE_GAME_SLOT_3||i===s.SCENE_GAME_SLOT_4||i===s.SCENE_LOGIN||i===s.SCENE_GAME_FIRE_FISH?this.loadScene(s.SCENE_GAME_CENTER):(this.controller.hideProcessingNode(),this.controller.initLoginSuccess()):r.isLobbyGame(e)?i===s.SCENE_GAME_CENTER?r.isLobbyShottingFish(e)?this.loadScene(s.SCENE_GAME_FIRE_FISH):(this.controller.hideProcessingNode(),this.controller.Header.HeaderAccount.initShowHeader(),this.controller.Header.HeaderAccount.loadUserInfo(),this.controller.initListRooms()):i===s.SCENE_GAME_FIRE_FISH&&r.isLobbyShottingFish2(e)?(this.controller.hideProcessingNode(),this.controller.FireFishUI.showCenterNode()):this.loadScene(s.SCENE_GAME_CENTER):(this.addEventResponse(),this.controller.showProcessingNode())},onResponse:function(t){t.timeReceived=(new Date).getTime();var e=t.params,i=e.status||e.STATUS,n=t.cmd;if(cc.V.tempRequests||(cc.V.tempRequests=[]),i)switch(n){case s.ROOM_INFO:if(!cc.director._loadingScene){cc.V.roomInfo=e;var o=cc.V.sfsManager.sfs.lastJoinedRoom.groupId;o===s.TLMNSOLO?o=s.SCENE_GAME_TLMN:o===s.SAMSOLO?o=s.SCENE_GAME_SAM:o===s.ZOOMBIES?o=s.SCENE_GAME_SLOT:o===s.ONE001?o=s.SCENE_GAME_SLOT_3:o===s.DRAGON?o=s.SCENE_GAME_SLOT_2:o===s.CLASSIC1&&(o=s.SCENE_GAME_SLOT_4),o!==s.SHOOTING_FISH&&(this.addEventResponse(),this.loadScene(o))}break;default:cc.V.tempRequests.push(t)}else switch(n){case s.REQUEST_JOIN_ROOM:this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.TITLE_FAILED,e.msg);break;default:cc.V.tempRequests.push(t)}},loadScene:function(t){cc.director._loadingScene||(this.controller.loadPersistScene?this.controller.loadPersistScene(t):this.controller.GameCommon?this.controller.GameCommon.loadPersistScene(t):cc.director.loadScene(t))},joinRoom:function(t,e,i,n,o){var a={game_name:t,min_bet:e,room_type:i,balance:n,is_auto_buy_in:o};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(s.REQUEST_JOIN_ROOM,a))},destroy:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.CONNECTION,this.onConnection),this.sfs.removeEventListener(this.SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGIN,this.onLogin),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGOUT,this.onLogout),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoin),this.sfs=null}};e.exports=c,cc._RF.pop()},{"../helper/Constant":"Constant","../helper/Message":"Message","../lib/SFS2X_API_JS":"SFS2X_API_JS","../util/Util":"Util","./SFSSendRequest":"SFSSendRequest"}],SFSSendRequest:[function(t,e,i){"use strict";cc._RF.push(e,"93376zehM5KRIyNL/tq+F1T","SFSSendRequest");var n={init:function(t){this.sfsManager=t,this.sfs=this.sfsManager.sfs,this.SFS2X=this.sfsManager.SFS2X},send:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t="control."+t,this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e,this.sfs.lastJoinedRoom))},sendNoPrefix:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e,this.sfs.lastJoinedRoom))},sendToZone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t="control."+t,this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e))},sendNoPrefixToZone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e))}};e.exports=n,cc._RF.pop()},{}],SMSItem:[function(t,e,i){"use strict";cc._RF.push(e,"77436VjwgJMWYb93dgXaVET","SMSItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{msgRichText:cc.RichText,noteRichText:cc.RichText},init:function(t,e,i){this.GameCenter=t,this.data=e,this.serviceNumber=i;var s=String.format(o.RECHARGE_SMS_MSG,e.CODE,i);s=s.replace(o.RECHARGE_SMS_TENDANGNHAP,t.getUser().username),this.msgRichText.string=s,this.noteRichText.string=String.format(o.RECHARGE_SMS_NOTE,n.numberWithCommas(e.VND),n.numberWithCommas(e.MONEY))},onLoad:function(){},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.data.CODE.replace(o.RECHARGE_SMS_TENDANGNHAP,this.GameCenter.getUser().username);t=encodeURIComponent(t.trim());var e="";this.GameCenter.isAndroid()?e=o.RECHARGE_SMS_ANDROID:this.GameCenter.isIOS()&&(e=o.RECHARGE_SMS_IOS),e&&(t=String.format(e,this.serviceNumber,t),cc.sys.openURL(t))}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],SafeQuickSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"a39fbMjE0lCQJsWVqxOlkqI","SafeQuickSelectItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{money:0,moneyLabel:cc.Label},init:function(t){this.GameCenter=t,this.Safe=t.GameRecharge.Safe,this.moneyLabel.string=n.numberWithCommas(this.money)},onLoad:function(){},onClick:function(){this.Safe.addMoney(this.money)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Safe:[function(t,e,i){"use strict";cc._RF.push(e,"0f5f6ShqAlKSrhqaBTp2jL+","Safe");var n=t("../../../prefab/item/SafeQuickSelectItem"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config"),a=t("../../../helper/Constant"),r=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{pushOnButtonNode:cc.Node,pushOffButtonNode:cc.Node,popOnButtonNode:cc.Node,popOffButtonNode:cc.Node,sendAllButtonNode:cc.Node,getAllButtonNode:cc.Node,sendButtonNode:cc.Node,getButtonNode:cc.Node,getOtpContentNode:cc.Node,moneyLabel:cc.Label,moneySafeLabel:cc.Label,moneyEditBox:cc.EditBox,moneyNode:cc.Node,otpNode:cc.Node,otpEditBox:cc.EditBox,listSafeQuickSelectItem:[n],smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){for(var e in this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.listSafeQuickSelectItem)this.listSafeQuickSelectItem[e].init(t)},onLoad:function(){this.amount=0},onEnable:function(){this.initMoney(),this.onPushClick()},initMoney:function(){this.moneyLabel.string=o.numberWithCommas(this.GameCenter.getMoney()),this.moneySafeLabel.string=o.numberWithCommas(this.GameCenter.getSafeMoney())},onPushClick:function(){this.pushOnButtonNode.active=!0,this.pushOffButtonNode.active=!1,this.popOnButtonNode.active=!1,this.popOffButtonNode.active=!0,this.sendAllButtonNode.active=!0,this.getAllButtonNode.active=!1,this.sendButtonNode.active=!0,this.getButtonNode.active=!1,this.moneyEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!1,this.getOtpContentNode.active=!1},onPopClick:function(){this.pushOnButtonNode.active=!1,this.pushOffButtonNode.active=!0,this.popOnButtonNode.active=!0,this.popOffButtonNode.active=!1,this.sendAllButtonNode.active=!1,this.getAllButtonNode.active=!0,this.sendButtonNode.active=!1,this.getButtonNode.active=!0,this.moneyEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!0,this.getOtpContentNode.active=!0},onSendAllClick:function(){this.setMoney(this.GameCenter.getMoney())},onGetAllClick:function(){this.moneyEditBox.string=o.numberWithCommas(this.GameCenter.getSafeMoney())},onSendClick:function(){var t=parseInt(o.getOnlyNumberInString(this.moneyEditBox.string));if(t>0){var e={amount:t};this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_SAFE_DEPOSIT,e)}else this.showDialogMessage(r.SAFE_TITLE,r.NUMBER_MONEY_LARGER_ZERO)},onGetClick:function(){if(0===this.GameCenter.getUser().status_value)this.GameCenter.showDialogMessage(r.SAFE_TITLE,r.SAFE_NOT_ACTIVE_PHONE);else if(this.amount=parseInt(o.getOnlyNumberInString(this.moneyEditBox.string)),this.amount>0){var t=this.GameCenter.getSafeMoney();this.amount>t&&(this.amount=t);var e={amount:this.amount,step:2,otp:this.otpEditBox.string};this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_SAFE_WITHDRAW,e)}else this.GameCenter.showDialogMessage(r.SAFE_TITLE,r.NUMBER_MONEY_LARGER_ZERO)},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_GET_OTP)},onCancellick:function(){this.moneyEditBox.string="",this.otpEditBox.string=""},onMoneyChange:function(){var t=this.moneyEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.moneyEditBox.string=0==e?"":e},setMoney:function(t){o.numberWithCommas(t).length<=s.SAFE_MAX_LENGTH&&(this.moneyEditBox.string=o.numberWithCommas(t))},addMoney:function(t){this.setMoney(t+this.getMoneyValue())},getMoneyValue:function(){return parseInt(o.getOnlyNumberInString(this.moneyEditBox.string))||0},isPush:function(){return this.pushOnButtonNode.active},showStep1:function(){this.moneyEditBox.string="",this.otpEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!0,this.getOtpContentNode.active=!0,this.getAllButtonNode.active=!0},showStep2:function(){this.otpEditBox.string="",this.moneyNode.active=!1,this.otpNode.active=!0,this.getOtpContentNode.active=!0,this.getAllButtonNode.active=!1},isStep1:function(){return!this.otpNode.active},initWithDrawSuccess:function(){this.isStep1()?this.showStep2():this.showStep1()},clear:function(){this.moneyEditBox.string="",this.otpEditBox.string=""}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../prefab/item/SafeQuickSelectItem":"SafeQuickSelectItem","../../../util/FormatUtil":"FormatUtil"}],SamCardController:[function(t,e,i){"use strict";cc._RF.push(e,"60c4aOYd8JAOYCrKu0JfOSs","SamCardController");var n=t("../SamConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController")},onEnable:function(){},init:function(t){var e=this;this.Sam=t,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this._scaleDownAction=cc.scaleTo(n.TIME_TOUCH_CARD,n.SCALE_TOUCH_CARD),this._scaleUpAction=cc.scaleTo(n.TIME_TOUCH_CARD,this._initScale),this._moveUpAction=cc.moveBy(n.TIME_TOUCH_CARD,0,n.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(n.TIME_TOUCH_CARD,0,-n.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.cardController.showHighLight()},this._onMouseLeave=function(t){e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(this.stopAllActions(),this.cardController.showHighLight(),this.runAction(e._scaleDownAction))},this._onTouchUp=function(t){e.isInAction||(this.stopAllActions(),this.cardController.hideHighLight(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveDownaction),e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveUpAction),e._resetInAction))),e.Sam.SamHandlerEffect.checkShowButtons(),e.Sam.SamHandlerEffect.showRecommend())},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=n.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(n.TIME_TOUCH_CARD,this._initScale),cc.moveTo(n.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected}}),cc._RF.pop()},{"../SamConfig":"SamConfig"}],SamCard:[function(t,e,i){"use strict";cc._RF.push(e,"c203dZFn9BJkpFkcAz7/tzn","SamCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],SamConfig:[function(t,e,i){"use strict";cc._RF.push(e,"bfd4fCl+09L2IQDnNzaAtnv","SamConfig");e.exports={NUMBER_PLAYERS:4,NUMBER_SOLO_PLAYERS:2,NUMBER_CARDS_EACH_PLAYERS:10,VALUE_HAI:15,VALUE_AT:14,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:50,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-250,POSITION_MY_CARDS_Y:-250,DISTANCE_CARD_IN_TABLE:20,DISTANCE_TWO_CARDS_IN_TABLE:40,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.6,TIME_FLIP_CARD_IN_TABLE:.25,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:40,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.6,TIME_SHOW_CARDS_OTHER_PLAYERS:.5},cc._RF.pop()},{}],SamConstant:[function(t,e,i){"use strict";cc._RF.push(e,"c561e2kbT9O6Jes/HW5yEG0","SamConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",PLAY:"PLAY",IGNORE_SAM:"IGNORE_SAM",SAM:"SAM",REQUEST_SAM:"REQUEST_SAM",IGNORE:"IGNORE",RESULT:"RESULT",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],SamGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"6676dydl0ZKRpQNSuOqep2b","SamGroupCardsType");e.exports={BAI_RAC:"BAI_RAC",DOI:"DOI",SAM:"SAM",SANH:"SANH",TU_QUY:"TU_QUY"},cc._RF.pop()},{}],SamHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"ee731nnqgJHRaJySo20n1t9","SamHandlerEffect");var n=t("./SamCard"),o=t("./item/SamCardController"),s=t("./SamConfig"),a=t("./SamWinType"),r=t("./SamGroupCardsType"),c=t("./SamRecommend"),h=t("../../util/CardUtil"),l=t("../../util/RandomUtil"),u=(t("../../helper/Message"),{init:function(t){this.Sam=t,this.SamUI=t.SamUI,this.GameCommon=t.GameCommon,this.sortCard=!1,this.listPlayers=t.listPlayers,this.recommenedToggle=t.recommenedToggle},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.initMyCards(t):this.listPlayers[e].SamPlayer.showCardBack(s.NUMBER_CARDS_EACH_PLAYERS)},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.Sam.myCardsNode.removeAllChildren(!0),this.SamUI.showSortButton(),t){var n=this.initNewCardNode(t[i]);n.parent=this.Sam.myCardsNode,n.scale=s.SCALE_CARDS_IN_HAND;var a=n.addComponent(o);a.init(this.Sam),n.samCardController=a;var r=s.DISTANCE_TWO_CARDS_IN_HAND*i+s.POSITION_MY_CARDS_X,c=s.POSITION_MY_CARDS_Y;e?(n.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),n.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,r,c))):n.setPosition(r,c)}},resumeCards:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var n=e[i].cards;this.initMyCards(n,!1)}else{var o=e[i].number_cards;e[i].SamPlayer.showCardBack(o)}},initLastRoundCards:function(t){var e=t.data.last_round_cards.cards,i=this.getRandomPositonInTable();if(e)for(var n in e){var o=this.initNewCardNode(e[n]);o.setPosition((n-e.length/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+i.x,i.y),o.scale=s.SCALE_CARD_IN_TABLE,o.parent=this.Sam.tableCardsNode}},handlePlayerStart:function(t){var e=t.data.id_playing;this.Sam.getPlayerByUserId(e)&&this.initRecommendIgnore()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_new_round,n=this.Sam.getPlayerByUserId(e);n&&(this.Sam.idPlaying=e,n.isItMe?(this.checkShowButtons(),i?this.listCardPlay=[]:this.SamUI.showIgnoreTurnButton()):(this.SamUI.hidePlayButton(),this.SamUI.hideIgnoreTurnButton()),this.Sam.startCountDownPlayer(n,t.time_remain,t.time))},handlePlayedPlayer:function(t,e,i,o){this.initRecommendPlay(e);var a=e.length,r=this.getRandomPositonInTable();this.showDarkEffectAllCardsRevealInTable(),e=this.checkChangePositionSanhHai(e,i);var c=this.Sam.getPlayerByUserId(t);if(c)if(o&&c.SamPlayer.showBaoMot(),c.isItMe){var h=this.Sam.getCardsNodeByCards(e);for(var l in h=this.checkChangePositionSanhHaiForNode(h,i))h[l].stopAllActions(),h[l].parent=this.Sam.tableCardsNode,h[l].scale=1,h[l].cardController.hideHighLight(),h[l].samCardController.disableEvents(),h[l].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(l-a/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+r.x,r.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)));this.sortMyCards(),this.checkShowButtons()}else{var u=c.node.x,d=c.node.y;u+=s.DISTANCE_BACK_CARD_OTHER_PLAYER*(u>0?-1:1);for(var m=0;m<a;m++){var f=cc.instantiate(this.Sam.cardPrefab);f.setPosition(u,d),f.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,f.parent=this.Sam.tableCardsNode;var p=f.getComponent("CardController"),_=new n(e[m]);p.init(_),f.cardController=p,f.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(m-a/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+r.x,r.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.minusNumberCardsForPlayer(c,a)}},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clearSamAllPlayers(),this.showEffectMinusBalanceAndWinner(t.money_changes),this.showEffectShowPlayersCards(t,e),this.resetRecommend();t.user_id_win;var i=t.win_type,n=t.money_changes,o=t.players_cards;if(i===a.THANG_SAM||i===a.THUA_SAM)for(var r in n){var c=this.Sam.getPlayerByUserId(n[r].user_id);n[r].money_change>0?c.SamPlayer.showEffectThangSam():n[r].money_change<0&&c.SamPlayer.showEffectThuaSam()}else if(i===a.THOI_HAI)for(var h in n){if(n[h].money_change<0)this.Sam.getPlayerByUserId(n[h].user_id).SamPlayer.showEffectThoiHai()}else if(i===a.HET_BAI)for(var l in o){if(o[l].cards.length===s.NUMBER_CARDS_EACH_PLAYERS)this.Sam.getPlayerByUserId(o[l].user_id).SamPlayer.showEffectCong()}else if(i===a.THANG_BAO_1)for(var u in n){var d=this.Sam.getPlayerByUserId(n[u].user_id);n[u].money_change>0?d.SamPlayer.showEffectThangBaoMot():o[u].cards.length===s.NUMBER_CARDS_EACH_PLAYERS?d.SamPlayer.showEffectCong():n[u].money_change<0&&d.SamPlayer.showEffectThuaBaoMot()}},handleSort:function(){var t=this.Sam.myCardsNode.getChildren(),e=[];for(var i in t)e.push(t[i].getComponent("CardController").getTrueValue());this.sortCard?(this.initMyCards(h.sortAZ(e)),this.sortCard=!this.sortCard):(this.initMyCards(h.sortListSam(e)),this.sortCard=!this.sortCard)},showEffectMinusBalanceAndWinner:function(t){for(var e in t){var i=t[e].user_id,n=t[e].money_change,o=this.Sam.getPlayerByUserId(i);o&&(o.BasePlayer.hideText(),o.BasePlayer.showChangeBalance(n),o.BasePlayer.showEffectByChangeBalance(n),o.isItMe&&n>0&&this.GameCommon.Audio.playWin())}},showEffectShowPlayersCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.win_type,n=t.players_cards,o=t.money_change;for(var s in n){var a=n[s].user_id,r=n[s].cards,c=void 0;for(var h in o)o[h].user_id===a&&(c=o[h].money_change);var l=this.Sam.getPlayerByUserId(a);if(l)if(r.length>0)if(l.isItMe){var u=this.Sam.myCardsNode.getChildren(),d=[];for(var m in u)d.push(u[m].cardController);this.showEffectTypeWin(l,r,d,i,c)}else{l.SamPlayer.showCards(r,e);var f=l.SamPlayer.getListCardController();this.showEffectTypeWin(l,r,f,i,c)}else this.showEffectTypeWin(l,r,[],i,c)}},showEffectTypeWin:function(t,e,i,n,o){n===a.WIN_TYPE_HET_BAI||(n===a.WIN_TYPE_KET_BA_BICH?o>0&&t.SamPlayer.SamPlayerText.showEffectKetBaBich():n===a.WIN_TYPE_CHAN_KET_BA_BICH&&o>0&&t.SamPlayer.SamPlayerText.showEffectChanKetBaBich())},showCardsThoiEffectByTrueValue:function(t,e){for(var i in e)e[i].showDarkEffect();for(var n in e)for(var o in t)if(e[n].trueValue===t[o]){e[n].hideDarkEffect();break}},showCardsThoiEffectByValue:function(t,e){var i=0;for(var n in e)e[n].showDarkEffect();for(var o in t)for(var s in i=0,e)parseInt(e[s].trueValue/100)===parseInt(t[o]/100)&&++i<3&&e[s].hideDarkEffect()},sortMyCards:function(){var t=this.Sam.myCardsNode.getChildren();for(var e in t){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,n=s.POSITION_MY_CARDS_Y;t[e].samCardController.isSelected=!1,t[e].samCardController.moveTo(i,n)}},initNewCardNode:function(t){var e=cc.instantiate(this.Sam.cardPrefab);e.trueValue=t;var i=new n(t),o=e.getComponent("CardController");return o.init(i),e.cardController=o,e},minusNumberCardsForPlayer:function(t,e){var i=t.SamPlayer.getNumberCards()-e;t.SamPlayer.showCardBack(i)},handlerIgnoreTurn:function(t){var e=t.data.id_ignore,i=t.data.is_new_round,n=t.data.id_playing,o=this.Sam.getPlayerByUserId(e),s=this.Sam.getPlayerByUserId(n);i?this.clearIgnoreTurnAllPlayers():o&&o.SamPlayer.setIgnoreTurn(!1),o&&o.SamPlayer.isBaoMot()&&o.SamPlayer.hideBaoMot(),s&&(s.isItMe&&i?this.initRecommendIgnore():this.initRecommendPlay())},removeAllCardsInTable:function(){this.Sam.tableCardsNode.removeAllChildren(!0)},flipCardsInTable:function(){var t=this.Sam.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&(t[e].cardController.hideDarkEffect(),t[e].cardController.revealWithAnimationFlip(!1,s.TIME_FLIP_CARD_IN_TABLE,!1))},showDarkEffectAllCardsRevealInTable:function(){var t=this.Sam.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&t[e].cardController.showDarkEffect()},checkChangePositionSanhHai:function(t,e){for(var i=[],n=!1,o=0;o<t.length;o++)parseInt(t[o]/100)===s.VALUE_HAI&&(n=!0);if(e===r.SANH){if(n)for(var a=0;a<t.length;a++)parseInt(t[a]/100)===s.VALUE_AT&&i.push(t[a]);for(var c=0;c<t.length;c++)parseInt(t[c]/100)===s.VALUE_HAI&&i.push(t[c]);for(var h=0;h<t.length;h++)parseInt(t[h]/100)!==s.VALUE_HAI&&(parseInt(t[h]/100)===s.VALUE_AT&&n||i.push(t[h]));return i}return t},checkChangePositionSanhHaiForNode:function(t,e){for(var i=[],n=!1,o=0;o<t.length;o++)parseInt(t[o].trueValue/100)===s.VALUE_HAI&&(n=!0);if(e===r.SANH){if(n)for(var a=0;a<t.length;a++)parseInt(t[a].trueValue/100)===s.VALUE_AT&&i.push(t[a]);for(var c=0;c<t.length;c++)parseInt(t[c].trueValue/100)===s.VALUE_HAI&&i.push(t[c]);for(var h=0;h<t.length;h++)parseInt(t[h].trueValue/100)!==s.VALUE_HAI&&(parseInt(t[h].trueValue/100)===s.VALUE_AT&&n||i.push(t[h]));return i}return t},getRandomPositonInTable:function(){var t=l.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_X,s.DISTANCE_MAX_RANDOM_POSITION_CARD_X),e=l.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y,s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y);return new cc.Vec2(t,e)},handleChangeMoney:function(t){var e=t.data.money_changes;if(e)for(var i in e){var n=e[i].user_id,o=e[i].money_change,s=this.Sam.getPlayerByUserId(n);s&&s.BasePlayer.showChangeBalance(o)}},checkShowButtons:function(){var t=!1,e=this.Sam.myCardsNode.getChildren();for(var i in e)if(e[i].samCardController.isSelected){t=!0;break}t?this.SamUI.showIgnoreSelectButton():this.SamUI.hideIgnoreSelectButton(),this.Sam.checkIsMyTurn()&&(t?this.SamUI.showPlayButton():this.SamUI.hidePlayButton())},clearIgnoreTurnAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].SamPlayer.setIgnoreTurn(!1)},clearSamAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].SamPlayer.hideSam()},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},showRecommend:function(){this.recommenedToggle.isChecked&&(this.ignoreTurn?this.recommend_ignore&&this.showRecommendStartAndIgnore():this.is_recommend&&this.showRecommendPlay())},showRecommendPlay:function(){var t=[],e=[],i=this.listCardPlay,n=void 0,o=this.Sam.myCardsNode.getChildren();for(var s in o)e.push(o[s].getComponent("CardController").getTrueValue());for(var a in o)o[a].samCardController.isSelected&&(n=o[a].getComponent("CardController").getTrueValue());for(var r in i&&e&&n&&(t=c.getRecommend(e,i,n)),e=[],o)e.push(o[r].getComponent("CardController").getTrueValue());if(t)for(var h=0,l=t.length;h<l;h++)for(var u=0,d=e.length;u<d;u++)t[h]===e[u]&&(o[u].getComponent("SamCardController").getSelected()||o[u].getComponent("SamCardController").selectCard());this.listCardPlay=[],this.is_recommend=!1},showRecommendStartAndIgnore:function(){var t=[],e=[],i=this.Sam.myCardsNode.getChildren();for(var n in i){var o=i[n].getComponent("CardController").getTrueValue();t.push(o),i[n].getComponent("SamCardController").getSelected()&&e.push(o)}if(2===e.length){for(var s in e=c.getRecommendStartAndIgnore(t,e),t=[],i)t.push(i[s].getComponent("CardController").getTrueValue());if(e)for(var a=0,r=e.length;a<r;a++)for(var h=0,l=t.length;h<l;h++)e[a]===t[h]&&(i[h].getComponent("SamCardController").getSelected()||i[h].getComponent("SamCardController").selectCard());this.ignoreTurn=!1,this.recommend_ignore=!1}},initRecommendIgnore:function(){this.ignoreTurn=!0,this.recommend_ignore=!0,this.is_recommend=!1,this.listCardPlay=[]},initRecommendPlay:function(t){this.ignoreTurn=!1,this.is_recommend=!0,this.recommend_ignore=!1,t&&(this.listCardPlay=t)},resetRecommend:function(){this.ignoreTurn=!1,this.is_recommend=!1,this.recommend_ignore=!1,this.listCardPlay=[]}});e.exports=u,cc._RF.pop()},{"../../helper/Message":"Message","../../util/CardUtil":"CardUtil","../../util/RandomUtil":"RandomUtil","./SamCard":"SamCard","./SamConfig":"SamConfig","./SamGroupCardsType":"SamGroupCardsType","./SamRecommend":"SamRecommend","./SamWinType":"SamWinType","./item/SamCardController":"SamCardController"}],SamHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"3ab4aA6xKlHfaH0h5wXlull","SamHandlerRequest");var n=t("./SamConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{Sam:null,init:function(t){this.Sam=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Sam.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.GOLD:this.Sam.initGold(e);break;case o.MONEY:this.Sam.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.ROOM_INFO:this.Sam.handleRoomInfo(e);break;case n.START:this.Sam.handleStart(e);break;case n.COUNT_DOWN:this.Sam.handleCountDown(e);break;case n.SAM:this.Sam.handleSam(e);break;case n.REQUEST_SAM:this.Sam.handlePlayerSam(e);break;case n.PLAY:this.Sam.handlePlay(e);break;case n.IGNORE:this.Sam.handleIgnore(e);break;case n.RESULT:this.Sam.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.Sam.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.Sam.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.Sam.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Sam.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./SamConstant":"SamConstant"}],SamPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"0fe83s9wU5Bt4ROF0XsbNmB","SamPlayer");var n=t("./SamCard"),o=t("./SamConfig"),s=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,numberCardLabel:cc.Label},onLoad:function(){this.numberCard=0,this.numberCardLabel.node.active=!1},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var s=new n(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(s),a.cardController=r;var c=0;c=this.cardsNode.x>0?i*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-i-1)*-o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,e?(a.setPosition(0,0),a.runAction(cc.moveTo(o.TIME_SHOW_CARDS_OTHER_PLAYERS,c,0))):a.setPosition(c,0)}},getListCardController:function(){var t=[],e=this.cardsNode.getChildren();for(var i in e)t.push(e[i].cardController);return t},showCardBack:function(t){this.numberCards=t,this.numberCardLabel.string=t,this.cardBackNode.active=0!==t},getNumberCards:function(){return this.numberCards},hideCardBack:function(){this.numberCardLabel.string="",this.cardBackNode.active=!1},setIgnoreTurn:function(t){t?this.showIgnoreTurn():this.hideIgnoreTurn()},showBaoMot:function(){this.regisOne=!0,this.node.getComponent("BasePlayer").showTextLight(s.SAM_BAO_MOT)},hideBaoMot:function(){this.regisOne=!1,this.node.getComponent("BasePlayer").hideTextLight()},isBaoMot:function(){return this.regisOne},showSam:function(){this.node.getComponent("BasePlayer").showTextLight(s.SAM_XIN_SAM)},hideSam:function(){this.node.getComponent("BasePlayer").hideTextLight()},showIgnoreTurn:function(){this.node.getComponent("BasePlayer").showTextDark(s.SAM_IGNORE_TURN)},hideIgnoreTurn:function(){this.node.getComponent("BasePlayer").hideTextDark()},showEffectCong:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_CONG)},showEffectThoiHai:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THOI_HAI)},showEffectThangSam:function(){this.node.getComponent("BasePlayer").showWinEffect(s.SAM_THANG_SAM)},showEffectThuaSam:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THUA_SAM)},showEffectThangBaoMot:function(){this.node.getComponent("BasePlayer").showWinEffect(s.SAM_THANG_BAO_MOT)},showEffectThuaBaoMot:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THUA_BAO_MOT)},reset:function(){this.numberCards=0,this.regisOne=!1,this.hideCardBack(),this.hideIgnoreTurn(),this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./SamCard":"SamCard","./SamConfig":"SamConfig"}],SamRecommend:[function(t,e,i){"use strict";cc._RF.push(e,"6dd80Obc7pJA4PIO8UzmLF1","SamRecommend");var n={getRecommend:function(t,e,i){if(1!==e.length){if(this.checkTypeListCardSuite(e))return this.getListSuite(t,e,i);var n=void 0;return i=this.utilWidthCard_2(i),t=this.convertQAK(t),this.checkCard_2(e)&&(e=this.convertA23(e)),(n=this.getListArray(t,e,i))||(i=this.utilWidthCard_A(i),t=this.convertA23(t),n=this.getListArray(t,e,i)),n?n.length<e.length?null:n=this.reConvert(n):null}var o=parseInt(e[0]/100);return parseInt(15)===o?this.getRecommendTuQuy(t,i):null},getListSuite:function(t,e,i){if(parseInt(i/100)>parseInt(e[0]/100)){var n=[];n.push(i);for(var o=parseInt(i/100),s=1,a=e.length;s<a;s++)for(var r=0,c=t.length;r<c;r++){if(t[r]!==i&&0!==t[r])if(o===parseInt(t[r]/100)){n.push(t[r]),t[r]=0;break}}if(n.length>=e.length)return n}return null},getListArray:function(t,e,i){var n=[],o=[],s=parseInt(i/100);o.push(s);var a=this.getListAllCard(t);if(s+1<a.length)for(var r=s+1;a[r]>0&&r<a.length;)o.push(r),r++;if(s-1>=0)for(var c=s-1;a[c]>0&&c>=0;)o.push(c),c--;if(o&&e&&o.length>=e.length){n=this.getListCardRecommend(o,e,t),n=this.addCardLoading(n,i);var h=this.getMaxValue(n),l=this.getMaxValue(e);if(parseInt(h/100)>parseInt(l/100))return n}return null},getListCardRecommend:function(t,e,i){for(var n=[],o=0,s=e.length;o<s;o++)for(var a=t[o],r=0,c=i.length;r<c;r++){if(0!==i[r])if(a===parseInt(i[r]/100)){n.push(i[r]),i[r]=0;break}}return n},getCardMaxInArray:function(t,e){for(var i=this.getMaxValue(t),n=i,o=parseInt(i/100),s=0,a=e.length;s<a;s++){o===parseInt(e[s]/100)&&i<e[s]&&(n=e[s])}if(n!==i)for(var r=0,c=t.length;r<c;r++)i===t[r]&&(t[r]=n);return t},getMaxValue:function(t){for(var e=t[0],i=0,n=t.length;i<n;i++)e<t[i]&&(e=t[i]);return e},checkTypeListCardSuite:function(t){return parseInt(t[0]/100)===parseInt(t[1]/100)},getListAllCard:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,n=t.length;i<n;i++){e[parseInt(t[i]/100)]++}return e},convertQAK:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(t[e]=200+t[e]%100);return t},convertA23:function(t){for(var e=0,i=t.length;e<i;e++)parseInt(t[e]/100)===parseInt(15)&&(t[e]=200+t[e]%100),parseInt(t[e]/100)===parseInt(14)&&(t[e]=100+t[e]%100);return t},reConvert:function(t){for(var e=0,i=t.length;e<i;e++)parseInt(t[e]/100)===parseInt(2)&&(t[e]=1500+t[e]%100),parseInt(t[e]/100)===parseInt(1)&&(t[e]=1400+t[e]%100);return t},checkCard_2:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e]>=1500)return!0;return!1},utilWidthCard_2:function(t){return parseInt(t/100)===parseInt(15)&&(t=200+t%100),t},utilWidthCard_A:function(t){return parseInt(t/100)===parseInt(14)&&(t=100+t%100),t},getRecommendStartAndIgnore:function(t,e){if(t.length>e.length){if(this.checkTypeListCardSuite(e))return this.getListSuiteStartAndIgnore(t,e);if(e=this.convertQAK(e),t=this.convertQAK(t),this.checkCard_A(e)){var i=this.convertA23(t.slice()),n=t.slice(),o=this.convertA23(e.slice()),s=e.slice(),a=this.getListArrayStartAndIgnore(i,o),r=this.getListArrayStartAndIgnore(n,s);e=a.length>r.length?a:r}else{var c=t.slice();e=this.getListArrayStartAndIgnore(c,e)}return t=this.reConvert(t),e=this.getAndAddCard_A2(t,e)}return null},getListArrayStartAndIgnore:function(t,e){var i=e[0],n=e[1],o=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(n/100);return this.checkDistanceCard(s,a,o)&&(e=this.getListStartAndIgnore(t,e)),e},checkDistanceCard:function(t,e,i){for(var n=t<e?t:e,o=t>e?t:e;n<o;n++)if(0===i[n])return!1;return!0},getListSuiteStartAndIgnore:function(t,e){for(var i=e[0],n=e[1],o=parseInt(i/100),s=0,a=t.length;s<a;s++){if(t[s]!==i&&t[s]!==n)parseInt(t[s]/100)===o&&e.push(t[s])}return e},getListStartAndIgnore:function(t,e){var i=e[0],n=e[1],o=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(n/100),r=s>a?s:a,c=s<a?s:a,h=this.getListCardValueRecommend(c,r,o);return h&&(e=this.getListCardRecommendStartAndignore(e,t,h)),e},getListCardValueRecommend:function(t,e,i){var n=[];if(t-1>=0)for(var o=t-1;i[o]>0&&o>=0;)n.push(o),o--;if(e+1<i.length)for(var s=e+1;i[s]>0&&s<i.length;)n.push(s),s++;if(e-t>1)for(var a=t+1;a<e;a++)n.push(a);return n},getListCardRecommendStartAndignore:function(t,e,i){for(var n=0,o=i.length;n<o;n++)for(var s=0,a=e.length;s<a;s++){if(0!==e[s])if(parseInt(e[s]/100)===i[n]){t.push(e[s]),e[s]=0;break}}return t=this.reConvert(t)},checkCard_A:function(t){var e=parseInt(t[0]/100),i=parseInt(t[1]/100),n=!1;return 14!==e&&14!==i||(n=!0),n},getAndAddCard_A2:function(t,e){var i=!1,n=!1;if(this.checkListSortEndCard_2(t))for(var o=0,s=e.length;o<s;o++){if(15===parseInt(e[o]/100)){e.splice(o,1);break}}else{for(var a=0,r=e.length;a<r;a++){var c=parseInt(e[a]/100);15===c&&(n=!0),14===c&&(i=!0)}if(n&&!i)for(var h=0,l=t.length;h<l;h++){14===parseInt(t[h]/100)&&e.push(t[h])}}return e},checkListSortEndCard_2:function(t){return 15===parseInt(t[t.length-1]/100)},getRecommendTuQuy:function(t,e){var i=[],n=parseInt(e/100);i.push(e);for(var o=0,s=t.length;o<s;o++){if(t[o]!==e)parseInt(t[o]/100)===n&&i.push(t[o])}return 4===i.length?i:null},addCardLoading:function(t,e){for(var i=parseInt(e/100),n=0,o=t.length;n<o;n++){if(parseInt(t[n]/100)===i)return t[n]=e,t}}};e.exports=n,cc._RF.pop()},{}],SamState:[function(t,e,i){"use strict";cc._RF.push(e,"15a489GA55Doojr2fx/L6J1","SamState");e.exports={currentState:null,STOP:"STOP",WAITING:"WAITING",SAM:"SAM",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setSam:function(){this.currentState=this.SAM},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isSam:function(){return this.currentState===this.SAM},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],SamUI:[function(t,e,i){"use strict";cc._RF.push(e,"7b4e4r/zvxMtqN4W552xztP","SamUI"),cc.Class({extends:cc.Component,properties:{playButton:cc.Node,ignoreTurnButton:cc.Node,ignoreSelectButton:cc.Node,sortButton:cc.Node,samButton:cc.Node,ignoreSamButton:cc.Node,playersNode:[cc.Node],playersSoloNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t in this.playersNode)this.playersNode[t].active=!1},initSoloRoom:function(){this.playersPlaceHolderNode[1].active=!1,this.playersPlaceHolderNode[3].active=!1},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showPlayButton:function(){this.playButton.active=!0},hidePlayButton:function(){this.playButton.active=!1},showSamButton:function(){this.samButton.active=!0},showIgnoreSamButton:function(){this.ignoreSamButton.active=!0},hideIgnoreSamButton:function(){this.ignoreSamButton.active=!1},hideSamButton:function(){this.samButton.active=!1},showSortButton:function(){this.sortButton.active=!0},hideSortButton:function(){this.sortButton.active=!1},showIgnoreTurnButton:function(){this.ignoreTurnButton.active=!0},hideIgnoreTurnButton:function(){this.ignoreTurnButton.active=!1},showIgnoreSelectButton:function(){this.ignoreSelectButton.active=!0},hideIgnoreSelectButton:function(){this.ignoreSelectButton.active=!1},hideAllButtons:function(){this.hidePlayButton(),this.hideIgnoreTurnButton(),this.hideIgnoreSelectButton(),this.hideSortButton(),this.hideSamButton(),this.hideIgnoreSamButton()},reset:function(){this.hideAllButtons()}}),cc._RF.pop()},{}],SamUtil:[function(t,e,i){"use strict";cc._RF.push(e,"33616MeTVpCEqJEVuKuieB7","SamUtil"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],SamWinType:[function(t,e,i){"use strict";cc._RF.push(e,"d7f9b4+JhZDMJ7Tm04qR/T7","SamWinType");e.exports={HET_BAI:"HET_BAI",THANG_SAM:"THANG_SAM",THUA_SAM:"THUA_SAM",THOI_HAI:"THOI_HAI",THANG_BAO_1:"THANG_BAO_1"},cc._RF.pop()},{}],Sam:[function(t,e,i){"use strict";cc._RF.push(e,"b88aeApwK1MQYwpB3b3JaUH","Sam");var n=t("../../base/BaseController"),o=t("./SamConstant"),s=t("./SamConfig"),a=t("./SamUI"),r=t("./SamState"),c=t("./SamHandlerRequest"),h=t("./SamHandlerEffect"),l=t("../../prefab/GameCommon"),u=t("../../object/RoomType"),d=t("../../helper/Constant"),m=t("../../helper/Message");cc.Class({extends:n,properties:{cardPrefab:cc.Prefab,myCardsNode:cc.Node,tableCardsNode:cc.Node,recommenedToggle:cc.Toggle,SamUI:a,GameCommon:l},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_SAM),this.sfsManager.setController(this),this.timeoutResult=null,this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==u.MONEY_CODE,this.playersNode=this.SamUI.playersNode,this.isRoomSolo()&&(this.playersNode=this.SamUI.playersSoloNode,this.SamUI.initSoloRoom()),this.isMoneyType||this.SamUI.disableAllPlaceHolder(),this.SamConstant=o,this.SamConfig=s,this.SamState=r,this.SamHandlerRequest=c,this.SamHandlerRequest.init(this),this.SamHandlerEffect=h,this.SamHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.SamHandlerRequest.onPublicMessage.bind(this.SamHandlerRequest),this.onRoomVarsUpdate=this.SamHandlerRequest.onRoomVarsUpdate.bind(this.SamHandlerRequest),this.onUserVarsUpdate=this.SamHandlerRequest.onUserVarsUpdate.bind(this.SamHandlerRequest),this.onResponse=this.SamHandlerRequest.onResponse.bind(this.SamHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){this.playersNode[o].getComponent("BasePlayer").setBetType(this.isMoneyType)}this.SamUI.hideAllPlayers(),this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("SamPlayer");t.BasePlayer=n,t.SamPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRequestLeftRoom(t.request_left_room),n.setRoomMaster(t.is_home),n.setPlayerName(t.nick_name),n.setBalance(t.balance),o.setIgnoreTurn(t.ignore),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.SamState.setState(e),this.SamState.isStop()?this.reset():this.SamState.isWaiting()?this.resumeStateWaiting(t):this.SamState.isSam()?this.resumeStateSam(t):this.SamState.isPlaying()?this.resumeStatePlaying(t):this.SamState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.SamHandlerEffect.startCountDownAllPlayers(t)},resumeStateSam:function(t){this.reset(),this.SamHandlerEffect.startCountDownAllPlayers(t),this.SamHandlerEffect.resumeCards(t),this.myPlayer.is_player&&(this.SamUI.showSamButton(),this.SamUI.showIgnoreSamButton())},resumeStatePlaying:function(t){this.SamHandlerEffect.handlePlayingPlayer(t),this.SamHandlerEffect.resumeCards(t),this.SamHandlerEffect.initLastRoundCards(t)},resumeStateFinish:function(t){this.SamHandlerEffect.resumeCards(t),this.SamHandlerEffect.initLastRoundCards(t),this.SamHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.SamHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.SamState.setWaiting(),this.GameCommon.hideWaitingNode(),this.SamHandlerEffect.startCountDownAllPlayers(t)):(this.SamState.setStop(),this.SamHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){this.SamState.setPlaying(),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlePlayerStart(t),this.SamHandlerEffect.handlePlayingPlayer(t)},handleSam:function(t){var e=t.data.cards;this.SamState.setSam(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.startCountDownAllPlayers(t),this.SamHandlerEffect.dealCards(e),this.SamUI.showSamButton(),this.SamUI.showIgnoreSamButton()},handlePlayerSam:function(t){var e=t.data.id_sam,i=this.getPlayerByUserId(e);i&&i.SamPlayer.showSam()},handlePlay:function(t){var e=t.data.id_played,i=t.data.cards,n=t.data.cards_type,o=t.data.regis_one;this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlePlayedPlayer(e,i,n,o),this.SamHandlerEffect.handlePlayingPlayer(t),this.SamHandlerEffect.handleChangeMoney(t)},handleIgnore:function(t){t.data.is_new_round&&this.SamHandlerEffect.removeAllCardsInTable(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlerIgnoreTurn(t),this.SamHandlerEffect.handlePlayingPlayer(t)},handleResult:function(t){var e=t.data.played_cards;this.SamState.setFinish(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamUI.hideAllButtons(),this.SamHandlerEffect.handlePlayedPlayer(e.user_id,e.cards),this.SamHandlerEffect.handleResult(t.data),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.SamState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.SamHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onPlayClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected(),e=[];for(var i in t)e.push(t[i].trueValue);var n={};n.data=e,this.sendRequest.send(o.PLAY,n)},onIgnoreTurnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.IGNORE)},onIgnoreSelectClick:function(){this.GameCommon.Audio.playClick();var t=this.myCardsNode.getChildren();for(var e in t)t[e].samCardController.isSelected&&(t[e].samCardController.selectCard(),this.SamUI.hideIgnoreSelectButton())},onSortClick:function(){this.GameCommon.Audio.playClick(),this.SamHandlerEffect.handleSort()},onSamClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_SAM),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton()},onIgnoreSamClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.IGNORE_SAM),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getListCardsSelected:function(){var t=this.myCardsNode.getChildren(),e=[];for(var i in t)t[i].samCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCards:function(t){var e=this.myCardsNode.getChildren(),i=[];for(var n in e)for(var o in t)if(e[n].trueValue===t[o]){i.push(e[n]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.SamHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.idPlaying=-1,this.SamUI.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].SamPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./SamConfig":"SamConfig","./SamConstant":"SamConstant","./SamHandlerEffect":"SamHandlerEffect","./SamHandlerRequest":"SamHandlerRequest","./SamState":"SamState","./SamUI":"SamUI"}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"c9a3eAaw4VNVq26Z1FpKJIC","Score"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label},onLoad:function(){},init:function(t,e,i,n,o){var s=this.getScaleByScore(i);this.node.parent=t.gamePlayNode,this.scoreLabel.string="+"+i,this.initScale=this.node.scale,this.node.setPosition(n),this.node.runAction(cc.sequence(cc.scaleTo(.2,s*this.initScale),cc.scaleTo(.2,this.initScale),cc.moveTo(.4,o),cc.callFunc(function(){this.node.destroy()},this)))},getScaleByScore:function(t){return t<5?1.5:t<10?2:t<50?2.5:t<200?3:t<500?3.5:4}}),cc._RF.pop()},{}],ScrollBottom:[function(t,e,i){"use strict";cc._RF.push(e,"f22c1xoPGhMlJD8Y1j+0RB6","ScrollBottom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isScrollBottom=!0},update:function(){this.isScrollBottom&&this.node.getComponent(cc.ScrollView).scrollToBottom(),this.isScrollBottom=!1},onEnable:function(){this.isScrollBottom=!0}}),cc._RF.pop()},{}],Setting:[function(t,e,i){"use strict";cc._RF.push(e,"02c39IxrTxPvLsoCRGoK2vc","Setting");var n=t("./LogOut"),o=t("../../ui/toggle/Toggle"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{soundToggle:o,inviteGameToggle:o,LogOut:n},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.dialogFormLogOut=this.LogOut.node.getComponent("DialogForm")},onEnable:function(){this.initData()},initData:function(){var t=this.controller.getUser().invite_on,e=cc.sys.localStorage.getItem(s.IS_SOUND);"true"===e||!0===e?(this.soundToggle.setOn(),this.controller.Audio.setSound(!0)):"false"===e||!1===e?(this.soundToggle.setOff(),this.controller.Audio.setSound(!1)):(this.soundToggle.setOn(),this.controller.Audio.setSound(!0)),1==t?this.inviteGameToggle.setOn():this.inviteGameToggle.setOff()},onSoundToggleClick:function(){this.controller.Audio.setSoundClick(),this.controller.Music&&this.controller.Music.setSoundClick()},onInviteGameToggleClick:function(){var t={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.updateInviteGame(t,function(t){},function(t){}),this.controller.getUser().invite_on=1==this.controller.getUser().invite_on?0:1},onLogoutClick:function(){this.controller.Audio.playClick(),this.dialogFormLogOut.showDialog()},onGroupClick:function(){this.controller.Audio.playClick();var t=this.controller.getGeneralConfig();t&&cc.sys.openURL(t.GROUP)},onFanpageClick:function(){this.controller.Audio.playClick();var t=this.controller.getGeneralConfig();t&&cc.sys.openURL(t.FANPAGE)}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../ui/toggle/Toggle":"Toggle","./LogOut":"LogOut"}],ShowHideAnim:[function(t,e,i){"use strict";cc._RF.push(e,"40891/uy31Kw5cwqtDri/VE","ShowHideAnim"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this.node.opacity=255,this.direction=-1,this.is_pause=!0},onDisable:function(){this.is_pause=!1},update:function(t){if(this.is_show_effect&&this.is_pause){this.checkDirection();var e=this.node.opacity+this.direction*t*1e3;e>255&&(e=255),e<10&&(e=10),this.node.opacity=e}},checkDirection:function(){-1===this.direction&&this.node.opacity<=10&&(this.direction=1),1===this.direction&&this.node.opacity>=255&&(this.direction=-1)},showEffect:function(){this.is_show_effect=!0},hideEffect:function(){this.is_show_effect=!1,this.node.opacity=255}}),cc._RF.pop()},{}],Slot2AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"ea7adO8NHhJeZ/oJiZmFE/K","Slot2AutoSpinSetting");var n=t("../Slot2Constant"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.reset()},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(o.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(o.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(o.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot2.Slot2State.setAutoSpin(),this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin),this.Slot2.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot2.Slot2State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot2.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===n.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,n=!this.stopGameMaxWin||this.lastWin<this.maxWin,o=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&n&&o},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot2Constant":"Slot2Constant"}],Slot2BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"84afdwCe+1Er5Hho5kMhrGu","Slot2BonusItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message"),s=t("../../scene/game-slot-2/Slot2Constant");cc.Class({extends:cc.Component,properties:{notOpenNode:cc.Node,openNode:cc.Node,bonusNode:cc.Node,moneyNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Bonus=t.Slot2Bonus},onLoad:function(){this.click=!1,this.open=!1},onClick:function(){this.Slot2.Slot2State.isAutoSpin()?this.Slot2.showToast(o.SLOT2_AUTOSPIN_NOT_CHANGE):this.click||this.Slot2Bonus.isStateStop()||(this.click=!0,this.Slot2Bonus.setStateStop(!0),this.Slot2Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.Slot2.Slot2State.isAutoSpin()&&(this.click||this.Slot2Bonus.isStateStop()||(this.click=!0,this.Slot2Bonus.setStateStop(!0),this.Slot2Bonus.onItemClick(this)))},openBox:function(t,e,i){this.open=!0,this.initType(t,i),e||this.Slot2Bonus.setStateStop(!1)},initType:function(t,e){switch(t.item_id){case s.BONUS_KEY:this.showBonus(t);break;case s.BONUS_MONEY:case s.BONUS_MINIGAME:this.setMoney(t)}},setMoney:function(t){var e=n.nFormatter(t,2).replace("k","K");this.moneyLabel.string=e,this.showMoney()},isOpen:function(){return this.open},isClick:function(){return this.click},showNormalBox:function(){this.hideAll(),this.notOpenNode.active=!0},showOpenBox:function(){this.hideAll(),this.openNode.active=!0},showMoney:function(){this.showOpenBox(),this.moneyNode.active=!0},hideMoney:function(){this.moneyNode.active=!1},showBonus:function(t){this.hideAll(),this.bonusNode.active=!0},hideAll:function(){this.notOpenNode.active=!1,this.openNode.active=!1,this.bonusNode.active=!1,this.moneyNode.active=!1},reset:function(){this.click=!1,this.open=!1,this.moneyNode.active=!1,this.moneyLabel.node.active=!0,this.showNormalBox()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../scene/game-slot-2/Slot2Constant":"Slot2Constant","../../util/FormatUtil":"FormatUtil"}],Slot2BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"0a711zqDChGlpYMLpzKmqiA","Slot2BonusResult");var n=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{moneyJackpotItem:n},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},setMoney:function(t){this.moneyJackpotItem.setMoneyWithoutAnimation(0),this.moneyJackpotItem.setMoney(t)}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot2Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"e292akkzy5Cy7S7zkTR+Kdk","Slot2Bonus");var n=t("../../prefab/slot-2/Slot2BonusItem"),o=t("./Slot2Constant"),s=t("../../prefab/slot-2/Slot2MiniGameItem"),a=t("../../util/RandomUtil");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,Slot2BonusItem:[n],Slot2MiniGameItem:[s]},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2X=t.Slot2X;for(var e=0;e<this.Slot2BonusItem.length;e++)this.Slot2BonusItem[e].init(t);for(var i=0;i<this.Slot2MiniGameItem.length;i++)this.Slot2MiniGameItem[i].init(t)},onLoad:function(){this.timeOutResult=null,this.openAllEggeTimeOut=null,this.openAutoSpinTimeOut=null,this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.bonus=this.data.list_bonus_prize,this.x_bonus=this.data.number_key_start_bonus||1,this.remainBonus=10,this.setRemainBonus(this.remainBonus))},onEnable:function(){this.reset(),this.initContent(),this.Slot2UI.hideJackpot(),this.Slot2.Slot2State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot2UI.showJackpot(),this.Slot2UI.hideBonusResultForm(!1),this.data.is_free?this.Slot2.spin():this.Slot2.Slot2State.isAutoSpin()?this.Slot2.spin():this.Slot2.Slot2State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.bonus.length>0){var e=this.bonus[0];this.bonus.splice(0,1);var i=e.line,n=e.prize;this.openBonusItem(t,i,n)}},openBonusItem:function(t,e,i){switch(e){case o.BONUS_KEY:this.openItemBonusKey(t,i);break;case o.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case o.BONUS_MINIGAME:this.openItemBonusMiniGame(t,i)}},openItemBonusKey:function(t,e){this.x_bonus++,t.showBonus(),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e){this.remainBonus--,t.setMoney(e),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.remainBonus--,this.bonusPrize=e,this.bonusItemMiniGame=t,t.showOpenBox(),this.setRemainBonus(this.remainBonus),this.showMiniGame();for(var i=0;i<this.Slot2MiniGameItem.length;i++)this.Slot2MiniGameItem[i].reset();this.setStateStop(!1),this.Slot2.Slot2State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClick(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.bonusItemMiniGame&&this.bonusItemMiniGame.setMoney(this.bonusPrize),t.setMoney(this.bonusPrize,!0),this.openMiniGameItemByMultipBet(10),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(20),this.setStateStop(!1),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t){var e=t*this.Slot2.getBet()*this.x_bonus,i=this.getItemMiniGameNotOpen();i&&i.setMoney(e,!1)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.Slot2MiniGameItem)this.Slot2MiniGameItem[e].isOpen()||this.Slot2MiniGameItem[e].isClick()||t.push(this.Slot2MiniGameItem[e]);return t[a.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.Slot2BonusItem)this.Slot2BonusItem[e].isOpen()||this.Slot2BonusItem[e].isClick()||t.push(this.Slot2BonusItem[e]);return t[a.getRandomInt(0,t.length-1)]},isStateStop:function(){return this.stateBonus},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateBonus=t},setRemainBonus:function(t){void 0!==t&&(this.remainLabel.string=t)},checkFinishMiniGameBonus:function(){this.bonus.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot2.showBonusResult(this.data.bonus_prize),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot2UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot2.Slot2State.isAutoSpin()&&(this.autoOpenBox(),this.minigameBonusNode.active&&(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)))},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.bonus=[],this.bonusPrize=0,this.hideCloseMiniGame(),this.setStateStop(!1),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),this.Slot2BonusItem)this.Slot2BonusItem[t].reset();for(var e in this.Slot2MiniGameItem)this.Slot2MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../prefab/slot-2/Slot2BonusItem":"Slot2BonusItem","../../prefab/slot-2/Slot2MiniGameItem":"Slot2MiniGameItem","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant"}],Slot2ChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"7c0aaZnY3ZHkKZgcKDJd4gd","Slot2ChatItem");var n=t("../../helper/Message"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText},onLoad:function(){},init:function(t){if(Array.isArray(t)){for(var e="",i=0;i<t.length;i++)e+=String.format(n.CHAT_SLOT_2_MESSAGE,t[i].nick_name,o.formatMessage(t[i].msg)||o.formatMessage(t[i].message)),i!==t.length-1&&(e+="\n");this.messageRichText.string=e}else this.messageRichText.string=String.format(n.CHAT_SLOT_2_MESSAGE,t.nick_name,o.formatMessage(t.msg)||o.formatMessage(t.message))},initFail:function(t){this.setMessageFail(t)},setMessageFail:function(t){this.messageRichText.string=String.format(n.CHAT_MESSAGE_FAIL,t)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot2Chat:[function(t,e,i){"use strict";cc._RF.push(e,"001ddg07V1EbYT0iRXk02cd","Slot2Chat");var n=t("../../../util/BrowserUtil"),o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{chatEditBox:cc.EditBox,chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView},init:function(t){this.Slot2=t},onLoad:function(){this.Slot2.sendRequest.sendNoPrefixToZone("CHAT."+o.REQUEST_CHAT_GET_CHAT)},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(),this.number++},initChat:function(t){t&&(this.instanceChatItem(t),this.scrollToBottom())},addChatFail:function(t){this.instanceChatItem(t,!0),this.checkBottom()&&this.chatScrollView.scrollToBottom()},addChat:function(t){this.instanceChatItem(t),this.checkBottom()&&this.chatScrollView.scrollToBottom()},instanceChatItem:function(t,e){var i=cc.instantiate(this.chatItemPrefab);e?i.getComponent("Slot2ChatItem").initFail(t):i.getComponent("Slot2ChatItem").init(t),this.chatScrollView.content.addChild(i)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=50},scrollToBottom:function(){this.number=0},onChatClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(this.unFocusChatEditBox(),""!==t.trim()){var e={msg:t};this.chatEditBox.string="",n.focusGame(),this.focusChatEditBox(),this.Slot2.sendRequest.sendNoPrefixToZone("CHAT."+o.REQUEST_CHAT_SEND_CHAT,e)}else n.focusGame()},focusChatEditBox:function(){n.focusEditBox(this.chatEditBox)},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/BrowserUtil":"BrowserUtil"}],Slot2Constant:[function(t,e,i){"use strict";cc._RF.push(e,"30257+2LblDEYtSqRlfFrx5","Slot2Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",ALADIN:"ALADIN",SINBAD:"SINBAD",ALIBABA:"ALIBABA",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,BONUS_KEY:0,BONUS_MONEY:1,BONUS_MINIGAME:2,NUM_IN_HISTORY:20,LIST_ICONS:["A","B","C","D","E","F","G"],LIST_LINES:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]]},cc._RF.pop()},{}],Slot2Control:[function(t,e,i){"use strict";cc._RF.push(e,"b4f963b9tBEKoxK99iI7bfQ","Slot2Control");t("../../util/FormatUtil"),t("../../helper/Config");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onSpinClick:function(){this.Slot2.isCanChangeBet()&&!this.Slot2.isBonus()&&(this.Slot2.Audio.playClick(),this.Slot2.spin())},onAutoSpinClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):this.Slot2UI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot2.Audio.playClick(),this.Slot2.Slot2State.setStop(),this.Slot2.Slot2AutoSpinSetting.stopAutoSpin()},onAddClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):this.Slot2.addBet()},onMinusClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):this.Slot2.minusBet()},onAddLineClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):this.Slot2UI.showSelectLineFormNode()},onMinusLineClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):this.Slot2UI.showSelectLineFormNode()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot2Effect:[function(t,e,i){"use strict";cc._RF.push(e,"6b417Hn4EVH6qJeD8Cx4sW8","Slot2Effect");var n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,moreEffectNode:cc.Node,winNormalJackpotItem:n,moreMoneyJackpotItem:n,effectSkeleton:sp.Skeleton},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Music=t.Music},onLoad:function(){},showWinNormal:function(t){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.setMoneyWithoutAnimation(t/2),this.winNormalJackpotItem.setMoneyWithAnimation(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundBigWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showSuperBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showJackpot:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"nohu",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showBonus:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"bonus",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll(),this.node.runAction(cc.sequence(cc.delayTime(.75),cc.callFunc(function(){this.Slot2.Slot2Bonus.initData(t),this.Slot2.Slot2Bonus.setRemainBonus(t.remain_bonus),this.Slot2.showBonusGame(t)},this)))},this)))},showFreeSpin:function(){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"themluot",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll()},this)))},hideAll:function(){this.winNormalNode.active=!1,this.moreEffectNode.active=!1,this.moreMoneyJackpotItem.node.active=!1,this.effectSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot2HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"d8351HlsdxKbZ6Omt6+1ogU","Slot2HandlerRequest");var n=t("../../helper/Constant"),o=(t("../../helper/Message"),t("./Slot2Constant")),s={init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case n.MONEY:this.Slot2.updateMoneyGold();break;case n.GOLD:break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params,i=t.cmd;switch("MINIGAME"!==i&&n.NEWS,i){case n.NEWS:this.Slot2.handleNews(e);break;case o.JACKPOT:this.Slot2.handleJackpot(e);break;case o.SPIN:this.Slot2.handleSpin(e);break;case o.SPIN_DEMO:this.Slot2.handleSpinDemo(e);break;case o.SPIN_BONUS:this.Slot2.handleSpinBonus(e);break;case o.SPIN_BONUS_DEMO:this.Slot2.handleSpinBonusDemo(e);break;case o.SPIN_FAIL:this.Slot2.handleSpinFail(e);break;case o.GET_TOP:this.Slot2.handleGetTop(e),this.Slot2.MiniGame&&this.Slot2.MiniGame.handleRequest(e);break;case o.UPDATE_BIGWIN:break;case n.MINIGAME_REQUEST:this.Slot2.MiniGame&&this.Slot2.MiniGame.handleRequest(e);break;case n.REQUEST_RECHARGE_GOLD:this.Slot2.handleRechargeGold(e);break;case n.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot2.handleAlert(e);break;case n.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot2.handleNewMessage(e);break;case n.REQUEST_ACHIVEMENTED_QUEST:this.Slot2.handleAchivementedQuest(e);break;case n.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot2.handlePlusLuckyWheelFree(e);break;case n.REQUEST_CHAT_GET_CHAT:case n.REQUEST_CHAT_SEND_CHAT:break;case n.UPDATE_MINIGAME_FREE:this.Slot2.MiniGame&&this.Slot2.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot2Constant":"Slot2Constant"}],Slot2Header:[function(t,e,i){"use strict";cc._RF.push(e,"d4fb7f6IYRAo5ITxa7b7lYL","Slot2Header");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{listMenuNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){},onTestClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_CHANGE_SPIN):(this.Slot2UI.showPlayButton(),this.Slot2.initDataTest())},onPlayClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_CHANGE_SPIN):(this.Slot2UI.showTestButton(),this.Slot2.initDataBet(this.Slot2.getFistBet()))},onShopClick:function(){this.Slot2.Audio.playClick(),this.Slot2.showDialogMessage(n.RECHARGE_MONEY_TITLE,"H\u1ec7 th\u1ed1ng n\u1ea1p th\u1ebb \u0111ang b\u1ea3o tr\xec")},onBackClick:function(){this.Slot2.Audio.playClick(),this.Slot2.isCanChangeBet()?this.Slot2.onBackClick():this.Slot2.showToast(n.SLOT_NOT_CHANGE_SPIN)},onMenuClick:function(){this.Slot2.Audio.playClick(),this.listMenuNode.active=!this.listMenuNode.active},onSettingClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showSettingFormNode()},onRankClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showRankFormNode()},onHelpClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showBonusFormNode()},onTutorialClick:function(){},onHistoryClick:function(){this.Slot2.Audio.playClick(),this.Slot2.Slot2UI.showHistoryFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot2HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"8d6e6Ht451AW7sYfsy0TlSr","Slot2HistoryItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=n.numberWithCommas(t.total_prize_amount||t.win_prize),i=n.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}else this.node.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot2History:[function(t,e,i){"use strict";cc._RF.push(e,"975d1Ok2HFCR5vKM1VIoodk","Slot2History");var n=t("../../../helper/Message"),o=t("../../../helper/Config"),s=(t("../../../util/FormatUtil"),t("../Slot2Constant"));cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,slotHistoryItemPrefab:cc.Prefab,listScrollView:cc.ScrollView},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeOut=null)},initData:function(){this.listData&&0!==this.listData.length?(this.showListNode(),this.showData()):this.loadData()},handleSpin:function(t){this.hideLoadingNode(),this.initFirst(),this.is_update=!0;var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.total_prize_amount+=t.bonus_prize,e.spin_fee=this.Slot2.getBet(),e.total_bet_amount=this.Slot2.Slot2SelectLine.getLineSelected().length*this.Slot2.getBet(),this.listData.length>s.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){this.showData()}.bind(this),1e3*o.SLOT2_DELAY_FINISH_3))},showData:function(){if(this.listData.length>=s.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,e=0,i=this.listItem.length;e<i;e++)this.listItem[e].getComponent("Slot2HistoryItem").init(this.listData[t-e],e)}else for(var n=this.listData.length-1,o=n;o>=0;o--)this.listItem[n-o]?this.listItem[n-o].getComponent("Slot2HistoryItem").init(this.listData[o],o):this.instanceItem(this.listData[o],o)},loadData:function(){var t=this;this.showLoadingNode(),this.listScrollView.content.removeAllChildren(!0);var e={token:this.Slot2.getToken(),user_id:this.Slot2.getUserId()};this.xhr=this.Slot2.api.getHistorySlot2(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot2.showDialogMessage(n.HISTORY_TITLE,e.msg)})},initContent:function(t){this.initFirst(),this.showListNode();var e=t[0],i=0;i=e.length>s.NUM_IN_HISTORY?s.NUM_IN_HISTORY:e.length;for(var n=0;n<i;n++)this.instanceItem(e[n],n),this.listData.push(e[n])},instanceItem:function(t,e){var i=cc.instantiate(this.slotHistoryItemPrefab);return i.parent=this.listScrollView.content,i.getComponent("Slot2HistoryItem").init(t,e),this.listItem.push(i),i},showListNode:function(){this.hideLoadingNode(),this.listScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot2Constant":"Slot2Constant"}],Slot2Item:[function(t,e,i){"use strict";cc._RF.push(e,"d9431nsGtdK/5EmVakeGVnq","Slot2Item"),cc.Class({extends:cc.Component,properties:{slotSprite:cc.Sprite,litSpriteFrame:[cc.SpriteFrame],item1Node:cc.Node,item3Node:cc.Node,item7Node:cc.Node},onLoad:function(){},init:function(t){this.index=t;var e=void 0;switch(this.hideAll(),this.index){case"A":this.slotSprite.node.active=!0,e=1;break;case"B":this.item1Node.active=!0,e=0;break;case"C":this.slotSprite.node.active=!0,e=3;break;case"D":this.slotSprite.node.active=!0,e=4;break;case"E":this.slotSprite.node.active=!0,e=5;break;case"F":this.item7Node.active=!0,e=6;break;case"G":this.slotSprite.node.active=!0,this.item3Node.active=!0,e=2}this.slotSprite.spriteFrame=this.litSpriteFrame[e],11===t&&(this.node.zIndex=1e3)},hideAll:function(){this.slotSprite.node.active=!1,this.item1Node.active=!1,this.item3Node.active=!1,this.item7Node.active=!1},show:function(){this.showEffect()},isBonus:function(){},getIndex:function(){return this.index},showEffect:function(){this.node.getComponent(cc.Animation).play()},hideEffect:function(){this.node.getComponent(cc.Animation).stop(),this.node.skewX=0,this.node.skewY=0},reset:function(){this.hideEffect()}}),cc._RF.pop()},{}],Slot2Jackpot2Item:[function(t,e,i){"use strict";cc._RF.push(e,"68e856s1etFyYqt0MUAmYs9","Slot2Jackpot2Item");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label,timeLabel:cc.Label},onLoad:function(){},init:function(t,e){t?(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2JackpotForm:[function(t,e,i){"use strict";cc._RF.push(e,"0f47aJiZA5MWJb3b8HfkrOB","Slot2JackpotForm");t("../../../helper/Config"),t("../../../prefab/mini-game/item/JackpotItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{contentScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.jackpotItemPrefab);this.pool.put(e)}},onEnable:function(){},initData:function(t){t&&(this.data=t,this.initJackpot())},initJackpot:function(){this.putAllChipToPool(),this.contentScrollView.node.active=!0;var t=n.sortDataTimeByTime(this.data.list_player_jackpot);for(var e in t=n.filterSameItemSlot(t)){this.instanceItem(t[e]).parent=this.contentScrollView.content}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.jackpotItemPrefab)),e.getComponent("Slot2JackpotItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.contentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],Slot2JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"e389467c/FOpqMRnCH3Xi0X","Slot2JackpotItem");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,spinIdLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,blanceLabel:cc.Label},onLoad:function(){},init:function(t){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.prefixNickNameLabel.string=o.getServerID(t.server_id);var e=t.nick_name,i=n.numberWithCommas(t.total_prize_amount),s=n.getStringDateByTimeStamp(t.created_at);this.timeLabel.string=s,this.spinIdLabel.string=t.spin_fee,this.nickNameLabel.string=e,this.blanceLabel.string=i,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2Label:[function(t,e,i){"use strict";cc._RF.push(e,"2a4ferdh6VPd4vEDDFGr2mC","Slot2Label");var n=t("../../util/FormatUtil"),o=(t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem"));cc.Class({extends:cc.Component,properties:{idGameLabel:cc.Label,mainJackpotItem:o,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:cc.Label,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.timeOutSpin=null},onEnable:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initLast:function(t){var e=this.Slot2.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){this.lastMoneyWinLabel.string=n.numberWithCommas(t.win_prize)}.bind(this),5e3)},handleSpinDemo:function(t){this.handleSpin(t)},setId:function(t){this.idGameLabel.string=t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.mainJackpotItem.setMoney(t):this.mainJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=n.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=n.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.string=n.numberWithCommas(t)},setLastMoneyWin:function(t){this.lastMoneyWinLabel.string=n.numberWithCommas(t)},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot2Lines:[function(t,e,i){"use strict";cc._RF.push(e,"61c5cn8G/9L3I785JLx60o5","Slot2Lines");t("../../util/FormatUtil");var n=t("./item/Slot2NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[n],listLine:[cc.Node]},init:function(t){for(var e in this.Slot2=t,this.SlotUI=t.SlotUI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./item/Slot2NumberLineItem":"Slot2NumberLineItem"}],Slot2MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"f84cdM9v+BByIMvO/DtHG38","Slot2MiniGameItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{eggeSpriteNode:cc.Node,openSpriteNode:cc.Node,moneyNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Bonus=t.Slot2Bonus},onLoad:function(){this.click=!1,this.open=!1,this.hideTimeout=null,this.onMouseEnter=function(){},cc.sys.isBrowser&&this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node)},onEnable:function(){this.reset()},onDisable:function(){this.reset()},onClick:function(){this.click||(this.setClick(!0),this.Slot2Bonus.openItemMiniGame(this))},setMoney:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOpen(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.openItem(),e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=n.nFormatter(t,2).replace("k","K")):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=n.nFormatter(t,2).replace("k","K"))}.bind(this),1e3*o.SLOT2_TIME_OPEN_EGGE)},setClick:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.click=t},isClick:function(){return this.click},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.open=t},openItem:function(){this.moneyNode.active=!0,this.eggeSpriteNode.active=!1,this.openSpriteNode.active=!0},isOpen:function(){return this.open},reset:function(){clearTimeout(this.hideTimeout),this.moneyNode.active=!1,this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.openSpriteNode.active=!1,this.eggeSpriteNode.active=!0,this.setClick(!1),this.setOpen(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],Slot2NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"c80577hXChNZagBGv5szcMq","Slot2NumberLineItem"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,numberLineLabel:cc.Label,normalSpriteFrame:cc.SpriteFrame,lightSpriteFrame:cc.SpriteFrame},init:function(t){this.Slot2=t,this.Slot2Lines=t.Slot2Lines},onLoad:function(){this.hideNumberLine()},showNumberLine:function(){this.bgSprite.spriteFrame=this.lightSpriteFrame},hideNumberLine:function(){this.bgSprite.spriteFrame=this.normalSpriteFrame}}),cc._RF.pop()},{}],Slot2RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"cededhOckxIpbcqh+F7pugp","Slot2RankItem");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2Rank:[function(t,e,i){"use strict";cc._RF.push(e,"19b1fC9lmVJ+bFAA3cNloVp","Slot2Rank");t("../../../helper/Message");var n=t("../../../util/FormatUtil"),o=t("../Slot2Constant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,listScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotScrollView:cc.ScrollView},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){this.data=null,this.onJackpotClick(),this.Slot2.sendRequest.send(o.GET_TOP)},onDisable:function(){},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOffButtonNode.active=!1,this.rankOnButtonNode.active=!0,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOffButtonNode.active=!1,this.jackpotOnButtonNode.active=!0,this.jackpotNode.active=!0},initDataRank:function(t){var e=t.data,i=[];i[0]=e[2],i[1]=e[0];var n=[];n[0]=e[3],n[1]=e[1],this.data=[],this.data[0]=i,this.data[1]=n,this.initData()},initData:function(){if(this.showListNode(),this.listRank||(this.listRank=[],this.listJackpot=[],this.listScrollView.content.removeAllChildren(!0),this.jackpotScrollView.content.removeAllChildren(!0)),this.data){var t=this.data[0]?this.data[0]:this.data[1];if(t[0])for(var e=t[0],i=(e=n.filterSameItemSlot(e)).length>30?30:e.length,o=0;o<i;o++)if(this.listRank[o])this.listRank[o].getComponent("Slot2RankItem").init(e[o],o);else{var s=cc.instantiate(this.rankItemPrefab);s.parent=this.listScrollView.content,s.getComponent("Slot2RankItem").init(e[o],o),this.listRank.push(s)}if(t[1])for(var a=n.sortDataTimeByTime(t[1]),r=(a=n.filterSameItemSlot(a)).length>30?30:a.length,c=0;c<r;c++)if(this.listJackpot[c])this.listJackpot[c].getComponent("Slot2Jackpot2Item").init(a[c],c);else{var h=cc.instantiate(this.jackpotItemPrefab);h.parent=this.jackpotScrollView.content,h.getComponent("Slot2Jackpot2Item").init(a[c],c),this.listJackpot.push(h)}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.jackpotOffButtonNode.active=!0,this.rankOffButtonNode.active=!0,this.jackpotOnButtonNode.active=!1,this.rankOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot2Constant":"Slot2Constant"}],Slot2Reels:[function(t,e,i){"use strict";cc._RF.push(e,"fd46fdx8blJaKiLR6BoOxfy","Slot2Reels");t("../../util/RandomUtil");var n=t("../../helper/Config"),o=(t("../../util/FormatUtil"),t("./Slot2Reel")),s=t("./Slot2Constant");cc.Class({extends:cc.Component,properties:{slotReels:[o],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Lines=t.Slot2Lines,this.Slot2Effect=t.Slot2Effect,this.Slot2SelectLine=t.Slot2SelectLine,this.Slot2Lines=t.Slot2Lines,this.slotReels)this.slotReels[e].init(t)},onLoad:function(){this.timeOutResult=null,this.timeOutBonus=null,this.timeOutLines=null,this.intervalLines=null,this.first_remain_free=0},onDestroy:function(){clearTimeout(this.timeOutResult),clearTimeout(this.timeOutBonus),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)},initFirst:function(){for(var t in this.slotReels)this.slotReels[t].randomItems()},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,a=t.is_free,r=t.list_line_prize,c=t.list_line_bonus,h=t.list_line_free,l=t.remain_free,u=t.win_type;this.listLine=r.concat(c),this.listLine=this.listLine.concat(h);for(var d=0;d<n.SLOT2_NUMBER_REELS;d++){for(var m=[],f=0;f<n.SLOT2_NUMBER_ITEM_IN_REEL;f++)m.push(e[f*n.SLOT2_NUMBER_REELS+d]);this.slotReels[d].spin(m)}this.node.runAction(cc.sequence(cc.delayTime(n.SLOT2_TIME_SPIN),cc.callFunc(function(){this.Slot2.Slot2State.isAutoSpin()||this.Slot2.Slot2State.setFinish(),this.showEffectSlotItem(this.listLine,t)},this),cc.callFunc(function(){switch(u){case s.WIN_TYPE_ZERO:this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()?i||this.Slot2.spin():this.Slot2.Slot2State.setStop();break;case s.WIN_TYPE_NORMAL:this.Slot2.Slot2Effect.showWinNormal(o);break;case s.WIN_TYPE_BIG_WIN:case s.WIN_TYPE_SUPER_BIG_WIN:this.Slot2.Slot2Effect.showBigWin(o);break;case s.WIN_TYPE_JACKPOT:this.Slot2.Slot2Effect.showJackpot(o)}var e=this.getTimeEffect(u);u!==s.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()&&!i?this.Slot2UI.showSpinDisableButton():this.Slot2UI.showSpinButton();var e=!1;a&&(this.isNewSpinFree(l)&&(this.Slot2.Slot2Effect.showFreeSpin(),e=!0),this.Slot2UI.showSpinFreeButton(l),this.first_remain_free=l),i?this.Slot2Effect.showBonus(t):this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()?(this.Slot2.Slot2Effect.hideAll(),this.Slot2.spin()):(this.Slot2.Slot2Effect.hideAll(),this.Slot2.Slot2State.setStop(),a&&(e&&this.Slot2.Slot2Effect.showFreeSpin(),this.Slot2UI.showSpinFreeButton(l),this.Slot2.spin()))}.bind(this),e)):(a&&(this.isNewSpinFree(l)&&this.Slot2.Slot2Effect.showFreeSpin(),this.Slot2UI.showSpinFreeButton(l),this.first_remain_free=l,i||this.Slot2.spin()),i&&this.Slot2Effect.showBonus(t))},this)))},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,a=t.list_line_prize,r=t.list_line_bonus,c=t.list_line_free,h=t.win_type;this.listLine=a.concat(r),this.listLine=this.listLine.concat(c);for(var l=0;l<n.SLOT2_NUMBER_REELS;l++){for(var u=[],d=0;d<n.SLOT2_NUMBER_ITEM_IN_REEL;d++)u.push(e[d*n.SLOT2_NUMBER_REELS+l]);this.slotReels[l].spin(u)}this.node.runAction(cc.sequence(cc.delayTime(n.SLOT2_TIME_SPIN),cc.callFunc(function(){this.Slot2.Slot2State.isAutoSpin()||this.Slot2.Slot2State.setFinish(),this.showEffectSlotItem(this.listLine,t)},this),cc.callFunc(function(){var e=this.Slot2.getTestInfo();switch(o=h===s.WIN_TYPE_JACKPOT?e.jackpot:o,e.money+=o,this.Slot2.Slot2Label.setMoney(e.money),h){case s.WIN_TYPE_ZERO:this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()?i||this.Slot2.spin():this.Slot2.Slot2State.setStop();break;case s.WIN_TYPE_NORMAL:this.Slot2.Slot2Effect.showWinNormal(o);break;case s.WIN_TYPE_BIG_WIN:case s.WIN_TYPE_SUPER_BIG_WIN:this.Slot2.Slot2Effect.showBigWin(o);break;case s.WIN_TYPE_JACKPOT:this.Slot2.Slot2Effect.showJackpot(o)}var n=this.getTimeEffect(h);h!==s.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){i?this.Slot2.Slot2Effect.showBonus(t):(this.Slot2.Slot2Effect.hideAll(),this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()?this.Slot2.spin():this.Slot2.Slot2State.setStop())}.bind(this),n)):i&&this.Slot2Effect.showBonus(t)},this)))},showEffectSlotItem:function(t,e){var i=this.getListSlotItem();this.Slot2Lines.showLines(t),this.Slot2SelectLine.showEffects(t),this.Slot2.Slot2AutoSpinSetting.checkAutoSpin()||(this.currentLine=0,clearTimeout(this.timeOutLines),clearInterval(this.intervalLines),this.timeOutLines=setTimeout(function(){this.hideEffectItem(),this.intervalLines=setInterval(function(){if(t&&t.length>this.currentLine){var e=s.LIST_LINES[t[this.currentLine].line-1],n=t[this.currentLine].line,o=t[this.currentLine].prize;for(var a in i)i[a].getComponent("Slot2Item").reset();for(var r in e)for(var c in i)if(e[r]-1==c){i[c].getComponent("Slot2Item").show();break}this.Slot2SelectLine.showEffect(n),this.Slot2Lines.showLine(n),this.Slot2Lines.showMoney(o),this.currentLine++,this.currentLine===t.length&&(this.currentLine=0)}else{for(var h in i)i[h].getComponent("Slot2Item").reset();this.Slot2.Slot2Lines.reset(),clearInterval(this.intervalLines)}}.bind(this),2e3)}.bind(this),1e3*n.SLOT2_DELAY_FINISH_2))},getListSlotItem:function(){for(var t=[],e=0;e<n.SLOT2_NUMBER_ITEM_IN_REEL;e++)for(var i=0;i<n.SLOT2_NUMBER_REELS;i++)t.push(this.slotReels[i].getListSlotItem()[e]);return t},isNewSpinFree:function(t){return t>this.first_remain_free-1},showEffectItem:function(t){var e=t.parent.convertToNodeSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),n=cc.instantiate(this.itemPrefab);n.getComponent("Slot2Item").init(t.getComponent("Slot2Item").getIndex(),this.Slot2.getGameName()),n.getComponent("Slot2Item").show(),n.setPosition(i),n.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot2SelectLine.reset()},getTimeEffect:function(t){return t===s.WIN_TYPE_NORMAL||t===s.WIN_TYPE_ZERO?1e3*n.TIME_WIN_TYPE_NORMAL:t===s.WIN_TYPE_BIG_WIN||t===s.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_WIN_TYPE_BIGWIN:t===s.WIN_TYPE_JACKPOT?1e3*n.TIME_WIN_TYPE_JACKPOT:1e3*n.TIME_WIN_TYPE_NORMAL},reset:function(){this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant","./Slot2Reel":"Slot2Reel"}],Slot2Reel:[function(t,e,i){"use strict";cc._RF.push(e,"d4da268EFFOsaqk3kiwHZL6","Slot2Reel");var n=t("../../util/RandomUtil"),o=t("../../helper/Config"),s=t("./Slot2Constant");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,numberItems:0,animation:cc.Animation},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Lines=t.Slot2Lines},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t){if(this.node.active){this.reset(),this.setItems(this.items),this.animation.play(),this.items=t,this.listSlotItem=[];for(var e=1;e<this.numberItems;e++){var i=this.getRandomItem();e===this.numberItems-1&&(i=t[0]),e===this.numberItems-2&&(i=t[1]),e===this.numberItems-3&&(i=t[2]);var n=this.instanceItem(i);n.setPosition(0,(e+1)*o.SLOT2_DISTANCE_TWO_ITEMS),n.parent=this.node,e===this.numberItems-1&&this.listSlotItem.push(n),e===this.numberItems-2&&this.listSlotItem.push(n),e===this.numberItems-3&&this.listSlotItem.push(n)}this.listSlotItem.reverse()}},getListSlotItem:function(){return this.listSlotItem},randomItems:function(){for(var t=[],e=0;e<o.SLOT2_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){return s.LIST_ICONS[n.getRandomInt(0,s.LIST_ICONS.length-1)]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*o.SLOT2_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot2Item").reset(),e.getComponent("Slot2Item").init(t,this.Slot2.getGameName()),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.Slot2Lines.reset(),this.putAllChipToPool();var t=this.node.getChildren();for(var e in t)t[e].getComponent("Slot2Item").reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant"}],Slot2SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"854eb0vawBETpD4r1iKq/sU","Slot2SelectLine");var n=t("../../helper/Message"),o=t("./item/Slot2SelectNumberLineItem");cc.Class({extends:cc.Component,properties:{listSelectNumLineItem:[o],evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node},init:function(t){for(var e in this.Slot2=t,this.Slot2Lines=t.Slot2Lines,this.Slot2Label=t.Slot2Label,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t);this.is_first=!1},onLoad:function(){},start:function(){this.selectAllItem(),this.totalLineSelected=this.getLineSelected().length,this.Slot2Label.initLast(this.totalLineSelected)},initFirst:function(){this.is_first||(this.is_first=!0,this.totalLineSelected=0,this.selectAllItem(),this.Slot2Label.initLast(this.totalLineSelected))},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot2Label.initLast(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot2Lines.showNumberLines(t)},showLines:function(t){this.Slot2Lines.showLines(t)},showLine:function(t){this.Slot2Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showSelect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line-1;this.listSelectNumLineItem[i].showSelect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest()?this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.getLineSelected().length>0&&(this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0))},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../helper/Message":"Message","./item/Slot2SelectNumberLineItem":"Slot2SelectNumberLineItem"}],Slot2SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"039433wzi1BabR5TOU4BIp6","Slot2SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2SelectLine=t.Slot2SelectLine},onLoad:function(){this.selected=this.onSelectButtonNode.active},onClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.Slot2SelectLine.itemIsSelected(!0),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot2SelectLine.setLineItemUnSelected(),this.Slot2SelectLine.itemIsSelected(!1),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot2State:[function(t,e,i){"use strict";cc._RF.push(e,"ef18frlNztMDahJNAiQTyE5","Slot2State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2SelectLine=t.Slot2SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinButton(),this.Slot2UI.showAutoSpinButton(),this.Slot2SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showAutoSpinDisableButton(),this.Slot2SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showAutoSpinDisableButton(),this.Slot2SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showStopAutoSpinButton(),this.Slot2SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot2.Slot2Lines.reset(),this.Slot2.Slot2Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot2Tutorial:[function(t,e,i){"use strict";cc._RF.push(e,"aac60bmlFpOm7hmUdkaK68p","Slot2Tutorial"),cc.Class({extends:cc.Component,properties:{pageNodes:[cc.Node]},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.showPage(0),this.dialogForm=this.node.getComponent("DialogForm")},onNextClick:function(){for(var t in this.pageNodes)if(this.page==t){++t>=this.pageNodes.length&&(t=0),this.showPage(t);break}},onPreviousClick:function(){for(var t in this.pageNodes)if(this.page==t){--t<0&&(t=this.pageNodes.length-1),this.showPage(t);break}},showPage:function(t){for(var e in this.page=t,this.pageNodes)this.pageNodes[e].active=t==e},hideAll:function(){for(var t in this.pageNodes)this.pageNodes[t].active=!1}}),cc._RF.pop()},{}],Slot2UI:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"3edael2PBBLk5w5GZYvDopL","Slot2UI");var s=t("../../util/FormatUtil");cc.Class((o(n={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,jackpotNode:cc.Node,autoSpinSettingFormNode:cc.Node,selectLineFormNode:cc.Node,bonusFormNode:cc.Node,rechargeFormNode:cc.Node,historyFormNode:cc.Node,rankFormNode:cc.Node,tableBonusFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},init:function(t){this.Slot2=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormRecharge=this.rechargeFormNode.getComponent("DialogForm"),this.dialogFormHistory=this.historyFormNode.getComponent("DialogForm"),this.dialogSelectLine=this.selectLineFormNode.getComponent("DialogForm"),this.dialogRank=this.rankFormNode.getComponent("DialogForm"),this.dialogFormTableBonus=this.tableBonusFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!0}),o(n,"showJackpot",function(){this.jackpotNode.active=!0}),o(n,"hideJackpot",function(){this.jackpotNode.active=!1}),o(n,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),o(n,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),o(n,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),o(n,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogSelectLine.showDialog(t)}),o(n,"hideSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogSelectLine.hideDialog(t)}),o(n,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),o(n,"showRechargeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRecharge.showDialog(t)}),o(n,"hideRechargeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRecharge.hideDialog(t)}),o(n,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),o(n,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),o(n,"showRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogRank.showDialog(t)}),o(n,"hideRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogRank.hideDialog(t)}),o(n,"showBonusFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTableBonus.showDialog(t)}),o(n,"hideBonusFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTableBonus.hideDialog(t)}),o(n,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),o(n,"showProcessingNode",function(){this.processingNode.active=!0}),o(n,"hideProcessingNode",function(){this.processingNode.active=!1}),n)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot2X:[function(t,e,i){"use strict";cc._RF.push(e,"f3891DZHRBG4a5CkeLjmhFS","Slot2X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot2=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot2:[function(t,e,i){"use strict";cc._RF.push(e,"fe87eTdr/9IRb2Yd8cOzNxa","Slot2");var n=t("../../base/BaseScene"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("../../helper/Config"),r=t("./Slot2Constant"),c=t("./Slot2UI"),h=t("./Slot2HandlerRequest"),l=t("./Slot2Bonus"),u=t("./Slot2Header"),d=t("./Slot2Lines"),m=t("./Slot2SelectLine"),f=t("./Slot2Label"),p=t("./Slot2Effect"),_=t("./Slot2Control"),S=t("./Slot2Reels"),g=t("./Slot2State"),C=t("./form/Slot2AutoSpinSetting"),N=t("./form/Slot2BonusResult"),E=t("../../prefab/form/Recharge"),T=t("./form/Slot2Rank"),I=t("./form/Slot2History"),v=t("../../prefab/mini-game/item/MiniGameXPer"),y=t("../../prefab/form/Tutorial"),R=(t("../../prefab/form/Setting"),t("../../prefab/form/LogOut"),t("../../prefab/News")),L=t("../../prefab/Toast"),B=t("../../ui/dialog/DialogMessage"),M=t("../../ui/Processing"),A=t("../../object/Audio"),P=t("../../object/Music");cc.Class({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,Slot2UI:c,Slot2Header:u,Slot2Bonus:l,Slot2Lines:d,Slot2SelectLine:m,Slot2Control:_,Slot2Label:f,Slot2Effect:p,Slot2Reels:S,Slot2Rank:T,Slot2AutoSpinSetting:C,Slot2BonusResult:N,Recharge:E,Slot2History:I,MiniGameXPer:v,Tutorial:y,News:R,Toast:L,DialogMessage:B,Processing:M,Audio:A,Music:P},onLoad:function(){this._super(),this.setSceneName(o.SCENE_GAME_SLOT_2),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot2State=g,this.Slot2State.init(this),this.Slot2HandlerRequest=h,this.Slot2HandlerRequest.init(this),this.Slot2UI.init(this),this.Slot2Header.init(this),this.Slot2Bonus.init(this),this.Slot2Lines.init(this),this.Slot2SelectLine.init(this),this.Slot2Control.init(this),this.Slot2Label.init(this),this.Slot2Effect.init(this),this.Slot2Reels.init(this),this.Slot2Rank.init(this),this.Slot2History.init(this),this.Slot2AutoSpinSetting.init(this),this.Slot2BonusResult.init(this),this.Recharge.init(this),this.updateMoneyGold(),this.Slot2State.setStop(),this.onResponseBind=this.Slot2HandlerRequest.onResponse.bind(this.Slot2HandlerRequest),this.onUserVariablesUpdateBind=this.Slot2HandlerRequest.onUserVariablesUpdate.bind(this.Slot2HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet()},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:5e7,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:5e7}},handleNews:function(t){this.News.addNews(t)},handleJackpot:function(t){var e=0,i=1;for(var n in this.info){var o=void 0;switch(this.info[n].spin_fee){case 100:this.info[n].jackpot=t.data[0],(o=t.data[3])&&(this.info[n].x_jackpot=o[0]);break;case 1e3:this.info[n].jackpot=t.data[1],o=t.data[3],t.data[3]&&(this.info[n].x_jackpot=o[1]);break;case 1e4:this.info[n].jackpot=t.data[2],(o=t.data[3])&&(this.info[n].x_jackpot=o[2])}this.info[n].spin_fee===this.bet&&(e=this.info[n].jackpot,i=this.info[n].x_jackpot)}this.isTest()||(this.Slot2Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){this.is_spin=!1;var e=t.data;this.Slot2Bonus.node.active&&this.Slot2UI.showContentGame(),this.Slot2State.isAutoSpin()||this.Slot2State.setSpinning(),this.initInfo(e),this.Slot2AutoSpinSetting.handleSpin(e),this.Slot2Label.handleSpin(e),this.Slot2Reels.handleSpin(e),this.Slot2History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.total_prize_amount=t.total_prize_amount,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.x_bonus=t.x_bonus,e.x_free=t.x_free},handleSpinDemo:function(t){this.is_spin=!1;var e=t.data;this.info&&(e.total_prize_amount>0?this.testInfo.x_prize++:this.testInfo.x_prize=1),e.win_type===r.WIN_TYPE_JACKPOT&&(e.win_prize=this.testInfo.jackpot),this.testInfo.is_free=e.is_free,this.Slot2State.setSpinning(),this.Slot2Label.handleSpinDemo(e),this.Slot2Reels.handleSpinDemo(e)},handleSpinBonus:function(t){this.is_spin=!1,this.Slot2Bonus.handleSpin(t)},handleSpinBonusDemo:function(t){this.is_spin=!1,this.Slot2Bonus.handleSpinDemo(t)},handleSpinFail:function(t){this.is_spin=!1,this.showToast(t.msg),this.Slot2State.setStop(),this.Slot2AutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleUpdateBigwin:function(t){var e=t.data;this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot2Form.Slot2JackpotForm.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot2Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot2Chat.addChat(e)}else this.Slot2Chat.addChatFail(t.msg)},handleGetTop:function(t){this.Slot2Rank.initDataRank(t)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t),this.setFistBet(t),this.Slot2Reels.initFirst(),this.Slot2Reels.reset(),this.Slot2SelectLine.initFirst()},initDataTest:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setIsTest(t),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot2Reels.initFirst(),this.Slot2Reels.reset(),this.Slot2SelectLine.initFirst()},initTestData:function(){this.Slot2Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot2Label.setMoney(this.testInfo.money),this.Slot2Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingNode(),this.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick(),this.Slot2UI.showRechargeFormNode()},spin:function(){if(this.line_player_choose=this.Slot2SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.is_spin){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};this.isTest()?(this.sendRequest.send(r.SPIN_DEMO,t),this.testInfo.money-=2e4,this.Slot2Label.setMoney(this.testInfo.money)):this.sendRequest.send(r.SPIN,t),this.is_spin=!0}}else this.showToast(s.SLOT2_NOT_SELECT_LINE),this.Slot2State.setStop(),this.Slot2AutoSpinSetting.stopAutoSpin(),this.Slot2AutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.Slot2Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();this.Slot2Label.setBet(t),this.initBetData(e),this.Slot2Label.setMoney(this.getMoney())},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_extra,n=this.Slot2SelectLine.getLineSelected().length;this.Slot2Label.setJackpot(e,!1),this.Slot2Label.initLast(n),i?this.Slot2UI.showSpinFreeButton(1):this.Slot2UI.showSpinButton()}},addBet:function(){if(!this.isCanChangeBet()||this.isTest()||this.isBonus())this.isBonus()||this.showToast(s.SLOT_NOT_CHANGE_BET);else for(var t=a.SLOT_BETS,e=0;e<t.length;e++)if(this.bet===t[e]){++e>=t.length&&(e=0),this.setBet(t[e]);break}},minusBet:function(){if(!this.isCanChangeBet()||this.isTest()||this.isBonus())this.isBonus()||this.showToast(s.SLOT_NOT_CHANGE_BET);else for(var t=a.SLOT_BETS,e=0;e<t.length;e++)if(this.bet===t[e]){--e<0&&(e=t.length-1),this.setBet(t[e],e);break}},getBet:function(){return this.bet},setFistBet:function(t){this.fistBet=t},getFistBet:function(){return this.fistBet},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot2Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee===this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot2State.isStop()},isAutoSpin:function(){return this.Slot2State.isAutoSpin()},showBonusGame:function(t){var e=t.remain_bonus;this.Slot2UI.showBonus(),this.Slot2Bonus.initData(t),this.Slot2Bonus.setRemainBonus(e)},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t){this.Slot2UI.showBonusResultForm(),this.Slot2BonusResult.setMoney(t)},hideBonusResult:function(){this.Slot2UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot2UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot2UI.hideDialogMessage()},showProcessingNode:function(){this.Slot2UI.showProcessingNode()},hideProcessingNode:function(){this.Slot2UI.hideProcessingNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Config":"Config","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Recharge":"Recharge","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","./Slot2Bonus":"Slot2Bonus","./Slot2Constant":"Slot2Constant","./Slot2Control":"Slot2Control","./Slot2Effect":"Slot2Effect","./Slot2HandlerRequest":"Slot2HandlerRequest","./Slot2Header":"Slot2Header","./Slot2Label":"Slot2Label","./Slot2Lines":"Slot2Lines","./Slot2Reels":"Slot2Reels","./Slot2SelectLine":"Slot2SelectLine","./Slot2State":"Slot2State","./Slot2UI":"Slot2UI","./form/Slot2AutoSpinSetting":"Slot2AutoSpinSetting","./form/Slot2BonusResult":"Slot2BonusResult","./form/Slot2History":"Slot2History","./form/Slot2Rank":"Slot2Rank"}],Slot3AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"bf7f8PJm3pABLafzFoPUYQ1","Slot3AutoSpinSetting");var n=t("../Slot3Constant"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm"),cc.auto=this},onEnable:function(){this.reset()},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(o.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(o.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(o.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot3.Slot3State.setAutoSpin(),this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin),this.Slot3.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot3.Slot3State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot3.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===n.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,n=!this.stopGameMaxWin||this.lastWin<this.maxWin,o=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&n&&o},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot3Constant":"Slot3Constant"}],Slot3BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"2007cbOxldNYabAUx1dCE58","Slot3BonusItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message"),s=t("../../scene/game-slot-3/Slot3Constant");cc.Class({extends:cc.Component,properties:{notOpenNode:cc.Node,openNode:cc.Node,bonusNode:cc.Node,moneyNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Bonus=t.Slot3Bonus},onLoad:function(){this.click=!1,this.open=!1},onClick:function(){this.Slot3.Slot3State.isAutoSpin()?this.Slot3.showToast(o.SLOT3_AUTOSPIN_NOT_CHANGE):this.click||this.Slot3Bonus.isStateStop()||(this.click=!0,this.Slot3Bonus.setStateStop(!0),this.Slot3Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.Slot3.Slot3State.isAutoSpin()&&(this.click||this.Slot3Bonus.isStateStop()||(this.click=!0,this.Slot3Bonus.setStateStop(!0),this.Slot3Bonus.onItemClick(this)))},openBox:function(t,e,i){this.open=!0,this.initType(t,i),e||this.Slot3Bonus.setStateStop(!1)},initType:function(t,e){switch(t.item_id){case s.BONUS_KEY:this.showBonus(t);break;case s.BONUS_MONEY:case s.BONUS_MINIGAME:this.setMoney(t)}},setMoney:function(t){var e=n.nFormatter(t,2).replace("k","K");this.moneyLabel.string=e,this.showMoney()},isOpen:function(){return this.open},isClick:function(){return this.click},showNormalBox:function(){this.hideAll(),this.notOpenNode.active=!0},showOpenBox:function(){this.hideAll(),this.openNode.active=!0},showMoney:function(){this.showOpenBox(),this.moneyNode.active=!0},hideMoney:function(){this.moneyNode.active=!1},showBonus:function(){this.hideAll(),this.bonusNode.active=!0},hideAll:function(){this.notOpenNode.active=!1,this.openNode.active=!1,this.bonusNode.active=!1,this.moneyNode.active=!1},reset:function(){this.click=!1,this.open=!1,this.moneyNode.active=!1,this.moneyLabel.node.active=!0,this.showNormalBox()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../scene/game-slot-3/Slot3Constant":"Slot3Constant","../../util/FormatUtil":"FormatUtil"}],Slot3BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"b4090SrndNIia0/0GdaHG/5","Slot3BonusResult");var n=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{moneyJackpotItem:n},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},setMoney:function(t){this.moneyJackpotItem.setMoney(t)}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot3Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"b2198/KQ/9GlbidN3Ct83nB","Slot3Bonus");t("../../util/FormatUtil");var n=t("../../util/RandomUtil"),o=(t("../../util/BrowserUtil"),t("../../helper/Config"),t("../../prefab/slot-3/Slot3BonusItem")),s=t("../../prefab/slot-3/Slot3MiniGameItem"),a=t("./Slot3Constant");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,listSlot3BonusItem:[o],listSlot3MiniGameItem:[s]},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI;for(var e=0;e<this.listSlot3BonusItem.length;e++)this.listSlot3BonusItem[e].init(t);for(var i=0;i<this.listSlot3MiniGameItem.length;i++)this.listSlot3MiniGameItem[i].init(t)},onLoad:function(){this.timeOutResult=null,this.openAllEggeTimeOut=null,this.openAutoSpinTimeOut=null,this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.x_bonus=this.data.number_key_start_bonus||1,this.remainBonus=10,this.setRemainBonus(this.remainBonus))},onEnable:function(){this.reset(),this.initContent(),this.Slot3UI.hideJackpot(),this.Slot3.Slot3State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot3UI.showJackpot(),this.Slot3UI.hideBonusResultForm(!1),this.data.is_free?this.Slot3.spin():this.Slot3.Slot3State.isAutoSpin()?this.Slot3.spin():this.Slot3.Slot3State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();console.log(t),t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.line,n=e.prize;this.openBonusItem(t,i,n)}},openBonusItem:function(t,e,i){switch(e){case a.BONUS_KEY:this.openItemBonusKey(t,i);break;case a.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case a.BONUS_MINIGAME:this.openItemBonusMiniGame(t,i)}},openItemBonusKey:function(t,e){this.x_bonus++,t.showBonus(),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e){this.remainBonus--,t.setMoney(e),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.remainBonus--,this.mini_game_bonus_prize=e,this.bonusItem=t,t.showOpenBox(),this.setRemainBonus(this.remainBonus),this.showMiniGame();for(var i=0;i<this.listSlot3MiniGameItem.length;i++)this.listSlot3MiniGameItem[i].reset();this.setStateStop(!1),this.Slot3.Slot3State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClick(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.bonusItem&&this.bonusItem.showMoney(this.mini_game_bonus_prize),t.openItem(this.mini_game_bonus_prize,!0),this.openMiniGameItemByMultipBet(10),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(20),this.setStateStop(!1),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t){var e=t*this.Slot3.getBet()*this.x_bonus,i=this.getItemMiniGameNotOpen();i&&i.openItem(e,!1)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.listSlot3MiniGameItem)this.listSlot3MiniGameItem[e].isOpen()||t.push(this.listSlot3MiniGameItem[e]);return t[n.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.listSlot3BonusItem)this.listSlot3BonusItem[e].isOpen()||this.listSlot3BonusItem[e].isClick()||t.push(this.listSlot3BonusItem[e]);console.log("listItemBonusNotOpen length: "+t.length);var i=n.getRandomInt(0,t.length-1);return console.log("randomIndex: "+i),t[i]},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setRemainBonus:function(t){void 0!==t&&(this.remainLabel.string=t)},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot3.showBonusResult(this.data.bonus_prize),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot3UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot3.Slot3State.isAutoSpin()&&(this.autoOpenBox(),this.minigameBonusNode.active&&(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)))},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.minigameBonusNode.active=!1,this.hideCloseMiniGame(),this.setStateStop(!1),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),this.listSlot3BonusItem)this.listSlot3BonusItem[t].reset();for(var e in this.listSlot3MiniGameItem)this.listSlot3MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/slot-3/Slot3BonusItem":"Slot3BonusItem","../../prefab/slot-3/Slot3MiniGameItem":"Slot3MiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant"}],Slot3Constant:[function(t,e,i){"use strict";cc._RF.push(e,"06095w927BAmIEg406aO5Vz","Slot3Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,NUM_IN_HISTORY:20,SLOT3_DISTANCE_TWO_ITEMS:136,SLOT3_SPEED_SPIN_CARD:2500,SLOT3_DELAY_SPIN:2e3,SLOT3_NUMBER_ITEM_IN_REEL:3,SLOT3_TOTAL_ITEM_IN_REEL:15,SLOT3_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT3_TIME_DELAY_FINISH:3e3,SLOT3_LIST_ICON:["A","B","C","D","E","F","G"],LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:4,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],Slot3Control:[function(t,e,i){"use strict";cc._RF.push(e,"49d8dCa4d9I6b6NGsRHUuEE","Slot3Control");var n=t("../../helper/Message"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onSpinClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isBonus()&&this.Slot3.isCanChangeBet()&&this.Slot3.spin()},onAutoSpinClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET):this.Slot3UI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot3.Audio.playClick(),this.Slot3.Slot3State.setStop(),this.Slot3.Slot3AutoSpinSetting.stopAutoSpin()},onSelectLineClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET):this.Slot3UI.showSelectLineFormNode()},onAddClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot3.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot3.setFistBet(t[e]),this.Slot3.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot3.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot3.setFistBet(t[e]),this.Slot3.setBet(t[e]);break}}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message"}],Slot3Effect:[function(t,e,i){"use strict";cc._RF.push(e,"a4f00sux51EdJAquHEpa8Fe","Slot3Effect");var n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,moreEffectNode:cc.Node,winNormalJackpotItem:n,moreMoneyJackpotItem:n,effectSkeleton:sp.Skeleton},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Music=t.Music},onLoad:function(){},showWinNormal:function(t,e){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.setMoneyWithoutAnimation(t/2),this.winNormalJackpotItem.setMoneyWithAnimation(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundBigWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showSuperBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showJackpot:function(t){this.hideAll(),this.effectSkeleton.node.x=-100,this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"nohu",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showBonus:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"bonus",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll(),this.node.runAction(cc.sequence(cc.delayTime(.75),cc.callFunc(function(){this.hideAll(),this.Slot3.Slot3Bonus.initData(t),this.Slot3.Slot3Bonus.setRemainBonus(t.remain_bonus),this.Slot3UI.showBonus()},this)))},this)))},showFreeSpin:function(){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"themluot",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll()},this)))},hideAll:function(){this.winNormalNode.active=!1,this.moreEffectNode.active=!1,this.moreMoneyJackpotItem.node.active=!1,this.effectSkeleton.node.x=0,this.effectSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot3Footer:[function(t,e,i){"use strict";cc._RF.push(e,"836145SmWdA77xHLujlsgqQ","Slot3Footer");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){},onPlayFreeClick:function(){this.Slot3.Audio.playClick()},onPlayClick:function(){this.Slot3.Audio.playClick()},onBonusClick:function(){this.Slot3.Audio.playClick()},onBackClick:function(){this.Slot3.Audio.playClick()},onShopClick:function(){this.Slot3.Audio.playClick()},onRankClick:function(){this.Slot3.Audio.playClick()},onTutorialClick:function(){this.Slot3.Audio.playClick()},onHelpClick:function(){this.Slot3.Audio.playClick()},onSettingClick:function(){this.Slot3.Audio.playClick()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot3HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"a9eeerhl2lMS400KCS3x6OX","Slot3HandlerRequest");var n=t("../../helper/Constant"),o=(t("../../helper/Message"),t("./Slot3Constant")),s={init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case n.MONEY:this.Slot3.updateMoneyGold();break;case n.GOLD:break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params,i=t.cmd;switch("MINIGAME"!==i&&n.NEWS,i){case n.NEWS:this.Slot3.handleNews(e);break;case o.JACKPOT:this.Slot3.handleJackpot(e);break;case o.SPIN:this.Slot3.handleSpin(e);break;case o.SPIN_DEMO:this.Slot3.handleSpinDemo(e);break;case o.SPIN_BONUS:this.Slot3.handleSpinBonus(e);break;case o.SPIN_BONUS_DEMO:this.Slot3.handleSpinBonusDemo(e);break;case o.SPIN_FAIL:this.Slot3.handleSpinFail(e);break;case o.UPDATE_BIGWIN:this.Slot3.handleUpdateBigwin(e);break;case o.GET_TOP:this.Slot3.handleGetTop(e),this.Slot3.MiniGame&&this.Slot3.MiniGame.handleRequest(e);break;case n.MINIGAME_REQUEST:this.Slot3.MiniGame&&this.Slot3.MiniGame.handleRequest(e);break;case n.REQUEST_RECHARGE_GOLD:this.Slot3.handleRechargeGold(e);break;case n.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot3.handleAlert(e);break;case n.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot3.handleNewMessage(e);break;case n.REQUEST_ACHIVEMENTED_QUEST:this.Slot3.handleAchivementedQuest(e);break;case n.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot3.handlePlusLuckyWheelFree(e);break;case n.REQUEST_CHAT_GET_CHAT:case n.REQUEST_CHAT_SEND_CHAT:break;case n.UPDATE_MINIGAME_FREE:this.Slot3.MiniGame&&this.Slot3.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot3Constant":"Slot3Constant"}],Slot3Header:[function(t,e,i){"use strict";cc._RF.push(e,"7a3047q9RRCKamSGB7Sxx0r","Slot3Header");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{freeSpinButtonNode:cc.Node,playSpinButton:cc.Node},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){},onPlayFreeClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(n.SLOT_NOT_TEST):(this.Slot3UI.showPlayButton(),this.Slot3.initDataTest())},onPlayClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(n.SLOT_NOT_CHANGE_SPIN):(this.Slot3UI.showTestButton(),this.Slot3.initDataBet(this.Slot3.getFistBet()))},onBonusClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showBonusTableFormNode()},onBackClick:function(){this.Slot3.Audio.playClick(),this.Slot3.isCanChangeBet()?this.Slot3.onBackClick():this.Slot3.showToast(n.SLOT_NOT_CHANGE_SPIN)},onShopClick:function(){this.Slot3.Audio.playClick(),this.Slot3.showDialogMessage(n.RECHARGE_MONEY_TITLE,"H\u1ec7 th\u1ed1ng n\u1ea1p th\u1ebb \u0111ang b\u1ea3o tr\xec")},onRankClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showRankFormNode()},onHistoryClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showHistoryFormNode()},onSettingClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showSettingFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot3HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"eb276dWEWFBIbyaB7TI2f4I","Slot3HistoryItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=n.numberWithCommas(t.total_prize_amount||t.win_prize),i=n.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}else this.node.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot3History:[function(t,e,i){"use strict";cc._RF.push(e,"6b524xMsnBG16gosNyVNae2","Slot3History");var n=t("../../../helper/Message"),o=t("../Slot3Constant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,slotHistoryItemPrefab:cc.Prefab,listScrollView:cc.ScrollView},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeOut=null)},initData:function(){this.listData&&0!==this.listData.length?(this.showListNode(),this.showData()):this.loadData()},handleSpin:function(t){this.hideLoadingNode(),this.initFirst();var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.total_prize_amount+=t.bonus_prize,e.spin_fee=this.Slot3.getBet(),e.total_bet_amount=this.Slot3.Slot3SelectLine.getLineSelected().length*this.Slot3.getBet(),this.listData.length>o.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){this.showData()}.bind(this),o.SLOT3_TIME_DELAY_FINISH))},showData:function(){if(this.listData.length>=o.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,e=0,i=this.listItem.length;e<i;e++)this.listItem[e].getComponent("Slot3HistoryItem").init(this.listData[t-e],e)}else for(var n=this.listData.length-1,s=n;s>=0;s--)this.listItem[n-s]?this.listItem[n-s].getComponent("Slot3HistoryItem").init(this.listData[s],s):this.instanceItem(this.listData[s],s)},loadData:function(){var t=this;this.showLoadingNode(),this.listScrollView.content.removeAllChildren(!0);var e={token:this.Slot3.getToken(),user_id:this.Slot3.getUserId()};this.xhr=this.Slot3.api.getHistorySlot3(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot3.showDialogMessage(n.HISTORY_TITLE,e.msg)})},initContent:function(t){this.initFirst(),this.showListNode();var e=t[0],i=0;i=e.length>o.NUM_IN_HISTORY?o.NUM_IN_HISTORY:e.length;for(var n=0;n<i;n++)this.instanceItem(e[n],n),this.listData.push(e[n])},instanceItem:function(t,e){var i=cc.instantiate(this.slotHistoryItemPrefab);return i.parent=this.listScrollView.content,i.getComponent("Slot3HistoryItem").init(t,e),this.listItem.push(i),i},showListNode:function(){this.hideLoadingNode(),this.listScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Message":"Message","../Slot3Constant":"Slot3Constant"}],Slot3Item:[function(t,e,i){"use strict";cc._RF.push(e,"d47b0KCaFVLybyLjnPkf4Rf","Slot3Item"),cc.Class({extends:cc.Component,properties:{slotSprite:cc.Sprite,listSprite:[cc.SpriteFrame],item1Node:cc.Node,item5Node:cc.Node},onLoad:function(){},init:function(t,e){this.index=t;var i=void 0;switch(this.hideAll(),this.index){case"A":this.item1Node.active=!0,i=0;break;case"B":this.slotSprite.node.active=!0,i=1;break;case"C":this.slotSprite.node.active=!0,i=3;break;case"D":this.item5Node.active=!0,i=4;break;case"E":this.slotSprite.node.active=!0,i=5;break;case"F":this.slotSprite.node.active=!0,i=6;break;case"G":this.slotSprite.node.active=!0,i=2;break;default:this.slotSprite.node.active=!0,i=2}this.slotSprite.spriteFrame=this.listSprite[i]},show:function(){this.showEffect()},isBonus:function(){},getIndex:function(){return this.index},showEffect:function(){this.slotSprite.node.getComponent(cc.Animation).play()},hideEffect:function(){this.slotSprite.node.getComponent(cc.Animation).stop(),this.slotSprite.node.scale=1,this.slotSprite.node.skewX=0,this.slotSprite.node.skewY=0},showPoint:function(){},hidePoint:function(){},showBonus:function(){},hideBonus:function(){},reset:function(){this.hideEffect()},hideAll:function(){this.slotSprite.node.active=!1,this.item1Node.active=!1,this.item5Node.active=!1}}),cc._RF.pop()},{}],Slot3Jackpot2Item:[function(t,e,i){"use strict";cc._RF.push(e,"4b09cKh21ZHjJN3n+CH2ozg","Slot3Jackpot2Item");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label,timeLabel:cc.Label},onLoad:function(){},init:function(t,e){t?(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3JackpotForm:[function(t,e,i){"use strict";cc._RF.push(e,"7a692L+IbxCaq5PnbSZLN6h","Slot3JackpotForm");t("../../../helper/Config"),t("../../../prefab/mini-game/item/JackpotItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{contentScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.jackpotItemPrefab);this.pool.put(e)}},onEnable:function(){},initData:function(t){t&&(this.data=t,this.initJackpot())},initJackpot:function(){this.putAllChipToPool(),this.contentScrollView.node.active=!0;var t=this.data.list_player_jackpot;for(var e in t=n.filterSameItemSlot(t)){this.instanceItem(t[e]).parent=this.contentScrollView.content}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.jackpotItemPrefab)),e.getComponent("Slot3JackpotItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.contentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],Slot3JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"e1b26cTAphBnq06KToB4pks","Slot3JackpotItem");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,betLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,blanceLabel:cc.Label},onLoad:function(){},init:function(t){this.prefixNickNameLabel.string=o.getServerID(t.server_id);var e=t.nick_name;t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var i=n.numberWithCommas(t.total_prize_amount),s=n.getStringDateByTimeStamp(t.created_at).replace(" ","\n"),a=n.numberWithCommas(t.spin_fee);this.timeLabel.string=s,this.nickNameLabel.string=e,this.blanceLabel.string=i,this.betLabel.string=a,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3Label:[function(t,e,i){"use strict";cc._RF.push(e,"36f43n/z7BCQI6jpDGAJ7yi","Slot3Label");t("../../helper/Message");var n=t("../../util/FormatUtil"),o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:o,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:cc.Label,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.timeOutSpin=null},onDestroy:function(){clearTimeout(this.timeOutSpin)},initLast:function(t){var e=this.Slot3.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.total_prize_amount||t.win_prize;this.lastMoneyWinLabel.string=n.numberWithCommas(e)}.bind(this),5e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot3.getTestInfo().money+=e,this.lastMoneyWinLabel.string=n.numberWithCommas(e),this.setMoney(this.Slot3.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=n.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=n.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.string=n.numberWithCommas(t)},setLastMoneyWin:function(t){this.lastMoneyWinLabel.string=n.numberWithCommas(t)},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot3Lines:[function(t,e,i){"use strict";cc._RF.push(e,"05e99EvyDhDe52MW+ww1Yi6","Slot3Lines");t("../../util/FormatUtil");var n=t("./items/Slot3NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[n],listLine:[cc.Node]},init:function(t){for(var e in this.Slot3=t,this.SlotUI=t.SlotUI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./items/Slot3NumberLineItem":"Slot3NumberLineItem"}],Slot3MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"79b387IgGZEbpTFartdoBFo","Slot3MiniGameItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{eggeSpriteNode:cc.Node,openSpriteNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Bonus=t.Slot3Bonus},onLoad:function(){this.isClicked=!1,this.is_open=!1,this.hideTimeout=null},onEnable:function(){this.reset()},onDisable:function(){},onClick:function(){this.isClicked||(this.isClicked=!0,this.Slot3Bonus.openItemMiniGame(this))},openItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOpen(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.eggeSpriteNode.active=!1,this.openSpriteNode.active=!0,e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=n.nFormatter(t,2).replace("k","K")):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=n.nFormatter(t,2).replace("k","K"))}.bind(this),500*o.SLOT3_TIME_OPEN_EGGE)},setClicked:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isClicked=t},getClicked:function(){return this.isClicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},reset:function(){clearTimeout(this.hideTimeout),this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.openSpriteNode.active=!1,this.eggeSpriteNode.active=!0,this.setClicked(!1),this.setOpen(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],Slot3NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"dbcdcs8WzVMFoekX+0Cqdnt","Slot3NumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabel:cc.Label,bgSprite:cc.Sprite,activeSpriteFrame:cc.SpriteFrame,normalSpriteFrame:cc.SpriteFrame},init:function(t){this.Slot3=t,this.Slot3Lines=t.Slot3Lines,this.line=this.numberLineLabel.string},onLoad:function(){this.hideNumberLine()},showNumberLine:function(){this.bgSprite.enabled=!0,this.numberLineLabel.node.active=!0},hideNumberLine:function(){this.bgSprite.enabled=!1,this.numberLineLabel.node.active=!1}}),cc._RF.pop()},{}],Slot3Rank2Item:[function(t,e,i){"use strict";cc._RF.push(e,"8359fhCCvlB/basvs0KBh9p","Slot3Rank2Item");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3Rank2:[function(t,e,i){"use strict";cc._RF.push(e,"80961PhWnBN07hP1O8WqY1p","Slot3Rank2");t("../../../helper/Message");var n=t("../../../util/FormatUtil"),o=t("../Slot3Constant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,listScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotScrollView:cc.ScrollView},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.data=null,this.onJackpotClick(),this.Slot3.sendRequest.send(o.GET_TOP)},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOffButtonNode.active=!1,this.rankOnButtonNode.active=!0,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOffButtonNode.active=!1,this.jackpotOnButtonNode.active=!0,this.jackpotNode.active=!0},initDataRank:function(t){var e=t.data,i=[];i[0]=e[2],i[1]=e[0];var n=[];n[0]=e[3],n[1]=e[1],this.data=[],this.data[0]=i,this.data[1]=n,this.initData()},initData:function(){if(this.showListNode(),this.listRank||(this.listRank=[],this.listJackpot=[],this.listScrollView.content.removeAllChildren(!0),this.jackpotScrollView.content.removeAllChildren(!0)),this.data){var t=this.data[0]?this.data[0]:this.data[1];if(t[0])for(var e=t[0],i=(e=n.filterSameItemSlot(e)).length>30?30:e.length,o=0;o<i;o++)if(this.listRank[o])this.listRank[o].getComponent("Slot3Rank2Item").init(e[o],o);else{var s=cc.instantiate(this.rankItemPrefab);s.parent=this.listScrollView.content,s.getComponent("Slot3Rank2Item").init(e[o],o),this.listRank.push(s)}if(t[1])for(var a=n.sortDataTimeByTime(t[1]),r=(a=n.filterSameItemSlot(a)).length>30?30:a.length,c=0;c<r;c++)if(this.listJackpot[c])this.listJackpot[c].getComponent("Slot3Jackpot2Item").init(a[c],c);else{var h=cc.instantiate(this.jackpotItemPrefab);h.parent=this.jackpotScrollView.content,h.getComponent("Slot3Jackpot2Item").init(a[c],c),this.listJackpot.push(h)}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.jackpotOffButtonNode.active=!0,this.rankOffButtonNode.active=!0,this.jackpotOnButtonNode.active=!1,this.rankOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot3Constant":"Slot3Constant"}],Slot3RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"86b70m1MVxAwrMsi63Wq3JF","Slot3RankItem");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{rankRichtext:cc.RichText},onLoad:function(){},init:function(t){var e="";if(t.amount){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var i=t.nick_name,s=n.numberWithCommas(t.amount),a=Math.round(new Date/1e3)-t.created_at,r=void 0;r=a>86400?Math.round(a/86400)+" ng\xe0y":a>3600?Math.round(a/3600)+" gi\u1edd":a>60?Math.round(a/60)+" ph\xfat":a+" gi\xe2y",e=String.format(o.SLOT3_RANK_2,i,s,r)}if(t.spin_fee){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var c=t.nick_name,h=n.numberWithCommas(t.total_prize_amount),l=n.getStringDateByTimeStamp(t.created_at);e=String.format(o.SLOT3_RANK_1,c,h,l)}this.rankRichtext.string=e}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot3Reels:[function(t,e,i){"use strict";cc._RF.push(e,"4da557Ju55C46FcxzIBrZF3","Slot3Reels");t("../../util/RandomUtil");var n=t("../../helper/Config"),o=t("../../util/FormatUtil"),s=t("./Slot3Reel"),a=t("./Slot3Constant");cc.Class({extends:cc.Component,properties:{slotReels:[s],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Lines=t.Slot3Lines,this.Slot3SelectLine=t.Slot3SelectLine,this.Slot3Effect=t.Slot3Effect,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.win_prize,o=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,n,i,o,c,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.win_prize,o=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,n,i,o,c,t)},spinReels:function(t,e,i,n,o,s,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,a.SLOT3_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,a.SLOT3_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,a.SLOT3_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,a.SLOT3_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,a.SLOT3_TOTAL_ITEM_IN_REEL+8,!0,e,i,n,o,s,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot3Lines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var n=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[n])}}},showEffectItem:function(t){var e=t.parent.convertToNodeSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),n=cc.instantiate(this.itemPrefab);n.getComponent("Slot3Item").init(t.getComponent("Slot3Item").getIndex()),n.getComponent("Slot3Item").showEffect(),n.setPosition(i),n.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.Slot3Lines.showLine(t),this.Slot3Lines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=a.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,n=e.length;i<n;i++){var o=this.listItemNodeSameDataDisplay[e[i]-1];o&&o.getComponent("Slot3Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot3Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],n=0;n<a.SLOT3_NUMBER_ITEM_IN_REEL;n++){var o=this.slotReels.length*n+e;i.push(t[o])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var n=t[i].line-1,s=a.LIST_INDEX_NUMBER_IN_LINE[n];e=e.concat(s)}return o.deDuplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot3Lines.reset()},getTimeEffect:function(t){return t===a.WIN_TYPE_NORMAL||t===a.WIN_TYPE_ZERO?1e3*n.TIME_WIN_TYPE_NORMAL:t===a.WIN_TYPE_BIG_WIN||t===a.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_WIN_TYPE_BIGWIN:t===a.WIN_TYPE_JACKPOT?1e3*n.TIME_WIN_TYPE_JACKPOT:1e3*n.TIME_WIN_TYPE_NORMAL},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)},getMoney:function(t,e){switch(t){case 1:return this.showJackpot(e);case 4:return this.showApple(e);case 5:return this.showClover(e);case 6:return this.showStar(e);case 7:return this.showBell(e);case 8:return this.showSeven(e);case 11:return this.showBonus(e)}},showJackpot:function(t){switch(t){case 5:return"Jackpot";case 4:return"Kho b\xe1u x5";case 3:return"Kho b\xe1u x1"}},showSeven:function(t){switch(t){case 5:return 5e3;case 4:return 25}},showBonus:function(t){switch(t){case 5:return"Mi\u1ec5n ph\xed x15";case 4:return"Mi\u1ec5n ph\xed x5";case 3:return"Mi\u1ec5n ph\xed x1"}},showBell:function(t){switch(t){case 5:return 1e3;case 4:return 20}},showStar:function(t){switch(t){case 5:return 200;case 4:return 15;case 3:return 3}},showClover:function(t){switch(t){case 5:return 80;case 4:return 10}},showApple:function(t){switch(t){case 5:return 20;case 4:return 6;case 3:return 2}}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant","./Slot3Reel":"Slot3Reel"}],Slot3Reel:[function(t,e,i){"use strict";cc._RF.push(e,"ce639Zi/qFMT50cEakXl/5q","Slot3Reel");var n=t("../../util/RandomUtil"),o=(t("../../helper/Config"),t("./Slot3Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,numberItems:0,animation:cc.Animation},init:function(t,e){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Reels=t.Slot3Reels,this.Slot3Lines=t.Slot3Lines,this.Slot3Effect=t.Slot3Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t,e,i,n,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=this.instanceItem(u);m.setPosition(0,(l+1)*o.SLOT3_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot3Reels.setItemListPrizeByIndex(m,d)}var f=(e-1)*o.SLOT3_DISTANCE_TWO_ITEMS,p=f/o.SLOT3_SPEED_SPIN_CARD,_=cc.moveTo(p,this.node.x,-f).easing(cc.easeInOut(3)),S=cc.callFunc(function(){i&&(this.Slot3.Slot3State.isAutoSpin()||this.Slot3.Slot3State.setFinish(),this.Slot3Reels.showAllEffectItems(),this.showEffectPrize(n,a,r,c,s,h))},this),g=cc.delayTime(.2);this.node.runAction(cc.sequence(_,g,S))},showEffectPrize:function(t,e,i,n,s,a){switch(t){case o.WIN_TYPE_NORMAL:case o.WIN_TYPE_BIG_WIN:this.Slot3.Slot3Effect.showWinNormal(s);break;case o.WIN_TYPE_SUPER_BIG_WIN:this.Slot3.Slot3Effect.showBigWin(s);break;case o.WIN_TYPE_JACKPOT:this.Slot3.Slot3Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==o.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.Slot3Effect.hideAll(),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()&&!e?this.Slot3UI.showSpinDisableButton():this.Slot3UI.showSpinButton(),i?((this.isNewSpinFree()||n>=this.getNumberSpinFree())&&this.Slot3.Slot3Effect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(n)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot3Effect.showBonus(a):this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?(this.Slot3.Slot3Effect.hideAll(),this.Slot3.spin()):(this.Slot3.Slot3State.setStop(),i&&(this.Slot3UI.showSpinFreeButton(n),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot3.Slot3Effect.hideAll(),this.Slot3.spin()}.bind(this),2e3))),this.Slot3Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot3Effect.showBonus(a),i&&(this.isNewSpinFree()||n>=this.getNumberSpinFree())&&this.Slot3.Slot3Effect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.Slot3Effect.hideAll(),i?(this.Slot3.spin(),this.setSpinFree(!0),this.setNumberSpinFree(n)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?e||this.Slot3.spin():this.Slot3.Slot3State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot3.Slot3Effect.hideAll(),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.spin()}.bind(this),1e3)):this.Slot3.Slot3State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<o.SLOT3_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=n.getRandomInt(0,o.SLOT3_LIST_ICON.length-1);return o.SLOT3_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*o.SLOT3_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot3Item").reset(),e.getComponent("Slot3Item").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},getTimeEffect:function(t){return t===o.WIN_TYPE_NORMAL||t===o.WIN_TYPE_ZERO||t===o.WIN_TYPE_BIG_WIN?1e3*o.TIME_SHOW_WIN_NORMAL:t===o.WIN_TYPE_SUPER_BIG_WIN?1e3*o.TIME_SHOW_BIGWIN:t===o.WIN_TYPE_JACKPOT?1e3*o.TIME_SHOW_JACKPOT:1e3*o.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant"}],Slot3SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"53131dK/TBNKLVMlIS2Jk5R","Slot3SelectLine");var n=t("./items/Slot3SelectNumberLineItem"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[n]},init:function(t){for(var e in this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Label=t.Slot3Label,this.Slot3Lines=t.Slot3Lines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0,this.selectAllItem()},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot3Label.initLast(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot3Lines.showNumberLines(t)},showLines:function(t){this.Slot3Lines.showLines(t)},showLine:function(t){this.Slot3Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest()?this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../helper/Message":"Message","./items/Slot3SelectNumberLineItem":"Slot3SelectNumberLineItem"}],Slot3SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"0bc81+t2Y5PDpKj636kBumi","Slot3SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot3=t,this.Slot3SelectLine=t.Slot3SelectLine},onLoad:function(){this.selected=this.onSelectButtonNode.active},onClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.Slot3SelectLine.itemIsSelected(),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot3SelectLine.setLineItemUnSelected(),this.Slot3SelectLine.itemIsSelected(),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot3State:[function(t,e,i){"use strict";cc._RF.push(e,"b9978oRz6FHpIB7usSf2eDz","Slot3State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3SelectLine=t.Slot3SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinButton(),this.Slot3UI.showAutoSpinButton(),this.Slot3SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showAutoSpinDisableButton(),this.Slot3SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showAutoSpinDisableButton(),this.Slot3SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showStopAutoSpinButton(),this.Slot3SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot3.Slot3Reels.hideEffectItem(),this.Slot3.Slot3Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot3UI:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"d39ceXJQLBGhZKzEIfVLTZp","Slot3UI");var s=t("../../util/FormatUtil");cc.Class((o(n={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,jackpotNode:cc.Node,idSpinNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,historyFormNode:cc.Node,rankFormNode:cc.Node,bonusTableFormNode:cc.Node,selectLineFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},init:function(t){this.Slot3=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormHistory=this.historyFormNode.getComponent("DialogForm"),this.dialogFormRank=this.rankFormNode.getComponent("DialogForm"),this.dialogFormBonusTable=this.bonusTableFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0,this.idSpinNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0,this.idSpinNode.active=!1},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!0}),o(n,"showJackpot",function(){this.jackpotNode.active=!0}),o(n,"hideJackpot",function(){this.jackpotNode.active=!1}),o(n,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),o(n,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),o(n,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)}),o(n,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),o(n,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),o(n,"showRechargeFormNode",function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),o(n,"hideRechargeFormNode",function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),o(n,"showRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.showDialog(t)}),o(n,"hideRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.hideDialog(t)}),o(n,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),o(n,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),o(n,"showBonusTableFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonusTable.showDialog(t)}),o(n,"hideBonusTableFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonusTable.hideDialog(t)}),o(n,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),o(n,"showProcessingNode",function(){this.processingNode.active=!0}),o(n,"hideProcessingNode",function(){this.processingNode.active=!1}),n)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot3X:[function(t,e,i){"use strict";cc._RF.push(e,"bc772z5qPpJqaQ2eHsDGxpO","Slot3X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot3=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot3:[function(t,e,i){"use strict";cc._RF.push(e,"57d01y+RL9NHLCfjiFSAhuj","Slot3");var n=t("../../base/BaseScene"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./Slot3UI"),r=t("./Slot3Header"),c=t("./Slot3Control"),h=t("./Slot3Label"),l=t("./Slot3Reels"),u=t("./Slot3Lines"),d=t("./Slot3Effect"),m=t("./Slot3Bonus"),f=t("./Slot3Constant"),p=t("./Slot3State"),_=t("./Slot3HandlerRequest"),S=t("./Slot3SelectLine"),g=t("./form/Slot3AutoSpinSetting"),C=t("./form/Slot3BonusResult"),N=t("./form/Slot3Rank2"),E=t("./form/Slot3History"),T=t("../../prefab/mini-game/item/MiniGameXPer"),I=t("../../prefab/form/Tutorial"),v=t("../../prefab/News"),y=t("../../prefab/Toast"),R=t("../../ui/dialog/DialogMessage"),L=t("../../ui/Processing"),B=t("../../object/Audio"),M=t("../../object/Music");cc.Class({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,Slot3UI:a,Slot3Header:r,Slot3Control:c,Slot3Label:h,Slot3SelectLine:S,Slot3Reels:l,Slot3Effect:d,Slot3Lines:u,Slot3Bonus:m,MiniGameXPer:T,Slot3Rank2:N,Slot3History:E,Slot3AutoSpinSetting:g,Slot3BonusResult:C,Tutorial:I,News:v,Toast:y,DialogMessage:R,Processing:L,Audio:B,Music:M},onLoad:function(){this._super(),this.setSceneName(o.SCENE_GAME_SLOT_3),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot3State=p,this.Slot3HandlerRequest=_,this.Slot3State.init(this),this.Slot3HandlerRequest.init(this),this.Slot3UI.init(this),this.Slot3Header.init(this),this.Slot3Control.init(this),this.Slot3Label.init(this),this.Slot3SelectLine.init(this),this.Slot3Reels.init(this),this.Slot3Effect.init(this),this.Slot3Lines.init(this),this.Slot3Bonus.init(this),this.Slot3Rank2.init(this),this.Slot3History.init(this),this.Slot3AutoSpinSetting.init(this),this.Slot3BonusResult.init(this),this.updateMoneyGold(),this.Slot3State.setStop(),this.onResponseBind=this.Slot3HandlerRequest.onResponse.bind(this.Slot3HandlerRequest),this.onUserVariablesUpdateBind=this.Slot3HandlerRequest.onUserVariablesUpdate.bind(this.Slot3HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet(),this.Slot3UI.showContentGame(),this.Slot3SelectLine.selectAllItem()},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:5e7,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:5e7}},handleNews:function(t){this.News.addNews(t)},handleJackpot:function(t){var e=0,i=1;for(var n in this.info){var o=void 0;switch(this.info[n].spin_fee){case 100:this.info[n].jackpot=t.data[0],(o=t.data[3])&&(this.info[n].x_jackpot=o[0]);break;case 1e3:this.info[n].jackpot=t.data[1],o=t.data[3],t.data[3]&&(this.info[n].x_jackpot=o[1]);break;case 1e4:this.info[n].jackpot=t.data[2],(o=t.data[3])&&(this.info[n].x_jackpot=o[2])}this.info[n].spin_fee===this.bet&&(e=this.info[n].jackpot,i=this.info[n].x_jackpot)}this.isTest()||(this.Slot3Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.is_spin=!1,this.Slot3Bonus.node.active&&this.Slot3UI.showContentGame(),this.Slot3State.isAutoSpin()||this.Slot3State.setSpinning(),this.initInfo(e),this.Slot3AutoSpinSetting.handleSpin(e),this.Slot3Label.handleSpin(e),this.Slot3Reels.handleSpin(e),this.Slot3History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.total_prize_amount=t.total_prize_amount||t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.x_bonus=t.x_bonus,e.x_free=t.x_free},handleSpinDemo:function(t){this.is_spin=!1;var e=t.data;e.win_type===f.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.initInfoTest(e),this.Slot3State.setSpinning(),this.Slot3Label.handleSpinDemo(e),this.Slot3Reels.handleSpinDemo(e)},initInfoTest:function(t){this.getTestInfo().is_free=t.is_free},handleSpinBonus:function(t){this.is_spin=!1,this.Slot3Bonus.handleSpin(t)},handleSpinBonusDemo:function(t){this.is_spin=!1,this.Slot3Bonus.handleSpinDemo(t)},handleSpinFail:function(t){this.is_spin=!1,this.showToast(t.msg),this.Slot3State.setStop(),this.Slot3AutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot},handleGetTop:function(t){this.Slot3Rank2.initDataRank(t)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot3Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot3Chat.addChat(e)}else this.Slot3Chat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t),this.setFistBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot3Reels.reset(),this.Slot3SelectLine.selectAllItem()},initTestData:function(){this.Slot3Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot3Label.setMoney(this.testInfo.money),this.Slot3Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingNode(),this.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick()},spin:function(){if(this.line_player_choose=this.Slot3SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.is_spin){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};this.isTest()?(this.sendRequest.send(f.SPIN_DEMO,t),this.testInfo.money-=2e4,this.Slot3Label.setMoney(this.testInfo.money)):this.sendRequest.send(f.SPIN,t),this.is_spin=!0}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.Slot3State.setStop(),this.Slot3AutoSpinSetting.stopAutoSpin(),this.Slot3AutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.Slot3Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();if(this.Slot3Label.setBet(t),this.initBetData(e),this.Slot3Label.setMoney(this.getMoney()),e)e.x_jackpot&&e.x_jackpot},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_extra,n=this.Slot3SelectLine.getLineSelected().length;this.Slot3Label.setJackpot(e,!1),this.Slot3Label.initLast(n),i?this.Slot3UI.showSpinFreeButton(1):this.Slot3UI.showSpinButton()}},getBet:function(){return this.bet},setFistBet:function(t){this.fistBet=t},getFistBet:function(){return this.fistBet},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot3Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee===this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot3State.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t){this.Slot3UI.showBonusResultForm(),this.Slot3BonusResult.setMoney(t)},hideBonusResult:function(){this.Slot3UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},isAutoSpin:function(){return this.Slot3State.isAutoSpin()},showDialogMessage:function(t,e){this.Slot3UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot3UI.hideDialogMessage()},showProcessingNode:function(){this.Slot3UI.showProcessingNode()},hideProcessingNode:function(){this.Slot3UI.hideProcessingNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:4e3,display_slot_data:["D","F","A","E","E","E","A","F","D","A","E","E","C","A","E"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:400},t.list_bonus_prize[1]={line:1,prize:400},t.list_bonus_prize[2]={line:2,prize:0},t.list_bonus_prize[3]={line:1,prize:400},t.list_bonus_prize[4]={line:1,prize:400},t.list_bonus_prize[5]={line:1,prize:400},t.list_bonus_prize[6]={line:1,prize:400},t.list_bonus_prize[7]={line:1,prize:400},t.list_bonus_prize[8]={line:0,prize:1},t.list_bonus_prize[9]={line:1,prize:400},t.list_bonus_prize[10]={line:1,prize:400},t.list_line_bonus=[{line:4,prize:1}],t.list_line_free=[],t.list_line_prize=[],t.list_line_prize[0]={line:3,prize:200},t.list_line_prize[1]={line:7,prize:200},t.list_line_prize[2]={line:9,prize:200},t.list_line_prize[3]={line:13,prize:200},t.list_line_prize[4]={line:19,prize:200},t.money_type=0,t.number_key_start_bonus=1,t.remain_free=0,t.spin_id=314,t.win_prize=1800,t.win_type=1,t},dataTestFree:function(){var t={bonus_prize:0,display_slot_data:["G","C","F","G","D","F","E","D","G","E","C","F","G","D","C"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[],list_line_bonus:[],list_line_free:[],list_line_prize:[{line:1,prize:200}],money_type:0,number_key_start_bonus:0,remain_free:1,spin_id:166,win_prize:0,win_type:0};return t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","./Slot3Bonus":"Slot3Bonus","./Slot3Constant":"Slot3Constant","./Slot3Control":"Slot3Control","./Slot3Effect":"Slot3Effect","./Slot3HandlerRequest":"Slot3HandlerRequest","./Slot3Header":"Slot3Header","./Slot3Label":"Slot3Label","./Slot3Lines":"Slot3Lines","./Slot3Reels":"Slot3Reels","./Slot3SelectLine":"Slot3SelectLine","./Slot3State":"Slot3State","./Slot3UI":"Slot3UI","./form/Slot3AutoSpinSetting":"Slot3AutoSpinSetting","./form/Slot3BonusResult":"Slot3BonusResult","./form/Slot3History":"Slot3History","./form/Slot3Rank2":"Slot3Rank2"}],Slot4AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"595e9GxlJFOvrRRTpwGMuoU","Slot4AutoSpinSetting");var n=t("../Slot4Constant"),o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.Slot4.DialogMessage.node.active&&!this.Slot4.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=n.SLOT4_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(o.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(o.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(o.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot4.Slot4State.setAutoSpin(),this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin),this.Slot4.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot4.Slot4State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot4.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===n.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,n=!this.stopGameMaxWin||this.lastWin<this.maxWin,o=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&n&&o},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../Slot4Constant":"Slot4Constant"}],Slot4BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"51825v/pIlPVJ/XUEx0qmoq","Slot4BonusItem");var n=t("../../util/FormatUtil"),o=(t("../../helper/Config"),t("../../util/BrowserUtil")),s=t("../../helper/Message");t("../../scene/game-slot-4/Slot4Constant");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,keyNode:cc.Node,minigameNode:cc.Node,moneyNode:cc.Node,moneyMiniGameLabel:cc.Label,moneyLabel:cc.Label},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Bonus=t.Slot4Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.onMouseEnter=function(){t.isOpen()||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot4.Slot4State.isAutoSpin()?this.Slot4.showToast(s.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.Slot4Bonus.isStateStop()||(this.setClicked(!0),this.Slot4Bonus.setStateStop(!0),this.Slot4Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.Slot4Bonus.isStateStop()||(this.setClicked(!0),this.Slot4Bonus.setStateStop(!0),this.Slot4Bonus.onItemClick(this))},showKey:function(){this.hideAll(),this.setOpen(!0),this.keyNode.active=!0},showOpenMiniGame:function(){this.hideAll(),this.setOpen(!0),this.minigameNode.active=!0,this.moneyMiniGameLabel.node.active=!1},showMoneyMiniGame:function(t){this.setOpen(!0),this.moneyMiniGameLabel.node.active=!0,this.moneyMiniGameLabel.string=n.numberWithCommas(t)},showMoney:function(t){this.hideAll(),this.setOpen(!0),this.moneyNode.active=!0,this.moneyLabel.string=n.numberWithCommas(t)},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},hideAll:function(){this.defaultNode.active=!0,this.minigameNode.active=!1,this.keyNode.active=!1,this.moneyNode.active=!1,this.moneyMiniGameLabel.node.active=!1},reset:function(){this.hideAll(),this.setOpen(!1),this.setClicked(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../scene/game-slot-4/Slot4Constant":"Slot4Constant","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot4BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"5c00f/M0rxLcYW9InM+11b+","Slot4BonusResult");var n=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{moneyJackpotItem:n},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){this.moneyJackpotItem.setMoneyWithoutAnimation(100),cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.Slot4.DialogMessage.node.active&&!this.Slot4.Processing.node.active},setMoney:function(t){this.moneyJackpotItem.setMoneyWithoutAnimation(t)}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot4Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"76f63ub6flCSYS0+zVJS+Td","Slot4Bonus");var n=t("../../util/RandomUtil"),o=t("../../prefab/slot-4/Slot4BonusItem"),s=t("./Slot4Constant"),a=t("../../prefab/slot-4/Slot4MiniGameItem");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,slot4BonusItem:[o],slot4MiniGameItem:[a]},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI;for(var e=0;e<this.slot4BonusItem.length;e++)this.slot4BonusItem[e].init(t);for(var i=0;i<this.slot4MiniGameItem.length;i++)this.slot4MiniGameItem[i].init(t)},onLoad:function(){this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.x_bonus=this.data.number_key_start_bonus||1,this.remainBonus=10,this.setRemainBonus(this.remainBonus))},onEnable:function(){this.reset(),this.initContent(),this.Slot4.Slot4State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot4UI.hideBonusResultForm(!1),this.data.is_free?this.Slot4.spin():this.Slot4.Slot4State.isAutoSpin()?this.Slot4.spin():this.Slot4.Slot4State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.line,n=e.prize;this.openBonusItem(t,i,n)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e,i){switch(e){case s.BONUS_KEY:this.openItemBonusKey(t,i);break;case s.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case s.BONUS_MINIGAME:this.openItemBonusMiniGame(t,i)}},openItemBonusKey:function(t,e){this.x_bonus++,t.showKey(),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e){this.remainBonus--,t.showMoney(e),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.remainBonus--,this.mini_game_bonus_prize=e,this.bonusItemMiniGame=t,t.showOpenMiniGame(),this.setRemainBonus(this.remainBonus),this.showMiniGame();for(var i=0;i<this.slot4MiniGameItem.length;i++)this.slot4MiniGameItem[i].reset();this.setStateStop(!1),this.Slot4.Slot4State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.bonusItemMiniGame&&this.bonusItemMiniGame.showMoneyMiniGame(this.mini_game_bonus_prize),t.openItem(this.mini_game_bonus_prize,!0),this.openMiniGameItemByMultipBet(10),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(20),this.setStateStop(!1),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t){var e=t*this.Slot4.getBet()*this.x_bonus,i=this.getItemMiniGameNotOpen();i&&i.openItem(e)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.slot4MiniGameItem)this.slot4MiniGameItem[e].isOpen()||this.slot4MiniGameItem[e].isClicked()||t.push(this.slot4MiniGameItem[e]);return t[n.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.slot4BonusItem)this.slot4BonusItem[e].isOpen()||this.slot4BonusItem[e].isClicked()||t.push(this.slot4BonusItem[e]);return t[n.getRandomInt(0,t.length-1)]},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setRemainBonus:function(t){void 0!==t&&(this.remainLabel.string=t)},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot4.showBonusResult(this.data.bonus_prize),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot4UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot4.Slot4State.isAutoSpin()&&(this.autoOpenBox(),this.minigameBonusNode.active&&(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)))},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.setStateStop(!1),this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.hideCloseMiniGame(),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),this.slot4BonusItem)this.slot4BonusItem[t].reset();for(var e in this.slot4MiniGameItem)this.slot4MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../prefab/slot-4/Slot4BonusItem":"Slot4BonusItem","../../prefab/slot-4/Slot4MiniGameItem":"Slot4MiniGameItem","../../util/RandomUtil":"RandomUtil","./Slot4Constant":"Slot4Constant"}],Slot4Constant:[function(t,e,i){"use strict";cc._RF.push(e,"a50aefhdxFGBagOTOAhZ4dH","Slot4Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,SLOT4_DISTANCE_TWO_ITEMS:156,SLOT4_SPEED_SPIN_CARD:1500,SLOT4_DELAY_SPIN:2e3,SLOT4_NUMBER_ITEM_IN_REEL:3,SLOT4_TOTAL_ITEM_IN_REEL:15,SLOT4_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT4_TIME_DELAY_FINISH:3e3,SLOT4_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT4_LIST_ICON:["A","B","C","D","E","F","G"],NUM_IN_HISTORY:30,LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:4,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],Slot4Control:[function(t,e,i){"use strict";cc._RF.push(e,"50b78s6sHxO076CEAnwbLoO","Slot4Control");var n=t("../../helper/Message"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onSpinClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isBonus()&&this.Slot4.isCanChangeBet()&&this.Slot4.spin()},onAutoSpinClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET):this.Slot4UI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot4.Audio.playClick(),this.Slot4.Slot4State.setStop(),this.Slot4.Slot4AutoSpinSetting.stopAutoSpin()},onPlayClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(n.SLOT_NOT_CHANGE_SPIN):(this.Slot4UI.showTestButton(),this.Slot4.initDataBet(this.Slot4.getFistBet()))},onTestClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(n.SLOT_NOT_TEST):(this.Slot4UI.showPlayButton(),this.Slot4.initDataTest())},onAddClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot4.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot4.setFistBet(t[e]),this.Slot4.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot4.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot4.setFistBet(t[e]),this.Slot4.setBet(t[e]);break}},onSelectLineClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET):this.Slot4UI.showSelectLineFormNode()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message"}],Slot4Effect:[function(t,e,i){"use strict";cc._RF.push(e,"bdb8f/eEpBEe7ZzAZkJL8qJ","Slot4Effect");var n=t("../../prefab/mini-game/item/JackpotItem"),o=t("./Slot4Constant");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bonusEffectNode:cc.Node,freeSpinEffectNode:cc.Node,bigwinEffectNode:cc.Node,jackpotEffectNode:cc.Node,winNormalJackpotItem:n,moneyLabelJackpotItem:n,jackpotLabelJackpotItem:n,bonusSkeleton:sp.Skeleton,freeSpinSkeletion:sp.Skeleton,bigwinSkeleton:sp.Skeleton,jackpotSkeleton:sp.Skeleton},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Music=t.Music},onLoad:function(){},onDestroy:function(){},showWinNormal:function(t){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.node.active=!0,this.winNormalJackpotItem.setMoney(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.bigwinEffectNode.active=!0,this.bigwinSkeleton.setAnimation(0,"thanglon",!0),this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moneyLabelJackpotItem.node.active=!0,this.moneyLabelJackpotItem.setMoney(t)},this),cc.delayTime(o.TIME_SHOW_BIGWIN),cc.callFunc(function(){this.hideAll()},this)))},showJackpot:function(t){this.hideAll(),this.jackpotEffectNode.active=!0,this.jackpotSkeleton.setAnimation(0,"nohu",!0),this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotLabelJackpotItem.node.active=!0,this.jackpotLabelJackpotItem.setMoney(t)},this)))},showBonus:function(t){this.hideAll(),this.bonusEffectNode.active=!0,this.bonusSkeleton.setAnimation(0,"bonus",!0),this.node.runAction(cc.sequence(cc.delayTime(o.TIME_SHOW_BONUS),cc.callFunc(function(){this.hideAll(),this.Slot4.Slot4Bonus.initData(t),this.Slot4UI.showBonus()},this)))},showFreeSpin:function(){this.hideAll(),this.freeSpinEffectNode.active=!0,this.freeSpinSkeletion.setAnimation(0,"themluot",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(o.TIME_SHOW_FREESPIN),cc.callFunc(function(){this.hideAll()},this)))},hideAll:function(){this.winNormalNode.active=!1,this.bonusEffectNode.active=!1,this.freeSpinEffectNode.active=!1,this.bigwinEffectNode.active=!1,this.jackpotEffectNode.active=!1,this.jackpotLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.node.active=!1,this.moneyLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.setMoneyWithoutAnimation(100),this.jackpotLabelJackpotItem.setMoneyWithoutAnimation(100),this.moneyLabelJackpotItem.setMoneyWithoutAnimation(100),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeletion.clearTrack(0),this.bigwinSkeleton.clearTrack(0),this.jackpotSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","./Slot4Constant":"Slot4Constant"}],Slot4Form:[function(t,e,i){"use strict";cc._RF.push(e,"16444Bj/MZCRY9+40KOMAyq","Slot4Form");var n=t("./Slot4History"),o=t("./Slot4Rank");cc.Class({extends:cc.Component,properties:{historyOnButtonNode:cc.Node,historyOffButtonNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,historyNode:cc.Node,rankNode:cc.Node,Slot4History:n,Slot4Rank:o},init:function(t){this.Slot4=t,this.Slot4History.init(t),this.Slot4Rank.init(t)},onLoad:function(){this.onRankClick()},onHistoryClick:function(){this.hideAllButton(),this.hideAllContent(),this.historyOnButtonNode.active=!0,this.historyOffButtonNode.active=!1,this.historyNode.active=!0},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.rankNode.active=!0},hideAllButton:function(){this.historyOnButtonNode.active=!1,this.rankOnButtonNode.active=!1,this.historyOffButtonNode.active=!0,this.rankOffButtonNode.active=!0},hideAllContent:function(){this.historyNode.active=!1,this.rankNode.active=!1}}),cc._RF.pop()},{"./Slot4History":"Slot4History","./Slot4Rank":"Slot4Rank"}],Slot4HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"aeb791R+GROL70mC77MdAqZ","Slot4HandlerRequest");var n=t("../../helper/Constant"),o=(t("../../helper/Message"),t("./Slot4Constant")),s={init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case n.MONEY:this.Slot4.updateMoneyGold();break;case n.GOLD:}},onResponse:function(t){var e=t.params,i=t.cmd;switch("MINIGAME"!==i&&n.NEWS,i){case o.JACKPOT:this.Slot4.handleJackpot(e);break;case o.SPIN:this.Slot4.handleSpin(e);break;case o.SPIN_DEMO:this.Slot4.handleSpinDemo(e);break;case o.SPIN_BONUS:this.Slot4.handleSpinBonus(e);break;case o.SPIN_BONUS_DEMO:break;case o.SPIN_FAIL:this.Slot4.handleSpinFail(e);break;case o.UPDATE_BIGWIN:case o.GET_TOP:break;case n.MINIGAME_REQUEST:this.Slot4.MiniGame&&this.Slot4.MiniGame.handleRequest(e);break;case n.REQUEST_RECHARGE_GOLD:this.Slot4.handleRechargeGold(e);break;case n.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot4.handleAlert(e);break;case n.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot4.handleNewMessage(e);break;case n.REQUEST_ACHIVEMENTED_QUEST:this.Slot4.handleAchivementedQuest(e);break;case n.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot4.handlePlusLuckyWheelFree(e);break;case n.REQUEST_CHAT_GET_CHAT:case n.REQUEST_CHAT_SEND_CHAT:break;case n.UPDATE_MINIGAME_FREE:this.Slot4.MiniGame&&this.Slot4.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot4Constant":"Slot4Constant"}],Slot4Header:[function(t,e,i){"use strict";cc._RF.push(e,"1c027M32GFCvYDjAUv4IsZj","Slot4Header");var n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){},onPrizeClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showPrizeFormNode()},onBackClick:function(){this.Slot4.Audio.playClick(),this.Slot4.isCanChangeBet()?this.Slot4.onBackClick():this.Slot4.showToast(n.SLOT_NOT_CHANGE_SPIN)},onShopClick:function(){this.Slot4.Audio.playClick()},onRankClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showRankHistoryFormNode()},onSettingClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showSettingFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot4HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"3cb7aHcRR9IOLEfemJM7CMr","Slot4HistoryItem");var n=t("../../util/FormatUtil");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=n.numberWithCommas(t.total_prize_amount||t.win_prize),i=n.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot4History:[function(t,e,i){"use strict";cc._RF.push(e,"11ea8wpd5tEWqhY1HcGAF+I","Slot4History");var n=t("../../../helper/Message"),o=(t("../../../helper/Config"),t("../Slot4Constant")),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){this.initData()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeShowHistory=null)},initData:function(){if(this.listData&&0!==this.listData.length){this.showListNode(),this.listData=s.sortDataTimeByTime(this.listData);for(var t=0,e=this.listData.length;t<e;t++){var i=this.listItem[t];i||(i=this.instanceItem(this.listData[t])),i.getComponent("Slot4HistoryItem").init(this.listData[t])}}else this.loadData()},handleSpin:function(t){this.initFirst();var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.total_prize_amount+=t.bonus_prize,e.spin_fee=this.Slot4.getBet(),e.total_bet_amount=this.Slot4.Slot4SelectLine.getLineSelected().length*this.Slot4.getBet(),this.listData.length>o.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){this.showData()}.bind(this),1e3*o.SLOT4_TIME_DELAY_FINISH))},showData:function(){if(this.listData.length>=o.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,e=0,i=this.listItem.length;e<i;e++)this.listItem[e].getComponent("Slot4HistoryItem").init(this.listData[t-e],e)}else for(var n=this.listData.length-1,s=n;s>=0;s--)this.listItem[n-s]?this.listItem[n-s].getComponent("Slot4HistoryItem").init(this.listData[s],s):this.instanceItem(this.listData[s],s)},loadData:function(){var t=this;this.initFirst(),this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot4.getToken(),user_id:this.Slot4.getUserId()};this.Slot4.api.getHistorySlot4(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot4.showDialogMessage(n.HISTORY_TITLE,e.msg)})},initContent:function(t){this.showListNode();var e=t[0],i=0;i=e.length>o.NUM_IN_HISTORY?o.NUM_IN_HISTORY:e.length;for(var n=0;n<i;n++)this.instanceItem(e[n],n),this.listData.push(e[n])},instanceItem:function(t,e){var i=cc.instantiate(this.historyItemPrefab);return i.parent=this.historyContentScrollView.content,i.getComponent("Slot4HistoryItem").init(t,e),this.listItem.push(i),i},showListNode:function(){this.historyContentScrollView.node.active=!0,this.hideLoadingNode()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot4Constant":"Slot4Constant"}],Slot4Item:[function(t,e,i){"use strict";cc._RF.push(e,"b6286PEnOdCKKNwWB9c+ERM","Slot4Item"),cc.Class({extends:cc.Component,properties:{slotSprite:cc.Sprite,itemASpriteFrame:cc.SpriteFrame,itemBSpriteFrame:cc.SpriteFrame,itemCSpriteFrame:cc.SpriteFrame,itemDSpriteFrame:cc.SpriteFrame,itemESpriteFrame:cc.SpriteFrame,itemFSpriteFrame:cc.SpriteFrame,itemGSpriteFrame:cc.SpriteFrame,item1Node:cc.Node},onLoad:function(){},init:function(t,e){switch(this.index=t,this.hideAll(),this.index){case"A":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemASpriteFrame;break;case"B":this.item1Node.active=!0,this.slotSprite.spriteFrame=this.itemBSpriteFrame;break;case"C":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemCSpriteFrame;break;case"D":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemDSpriteFrame;break;case"E":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemESpriteFrame;break;case"F":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemFSpriteFrame;break;case"G":this.slotSprite.node.active=!0,this.slotSprite.spriteFrame=this.itemGSpriteFrame}},show:function(){this.showEffect()},isBonus:function(){},getIndex:function(){return this.index},showEffect:function(){this.slotSprite.node.getComponent(cc.Animation).play()},hideEffect:function(){this.slotSprite.node.getComponent(cc.Animation).stop(),this.slotSprite.node.scale=1,this.slotSprite.node.skewX=0,this.slotSprite.node.skewY=0},showPoint:function(){},hidePoint:function(){},showBonus:function(){},hideBonus:function(){},reset:function(){this.hideEffect()},hideAll:function(){this.slotSprite.node.active=!1,this.item1Node.active=!1}}),cc._RF.pop()},{}],Slot4Label:[function(t,e,i){"use strict";cc._RF.push(e,"55b30GAWaVIJKuCgtgn3Mxe","Slot4Label");t("../../helper/Message");var n=t("../../util/FormatUtil"),o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:o,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:o,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initTotalNumberLine:function(t){var e=this.Slot4.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.lastMoneyWinLabel.string=n.numberWithCommas(e)}.bind(this),3e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot4.getTestInfo().money+=e,this.lastMoneyWinLabel.string=n.numberWithCommas(e),this.setMoney(this.Slot4.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0!==t&&(t=parseInt(t),e?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t))},setBet:function(t){void 0!==t&&(t=parseInt(t),this.betLabel.string=n.numberWithCommas(t))},setTotalBet:function(t){t=parseInt(t),this.totalBetLabel.string=n.numberWithCommas(t)},setMoney:function(t){void 0!==t&&(t=parseInt(t),this.moneyLabel.setMoney(t))},setLastMoneyWin:function(t){void 0!==t&&(t=parseInt(t),this.lastMoneyWinLabel.string=n.numberWithCommas(t))},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot4Lines:[function(t,e,i){"use strict";cc._RF.push(e,"a380fPEuSJE94v0fCc8jEmd","Slot4Lines");var n=t("./items/Slot4NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[n],listLine:[cc.Node]},init:function(t){for(var e in this.Slot4=t,this.Slot4=t.Slot4UI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"./items/Slot4NumberLineItem":"Slot4NumberLineItem"}],Slot4MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"d993d1jcy1LMbgS7lcYF6tn","Slot4MiniGameItem");var n=t("../../util/BrowserUtil"),o=t("../../util/FormatUtil"),s=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{defaultSpriteNode:cc.Node,openSpriteNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Bonus=t.Slot4Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null,this.onMouseEnter=function(){t.isOpen()||n.showCursorPointer()},this.onMouseLeave=function(){n.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.Slot4Bonus.openItemMiniGame(this))},onClick:function(){this.isClicked()||this.Slot4.Slot4State.isAutoSpin()||(this.setClicked(!0),this.Slot4Bonus.openItemMiniGame(this))},openItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.showOpenItem(),e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=o.numberWithCommas(t)):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=o.numberWithCommas(t))}.bind(this),500*s.SLOT3_TIME_OPEN_EGGE)},setClicked:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},showOpenItem:function(){this.defaultSpriteNode.active=!1,this.openSpriteNode.active=!0},reset:function(){clearTimeout(this.hideTimeout),this.setClicked(!1),this.setOpen(!1),this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.openSpriteNode.active=!1,this.defaultSpriteNode.active=!0}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot4NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"19523hwc2dPdpz8Knzl0LYI","Slot4NumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabel:cc.Label,bgSprite:cc.Sprite,normalSpriteFrame:cc.SpriteFrame,activeSpriteFrame:cc.SpriteFrame},init:function(t){this.SlotLines=t,this.line=this.numberLineLabel.string},onLoad:function(){this.hideNumberLine()},showNumberLine:function(){this.bgSprite.node.active=!0},hideNumberLine:function(){this.bgSprite.node.active=!1}}),cc._RF.pop()},{}],Slot4RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"8f7b6OmQftHfpnMO/D4Rhhr","Slot4RankItem");var n=t("../../util/FormatUtil"),o=t("../../util/Util");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,timeLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){t&&(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.win_prize),this.timeLabel.string=n.getDateByTimeStamp(t.created_at),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot4Rank:[function(t,e,i){"use strict";cc._RF.push(e,"04d9eTdNG1H1J6N+6hk6Cuj","Slot4Rank");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){this.initFirst(),this.initRank()},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}}},initData:function(t){t&&(this.data=t)},initRank:function(){if(this.data){this.showListRankNode(),this.listChild||(this.listChild=[],this.putAllChipToPool());for(var t=n.sortDataTimeByTime(this.data.list_player_jackpot),e=0,i=(t=n.filterSameItemSlot(t)).length>50?50:t.length;e<i;e++)if(this.listChild[e])this.listChild[e].getComponent("Slot4RankItem").init(t[e],e);else{var o=this.instanceItem(t[e],e);o.parent=this.rankContentScrollView.content,this.listChild.push(o)}}},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.rankItemPrefab)),i.getComponent("Slot4RankItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},showListRankNode:function(){this.rankContentScrollView.node.active=!0}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],Slot4Reels:[function(t,e,i){"use strict";cc._RF.push(e,"af944zUfZJEvo0YXxI96wzY","Slot4Reels");var n=t("../../util/FormatUtil"),o=t("./Slot4Reel"),s=t("./Slot4Constant");cc.Class({extends:cc.Component,properties:{slotReels:[o],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Lines=t.Slot4Lines,this.Slot4SelectLine=t.Slot4SelectLine,this.Slot4Effect=t.Slot4Effect,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.win_prize,o=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=(t.list_bonus_prize,t.remain_free),h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,n,i,o,c,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.win_prize,o=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,n,i,o,c,t)},spinReels:function(t,e,i,n,o,a,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,s.SLOT4_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,s.SLOT4_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,s.SLOT4_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,s.SLOT4_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,s.SLOT4_TOTAL_ITEM_IN_REEL+8,!0,e,i,n,o,a,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot4Lines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var n=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[n])}}},showEffectItem:function(t){var e=t.parent.convertToNodeSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),n=cc.instantiate(this.itemPrefab);n.getComponent("Slot4Item").init(t.getComponent("Slot4Item").getIndex()),n.getComponent("Slot4Item").showEffect(),n.setPosition(i),n.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.Slot4Lines.showLine(t),this.Slot4Lines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=s.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,n=e.length;i<n;i++){var o=this.listItemNodeSameDataDisplay[e[i]-1];o&&o.getComponent("Slot4Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot4Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],n=0;n<s.SLOT4_NUMBER_ITEM_IN_REEL;n++){var o=this.slotReels.length*n+e;i.push(t[o])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var o=t[i].line-1,a=s.LIST_INDEX_NUMBER_IN_LINE[o];e=e.concat(a)}return n.deDuplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot4Lines.reset()},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./Slot4Constant":"Slot4Constant","./Slot4Reel":"Slot4Reel"}],Slot4Reel:[function(t,e,i){"use strict";cc._RF.push(e,"8fee6pSU6ZILoMa+0kS56N3","Slot4Reel");var n=t("../../util/RandomUtil"),o=(t("../../helper/Config"),t("./Slot4Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab},init:function(t,e){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Reels=t.Slot4Reels,this.Slot4Lines=t.Slot4Lines,this.Slot4Effect=t.Slot4Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t,e,i,n,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=this.instanceItem(u);m.setPosition(0,(l+1)*o.SLOT4_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot4Reels.setItemListPrizeByIndex(m,d)}var f=(e-1)*o.SLOT4_DISTANCE_TWO_ITEMS,p=f/o.SLOT4_SPEED_SPIN_CARD,_=cc.moveTo(p,this.node.x,-f).easing(cc.easeElasticInOut(1.5)),S=cc.callFunc(function(){i&&(this.Slot4.Slot4State.isAutoSpin()||this.Slot4.Slot4State.setFinish(),this.Slot4Reels.showAllEffectItems(),this.showEffectPrize(n,a,r,c,s,h))},this),g=cc.delayTime(.2);this.node.runAction(cc.sequence(_,g,S))},showEffectPrize:function(t,e,i,n,s,a){switch(t){case o.WIN_TYPE_NORMAL:case o.WIN_TYPE_BIG_WIN:this.Slot4.Slot4Effect.showWinNormal(s);break;case o.WIN_TYPE_SUPER_BIG_WIN:this.Slot4.Slot4Effect.showBigWin(s);break;case o.WIN_TYPE_JACKPOT:this.Slot4.Slot4Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==o.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()&&!e?this.Slot4UI.showSpinDisableButton():this.Slot4UI.showSpinButton(),i?((this.isNewSpinFree()||n>=this.getNumberSpinFree())&&this.Slot4.Slot4Effect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(n)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot4Effect.showBonus(a):this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?(this.Slot4.Slot4Effect.hideAll(),this.Slot4.spin()):(this.Slot4.Slot4State.setStop(),i&&(this.Slot4UI.showSpinFreeButton(n),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),this.Slot4.spin()}.bind(this),2e3))),this.Slot4Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot4Effect.showBonus(a),i&&(this.isNewSpinFree()||n>=this.getNumberSpinFree())&&this.Slot4.Slot4Effect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),i?(this.Slot4.spin(),this.setSpinFree(!0),this.setNumberSpinFree(n)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?e||this.Slot4.spin():this.Slot4.Slot4State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot4.Slot4Effect.hideAll(),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.spin()}.bind(this),1e3)):this.Slot4.Slot4State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<o.SLOT4_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=n.getRandomInt(0,o.SLOT4_LIST_ICON.length-1);return o.SLOT4_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*o.SLOT4_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot4Item").reset(),e.getComponent("Slot4Item").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},getTimeEffect:function(t){return t===o.WIN_TYPE_NORMAL||t===o.WIN_TYPE_ZERO||t===o.WIN_TYPE_BIG_WIN?1e3*o.TIME_SHOW_WIN_NORMAL:t===o.WIN_TYPE_SUPER_BIG_WIN?1e3*o.TIME_SHOW_BIGWIN:t===o.WIN_TYPE_JACKPOT?1e3*o.TIME_SHOW_JACKPOT:1e3*o.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot4Constant":"Slot4Constant"}],Slot4SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"90e9eoEnktKqIrjlyRvN8Qk","Slot4SelectLine");var n=t("../items/Slot4SelectNumberLineItem"),o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[n]},init:function(t){for(var e in this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Label=t.Slot4Label,this.Slot4Lines=t.Slot4Lines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot4Label.initTotalNumberLine(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot4Lines.showNumberLines(t)},showLines:function(t){this.Slot4Lines.showLines(t)},showLine:function(t){this.Slot4Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest()?this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../items/Slot4SelectNumberLineItem":"Slot4SelectNumberLineItem"}],Slot4SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"49d8dBk/aBE5r77/Zdu3bCI","Slot4SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot4=t,this.Slot4SelectLine=t.Slot4SelectLine},onLoad:function(){var t=this;this.selected=this.onSelectButtonNode.active,this.onMouseEnter=function(){t.Slot4SelectLine.showLine(t.line)},this.onMouseLeave=function(){t.Slot4SelectLine.showLine(0)},cc.sys.isBrowser&&(this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Slot4.Audio.playClick(),this.selected?this.unSelect():this.select()},select:function(){this.setSelected(!0),this.Slot4SelectLine.itemIsSelected(),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot4SelectLine.setLineItemUnSelected(),this.Slot4SelectLine.itemIsSelected(),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot4State:[function(t,e,i){"use strict";cc._RF.push(e,"dca9aCPompAvI5xJ4LyD6P9","Slot4State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4SelectLine=t.Slot4SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinButton(),this.Slot4UI.showAutoSpinButton(),this.Slot4SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showAutoSpinDisableButton(),this.Slot4SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showAutoSpinDisableButton(),this.Slot4SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showStopAutoSpinButton(),this.Slot4SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot4.Slot4Reels.hideEffectItem(),this.Slot4.Slot4Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot4UI:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"dbdcfsO4ohFIItczU1Db+4L","Slot4UI");var s=t("../../util/FormatUtil");cc.Class((o(n={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,slot4FormNode:cc.Node,selectLineFormNode:cc.Node,prizeFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},init:function(t){this.Slot4=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormRankHistory=this.slot4FormNode.getComponent("DialogForm"),this.dialogFormPrize=this.prizeFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),o(n,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)}),o(n,"showX",function(){this.xPrizeNode.active=!0}),o(n,"hideX",function(){this.xPrizeNode.active=!1}),o(n,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),o(n,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),o(n,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),o(n,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),o(n,"showRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.showDialog(t)}),o(n,"hideRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.hideDialog(t)}),o(n,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),o(n,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),o(n,"showPrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.showDialog(t)}),o(n,"hidePrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.hideDialog(t)}),o(n,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),o(n,"showProcessingNode",function(){this.processingNode.active=!0}),o(n,"hideProcessingNode",function(){this.processingNode.active=!1}),n)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot4X:[function(t,e,i){"use strict";cc._RF.push(e,"13c50+JtJFAEJLw7gENE6om","Slot4X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot4=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot4:[function(t,e,i){"use strict";cc._RF.push(e,"fe842NFkqFCuZtjWPm7FFfq","Slot4");var n=t("../../base/BaseScene"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./Slot4UI"),r=t("./Slot4Header"),c=t("./Slot4Control"),h=t("./Slot4Label"),l=t("./Slot4Reels"),u=t("./Slot4Lines"),d=t("./Slot4Effect"),m=t("./Slot4Bonus"),f=t("../../prefab/mini-game/item/MiniGameXPer"),p=t("./Slot4Constant"),_=t("./Slot4State"),S=t("./Slot4HandlerRequest"),g=t("./form/Slot4AutoSpinSetting"),C=t("./form/Slot4BonusResult"),N=t("./form/Slot4Form"),E=t("./form/Slot4SelectLine"),T=t("../../prefab/form/Tutorial"),I=(t("../../prefab/News"),t("../../prefab/Toast")),v=t("../../ui/dialog/DialogMessage"),y=t("../../ui/Processing"),R=t("../../object/Audio"),L=t("../../object/Music");cc.Class({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,Slot4UI:a,Slot4Header:r,Slot4Control:c,Slot4Label:h,Slot4SelectLine:E,Slot4Reels:l,Slot4Effect:d,Slot4Lines:u,Slot4Bonus:m,Slot4Form:N,MiniGameXPer:f,Slot4AutoSpinSetting:g,Slot4BonusResult:C,Tutorial:T,Toast:I,DialogMessage:v,Processing:y,Audio:R,Music:L},onLoad:function(){this._super(),this.setSceneName(o.SCENE_GAME_SLOT_4),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot4State=_,this.Slot4HandlerRequest=S,this.Slot4State.init(this),this.Slot4HandlerRequest.init(this),this.Slot4UI.init(this),this.Slot4Header.init(this),this.Slot4Control.init(this),this.Slot4Label.init(this),this.Slot4SelectLine.init(this),this.Slot4Reels.init(this),this.Slot4Effect.init(this),this.Slot4Lines.init(this),this.Slot4Bonus.init(this),this.Slot4Form.init(this),this.Slot4AutoSpinSetting.init(this),this.Slot4BonusResult.init(this),this.updateMoneyGold(),this.Slot4State.setStop(),this.initTestInfo(),this.onResponseBind=this.Slot4HandlerRequest.onResponse.bind(this.Slot4HandlerRequest),this.onUserVariablesUpdateBind=this.Slot4HandlerRequest.onUserVariablesUpdate.bind(this.Slot4HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse()},start:function(){this.initRoomInfo(),this.initDataBet(),this.Slot4SelectLine.selectAllItem(),this.Slot4UI.showContentGame(),this.Slot4Form.Slot4Rank.initData(this.dataRank)},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:88e6,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:1e7}},handleJackpot:function(t){var e=0,i=1;for(var n in this.info){var o=void 0;switch(this.info[n].spin_fee){case 100:this.info[n].jackpot=t.data[0],(o=t.data[3])&&(this.info[n].x_jackpot=o[0]);break;case 1e3:this.info[n].jackpot=t.data[1],o=t.data[3],t.data[3]&&(this.info[n].x_jackpot=o[1]);break;case 1e4:this.info[n].jackpot=t.data[2],(o=t.data[3])&&(this.info[n].x_jackpot=o[2])}this.info[n].spin_fee===this.bet&&(e=this.info[n].jackpot,i=this.info[n].x_jackpot)}this.isTest()||(this.Slot4Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.is_spin=!1,this.Slot4State.isAutoSpin()||this.Slot4State.setSpinning(),this.initInfo(e),this.Slot4AutoSpinSetting.handleSpin(e),this.Slot4Label.handleSpin(e),this.Slot4Reels.handleSpin(e),this.Slot4Form.Slot4History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.win_prize=t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.remain_spin_free>0&&e.remain_spin_free--},handleSpinDemo:function(t){var e=t.data;this.is_spin=!1,e.win_type===p.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.initInfoTest(e),this.Slot4State.setSpinning(),this.Slot4Label.handleSpinDemo(e),this.Slot4Reels.handleSpinDemo(e)},initInfoTest:function(t){this.getTestInfo().is_free=t.is_free},handleSpinFail:function(t){this.is_spin=!1,this.showToast(t.msg),this.Slot4State.setStop(),this.Slot4AutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleGetTop:function(t){},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot4Form.Slot4Rank.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot4Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot4Chat.addChat(e)}else this.Slot4Chat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot4Reels.reset(),this.Slot4SelectLine.selectAllItem()},initTestData:function(){this.Slot4Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot4Label.setMoney(this.testInfo.money),this.Slot4Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingNode(),this.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick(),this.Slot4UI.showRechargeFormNode()},spin:function(){if(this.line_player_choose=this.Slot4SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.is_spin){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};if(this.isTest()){this.sendRequest.send(p.SPIN_DEMO,t);var e=this.getTestInfo();e.is_free||(e.money-=2e5,this.Slot4Label.setMoney(e.money))}else this.sendRequest.send(p.SPIN,t);this.is_spin=!0}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.Slot4State.setStop(),this.Slot4AutoSpinSetting.stopAutoSpin(),this.Slot4AutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.Slot4Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();this.initBetData(e),this.Slot4Label.setMoney(this.getMoney()),this.Slot4Label.setBet(t)},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_free||t.remain_spin_free,n=this.Slot4SelectLine.getLineSelected().length;this.Slot4Label.setJackpot(e,!1),this.Slot4Label.initTotalNumberLine(n),i?this.Slot4UI.showSpinFreeButton(i):this.Slot4UI.showSpinButton()}},getBet:function(){return this.bet},isAutoSpin:function(){return this.Slot4State.isAutoSpin()},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot4Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee==this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setFistBet:function(t){this.firstBet=t},getFistBet:function(t){this.firstBet=t},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot4State.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t){this.Slot4UI.showBonusResultForm(),this.Slot4BonusResult.setMoney(t)},hideBonusResult:function(){this.Slot4UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot4UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot4UI.hideDialogMessage()},showProcessingNode:function(){this.Slot4UI.showProcessingNode()},hideProcessingNode:function(){this.Slot4UI.hideProcessingNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:5200,display_slot_data:["E","A","F","D","A","F","D","A","F","D","F","C","B","E","C"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:400},t.list_bonus_prize[1]={line:1,prize:400},t.list_bonus_prize[2]={line:1,prize:400},t.list_bonus_prize[3]={line:1,prize:400},t.list_bonus_prize[4]={line:1,prize:400},t.list_bonus_prize[5]={line:1,prize:400},t.list_bonus_prize[6]={line:1,prize:400},t.list_bonus_prize[7]={line:0,prize:1},t.list_bonus_prize[8]={line:1,prize:800},t.list_bonus_prize[9]={line:1,prize:800},t.list_bonus_prize[10]={line:1,prize:800},t.list_line_bonus=[{line:6,prize:1}],t.list_line_free=[],t.list_line_prize=[],t.list_line_prize[0]={line:3,prize:200},t.list_line_prize[1]={line:7,prize:200},t.list_line_prize[2]={line:9,prize:200},t.list_line_prize[3]={line:13,prize:200},t.list_line_prize[4]={line:19,prize:200},t.money_type=0,t.number_key_start_bonus=1,t.remain_free=0,t.spin_id=314,t.win_prize=1800,t.win_type=1,t},dataTestFree:function(){var t={bonus_prize:0,display_slot_data:["G","C","F","G","D","F","E","D","G","E","C","F","G","D","C"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[],list_line_bonus:[],list_line_free:[],list_line_prize:[{line:1,prize:200}],money_type:0,number_key_start_bonus:0,remain_free:1,spin_id:166,win_prize:0,win_type:0};return t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","./Slot4Bonus":"Slot4Bonus","./Slot4Constant":"Slot4Constant","./Slot4Control":"Slot4Control","./Slot4Effect":"Slot4Effect","./Slot4HandlerRequest":"Slot4HandlerRequest","./Slot4Header":"Slot4Header","./Slot4Label":"Slot4Label","./Slot4Lines":"Slot4Lines","./Slot4Reels":"Slot4Reels","./Slot4State":"Slot4State","./Slot4UI":"Slot4UI","./form/Slot4AutoSpinSetting":"Slot4AutoSpinSetting","./form/Slot4BonusResult":"Slot4BonusResult","./form/Slot4Form":"Slot4Form","./form/Slot4SelectLine":"Slot4SelectLine"}],SlotAutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"46a71Vi0JFHSYyERFvb5jnE","SlotAutoSpinSetting");var n=t("../SlotConstant"),o=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.reset()},onDisable:function(){},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=o.numberWithCommas(o.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string="",this.stopGameLoseToEditBox.string="",this.stopGameMaxWinEditBox.string="",this.numberSpinSlider.progress=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(o.getOnlyNumberInString(this.stopGameWinToEditBox.string)),this.loseTo=parseInt(o.getOnlyNumberInString(this.stopGameLoseToEditBox.string)),this.maxWin=parseInt(o.getOnlyNumberInString(this.stopGameMaxWinEditBox.string)),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot.SlotState.setAutoSpin(),this.Slot.spin(),this.dialogForm.hideDialog(!1),this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin)},handleSpin:function(t){if(this.Slot.SlotState.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===n.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=o.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,n=!this.stopGameMaxWin||this.lastWin<this.maxWin,o=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&n&&o},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../SlotConstant":"SlotConstant"}],SlotBonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"bc143cZsThJ9JyiAosV1Jny","SlotBonusItem");var n=t("../../scene/game-slot/SlotConstant"),o=t("../../util/FormatUtil");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({extends:cc.Component,properties:{normalBoxNode:cc.Node,openBoxNode:cc.Node,closeNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot=t,this.SlotBonus=t.SlotBonus},onLoad:function(){this.reset()},onBoxClick:function(){if(this.line_player_choose=this.Slot.SlotSelectLine.getLineSelected(),!this.isClick&&this.SlotBonus.isStateStop()){this.isClick=!0,this.SlotBonus.setStateStop(!1);var t={money_type:0,money_value:this.Slot.bet,line_player_choose:this.line_player_choose};this.Slot.isTest()?this.Slot.sendRequest.send(n.SPIN_DEMO,t):this.Slot.sendRequest.send(n.SPIN,t),this.SlotBonus.addBox(this)}},openBox:function(t,e){this.normalBoxNode.active=!1,this.openBoxNode.active=!0,t?this.closeNode.active=!0:(this.moneyLabel.node.active=!0,this.moneyLabel.string=o.nFormatter(e).toUpperCase())},reset:function(){this.isClick=!1,this.normalBoxNode.active=!0,this.openBoxNode.active=!1,this.closeNode.active=!1,this.moneyLabel.node.active=!1}},"reset",function(){this.isClick=!1,this.normalBoxNode.active=!0,this.openBoxNode.active=!1,this.closeNode.active=!1,this.moneyLabel.node.active=!1})),cc._RF.pop()},{"../../scene/game-slot/SlotConstant":"SlotConstant","../../util/FormatUtil":"FormatUtil"}],SlotBonus:[function(t,e,i){"use strict";cc._RF.push(e,"589ca4BarNEFZeTFfwjoCrm","SlotBonus");var n=t("../../prefab/mini-game/item/JackpotItem"),o=t("../../prefab/slot/SlotBonusItem"),s=t("../../util/FormatUtil"),a=t("../../util/RandomUtil");cc.Class({extends:cc.Component,properties:{bonusJackpotItem:n,timeLabel:cc.Label,listSlotCardItems:[o]},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotLabel=t.SlotLabel;for(var e=0;e<this.listSlotCardItems.length;e++)this.listSlotCardItems[e].init(t,e)},onLoad:function(){},onEnable:function(){for(var t in this.finish=!1,this.listShot=[],this.is_StateStop=!0,this.SlotLabel.hideJackpotItem(),this.listSlotCardItems)this.listSlotCardItems[t].reset();clearTimeout(this.jokerTimeout),clearInterval(this.autoSpinInterval),this.Slot.SlotAutoSpinSetting.checkAutoSpin()&&(this.autoSpinInterval=setInterval(function(){var t=a.getRandomInt(0,this.listSlotCardItems.length-1);this.listSlotCardItems[t].onBoxClick()}.bind(this),1e3)),this.bonusJackpotItem.setMoneyWithoutAnimation(0)},onDisable:function(){for(var t in this.listSlotCardItems)this.listSlotCardItems[t].reset();this.SlotLabel.showJackpotItem(),clearTimeout(this.jokerTimeout),clearInterval(this.timeInterval),clearInterval(this.autoSpinInterval),this.Slot.SlotAutoSpinSetting.checkAutoSpin()?this.Slot.spin():this.Slot.getInfo().is_extra?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinButton()},addBox:function(t){-1==this.listShot.indexOf(t)&&this.listShot.push(t)},handleSpin:function(t){var e=t.add_prize_amount,i=t.remain_time;this.setStateStop(!0);var n=this.getCardInArray();n&&(n.openBox(!1,e),this.addMoney(e)),this.setTime(i)},handleSpinFinish:function(t){var e=t.total_prize_amount,i=t.is_timeout;if(this.setStateStop(!1),this.Slot.setFinishBonus(),i)this.Slot.SlotGameOver.setBalance(e),this.SlotUI.showGameOverFormNode();else{var n=this.getCardInArray();n&&n.openBox(!0,0),clearTimeout(this.jokerTimeout),this.jokerTimeout=setTimeout(function(){this.Slot.SlotGameOver.setBalance(e),this.SlotUI.showGameOverFormNode(),this.SlotUI.showGameNode()}.bind(this),1500)}this.finish=!0,clearInterval(this.autoSpinInterval)},handleSpinDemo:function(t){var e=t.add_prize_amount,i=t.remain_time;this.setStateStop(!0);var n=this.getCardInArray();n&&(n.openBox(!1,e),this.addMoney(e)),this.setTime(i)},handleSpinFinishDemo:function(t){var e=t.total_prize_amount,i=t.is_timeout;if(this.setStateStop(!1),this.Slot.setFinishBonus(),i){this.Slot.SlotGameOver.setBalance(e),this.SlotUI.showGameOverFormNode();var n=this.Slot.getTestInfo();n.money+=e,this.Slot.SlotLabel.setMoney(n.money)}else{var o=this.getCardInArray();o&&o.openBox(!0,0),clearTimeout(this.jokerTimeout),this.jokerTimeout=setTimeout(function(){this.Slot.SlotGameOver.setBalance(e),this.SlotUI.showGameOverFormNode();var t=this.Slot.getTestInfo();t.money+=e,this.Slot.SlotLabel.setMoney(t.money),this.SlotUI.showGameNode()}.bind(this),1500)}this.finish=!0,clearInterval(this.autoSpinInterval)},getCardInArray:function(){if(this.listShot.length>0){var t=this.listShot[0];return this.listShot.splice(0,1),t}return null},addMoney:function(t){this.bonusJackpotItem.addMoney(t)},setTime:function(t){this.time=t,this.setTimeLabel(t),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3)},setTimeLabel:function(t){this.timeLabel.string=s.numberToTime(t)},isFinish:function(){return this.finish},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},reset:function(){for(var t in this.is_StateStop=!0,this.timeLabel.string=s.numberToTime(0),this.bonusJackpotItem.setMoneyWithoutAnimation(0),this.listSlotCardItems)this.listSlotCardItems[t].reset()}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot/SlotBonusItem":"SlotBonusItem","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil"}],SlotCardItem:[function(t,e,i){"use strict";cc._RF.push(e,"b1e9cU/UtRE6bKK7rningL6","SlotCardItem");var n=t("../../scene/game-slot/SlotConstant"),o=t("../../helper/Config"),s=t("../../util/RandomUtil");cc.Class({extends:cc.Component,properties:{cardSprite:cc.Sprite,cardsNormalSpriteFrame:[cc.SpriteFrame],cardFaceSpriteFrame:cc.SpriteFrame,cardsJokerSpriteFrame:[cc.SpriteFrame],changeBalancePrefab:cc.Prefab,changeBalanceNode:cc.Node},init:function(t,e){this.Slot=t,this.index=e},onLoad:function(){this.initScaleX=this.node.scaleX,this.initScaleY=this.node.scaleY},onEnable:function(){this.isClicked=!1},onClick:function(){if(!this.isClicked&&!this.Slot.SlotBonus.isFinish()){this.isClicked=!0;var t={money_type:0,money_value:this.Slot.bet,line_data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]};this.Slot.isTest()?this.Slot.sendRequest.send(n.SPIN_DEMO,t):this.Slot.sendRequest.send(n.SPIN,t),this.Slot.SlotBonus.addShot(this)}},reveal:function(t,e){if(t){var i=e?this.cardsJokerSpriteFrame[s.getRandomInt(0,this.cardsJokerSpriteFrame.length-1)]:this.cardsNormalSpriteFrame[s.getRandomInt(0,this.cardsNormalSpriteFrame.length-1)];this.cardSprite.spriteFrame=i}else this.cardSprite.spriteFrame=this.cardFaceSpriteFrame},revealWithAnimationFlip:function(t,e){this.cardSprite.node.stopAllActions();var i=this.node.scaleX,n=this.node.scaleY;this.reveal(!1),this.cardSprite.node.runAction(cc.sequence(cc.scaleTo(o.SLOT_BONUS_TIME_FLIP_CARD/2,0,n),cc.callFunc(function(){this.reveal(!0,t),t||(this.showChangeBalance(e),this.Slot.SlotBonus.addMoney(e))},this),cc.scaleTo(o.SLOT_BONUS_TIME_FLIP_CARD/2,i,n)))},showChangeBalance:function(t){if(t>0){this.changeBalanceNode.removeAllChildren(!0);var e=cc.instantiate(this.changeBalancePrefab);e.setPosition(0,0),e.parent=this.changeBalanceNode,e.scale=1.5,e.getComponent("ChangeBalance").showChangeBalance(t)}},getIndex:function(){return this.index},reset:function(){this.cardSprite.node.stopAllActions(),this.cardSprite.node.scaleX=this.initScaleX,this.cardSprite.node.scaleY=this.initScaleY,this.reveal(!1),this.isClicked=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../scene/game-slot/SlotConstant":"SlotConstant","../../util/RandomUtil":"RandomUtil"}],SlotConstant:[function(t,e,i){"use strict";cc._RF.push(e,"8fe0eWw0DdH0oRQTxFNK9SG","SlotConstant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4},cc._RF.pop()},{}],SlotEffect:[function(t,e,i){"use strict";cc._RF.push(e,"8c090MhFsJDnYGsyc2nECC3","SlotEffect");var n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,moreEffectNode:cc.Node,winNormalXLabel:cc.Label,winNormalJackpotItem:n,moreMoneyJackpotItem:n,effectSkeleton:sp.Skeleton},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.Music=t.Music},onLoad:function(){},showWinNormal:function(t,e){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.setMoneyWithoutAnimation(t/2),this.winNormalJackpotItem.setMoneyWithAnimation(t),this.winNormalXLabel.string="X "+e,this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundBigWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showSuperBigWin:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"thanglon",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showJackpot:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"nohu",!0),this.moreMoneyJackpotItem.node.active=!1,this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moreMoneyJackpotItem.node.active=!0,this.moreMoneyJackpotItem.setMoneyWithoutAnimation(t/2),this.moreMoneyJackpotItem.setMoneyWithAnimation(t)},this)))},showBonus:function(t){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"bonus",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll(),this.node.runAction(cc.sequence(cc.delayTime(.75),cc.callFunc(function(){this.Slot.showBonusGame(t)},this)))},this)))},showFreeSpin:function(){this.hideAll(),this.moreEffectNode.active=!0,this.effectSkeleton.setAnimation(0,"themluot",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll()},this)))},hideAll:function(){this.winNormalNode.active=!1,this.moreEffectNode.active=!1,this.moreMoneyJackpotItem.node.active=!1,this.effectSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],SlotGameIconItem:[function(t,e,i){"use strict";cc._RF.push(e,"2dd994LgShN55Q37CPuXJY4","SlotGameIconItem");var n=t("../mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpot100JackpotItem:n,jackpot1kJackpotItem:n,jackpot10kJackpotItem:n},onLoad:function(){},onEnable:function(){this.data?this.node.active=!0:this.node.active=!1},initData:function(t){this.data=t,t&&(this.node.active=!0,this.jackpot100JackpotItem.setMoney(t[0]),this.jackpot1kJackpotItem.setMoney(t[1]),this.jackpot10kJackpotItem.setMoney(t[2]))}}),cc._RF.pop()},{"../mini-game/item/JackpotItem":"JackpotItem"}],SlotGameOver:[function(t,e,i){"use strict";cc._RF.push(e,"1c68aYBntxOVrpl5UDvpGlK","SlotGameOver");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{contentRichText:cc.RichText},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onEnable:function(){this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.node.active=!1,this.Slot.SlotEffect.hideAll(),this.SlotUI.showGameNode(),this.Slot.SlotAutoSpinSetting.checkAutoSpin()||this.Slot.SlotState.setStop()},this)))},setBalance:function(t){var e=n.numberWithCommas(t);this.contentRichText.string=String.format(o.SLOT_BONUS_GAME_FINISH,e)}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],SlotHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"574dcsdbFpELo6OnMJtg0xX","SlotHandlerRequest");var n=t("../../helper/Constant"),o=(t("../../helper/Message"),t("./SlotConstant")),s={init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case n.MONEY:this.Slot.updateMoneyGold();break;case n.GOLD:break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params,i=t.cmd;switch(i){case n.NEWS:this.Slot.handleNews(e);break;case o.JACKPOT:this.Slot.handleJackpot(e);break;case o.SPIN:this.Slot.handleSpin(e);break;case o.SPIN_DEMO:this.Slot.handleSpinDemo(e);break;case o.SPIN_BONUS:this.Slot.handleSpinBonus(e);break;case o.SPIN_BONUS_DEMO:this.Slot.handleSpinBonusDemo(e);break;case o.SPIN_FAIL:this.Slot.handleSpinFail(e);break;case o.GET_TOP:this.Slot.handleGetTop(e),this.Slot.MiniGame&&this.Slot.MiniGame.handleRequest(e);break;case n.MINIGAME_REQUEST:this.Slot.MiniGame&&this.Slot.MiniGame.handleRequest(e);break;case n.REQUEST_AWARD_CARD:this.Slot.handleAward(e);break;case n.REQUEST_RECHARGE_GOLD:this.Slot.handleechargeGold(e);break;case n.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot.handleAlert(e);break;case n.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot.handleNewMessage(e);break;case n.REQUEST_ACHIVEMENTED_QUEST:this.Slot.handleAchivementedQuest(e);break;case n.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot.handlePlusLuckyWheelFree(e);break;case n.UPDATE_MINIGAME_FREE:this.Slot.MiniGame&&this.Slot.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./SlotConstant":"SlotConstant"}],SlotHelp:[function(t,e,i){"use strict";cc._RF.push(e,"3037cXALHlBp42hfzE3HnwQ","SlotHelp"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){},onDisable:function(){}}),cc._RF.pop()},{}],SlotHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"f9d5agB09VLE65MOW5TQNJM","SlotHistoryItem");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,numberLineLabel:cc.Label,balanceLabel:cc.Label,noteLabel:cc.Label},onLoad:function(){},init:function(t){var e=t.list_line_win_amount;e=JSON.parse(e),t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.spin_fee),this.numberLineLabel.string=e.length,this.balanceLabel.string=n.numberWithCommas(t.total_prize_amount),this.noteLabel.string=""}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],SlotHistory:[function(t,e,i){"use strict";cc._RF.push(e,"18cf6BC+r5OnouUz3iWVU/M","SlotHistory");var n=t("../../../helper/Message");t("../SlotConstant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,slotHistoryItemPrefab:cc.Prefab,listScrollView:cc.ScrollView},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.data=null,this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(){var t=this;if(this.showLoadingNode(),this.listScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.Slot.getToken(),user_id:this.Slot.getUserId()};this.Slot.api.getHistorySlot(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.Slot.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.data[0]?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.slotHistoryItemPrefab);i.parent=this.listScrollView.content,i.getComponent("SlotHistoryItem").init(t[e])}}},showLoadingNode:function(){this.loadingNode.active=!0,this.listScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.listScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Message":"Message","../SlotConstant":"SlotConstant"}],SlotItem:[function(t,e,i){"use strict";cc._RF.push(e,"d982f8cWQpP/qZcMfhChz6j","SlotItem"),cc.Class({extends:cc.Component,properties:{slotSprite:cc.Sprite,slot1SpriteFrame:cc.SpriteFrame,slot2SpriteFrame:cc.SpriteFrame,slot3SpriteFrame:cc.SpriteFrame,slot4SpriteFrame:cc.SpriteFrame,slot5SpriteFrame:cc.SpriteFrame,slot6SpriteFrame:cc.SpriteFrame,slot7SpriteFrame:cc.SpriteFrame,slotBonusSpriteFrame:cc.SpriteFrame,slotJackpotSpriteFrame:cc.SpriteFrame,slotPointSpriteFrame:cc.SpriteFrame,slotWildSpriteFrame:cc.SpriteFrame,effectAnimation:cc.Animation,item1Node:cc.Node,item8Node:cc.Node,itemWildNode:cc.Node},onLoad:function(){},init:function(t){this.index=t;var e=void 0;switch(this.hideAll(),t){case 1:this.item1Node.active=!0,e=this.slotJackpotSpriteFrame;break;case 2:this.item8Node.active=!0,e=this.slot1SpriteFrame;break;case 3:this.slotSprite.node.active=!0,e=this.slot2SpriteFrame;break;case 4:this.slotSprite.node.active=!0,e=this.slot3SpriteFrame;break;case 5:this.slotSprite.node.active=!0,e=this.slot4SpriteFrame;break;case 6:this.slotSprite.node.active=!0,e=this.slot5SpriteFrame;break;case 7:this.slotSprite.node.active=!0,e=this.slot6SpriteFrame;break;case 8:this.slotSprite.node.active=!0,e=this.slot7SpriteFrame;break;case 9:this.slotSprite.node.active=!0,e=this.slotPointSpriteFrame;break;case 10:this.itemWildNode.active=!0,e=this.slotWildSpriteFrame;break;case 11:this.slotSprite.node.active=!0,e=this.slotBonusSpriteFrame}this.slotSprite.spriteFrame=e},show:function(){this.showEffect()},isBonus:function(){return 11===this.index},getIndex:function(){return this.index},showEffect:function(){this.effectAnimation.play()},hideEffect:function(){this.effectAnimation.stop()},reset:function(){this.hideEffect()},hideAll:function(){this.slotSprite.node.active=!1,this.item1Node.active=!1,this.item8Node.active=!1,this.itemWildNode.active=!1}}),cc._RF.pop()},{}],SlotJackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"0e661aKk7RFP6bWZmEM1fzv","SlotJackpotItem");var n=t("../../util/FormatUtil"),o=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label,timeLabel:cc.Label},onLoad:function(){},init:function(t,e){t?(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],SlotLabel:[function(t,e,i){"use strict";cc._RF.push(e,"93ed5D5XtxBBJVkK6+SfrlG","SlotLabel");var n=t("../../util/FormatUtil"),o=t("../../helper/Config"),s=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{totalBetLabel:cc.Label,betLabel:cc.Label,numLineSelectedLabel:cc.Label,moneyLabel:cc.Label,lastMoneyWinLabel:cc.Label,numberAutoSpinLabel:cc.Label,JackpotItem:s},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.timeOutSpin=null,this.setLastMoneyWin(0)},onDestroy:function(){clearTimeout(this.timeOutSpin)},initLast:function(t){var e=this.Slot.getBet();this.setBet(e),this.setNumLineSelected(t)},handleSpin:function(t){clearTimeout(this.timeOutSpin),this.timeOutSpin=setTimeout(function(){var e=t.total_prize_amount;this.lastMoneyWinLabel.string=n.numberWithCommas(e)}.bind(this),1e3*o.SLOT_DELAY_FINISH_1)},handleSpinDemo:function(t){this.handleSpin(t)},setJackpotWithoutAnimation:function(t){this.JackpotItem.setMoneyWithoutAnimation(t)},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){this.JackpotItem.setMoney(t)},setMoney:function(t){this.moneyLabel.string=n.numberWithCommas(t)},setBet:function(t){this.betLabel.string=n.numberWithCommas(t),this.setTotalBet(t)},setTotalBet:function(t){this.totalBetLabel.string=n.numberWithCommas(t*this.Slot.SlotSelectLine.getLineSelected().length)},setLastMoneyWin:function(t){this.lastMoneyWinLabel.string=n.numberWithCommas(t)},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=n.numberWithCommas(t)},showJackpotItem:function(){this.JackpotItem.node.active=!0},hideJackpotItem:function(){this.JackpotItem.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],SlotLines:[function(t,e,i){"use strict";cc._RF.push(e,"f22cdlIuk5IHJ92f5Ewpxv2","SlotLines");var n=t("./item/SlotNumberLineItem");cc.Class({extends:cc.Component,properties:{listNumberLineItem:[n],listLines:[cc.Node]},init:function(t){for(var e in this.Slot=t,this.SlotUI=t.SlotUI,this.listNumberLineItem)this.listNumberLineItem[e].init(this)},onLoad:function(){},showNumberLines:function(t){if(this.reset(),t)for(var e in this.listNumberLineItem)for(var i in t)if(e==t[i].line_id-1){this.listNumberLineItem[e].showNumberLine(),this.listLines[e].active=!0;break}},showLines:function(t){if(this.reset(),t)for(var e in this.listNumberLineItem)for(var i in t)if(e==t[i].line_id-1){this.listNumberLineItem[e].showNumberLine(),this.listLines[e].active=!0;break}},showLine:function(t){this.reset(),this.listNumberLineItem[t-1].showNumberLine(),this.listLines[t-1].active=!0},reset:function(){for(var t in this.listNumberLineItem)this.listNumberLineItem[t].hideNumberLine(),this.listLines[t].active=!1}}),cc._RF.pop()},{"./item/SlotNumberLineItem":"SlotNumberLineItem"}],SlotNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"64bd3+7W6RLArEu79D4Btt0","SlotNumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabel:cc.Label,bgSprite:cc.Sprite,normalSpriteFrame:cc.SpriteFrame,activeSpriteFrame:cc.SpriteFrame},init:function(t){this.SlotLines=t,this.line=this.numberLineLabel.string},onLoad:function(){this.hideNumberLine()},showNumberLine:function(){this.bgSprite.node.active=!0},hideNumberLine:function(){this.bgSprite.node.active=!1}}),cc._RF.pop()},{}],SlotPoint:[function(t,e,i){"use strict";cc._RF.push(e,"7a2f6gazh1IxaTsqRg909Wk","SlotPoint");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{pointMaskNode:cc.Node,pointNode:cc.Node,pointLabel:cc.Label,pointEffectNode:cc.Node,startHeightMask:0,endHeightMask:0,changeBalancePrefab:cc.Prefab,changeBalanceNode:cc.Node},init:function(t){this.Slot=t},onLoad:function(){this.point=0},addPoint:function(t){this.point+=t,this.setPoint(this.point)},setPoint:function(t){this.point=t,this.pointLabel.string=n.numberWithCommas(t)+"/1.836";var e=t/this.Slot.config.extra_score,i=(this.endHeightMask-this.startHeightMask)*e+this.startHeightMask;this.pointMaskNode.height=i,this.pointEffectNode.y=-110+i},showAddPoint:function(t){if(t>0){this.changeBalanceNode.removeAllChildren(!0);var e=cc.instantiate(this.changeBalancePrefab);e.setPosition(0,0),e.parent=this.changeBalanceNode,e.scale=2,e.getComponent("ChangeBalance").showChangeBalance(t)}}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],SlotRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"df11e+sAD5Bm4mggX3Uw0G5","SlotRankItem");var n=t("../../util/FormatUtil"),o=t("../../util/Util");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){this.idLabel.string=parseInt(e)+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=n.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],SlotRank:[function(t,e,i){"use strict";cc._RF.push(e,"542b5CRD3JMoaB0iuRJXm4M","SlotRank");t("../../../helper/Message");var n=t("../../../util/FormatUtil"),o=t("../SlotConstant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,listScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotScrollView:cc.ScrollView},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.data=null,this.onJackpotClick(),this.Slot.sendRequest.send(o.GET_TOP)},onDisable:function(){},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOffButtonNode.active=!1,this.rankOnButtonNode.active=!0,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOffButtonNode.active=!1,this.jackpotOnButtonNode.active=!0,this.jackpotNode.active=!0},initDataRank:function(t){var e=t.data,i=[];i[0]=e[2],i[1]=e[0];var n=[];n[0]=e[3],n[1]=e[1],this.data=[],this.data[0]=i,this.data[1]=n,this.initData()},initData:function(){if(this.showListNode(),this.listScrollView.content.removeAllChildren(!0),this.jackpotScrollView.content.removeAllChildren(!0),this.data){var t=this.data[0]?this.data[0]:this.data[1];if(t[0])for(var e=t[0],i=0,o=(e=n.filterSameItemSlot(e)).length;i<o;i++){var s=cc.instantiate(this.rankItemPrefab);s.parent=this.listScrollView.content,s.getComponent("SlotRankItem").init(e[i],i)}if(t[1])for(var a=n.sortDataTimeByTime(t[1]),r=0,c=(a=n.filterSameItemSlot(a)).length;r<c;r++){var h=cc.instantiate(this.jackpotItemPrefab);h.parent=this.jackpotScrollView.content,h.getComponent("SlotJackpotItem").init(a[r],r)}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.jackpotOffButtonNode.active=!0,this.rankOffButtonNode.active=!0,this.jackpotOnButtonNode.active=!1,this.rankOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../SlotConstant":"SlotConstant"}],SlotReels:[function(t,e,i){"use strict";cc._RF.push(e,"df3f2H5hhtGKYhPF7K0jKYA","SlotReels");var n=t("./SlotReel"),o=t("./SlotConstant"),s=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{slotReels:[n],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node,lightPrefab:cc.Prefab,lightNode:cc.Node},init:function(t){for(var e in this.Slot=t,this.SlotUI=t.SlotUI,this.SlotLines=t.SlotLines,this.slotReels)this.slotReels[e].init(t)},onLoad:function(){this.timeOutResult=null,this.timeOutLines=null,this.intervalLines=null},onDestroy:function(){clearTimeout(this.timeOutResult),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.is_extra,a=t.list_line_win_amount,r=t.list_line_win_score,c=t.total_prize_amount,h=t.add_score,l=t.total_score,u=t.win_type,d=t.x_prize,m=t.next_x_prize,f=t.current_step,p=t.max_spin_extra_step;this.listLine=a.concat(r);for(var _=0;_<s.SLOT_NUMBER_REELS;_++){for(var S=[],g=0;g<s.SLOT_NUMBER_ITEM_IN_REEL;g++)S.push(e[g*s.SLOT_NUMBER_REELS+_]);this.slotReels[_].spin(S)}this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.Slot.SlotState.isAutoSpin()||this.Slot.SlotState.setFinish(),this.SlotLines.showNumberLines(this.listLine),this.showEffectSlotItem(a,r,i)},this),cc.callFunc(function(){switch(this.Slot.SlotX.setX(m||d),this.Slot.SlotPoint.showAddPoint(h),this.Slot.SlotPoint.setPoint(l),u){case o.WIN_TYPE_ZERO:this.Slot.SlotAutoSpinSetting.checkAutoSpin()?this.Slot.spin():this.Slot.SlotState.setStop();break;case o.WIN_TYPE_NORMAL:this.Slot.SlotEffect.showWinNormal(c/d,d);break;case o.WIN_TYPE_BIG_WIN:this.Slot.SlotEffect.showBigWin(c);break;case o.WIN_TYPE_SUPER_BIG_WIN:this.Slot.SlotEffect.showSuperBigWin(c);break;case o.WIN_TYPE_JACKPOT:this.Slot.SlotEffect.showJackpot(c)}u!==o.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot.SlotAutoSpinSetting.checkAutoSpin()?this.SlotUI.showSpinDisableButton():this.SlotUI.showSpinButton(),n&&(0===f&&this.Slot.SlotEffect.showFreeSpin(),this.SlotUI.showSpinFreeButton(p-f),this.Slot.SlotX.setX(10)),i?this.Slot.SlotEffect.showBonus(t):this.Slot.SlotAutoSpinSetting.checkAutoSpin()?(this.Slot.SlotEffect.hideAll(),this.Slot.spin()):(this.Slot.SlotEffect.hideAll(),this.Slot.SlotState.setStop(),n&&(0===f&&this.Slot.SlotEffect.showFreeSpin(),this.SlotUI.showSpinFreeButton(p-f),this.Slot.SlotX.setX(10)))}.bind(this),1e3*s.SLOT_DELAY_FINISH_1)):(n&&(0===f&&this.Slot.SlotEffect.showFreeSpin(),this.SlotUI.showSpinFreeButton(p-f),this.Slot.SlotX.setX(10)),i&&this.Slot.SlotEffect.showBonus(t))},this)))},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,n=t.list_line_win_amount,a=t.list_line_win_score,r=t.total_prize_amount,c=t.win_type,h=t.x_prize,l=t.next_x_prize;this.listLine=n.concat(a);for(var u=0;u<s.SLOT_NUMBER_REELS;u++){for(var d=[],m=0;m<s.SLOT_NUMBER_ITEM_IN_REEL;m++)d.push(e[m*s.SLOT_NUMBER_REELS+u]);this.slotReels[u].spin(d)}this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.Slot.SlotState.isAutoSpin()||this.Slot.SlotState.setFinish(),this.SlotLines.showNumberLines(this.listLine),this.showEffectSlotItem(n,a,i)},this),cc.callFunc(function(){this.Slot.SlotX.setX(l||h);var e=this.Slot.getTestInfo();switch(r=c===o.WIN_TYPE_JACKPOT?e.jackpot:r,e.money+=r,this.Slot.SlotLabel.setMoney(e.money),c){case o.WIN_TYPE_ZERO:i?this.Slot.SlotEffect.showBonus(t):this.Slot.SlotAutoSpinSetting.checkAutoSpin()?this.Slot.spin():this.Slot.SlotState.isAutoSpin()||this.Slot.SlotState.setStop();break;case o.WIN_TYPE_NORMAL:this.Slot.SlotEffect.showWinNormal(r/h,h);break;case o.WIN_TYPE_BIG_WIN:this.Slot.SlotEffect.showBigWin(r);break;case o.WIN_TYPE_SUPER_BIG_WIN:this.Slot.SlotEffect.showSuperBigWin(r);break;case o.WIN_TYPE_JACKPOT:this.Slot.SlotEffect.showJackpot(r)}c!==o.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){i?this.Slot.SlotEffect.showBonus(t):this.Slot.SlotAutoSpinSetting.checkAutoSpin()?(this.Slot.SlotEffect.hideAll(),this.Slot.spin()):(this.Slot.SlotEffect.hideAll(),this.Slot.SlotState.setStop())}.bind(this),1e3*s.SLOT_DELAY_FINISH_1)):i&&this.Slot.SlotEffect.showBonus(t)},this)))},showEffectSlotItem:function(t,e,i){var n=t.concat(e),o=this.getListSlotItem();for(var a in n){var r=n[a].items;for(var c in r)for(var h in o)if(r[c]==h){this.showEffectItem(o[h]);break}}if(i)for(var l in o)o[l].getComponent("SlotItem").isBonus()&&this.showEffectItem(o[l]);for(var u in e){var d=e[u].items;for(var m in d)for(var f in o)if(d[m]==f){this.addLight(o[f]);break}}this.Slot.SlotAutoSpinSetting.checkAutoSpin()||(this.currentLine=0,clearTimeout(this.timeOutLines),clearInterval(this.intervalLines),this.timeOutLines=setTimeout(function(){this.hideEffectItem(),this.intervalLines=setInterval(function(){if(n&&n.length>this.currentLine){var t=n[this.currentLine].items;for(var e in o)o[e].getComponent("SlotItem").reset();for(var i in t)for(var s in o)if(t[i]==s){o[s].getComponent("SlotItem").show();break}this.Slot.SlotLines.showLine(n[this.currentLine].line_id),this.currentLine++}else{for(var a in o)o[a].getComponent("SlotItem").reset();this.Slot.SlotLines.reset(),clearInterval(this.intervalLines)}}.bind(this),2e3)}.bind(this),1e3*s.SLOT_DELAY_FINISH_1))},getListSlotItem:function(){for(var t=[],e=0;e<s.SLOT_NUMBER_ITEM_IN_REEL;e++)for(var i=0;i<s.SLOT_NUMBER_REELS;i++)t.push(this.slotReels[i].getListSlotItem()[e]);return t},showEffectItem:function(t){var e=t.parent.convertToNodeSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),n=cc.instantiate(this.itemPrefab);n.getComponent("SlotItem").init(t.getComponent("SlotItem").getIndex()),n.getComponent("SlotItem").show(),n.setPosition(i),n.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1},addLight:function(t){var e=t.parent.convertToNodeSpaceAR(t.getPosition()),i=this.lightNode.convertToNodeSpaceAR(e),n=cc.instantiate(this.lightPrefab);n.parent=this.lightNode,n.setPosition(i),n.runAction(cc.sequence(cc.moveTo(2,0,0),cc.callFunc(function(){n.removeFromParent(!0)},this)))},reset:function(){this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","./SlotConstant":"SlotConstant","./SlotReel":"SlotReel"}],SlotReel:[function(t,e,i){"use strict";cc._RF.push(e,"a5b88dvoOJJN6ogwFBoLS2M","SlotReel");var n=t("../../util/RandomUtil"),o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,numberItems:0,animation:cc.Animation},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotLines=t.SlotLines},onLoad:function(){this.items=[],this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.randomItems()},spin:function(t){if(this.node.active){this.reset(),this.setItems(this.items),this.animation.play(),this.items=t,this.listSlotItem=[];for(var e=1;e<this.numberItems;e++){var i=this.getRandomItem();e===this.numberItems-1&&(i=t[0]),e===this.numberItems-2&&(i=t[1]),e===this.numberItems-3&&(i=t[2]);var n=this.instanceItem(i);n.setPosition(0,(e+1)*o.SLOT_DISTANCE_TWO_ITEMS),n.parent=this.node,e===this.numberItems-1&&this.listSlotItem.push(n),e===this.numberItems-2&&this.listSlotItem.push(n),e===this.numberItems-3&&this.listSlotItem.push(n)}this.listSlotItem.reverse()}},getListSlotItem:function(){return this.listSlotItem},randomItems:function(){for(var t=[],e=0;e<o.SLOT_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){return n.getRandomInt(1,o.SLOT_NUMBER_TYPE_ITEM)},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*o.SLOT_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("SlotItem").reset(),e.getComponent("SlotItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.SlotLines.reset(),this.putAllChipToPool();var t=this.node.getChildren();for(var e in t)t[e].getComponent("SlotItem").reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil"}],SlotSelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"b78d4Pj5i1HSqRnpVzh66tB","SlotSelectLine");var n=t("../../helper/Message"),o=t("./item/SlotSelectNumberLineItem");cc.Class({extends:cc.Component,properties:{listSelectNumLineItem:[o],selectAllEvenNode:cc.Node,unSelectAllEvenNode:cc.Node,selectAllOddNode:cc.Node,unSelectAllOddNode:cc.Node,selectAllNode:cc.Node,unSelectAllNode:cc.Node,unSelectOnNode:cc.Node,unSelectOffNode:cc.Node},init:function(t){for(var e in this.Slot=t,this.SlotLines=t.SlotLines,this.SlotLabel=t.SlotLabel,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){},initFirst:function(){this.selectAllItem(),this.totalLineSelected=this.getLineSelected().length,this.SlotLabel.initLast(this.totalLineSelected)},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.unSelectOnNode.active=!1,this.unSelectOffNode.active=!0):(20===this.totalLineSelected&&(this.selectAllNode.active=!0,this.unSelectAllNode.active=!1),this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1),this.SlotLabel.initLast(this.totalLineSelected)},showNumberLines:function(t){this.SlotLines.showNumberLines(t)},showLines:function(t){this.SlotLines.showLines(t)},showLine:function(t){this.SlotLines.showLine(t)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},checkLineBuyNum:function(t){return this.listSelectNumLineItem[t]},unSelect:function(){this.selectAllNode.active=!1,this.unSelectAllNode.active=!0},onSelectAllEvenClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.selectAllEvenNode.active=!0,this.unSelectAllEvenNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1}},onUnSelectAllEvenClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.selectAllNode.active=!1,this.unSelectAllNode.active=!0,this.selectAllEvenNode.active=!1,this.unSelectAllEvenNode.active=!0}},onSelectAllOddClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.selectAllOddNode.active=!0,this.unSelectAllOddNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1}},onUnSelectAllOddClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.selectAllNode.active=!1,this.unSelectAllNode.active=!0,this.selectAllOddNode.active=!1,this.unSelectAllOddNode.active=!0}},onSelectAllClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest()?this.Slot.showToast(n.SLOT_NOT_CHANGE_BET):this.selectAllItem()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.selectAllEvenNode.active=!0,this.selectAllOddNode.active=!0,this.selectAllNode.active=!0,this.unSelectAllEvenNode.active=!1,this.unSelectAllOddNode.active=!1,this.unSelectAllNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1},onUnSelectAllClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.selectAllEvenNode.active=!1,this.selectAllOddNode.active=!1,this.selectAllNode.active=!1,this.unSelectAllEvenNode.active=!0,this.unSelectAllOddNode.active=!0,this.unSelectAllNode.active=!0,this.unSelectOffNode.active=!0,this.unSelectOnNode.active=!1}},hideAllButton:function(){this.is_selectAllEvent=this.selectAllEvenNode.active,this.is_selectAllOdd=this.selectAllOddNode.active,this.is_selectAll=this.selectAllNode.active,this.is_unSelectAll=this.unSelectOnNode.active,this.selectAllEvenNode.active=!1,this.selectAllOddNode.active=!1,this.selectAllNode.active=!1,this.unSelectOnNode.active=!1,this.unSelectAllEvenNode.active=!0,this.unSelectAllOddNode.active=!0,this.unSelectAllNode.active=!0,this.unSelectOffNode.active=!0},showAllButton:function(){this.getLineSelected().length>0&&(this.is_selectAllEvent?(this.selectAllEvenNode.active=!0,this.unSelectAllEvenNode.active=!1):(this.selectAllEvenNode.active=!1,this.unSelectAllEvenNode.active=!0),this.is_selectAllOdd?(this.selectAllOddNode.active=!0,this.unSelectAllOddNode.active=!1):(this.selectAllOddNode.active=!1,this.unSelectAllOddNode.active=!0),this.is_selectAll?(this.selectAllNode.active=!0,this.unSelectAllNode.active=!1):(this.selectAllNode.active=!1,this.unSelectAllNode.active=!0),this.is_unSelectAll?(this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1):(this.unSelectOnNode.active=!1,this.unSelectOffNode.active=!0))}}),cc._RF.pop()},{"../../helper/Message":"Message","./item/SlotSelectNumberLineItem":"SlotSelectNumberLineItem"}],SlotSelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"802cf8Iv6hAP6p+xJAK1dNC","SlotSelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot=t,this.SlotSelectLine=t.SlotSelectLine},onLoad:function(){this.selected=this.onSelectButtonNode.active},onClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.SlotSelectLine.itemIsSelected(!0),this.showSelect()},unSelect:function(){this.setSelected(!1),this.SlotSelectLine.unSelect(),this.SlotSelectLine.itemIsSelected(!1),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected}}),cc._RF.pop()},{}],SlotState:[function(t,e,i){"use strict";cc._RF.push(e,"e741dWduKVHHbn5+K7kRLJ9","SlotState");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},setStop:function(){this.currentState=this.STOP,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinButton(),this.SlotUI.showAutoSpinButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showAutoSpinDisableButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showAutoSpinDisableButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showStopAutoSpinButton(),this.reset()},reset:function(){this.Slot.SlotLines.reset(),this.Slot.SlotLabel.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],SlotTutorial:[function(t,e,i){"use strict";cc._RF.push(e,"4acffz6SwFPgaUqA2MQ30Ig","SlotTutorial"),cc.Class({extends:cc.Component,properties:{pageLabel:cc.Label,pageNodes:[cc.Node]},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.showPage(0),this.dialogForm=this.node.getComponent("DialogForm")},onNextClick:function(){for(var t in this.pageNodes)if(this.page==t){++t>=this.pageNodes.length&&(t=0),this.showPage(t);break}},onPreviousClick:function(){for(var t in this.pageNodes)if(this.page==t){--t<0&&(t=this.pageNodes.length-1),this.showPage(t);break}},showPage:function(t){for(var e in this.page=t,this.pageNodes)this.pageNodes[e].active=t==e;this.pageLabel.string=t+1+"/"+this.pageNodes.length},hideAll:function(){for(var t in this.pageNodes)this.pageNodes[t].active=!1}}),cc._RF.pop()},{}],SlotUI:[function(t,e,i){"use strict";cc._RF.push(e,"aaaea9EQ15BCYO34z4jcgcP","SlotUI");var n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinFreeDisableLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,spinButtonDisableNode:cc.Node,spinFreeButtonDisableNode:cc.Node,stopAutoSpinButtonNode:cc.Node,autoSpinButtonNode:cc.Node,autoSpinButtonDisableNode:cc.Node,selectLineItemFormNode:cc.Node,testButtonNode:cc.Node,playButtonNode:cc.Node,tutorialFormNode:cc.Node,historyFormNode:cc.Node,rankFormNode:cc.Node,autoSpinSettingFormNode:cc.Node,gameOverFormNode:cc.Node,rechargeFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node},onLoad:function(){this.dialogFormTutorial=this.tutorialFormNode.getComponent("DialogForm"),this.dialogFormHistory=this.historyFormNode.getComponent("DialogForm"),this.dialogFormRank=this.rankFormNode.getComponent("DialogForm"),this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormGameOver=this.gameOverFormNode.getComponent("DialogForm"),this.dialogFormRecharge=this.rechargeFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineItemFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage")},showGameNode:function(){this.gameNode.active=!0,this.gameBonusNode.active=!1},showGameBonusNode:function(){this.gameNode.active=!1,this.gameBonusNode.active=!0},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1,this.spinFreeButtonDisableNode.active=!1},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,this.spinFreeButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=n.numberWithCommas(t),this.spinFreeDisableLabel.string=n.numberWithCommas(t))},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0,this.spinFreeButtonDisableNode.active=!1},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showTestButton:function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0},showPlayButton:function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1},showTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.showDialog(t)},hideTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.hideDialog(t)},showHistoryFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)},hideHistoryFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)},showRankFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.showDialog(t)},hideRankFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)},showGameOverFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGameOver.showDialog(t)},hideGameOverFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGameOver.hideDialog(t)},showRechargeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRecharge.showDialog(t)},hideSelectLineFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.hideDialog(t)},showSelectLineFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)},hideRechargeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRecharge.hideDialog(t)},showDialogMessage:function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()},hideDialogMessage:function(){this.dialogMessageForm.hideDialog()},showProcessingNode:function(){this.processingNode.active=!0},hideProcessingNode:function(){this.processingNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],SlotX:[function(t,e,i){"use strict";cc._RF.push(e,"6f73fcyKuRLhITMUizL0T9e","SlotX"),cc.Class({extends:cc.Component,properties:{xNodes:[cc.Node]},init:function(t){this.Slot=t},onLoad:function(){},setX:function(t){for(var e=0;e<this.xNodes.length;e++)this.xNodes[e].active=e+1<=t},addX:function(){for(var t=0;t<this.xNodes.length;t++)if(!this.xNodes[t].active){this.xNodes[t].active=!0;break}},hideAll:function(){for(var t in this.xNodes)this.xNodes[t].active=!1},reset:function(){this.setX(1)}}),cc._RF.pop()},{}],Slot:[function(t,e,i){"use strict";cc._RF.push(e,"69771WQSgpK9paGMPCFBgzo","Slot");var n=t("../../base/BaseScene"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("../../helper/Config"),r=t("./SlotUI"),c=t("./SlotHandlerRequest"),h=t("./SlotReels"),l=t("./SlotSelectLine"),u=t("./SlotPoint"),d=t("./SlotX"),m=t("./SlotLines"),f=t("./SlotLabel"),p=t("./SlotEffect"),_=t("./SlotBonus"),S=t("./SlotState"),g=t("./SlotConstant"),C=t("./form/SlotAutoSpinSetting"),N=t("./form/SlotHistory"),E=t("./form/SlotRank"),T=t("./form/SlotTutorial"),I=t("./form/SlotGameOver"),v=t("../../prefab/form/Recharge"),y=t("../../prefab/form/Tutorial"),R=t("../../prefab/News"),L=t("../../prefab/Toast"),B=t("../../ui/dialog/DialogMessage"),M=t("../../ui/Processing"),A=t("../../object/Audio"),P=t("../../object/Music");cc.Class({extends:n,properties:{questNotificationItemPrefab:cc.Prefab,SlotLabel:f,SlotUI:r,SlotReels:h,SlotPoint:u,SlotX:d,SlotLines:m,SlotEffect:p,SlotBonus:_,SlotTutorial:T,SlotSelectLine:l,SlotAutoSpinSetting:C,SlotHistory:N,SlotRank:E,SlotGameOver:I,Recharge:v,Tutorial:y,News:R,Toast:L,DialogMessage:B,Processing:M,Audio:A,Music:P},onLoad:function(){this._super(),this.setSceneName(o.SCENE_GAME_SLOT),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.SlotHandlerRequest=c,this.SlotHandlerRequest.init(this),this.SlotState=S,this.SlotReels.init(this),this.SlotPoint.init(this),this.SlotX.init(this),this.SlotLines.init(this),this.SlotEffect.init(this),this.SlotBonus.init(this),this.SlotState.init(this),this.SlotTutorial.init(this),this.SlotLabel.init(this),this.SlotSelectLine.init(this),this.SlotAutoSpinSetting.init(this),this.SlotHistory.init(this),this.SlotRank.init(this),this.SlotGameOver.init(this),this.Recharge.init(this),this.updateMoneyGold(),this.setBet(a.SLOT_BETS[0],0),this.SlotState.setStop(),this.onResponseBind=this.SlotHandlerRequest.onResponse.bind(this.SlotHandlerRequest),this.onUserVariablesUpdateBind=this.SlotHandlerRequest.onUserVariablesUpdate.bind(this.SlotHandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.SlotSelectLine.initFirst()},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.config=t.data.config,this.initLastState()},initLastState:function(){var t=this.getInfo();this.SlotX.setX(t.x_prize),this.SlotPoint.setPoint(t.total_score),this.SlotLabel.setJackpotWithoutAnimation(t.jackpot),t.is_extra&&(this.SlotUI.showSpinFreeButton(t.max_spin_extra_step-t.current_step),this.SlotX.setX(10))},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:5e7,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:5e7}},handleNews:function(t){this.News.addNews(t)},handleJackpot:function(t){var e=0;for(var i in this.info){var n=void 0;switch(this.info[i].spin_fee){case 100:this.info[i].jackpot=t.data[0],(n=t.data[3])&&(this.info[i].x_jackpot=n[0]);break;case 1e3:this.info[i].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[i].x_jackpot=n[1]);break;case 1e4:this.info[i].jackpot=t.data[2],(n=t.data[3])&&(this.info[i].x_jackpot=n[2])}this.info[i].spin_fee===this.bet&&(e=this.info[i].jackpot,this.info[i].x_jackpot)}this.isTest()||this.SlotLabel.setJackpot(e)},handleSpin:function(t){this.is_spin=!1;var e=t.data;this.SlotBonus.node.active&&this.SlotUI.showGameNode(),this.SlotState.isAutoSpin()||this.SlotState.setSpinning(),this.initInfo(e),this.SlotAutoSpinSetting.handleSpin(e),this.SlotLabel.handleSpin(e),this.SlotReels.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.total_score=t.total_score,e.max_spin_extra_step=t.max_spin_extra_step,e.current_step=t.current_step,e.is_extra=t.is_extra,e.x_prize=t.x_prize,e.next_x_prize=t.next_x_prize,e.is_bonus=t.is_bonus},handleSpinDemo:function(t){this.is_spin=!1;var e=t.data;this.info&&(e.total_prize_amount>0?this.testInfo.x_prize++:this.testInfo.x_prize=1),this.SlotState.setSpinning(),this.SlotLabel.handleSpinDemo(e),this.SlotReels.handleSpinDemo(e)},handleSpinBonus:function(t){this.is_spin=!1;var e=t.data;e.status?this.SlotBonus.handleSpin(e):this.SlotBonus.handleSpinFinish(e)},handleSpinBonusDemo:function(t){this.is_spin=!1;var e=t.data;e.status?this.SlotBonus.handleSpinDemo(e):this.SlotBonus.handleSpinFinishDemo(e)},handleSpinFail:function(t){this.is_spin=!1,this.showToast(t.msg),this.SlotState.setStop(),this.SlotAutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleGetTop:function(t){this.SlotRank.initDataRank(t)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},onTestClick:function(){this.Audio.playClick(),this.isCanChangeBet()&&!this.isBonus()?(this.SlotUI.showPlayButton(),this.initTestData()):this.isBonus()||this.showToast(s.SLOT_NOT_TEST)},onPlayClick:function(){this.Audio.playClick(),this.isBonus()||(this.SlotUI.showTestButton(),this.setBet(this.bet,this.indexBet),this.SlotLabel.setLastMoneyWin(0))},onSelectLineClick:function(){this.Audio.playClick(),!this.isCanChangeBet()||this.isTest()||this.isBonus()||this.isFreeSpin()?this.showToast(s.SLOT_NOT_CHANGE_SELECT_LINE):this.SlotUI.showSelectLineFormNode()},onHelpClick:function(){this.isBonus()||(this.Audio.playClick(),this.SlotUI.showHelpFormNode())},onTutorialClick:function(){this.isBonus()||(this.Audio.playClick(),this.SlotUI.showTutorialFormNode())},onRankClick:function(){this.isBonus()||this.SlotUI.showRankFormNode()},onHistoryClick:function(){this.isBonus()||(this.Audio.playClick(),this.SlotUI.showHistoryFormNode())},onRechargeClick:function(){this.showDialogMessage(s.RECHARGE_MONEY_TITLE,"H\u1ec7 th\u1ed1ng n\u1ea1p th\u1ebb \u0111ang b\u1ea3o tr\xec")},onSpinClick:function(){this.Audio.playClick(),this.isBonus()||this.spin()},spin:function(){if(this.line_player_choose=this.SlotSelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.is_spin){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};this.isTest()?(this.sendRequest.send(g.SPIN_DEMO,t),this.testInfo.money-=2e4,this.SlotLabel.setMoney(this.testInfo.money)):this.sendRequest.send(g.SPIN,t),this.is_spin=!0}}else this.showToast(s.SLOT3_NOT_SELECT_LINE)},onStopAutoSpinClick:function(){this.isBonus()||(this.Audio.playClick(),this.SlotState.setSpinning(),this.SlotAutoSpinSetting.stopAutoSpin())},onAutoSpinClick:function(){this.Audio.playClick(),!this.isCanChangeBet()||this.isTest()||this.isBonus()?this.isBonus()||this.showToast(s.SLOT_NOT_AUTO_SPIN):this.SlotUI.showAutoSpinSettingFormNode()},onAddClick:function(){if(this.Audio.playClick(),!this.isCanChangeBet()||this.isTest()||this.isBonus())this.isBonus()||this.showToast(s.SLOT_NOT_CHANGE_BET);else for(var t=a.SLOT_BETS,e=0;e<t.length;e++)if(this.bet===t[e]){++e>=t.length&&(e=0),this.setBet(t[e],e);break}},onMinusClick:function(){if(this.Audio.playClick(),!this.isCanChangeBet()||this.isTest()||this.isBonus())this.isBonus()||this.showToast(s.SLOT_NOT_CHANGE_BET);else for(var t=a.SLOT_BETS,e=0;e<t.length;e++)if(this.bet===t[e]){--e<0&&(e=t.length-1),this.setBet(t[e],e);break}},onBackClick:function(){this.isBonus()||this.SlotState.isAutoSpin()||!this.isCanChangeBet()?this.showToast(s.SLOT_CANCEL_BACK):(this.Audio.playClick(),this.showProcessingNode(),this.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME))},initTestData:function(){this.initTestInfo(),this.SlotSelectLine.selectAllItem(),this.SlotLabel.setBet(1e4),this.initBetData(this.testInfo),this.SlotLabel.setMoney(this.testInfo.money),this.SlotLabel.setLastMoneyWin(0)},isTest:function(){return this.SlotUI.playButtonNode.active},isCanChangeBet:function(){return this.SlotState.isStop()},showBonusGame:function(t){var e=t.bonus_time-9;this.SlotUI.showGameBonusNode(),this.SlotBonus.setTime(e)},updateMoneyGold:function(){this.isTest()||this.SlotLabel.setMoney(this.getMoney())},setBet:function(t,e){var i=this.getInfoByBet(t);this.indexBet=e,this.bet=t,this.SlotLabel.setBet(t),this.initBetData(i),this.SlotLabel.setMoney(this.getMoney()),i&&this.SlotLabel.setJackpot(i.jackpot)},getTestInfo:function(){return this.testInfo},initBetData:function(t){var e=void 0;if(t?e=t:this.info&&(e=this.info[this.indexBet]),e){var i=e.jackpot,n=e.x_prize,o=e.next_x_prize,s=e.total_score,a=e.is_extra,r=e.current_step,c=e.max_spin_extra_step;this.SlotLabel.setJackpot(i),this.SlotX.setX(o||n),this.SlotPoint.setPoint(s),a?this.SlotUI.showSpinFreeButton(c-r):this.SlotUI.showSpinButton()}},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_extra},isBonus:function(){return this.SlotBonus.node.active||this.getInfo().is_bonus},isAutoSpin:function(){return this.SlotState.isAutoSpin()},setFinishBonus:function(){this.getInfo().is_bonus=!1},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee===this.bet)return this.info[t];return null},getInfoByBet:function(t){for(var e in this.info)if(this.info[e].spin_fee===t)return this.info[e]},getBet:function(){return this.bet},getTotalBet:function(){return this.bet*this.SlotSelectLine.getLineSelected().length},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.SlotUI.showDialogMessage(t,e)},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},hideDialogMessage:function(){this.SlotUI.hideDialogMessage()},showProcessingNode:function(){this.SlotUI.showProcessingNode()},hideProcessingNode:function(){this.SlotUI.hideProcessingNode()}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Config":"Config","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/Recharge":"Recharge","../../prefab/form/Tutorial":"Tutorial","../../ui/Processing":"Processing","../../ui/dialog/DialogMessage":"DialogMessage","./SlotBonus":"SlotBonus","./SlotConstant":"SlotConstant","./SlotEffect":"SlotEffect","./SlotHandlerRequest":"SlotHandlerRequest","./SlotLabel":"SlotLabel","./SlotLines":"SlotLines","./SlotPoint":"SlotPoint","./SlotReels":"SlotReels","./SlotSelectLine":"SlotSelectLine","./SlotState":"SlotState","./SlotUI":"SlotUI","./SlotX":"SlotX","./form/SlotAutoSpinSetting":"SlotAutoSpinSetting","./form/SlotGameOver":"SlotGameOver","./form/SlotHistory":"SlotHistory","./form/SlotRank":"SlotRank","./form/SlotTutorial":"SlotTutorial"}],SmallBannerItem:[function(t,e,i){"use strict";cc._RF.push(e,"c07d9joORpP0oMrXfUn3rQN","SmallBannerItem");var n=t("../../helper/Config"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{imageSprite:cc.Sprite,loadingNode:cc.Node},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.Event=t.Event,this.data=e;var i=this;if(o.validateUrlImage(this.data.thumb2))if(this.GameCenter.isAndroid()){if(o.validateUrlImage(this.data.thumb2)){cc.textureCache.addImageAsync(this.data.thumb2,function(t){var e=new cc.SpriteFrame(t,cc.Rect(0,0,279,445));i.imageSprite.spriteFrame=e,i.loadingNode.active=!1},this)}}else cc.loader.load(this.data.thumb2,function(t,e){if(e instanceof cc.Texture2D){var n=new cc.SpriteFrame(e,cc.Rect(0,0,279,445));i.imageSprite.spriteFrame=n,i.loadingNode.active=!1}})},onLoad:function(){},onClick:function(){this.GameCenter.Audio.playClick(),this.data.link&&cc.sys.openURL(this.data.link)},show:function(t){this.node.zIndex=1,this.node.active=!0,t?(this.node.opacity=0,this.node.runAction(cc.fadeIn(n.BANNER_TIME_FADE))):this.node.opacity=255},hide:function(t){this.node.zIndex=0,this.node.active=!0,t?(this.node.opacity=255,this.node.runAction(cc.sequence(cc.fadeOut(n.BANNER_TIME_FADE),cc.callFunc(function(){this.node.active=!1},this)))):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],SmallBanner:[function(t,e,i){"use strict";cc._RF.push(e,"75b6dmI5o5GDaqwxJ1F+IgJ","SmallBanner");var n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{smallBannerItemPrefab:cc.Prefab,bannerPageView:cc.PageView},init:function(t){this.GameCenter=t},onLoad:function(){this.listSmallBanner=[],this.initData()},start:function(){},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.EVENT;if(e&&e.length>0){this.bannerPageView.content.removeAllChildren(!0),this.node.stopAllActions();for(var i=0;i<e.length;i++){var o=cc.instantiate(this.smallBannerItemPrefab);o.getComponent("SmallBannerItem").init(this.GameCenter,e[i]),this.bannerPageView.addPage(o)}var s=this.bannerPageView.getPages();this.leftToRight=!0,s.length>1&&this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(n.BANNER_TIME_CHANGE),cc.callFunc(function(){var t=this.bannerPageView.getCurrentPageIndex(),e=void 0;this.leftToRight?(e=t+1)>=this.bannerPageView.getPages().length&&(e-=2,this.leftToRight=!1):(e=t-1)<0&&(e+=2,this.leftToRight=!0),this.bannerPageView.setCurrentPageIndex(e)},this))))}}}}),cc._RF.pop()},{"../../../helper/Config":"Config"}],Splash:[function(t,e,i){"use strict";cc._RF.push(e,"ee617DSR+VBJLxlj9OJsjjJ","Splash");var n=t("../../base/BaseController"),o=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./HotUpdate"),r=t("../../object/Audio");cc.Class({extends:n,properties:{HotUpdate:a,messageLabel:cc.Label,retryGetDataButtonNode:cc.Node,Audio:r},onLoad:function(){this._super(),this.isLoadConfig=!1,this.HotUpdate.init(this),this.initOneSign(),this.initFireBase()},initOneSign:function(){this.checkPlugin()&&(sdkbox.PluginOneSignal.init(),sdkbox.PluginOneSignal.setListener({onSendTag:function(t,e,i){},onGetTags:function(t){},onIdsAvailable:function(t,e){},onPostNotification:function(t,e){},onNotification:function(t,e,i){}}))},checkPlugin:function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0!==sdkbox.PluginOneSignal||(console.log("sdkbox.PluginFacebook is undefined"),!1)},initFireBase:function(){if(cc.sys.isMobile){if(!this.checkPluginFirebase())return;sdkbox.firebase.Analytics.init()}},checkPluginFirebase:function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0===sdkbox.firebase?(console.log("sdkbox.firebase is undefined"),!1):void 0!==sdkbox.firebase.Analytics||(console.log("sdkbox.firebase.Analytics is undefined"),!1)},loadAssets:function(){this.loadConfig(),this.loadScene()},loadScene:function(){this.isLoadConfig&&cc.director.loadScene(o.SCENE_LOGIN)},loadConfig:function(){var t=this;this.messageLabel.string=s.SPLASH_GET_GET_DATA;var e=this;this.api.getConfig({},function(i){t.setGeneralConfig(i.data),e.isLoadConfig=!0,cc.director.loadScene(o.SCENE_LOGIN)},function(e){t.messageLabel.string=s.SPLASH_GET_CONFIG_FAILED,t.retryGetDataButtonNode.active=!0})},onRetryGetDataClick:function(){this.Audio.playClick(),this.retryGetDataButtonNode.active=!1,this.loadConfig()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","./HotUpdate":"HotUpdate"}],TLMNCardController:[function(t,e,i){"use strict";cc._RF.push(e,"b235cw9IHJP0L/XQO2zv7bJ","TLMNCardController");var n=t("../TLMNConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController")},onEnable:function(){},init:function(t){var e=this;this.TLMN=t,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this._scaleDownAction=cc.scaleTo(n.TIME_TOUCH_CARD,n.SCALE_TOUCH_CARD),this._scaleUpAction=cc.scaleTo(n.TIME_TOUCH_CARD,this._initScale),this._moveUpAction=cc.moveBy(n.TIME_TOUCH_CARD,0,n.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(n.TIME_TOUCH_CARD,0,-n.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.cardController.showHighLight()},this._onMouseLeave=function(t){e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(this.stopAllActions(),this.cardController.showHighLight(),this.runAction(e._scaleDownAction))},this._onTouchUp=function(t){e.isInAction||(this.stopAllActions(),this.cardController.hideHighLight(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveDownaction),e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveUpAction),e._resetInAction))),e.TLMN.TLMNHandlerEffect.checkShowButtons(),e.TLMN.TLMNHandlerEffect.showRecommend())},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=n.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(n.TIME_TOUCH_CARD,this._initScale),cc.moveTo(n.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected}}),cc._RF.pop()},{"../TLMNConfig":"TLMNConfig"}],TLMNCard:[function(t,e,i){"use strict";cc._RF.push(e,"cff470LjCtDGLClF5VCuKIo","TLMNCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],TLMNConfig:[function(t,e,i){"use strict";cc._RF.push(e,"45180EFUXNFOpQDpO/cOKK9","TLMNConfig");e.exports={NUMBER_PLAYERS:4,NUMBER_SOLO_PLAYERS:2,NUMBER_CARDS_EACH_PLAYERS:13,VALUE_HAI:15,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:50,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-250,POSITION_MY_CARDS_Y:-250,DISTANCE_CARD_IN_TABLE:20,DISTANCE_TWO_CARDS_IN_TABLE:40,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.6,TIME_FLIP_CARD_IN_TABLE:.25,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:40,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.6,TIME_SHOW_CARDS_OTHER_PLAYERS:.5},cc._RF.pop()},{}],TLMNConstant:[function(t,e,i){"use strict";cc._RF.push(e,"75e5eld/shHv6VbCcDo/PeJ","TLMNConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",PLAY:"PLAY",IGNORE:"IGNORE",RESULT:"RESULT",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME:"PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],TLMNGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"1a345Mlxn9L1JmRLWkvRfGD","TLMNGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",BAI_RAC:"BAI_RAC",MOT_DOI:"MOT_DOI",MOT_BO_BA:"MOT_BO_BA",MOT_TU_QUY:"MOT_TU_QUY",BA_DOI_THONG:"BA_DOI_THONG",BON_DOI_THONG:"BON_DOI_THONG",MOT_DAY:"MOT_DAY"},cc._RF.pop()},{}],TLMNHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"5934bUfIoVCjJ5cUYFhOjbw","TLMNHandlerEffect");var n=t("./TLMNCard"),o=t("./item/TLMNCardController"),s=t("./TLMNConfig"),a=t("./TLMNUtil"),r=t("./TLMNThoiType"),c=t("./TLMNWinType"),h=t("./TLMNRecommend"),l=t("../../util/CardUtil"),u=t("../../util/RandomUtil"),d={init:function(t){this.TLMN=t,this.TLMNUI=t.TLMNUI,this.GameCommon=t.GameCommon,this.sortCard=!1,this.listPlayers=t.listPlayers,this.recommenedToggle=t.recommenedToggle},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.initMyCards(t):this.listPlayers[e].TLMNPlayer.showCardBack(s.NUMBER_CARDS_EACH_PLAYERS)},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.TLMN.myCardsNode.removeAllChildren(!0),this.TLMNUI.showSortButton(),t){var n=this.initNewCardNode(t[i]);n.parent=this.TLMN.myCardsNode,n.scale=s.SCALE_CARDS_IN_HAND;var a=n.addComponent(o);a.init(this.TLMN),n.tlmnCardController=a;var r=s.DISTANCE_TWO_CARDS_IN_HAND*i+s.POSITION_MY_CARDS_X,c=s.POSITION_MY_CARDS_Y;e?(n.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),n.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,r,c))):n.setPosition(r,c)}},resumeCards:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var n=e[i].cards;this.initMyCards(n,!1)}else{var o=e[i].number_cards;e[i].TLMNPlayer.showCardBack(o)}},initLastRoundCards:function(t){var e=t.data.last_round_cards.cards,i=this.getRandomPositonInTable();if(e)for(var n in e){var o=this.initNewCardNode(e[n]);o.setPosition((n-e.length/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+i.x,i.y),o.scale=s.SCALE_CARD_IN_TABLE,o.parent=this.TLMN.tableCardsNode}},sort:function(){var t=this.TLMN.myCardsNode.getChildren(),e=[];for(var i in t)e.push(t[i].getComponent("CardController").getTrueValue());this.sortCard?(a.sortCardsASC(e),this.initMyCards(e),this.sortCard=!this.sortCard):(this.initMyCards(l.sortList(e)),this.sortCard=!this.sortCard)},handlePlayerStart:function(t){var e=t.data.id_playing,i=this.TLMN.getPlayerByUserId(e);i&&i.isItMe&&this.initRecommendIgnore()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_new_round,n=this.TLMN.getPlayerByUserId(e);n&&(this.TLMN.idPlaying=e,n.isItMe?(this.checkShowButtons(),i?this.listCardPlay=[]:this.TLMNUI.showIgnoreTurnButton()):(this.TLMNUI.hidePlayButton(),this.TLMNUI.hideIgnoreTurnButton()),this.TLMN.startCountDownPlayer(n,t.time_remain,t.time))},handlePlayedPlayer:function(t){var e=t.data.cards,i=e.length,o=t.data.id_played||t.data.user_id_win,r=a.getGroupCardsType(e),c=this.getRandomPositonInTable();this.initRecommendPlay(e),this.showDarkEffectAllCardsRevealInTable();var h=this.TLMN.getPlayerByUserId(o);if(h)if(h.isItMe){var l=this.TLMN.getCardsNodeByCards(e);for(var u in l)l[u].stopAllActions(),l[u].parent=this.TLMN.tableCardsNode,l[u].scale=1,l[u].cardController.hideHighLight(),l[u].tlmnCardController.disableEvents(),l[u].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(u-i/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+c.x,c.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)));this.sortMyCards(),this.checkShowButtons()}else{var d=h.node.x,m=h.node.y;d+=s.DISTANCE_BACK_CARD_OTHER_PLAYER*(d>0?-1:1);for(var f=0;f<i;f++){var p=cc.instantiate(this.TLMN.cardPrefab);p.setPosition(d,m),p.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,p.parent=this.TLMN.tableCardsNode;var _=p.getComponent("CardController"),S=new n(e[f]);_.init(S),p.cardController=_,p.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(f-i/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+c.x,c.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.minusNumberCardsForPlayer(h,i)}h.TLMNPlayer.showGroupCardsTypeEffect(r)},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.showEffectMinusBalanceAndWinner(t.money_change),this.showEffectShowPlayersCards(t,e),this.resetRecommend();var i=t.user_id_win;if(t.win_type===c.WIN_TYPE_THANG_TRANG){var n=t.thang_trang_type,o=this.TLMN.getPlayerByUserId(i);o&&o.TLMNPlayer.showThangTrangEffect(n)}},showEffectMinusBalanceAndWinner:function(t){for(var e in t){var i=t[e].user_id,n=t[e].money_change,o=this.TLMN.getPlayerByUserId(i);o&&(o.BasePlayer.hideText(),o.BasePlayer.showChangeBalance(n),o.BasePlayer.showEffectByChangeBalance(n),o.isItMe&&n>0&&this.GameCommon.Audio.playWin())}},showEffectShowPlayersCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.win_type,n=t.players_cards,o=t.money_change;for(var s in n){var a=n[s].user_id,r=n[s].cards,c=void 0;for(var h in o)o[h].user_id===a&&(c=o[h].money_change);var l=this.TLMN.getPlayerByUserId(a);if(l)if(r.length>0)if(l.isItMe){var u=this.TLMN.myCardsNode.getChildren(),d=[];for(var m in u)d.push(u[m].cardController);this.showEffectTypeWin(l,r,d,i,c)}else{l.TLMNPlayer.showCards(r,e);var f=l.TLMNPlayer.getListCardController();this.showEffectTypeWin(l,r,f,i,c)}else this.showEffectTypeWin(l,r,[],i,c)}},showEffectTypeWin:function(t,e,i,n,o){if(n===c.WIN_TYPE_HET_BAI){var s=a.getCardsThoi(e),h=s.cards;switch(s.type){case r.KhongHopLe:break;case r.Cong:t.TLMNPlayer.showEffectCong();break;case r.ThoiHai:t.TLMNPlayer.showEffectThoiHai(),this.showCardsThoiEffectByTrueValue(h,i);break;case r.ThoiBaDoiThong:t.TLMNPlayer.showEffectThoiBaDoiThong(),this.showCardsThoiEffectByValue(h,i);break;case r.ThoiTuQuy:t.TLMNPlayer.showEffectThoiTuQuy(),this.showCardsThoiEffectByTrueValue(h,i);break;case r.ThoiBonDoiThong:t.TLMNPlayer.showEffectThoiBonDoiThong(),this.showCardsThoiEffectByValue(h,i)}}else n===c.WIN_TYPE_KET_BA_BICH?o>0&&t.TLMNPlayer.showEffectKetBaBich():n===c.WIN_TYPE_CHAN_KET_BA_BICH&&o>0&&t.TLMNPlayer.showEffectChanKetBaBich()},showCardsThoiEffectByTrueValue:function(t,e){for(var i in e)e[i].showDarkEffect();for(var n in e)for(var o in t)if(e[n].trueValue===t[o]){e[n].hideDarkEffect();break}},showCardsThoiEffectByValue:function(t,e){var i=0;for(var n in e)e[n].showDarkEffect();for(var o in t)for(var s in i=0,e)parseInt(e[s].trueValue/100)===parseInt(t[o]/100)&&++i<3&&e[s].hideDarkEffect()},sortMyCards:function(){var t=this.TLMN.myCardsNode.getChildren();for(var e in t){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,n=s.POSITION_MY_CARDS_Y;t[e].tlmnCardController.isSelected=!1,t[e].tlmnCardController.moveTo(i,n)}},initNewCardNode:function(t){var e=cc.instantiate(this.TLMN.cardPrefab);e.trueValue=t;var i=new n(t),o=e.getComponent("CardController");return o.init(i),e.cardController=o,e},minusNumberCardsForPlayer:function(t,e){var i=t.TLMNPlayer.getNumberCards()-e;t.TLMNPlayer.showCardBack(i)},handlerIgnoreTurn:function(t){var e=t.data.id_ignore,i=t.data.is_new_round,n=t.data.id_playing,o=this.TLMN.getPlayerByUserId(e),s=this.TLMN.getPlayerByUserId(n);i?this.clearIgnoreTurnAllPlayers():o&&o.TLMNPlayer.showIgnoreTurn(),s&&(s.isItMe&&i?this.initRecommendIgnore():this.initRecommendPlay())},removeAllCardsInTable:function(){this.TLMN.tableCardsNode.removeAllChildren(!0)},flipCardsInTable:function(){var t=this.TLMN.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&(t[e].cardController.hideDarkEffect(),t[e].cardController.revealWithAnimationFlip(!1,s.TIME_FLIP_CARD_IN_TABLE,!1))},showDarkEffectAllCardsRevealInTable:function(){var t=this.TLMN.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&t[e].cardController.showDarkEffect()},getRandomPositonInTable:function(){var t=u.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_X,s.DISTANCE_MAX_RANDOM_POSITION_CARD_X),e=u.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y,s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y);return new cc.Vec2(t,e)},handleChangeMoney:function(t){var e=t.data.money_change;if(e)for(var i in e){var n=e[i].user_id,o=e[i].money_change,s=this.TLMN.getPlayerByUserId(n);s&&s.BasePlayer.showChangeBalance(o)}},checkShowButtons:function(){var t=!1,e=this.TLMN.myCardsNode.getChildren();for(var i in e)if(e[i].tlmnCardController.isSelected){t=!0;break}t?this.TLMNUI.showIgnoreSelectButton():this.TLMNUI.hideIgnoreSelectButton(),this.TLMN.checkIsMyTurn()&&(t?this.TLMNUI.showPlayButton():this.TLMNUI.hidePlayButton())},clearIgnoreTurnAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].TLMNPlayer.setIgnoreTurn(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},showRecommend:function(){this.recommenedToggle.isChecked&&(this.ignoreTurn?this.recommend_ignore&&this.showRecommendStartAndIgnore():this.is_recommend&&this.showRecommendPlay())},showRecommendPlay:function(){var t=[],e=[],i=this.listCardPlay,n=void 0,o=this.TLMN.myCardsNode.getChildren();for(var s in o)e.push(o[s].getComponent("CardController").getTrueValue());for(var a in o)o[a].tlmnCardController.isSelected&&(n=o[a].getComponent("CardController").getTrueValue());if(i&&e&&n&&(t=h.getRecommend(e,i,n)),t)for(var r=0,c=t.length;r<c;r++)for(var l=0,u=e.length;l<u;l++)t[r]===e[l]&&(o[l].getComponent("TLMNCardController").getSelected()||o[l].getComponent("TLMNCardController").selectCard());this.listCardPlay=[],this.is_recommend=!1},showRecommendStartAndIgnore:function(){var t=[],e=[],i=this.TLMN.myCardsNode.getChildren();for(var n in i){var o=i[n].getComponent("CardController").getTrueValue();t.push(o),i[n].getComponent("TLMNCardController").getSelected()&&e.push(o)}if(e.length>=2){for(var s in e=h.getRecommendStartAndIgnore(t,e),t=[],i)t.push(i[s].getComponent("CardController").getTrueValue());if(e)for(var a=0,r=e.length;a<r;a++)for(var c=0,l=t.length;c<l;c++)e[a]===t[c]&&(i[c].getComponent("TLMNCardController").getSelected()||i[c].getComponent("TLMNCardController").selectCard());this.ignoreTurn=!1,this.recommend_ignore=!1}},initRecommendIgnore:function(){this.ignoreTurn=!0,this.recommend_ignore=!0,this.is_recommend=!1,this.listCardPlay=[]},initRecommendPlay:function(t){this.ignoreTurn=!1,this.is_recommend=!0,this.recommend_ignore=!1,t&&(this.listCardPlay=t)},resetRecommend:function(){this.ignoreTurn=!1,this.is_recommend=!1,this.recommend_ignore=!1,this.listCardPlay=[]}};e.exports=d,cc._RF.pop()},{"../../util/CardUtil":"CardUtil","../../util/RandomUtil":"RandomUtil","./TLMNCard":"TLMNCard","./TLMNConfig":"TLMNConfig","./TLMNRecommend":"TLMNRecommend","./TLMNThoiType":"TLMNThoiType","./TLMNUtil":"TLMNUtil","./TLMNWinType":"TLMNWinType","./item/TLMNCardController":"TLMNCardController"}],TLMNHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"562adBJqJ5Fy6k8nP/kRsqH","TLMNHandlerRequest");var n=t("./TLMNConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.TLMN=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.TLMN.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.GOLD:this.TLMN.initGold(e);break;case o.MONEY:this.TLMN.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.ROOM_INFO:this.TLMN.handleRoomInfo(e);break;case n.START:this.TLMN.handleStart(e);break;case n.COUNT_DOWN:this.TLMN.handleCountDown(e);break;case n.PLAY:this.TLMN.handlePlay(e);break;case n.IGNORE:this.TLMN.handleIgnore(e);break;case n.SORT:this.TLMN.handleSort(e);break;case n.RESULT:this.TLMN.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.TLMN.handlePlayersLeftRoom(e);break;case n.PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME:this.TLMN.handlePlayersLeftRoomWithChangeHome(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.TLMN.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.TLMN.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.TLMN.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./TLMNConstant":"TLMNConstant"}],TLMNPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"44457NA5rpNgIybocMyNvER","TLMNPlayer");var n=t("./TLMNCard"),o=t("./TLMNConfig"),s=t("./TLMNGroupCardsType"),a=t("./TLMNThangTrangType"),r=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,numberCardLabel:cc.Label},onLoad:function(){this.numberCard=0},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var s=new n(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(s),a.cardController=r;var c=0;c=this.cardsNode.x>0?i*o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-i-1)*-o.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,e?(a.setPosition(0,0),a.runAction(cc.moveTo(o.TIME_SHOW_CARDS_OTHER_PLAYERS,c,0))):a.setPosition(c,0)}},getListCardController:function(){var t=[],e=this.cardsNode.getChildren();for(var i in e)t.push(e[i].cardController);return t},showCardBack:function(t){this.numberCards=t,this.numberCardLabel.string=t,this.cardBackNode.active=0!==t},getNumberCards:function(){return this.numberCards},hideCardBack:function(){this.numberCardLabel.string="",this.cardBackNode.active=!1},setIgnoreTurn:function(t){t?this.showIgnoreTurn():this.hideIgnoreTurn()},showIgnoreTurn:function(){this.node.getComponent("BasePlayer").showTextDark(r.TLMN_IGNORE_TURN)},hideIgnoreTurn:function(){this.node.getComponent("BasePlayer").hideTextDark()},showEffectCong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_CONG)},showEffectThoiHai:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_HAI)},showEffectThoiBaDoiThong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_BA_DOI_THONG)},showEffectThoiTuQuy:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_TU_QUY)},showEffectThoiBonDoiThong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_BON_DOI_THONG)},showEffectChanKetBaBich:function(){this.node.getComponent("BasePlayer").showWinEffect(r.TLMN_CHAN_KET_BA_BICH)},showEffectKetBaBich:function(){this.node.getComponent("BasePlayer").showWinEffect(r.TLMN_KET_BA_BICH)},showGroupCardsTypeEffect:function(t){var e="";switch(t){case s.BA_DOI_THONG:e=r.TLMN_BA_DOI_THONG;break;case s.BON_DOI_THONG:e=r.TLMN_BON_DOI_THONG;break;case s.MOT_TU_QUY:e=r.TLMN_MOT_TU_QUY}e&&this.node.getComponent("BasePlayer").showTextLight(e,!0)},showThangTrangEffect:function(t){var e="";switch(t){case a.SANH_RONG:e=r.TLMN_SANH_RONG;break;case a.SAU_DOI_THONG:e=r.TLMN_SAU_DOI_THONG;break;case a.BON_BO_BA:e=r.TLMN_BON_BO_BA;break;case a.HAI_BO_TU_QUY:e=r.TLMN_HAI_BO_TU_QUY;break;case a.MUOI_HAI_CON_BAI_DONG_CHAT:e=r.TLMN_MUOI_HAI_CON_DONG_CHAT;break;case a.NAM_DOI_THONG:e=r.TLMN_NAM_DOI_THONG;break;case a.TU_HAI:e=r.TLMN_TU_HAI;break;case a.SAU_DOI:e=r.TLMN_SAU_DOI}e&&this.node.getComponent("BasePlayer").showWinEffect(e)},reset:function(){this.numberCards=0,this.hideCardBack(),this.hideIgnoreTurn(),this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./TLMNCard":"TLMNCard","./TLMNConfig":"TLMNConfig","./TLMNGroupCardsType":"TLMNGroupCardsType","./TLMNThangTrangType":"TLMNThangTrangType"}],TLMNRecommend:[function(t,e,i){"use strict";cc._RF.push(e,"61decMDoK5Mp6uuqZTS+mzB","TLMNRecommend");var n={BO_DOI_4:4,BO_DOI_3:3,getRecommend:function(t,e,i){return e.length%2==0?this.checCard2(e)?this.getRecommendDoi2(t,e,i):this.checkTuQuy(e)?this.getRecommendTuQuy(t,e,i):this.checkBoDoi(e,this.BO_DOI_4)?this.getRecommendBoDoi4(t,e,i):this.checkBoDoi(e,this.BO_DOI_3)?this.getRecommendBoDoi3(t,e,i):this.checkTypeListCardSuite(e)?this.getListSuite(t,e,i):this.getListCardArray(t,e,i):this.check3Card2(e)?null:this.checCard2(e)?this.getRecommendCard2(t,e,i):this.checkTypeListCardSuite(e)?this.getListSuite(t,e,i):this.getListCardArray(t,e,i)},getRecommendBoDoi4:function(t,e,i){var n=t.slice();n=this.remveCard2(n);var o;return(o=this.getBoDoi(n,e,i,this.BO_DOI_4))&&this.getMaxValue(o)>this.getMaxValue(e)?o:null},getRecommendTuQuy:function(t,e,i){var n=t.slice(),o=void 0;return i>e[0]?((o=this.getTuQuy(n,i))||(n=this.remveCard2(n),o=this.getBoDoi(n,e,i,this.BO_DOI_4)),o):(n=this.remveCard2(n),o=this.getBoDoi(n,e,i,this.BO_DOI_4))},getRecommendDoi2:function(t,e,i){var n=t.slice(),o=void 0;return(o=this.getListSuite(n,e,i))||(o=this.getTuQuy(n,i)),o||(n=this.remveCard2(n),o=this.getBoDoi(n,e,i,this.BO_DOI_4)),o},getRecommendBoDoi3:function(t,e,i){var n=t.slice();n=this.remveCard2(n);var o=void 0;if((o=this.getBoDoi(n,e,i,this.BO_DOI_3))&&this.getMaxValue(o)>this.getMaxValue(e))return o;return(o=this.getTuQuy(t,i))||(o=this.getBoDoi(n,e,i,this.BO_DOI_4)),o},getRecommendCard2:function(t,e,i){var n=void 0;if(e[0]>i){var o=t.slice();o=this.remveCard2(o),(n=this.getBoDoi(o,e,i,this.BO_DOI_3))||(n=this.getTuQuy(t,i))}return n},getListSuite:function(t,e,i){var n=t.slice(),o=[];o.push(i);for(var s=parseInt(i/100),a=1,r=e.length;a<r;a++)for(var c=0,h=n.length;c<h;c++){if(n[c]!==i&&0!==n[c])if(s===parseInt(n[c]/100)){o.push(n[c]),n[c]=0;break}}return o.length>=e.length&&this.getMaxValue(o)>this.getMaxValue(e)?o:null},getListCardArray:function(t,e,i){var n=void 0;if(i<1500){var o=this.remveCard2(t),s=o.slice(),a=[],r=this.getListAllCard(s),c=parseInt(i/100);if(a.push(c),c+1<r.length)for(var h=c+1;r[h]>0&&h<r.length;)a.push(h),h++;if(c-1>=0)for(var l=c-1;r[l]>0&&l>=0;)a.push(l),l--;if(n=this.getListCardRecommend(a,e,o),n=this.addCardLoading(n,i),n=this.remveCard2(n),n=this.getCardMaxInArray(n,o,i),a&&e)if(a.length>=e.length)return this.getMaxValue(n)>this.getMaxValue(e)?n:null}return null},getBoDoi:function(t,e,i,n){var o=t.slice(),s=i,a=[],r=[],c=this.getListAllCard(o),h=parseInt(s/100);if(c[h]>=2){if(a.push(h),h+1<c.length)for(var l=h+1;c[l]>=2&&l<c.length;)a.push(l),l++;if(h-1>=0)for(var u=h-1;c[u]>=2&&u>=0;)a.push(u),u--;return a.length>=n?(r=this.getListRecommendInValue(t,a,i,n),r=this.getCardMaxInArray(r,t,i)):null}return null},getTuQuy:function(t,e){var i=t.slice(),n=e,o=[];o.push(e);for(var s=parseInt(n/100),a=0,r=i.length;a<r;a++){if(i[a]!==e&&0!==i[a])s===parseInt(i[a]/100)&&(o.push(i[a]),i[a]=0)}return o.length>=4?o:null},getListCardRecommend:function(t,e,i){for(var n=i.slice(),o=[],s=0,a=e.length;s<a;s++)for(var r=t[s],c=0,h=n.length;c<h;c++){if(0!==n[c])if(r===parseInt(n[c]/100)){o.push(n[c]),n[c]=0;break}}return o},getListRecommendInValue:function(t,e,i,n){for(var o=t.slice(),s=[],a=1;a<n;a++)for(var r=0,c=o.length;r<c;r++)if(0!=o[r]){var h=parseInt(o[r]/100);if(e[a]===h){s.push(o[r]),o[r]=0;for(var l=r,u=o.length;l<u;l++)if(0!=o[l]){var d=parseInt(o[l]/100);if(e[a]===d){s.push(o[l]),o[l]=0;break}}break}}for(var m=parseInt(i/100),f=0,p=o.length;f<p;f++){if(0!=o[f]&&o[f]!==i)if(parseInt(o[f]/100)===m){s.push(i),s.push(o[f]);break}}return s},getMaxValue:function(t){for(var e=t[0],i=0,n=t.length;i<n;i++)e<t[i]&&(e=t[i]);return e},getCardMaxInArray:function(t,e,i){var n=this.getMaxValue(t);if(i!==n){for(var o=n,s=parseInt(n/100),a=0,r=e.length;a<r;a++){s===parseInt(e[a]/100)&&n<e[a]&&(o=e[a])}if(o!==n)for(var c=0,h=t.length;c<h;c++)n===t[c]&&(t[c]=o)}return t},checkTuQuy:function(t){if(t.length===this.BO_DOI_4){for(var e=parseInt(t[0]/100),i=1,n=t.length;i<n;i++){if(e!==parseInt(t[i]/100))return!1}return!0}return!1},checkBoDoi:function(t,e){for(var i=this.getListAllCard(t),n=0,o=0,s=i.length;o<s;o++)if(0!=i[o]){n=o;break}for(var a=0;a<e;a++){if(2!==i[n])return!1;n++}return!0},checCard2:function(t){return t[0]>=1500},check3Card2:function(t){return t.length>=3&&this.checCard2(t)},checkBaCard:function(t){return length>=3&&parseInt(t[0]/100)===parseInt(t[1]/100)},getListAllCard:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,n=t.length;i<n;i++){e[parseInt(t[i]/100)]++}return e},checkTypeListCardSuite:function(t){return t.length>1&&parseInt(t[0]/100)===parseInt(t[1]/100)},getRecommendStartAndIgnore:function(t,e){return this.checkTypeListCardSuite(e)?this.getListSuiteStartAndIgnore(t,e):this.checkListCard2(e)?this.getListArrayStartAndIgnore(t,e):e},getListSuiteStartAndIgnore:function(t,e){for(var i=e[0],n=e[1],o=parseInt(e[0]/100),s=0,a=t.length;s<a;s++){if(t[s]!==i&&t[s]!==n)o===parseInt(t[s]/100)&&e.push(t[s])}return e},getListArrayStartAndIgnore:function(t,e){var i=e[0],n=e[1],o=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(n/100);return this.checkDistanceCard(s,a,o)&&(e=this.getListStartAndIgnore(t,e)),e},checkDistanceCard:function(t,e,i){for(var n=t<e?t:e,o=t>e?t:e;n<o;n++)if(0===i[n])return!1;return!0},getListStartAndIgnore:function(t,e){var i=e[0],n=e[1],o=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(n/100),r=s>a?s:a,c=s<a?s:a,h=this.getListCardValueRecommend(c,r,o);return h&&(e=this.getListCardRecommendStartAndignore(e,t,h)),e},getListCardValueRecommend:function(t,e,i){var n=[];if(t-1>=0)for(var o=t-1;i[o]>0&&o>=0;)n.push(o),o--;if(e+1<i.length)for(var s=e+1;i[s]>0&&s<i.length;)n.push(s),s++;if(e-t>1)for(var a=t+1;a<e;a++)n.push(a);return n},getListCardRecommendStartAndignore:function(t,e,i){for(var n=e.slice(),o=0,s=i.length;o<s;o++)for(var a=0,r=n.length;a<r;a++){if(0!==n[a])if(parseInt(n[a]/100)===i[o]){t.push(n[a]),n[a]=0;break}}return t=this.remveCard2(t)},remveCard2:function(t){if(t)for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(t.splice(e,1),e--);return t},checkListCard2:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e]>=1500)return!1;return!0},addCardLoading:function(t,e){for(var i=parseInt(e/100),n=0,o=t.length;n<o;n++){if(parseInt(t[n]/100)===i)return t[n]=e,t}}};e.exports=n,cc._RF.pop()},{}],TLMNState:[function(t,e,i){"use strict";cc._RF.push(e,"a56f7ZKWtVGXbL1B77WiULf","TLMNState");e.exports={currentState:null,STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],TLMNThangTrangType:[function(t,e,i){"use strict";cc._RF.push(e,"08df9iUenxCgaqpoeGW/X7z","TLMNThangTrangType");e.exports={SANH_RONG:"SANH_RONG",SAU_DOI_THONG:"SAU_DOI_THONG",BON_BO_BA:"BON_BO_BA",HAI_BO_TU_QUY:"HAI_BO_TU_QUY",MUOI_HAI_CON_BAI_DONG_CHAT:"MUOI_HAI_CON_BAI_DONG_CHAT",NAM_DOI_THONG:"NAM_DOI_THONG",TU_HAI:"TU_HAI",SAU_DOI:"SAU_DOI",KHONG_PHAI_THANG_TRANG:"KHONG_PHAI_THANG_TRANG"},cc._RF.pop()},{}],TLMNThoiType:[function(t,e,i){"use strict";cc._RF.push(e,"c4d9aang0pKkLfrlzH11pv9","TLMNThoiType");var n=cc.Enum({KhongHopLe:1,Cong:2,ThoiHai:3,ThoiBaDoiThong:4,ThoiTuQuy:5,ThoiBonDoiThong:6});e.exports=n,cc._RF.pop()},{}],TLMNUI:[function(t,e,i){"use strict";cc._RF.push(e,"9eebckgHMBCA4di+5FrYpJU","TLMNUI"),cc.Class({extends:cc.Component,properties:{playButton:cc.Node,ignoreTurnButton:cc.Node,ignoreSelectButton:cc.Node,sortButton:cc.Node,playersNode:[cc.Node],playersSoloNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t in this.playersNode)this.playersNode[t].active=!1},initSoloRoom:function(){this.playersPlaceHolderNode[1].active=!1,this.playersPlaceHolderNode[3].active=!1},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showPlayButton:function(){this.playButton.active=!0},hidePlayButton:function(){this.playButton.active=!1},showSortButton:function(){this.sortButton.active=!0},hideSortButton:function(){this.sortButton.active=!1},showIgnoreTurnButton:function(){this.ignoreTurnButton.active=!0},hideIgnoreTurnButton:function(){this.ignoreTurnButton.active=!1},showIgnoreSelectButton:function(){this.ignoreSelectButton.active=!0},hideIgnoreSelectButton:function(){this.ignoreSelectButton.active=!1},hideAllButtons:function(){this.hidePlayButton(),this.hideIgnoreTurnButton(),this.hideIgnoreSelectButton(),this.hideSortButton()},reset:function(){this.hideAllButtons()}}),cc._RF.pop()},{}],TLMNUtil:[function(t,e,i){"use strict";cc._RF.push(e,"7f44aq/fWhIurhPH/LgqmQG","TLMNUtil");var n=t("./TLMNGroupCardsType"),o=t("./TLMNThoiType"),s=t("./TLMNConfig"),a={getGroupCardsType:function(t){var e=this.cloneCards(t),i=n.KHONG_HOP_LE;switch(e.length){case 0:break;case 1:i=n.BAI_RAC;break;case 2:this.checkMotDoi(e)&&(i=n.MOT_DOI);break;case 3:this.checkMotBoBa(e)?i=n.MOT_BO_BA:this.checkMotDay(e)&&(i=n.MOT_DAY);break;case 4:this.checkMotTuQuy(e)?i=n.MOT_TU_QUY:this.checkMotDay(e)&&(i=n.MOT_DAY);break;case 6:this.getCardsBaDoiThong(e).length>0?i=n.BA_DOI_THONG:this.checkMotDay(e)&&(i=n.MOT_DAY);break;case 8:this.getCardsBonDoiThong(e).length>0?i=n.BON_DOI_THONG:this.checkMotDay(e)&&(i=n.MOT_DAY);break;default:this.checkMotDay(e)&&(i=n.MOT_DAY)}return i},getCardsThoi:function(t){var e=this.cloneCards(t),i=this.getCardsCong(e),n=this.getCardsBonDoiThong(e),s=this.getCardsTuQuy(e),a=this.getCardsBaDoiThong(e),r=this.getCardsHai(e);return i.length>0?{type:o.Cong,cards:i}:n.length>0?{type:o.ThoiBonDoiThong,cards:n}:s.length>0?{type:o.ThoiTuQuy,cards:s}:a.length>0?{type:o.ThoiBaDoiThong,cards:a}:r.length>0?{type:o.ThoiHai,cards:r}:{type:o.KhongHopLe,cards:[]}},getCardsCong:function(t){return t.length===s.NUMBER_CARDS_EACH_PLAYERS?t:[]},getCardsBonDoiThong:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,n=0,o=[],s=0;s<e.length;s++)0===n?n=e[s]:this.getValueCard(n)===this.getValueCard(e[s])?i>0?this.getValueCard(e[i-1])!==this.getValueCard(n)&&(o.push(n),++i,n=0):(o.push(n),++i,n=0):n=t[s];for(var a=0,r=o.length-1;a<r;a++)this.getValueCard(o[a])===this.getValueCard(o[a+1])&&o.splice(a,1);if(5==i){for(var c=!0,h=0;h<i-1;h++)this.getValueCard(o[h])+1!==this.getValueCard(o[h+1])&&(c=!1);if(c)return[o[0],o[1],o[2],o[3]];c=!0;for(var l=1;l<i;l++)this.getValueCard(o[l])+1!==this.getValueCard(o[l+1])&&(c=!1);if(c)return[o[1],o[2],o[3],o[4]]}else if(4==i){for(var u=0;u<i-1;u++)if(this.getValueCard(o[u])+1!==this.getValueCard(o[u+1]))return[];return o}return[]},getCardsTuQuy:function(t){var e=this.cloneCards(t);if(this.sortCardsASC(e),e.length>3)for(var i=0;i<=e.length-4;i++)if(e[i]&&e[i+1]&&e[i+2]&&e[i+3]&&this.getValueCard(e[i])===this.getValueCard(e[i+1])&&this.getValueCard(e[i])===this.getValueCard(e[i+2])&&this.getValueCard(e[i])===this.getValueCard(e[i+3]))return[e[i],e[i+1],e[i+2],e[i+3]];return[]},getCardsBaDoiThong:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,n=0,o=[],a=0;a<e.length;a++)0===n?n=e[a]:this.getValueCard(n)===this.getValueCard(e[a])?i>0?this.getValueCard(e[i-1])!==this.getValueCard(n)&&n!==s.VALUE_HAI&&(o.push(n),++i,n=0):n!==s.VALUE_HAI&&(o.push(n),++i,n=0):n=t[a];switch(i){case 5:for(var r=!0,c=0;c<i-3;c++)this.getValueCard(o[c])+1===this.getValueCard(o[c+1])&&this.getValueCard(o[c+1])!==s.VALUE_HAI||(r=!1);if(r)return[o[0],o[1],o[2]];r=!0;for(var h=1;h<i-2;h++)this.getValueCard(o[h])+1===this.getValueCard(o[h+1])&&this.getValueCard(o[h+1])!==s.VALUE_HAI||(r=!1);if(r)return[o[1],o[2],o[3]];r=!0;for(var l=2;l<i-1;l++)this.getValueCard(o[l])+1===this.getValueCard(o[l+1])&&this.getValueCard(o[l+1])!==s.VALUE_HAI||(r=!1);if(r)return[o[2],o[3],o[4]];break;case 4:for(var u=!0,d=0;d<i-2;d++)this.getValueCard(o[d])+1===this.getValueCard(o[d+1])&&this.getValueCard(o[d+1])!==s.VALUE_HAI||(u=!1);if(u)return[o[0],o[1],o[2]];u=!0;for(var m=1;m<i-1;m++)this.getValueCard(o[m])+1===this.getValueCard(o[m+1])&&this.getValueCard(o[m+1])!==s.VALUE_HAI||(u=!1);if(u)return[o[1],o[2],o[3]];break;case 3:for(var f=0;f<i-1;f++)if(this.getValueCard(o[f])+1!==this.getValueCard(o[f+1])||this.getValueCard(o[f+1])===s.VALUE_HAI)return[];return o}return[]},getCardsHai:function(t){for(var e=[],i=0,n=t.length;i<n;i++)this.getValueCard(t[i])===s.VALUE_HAI&&e.push(t[i]);return e},checkMotDoi:function(t){return 2===t.length&&this.checkSameValueCards(t)},checkMotBoBa:function(t){return 3===t.length&&this.checkSameValueCards(t)},checkMotTuQuy:function(t){return 4===t.length&&this.checkSameValueCards(t)},checkSameValueCards:function(t){for(var e=0;e<t.length-1;e++)if(this.getValueCard(t[e])!=this.getValueCard(t[e+1]))return!1;return!0},checkMotDay:function(t){if(t.length>2){this.sortCardsASC(t);var e=0;for(var i in t){var n=this.getValueCard(t[i]);if(n===s.VALUE_HAI)return!1;if(0===e)e=n;else{if(n!==e+1)return!1;e=n}}}return!1},getValueCard:function(t){return parseInt(t/100)},getTypeCard:function(t){return t%4},sortCardsASC:function(t){t.sort(function(t,e){return t-e})},sortCardsDESC:function(t){t.sort(function(t,e){return e-t})},cloneCards:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];e.push(o)}return e}};e.exports=a,cc._RF.pop()},{"./TLMNConfig":"TLMNConfig","./TLMNGroupCardsType":"TLMNGroupCardsType","./TLMNThoiType":"TLMNThoiType"}],TLMNWinType:[function(t,e,i){"use strict";cc._RF.push(e,"4369cqEaoxEFZVHHVAyg3c9","TLMNWinType");e.exports={WIN_TYPE_HET_BAI:"HET_BAI",WIN_TYPE_THANG_TRANG:"THANG_TRANG",WIN_TYPE_KET_BA_BICH:"KET_BA_BICH",WIN_TYPE_CHAN_KET_BA_BICH:"CHAN_KET_BA_BICH"},cc._RF.pop()},{}],TLMN:[function(t,e,i){"use strict";cc._RF.push(e,"e0202H0oABEXo7dMSsGvgcv","TLMN");var n=t("../../base/BaseController"),o=t("./TLMNConstant"),s=t("./TLMNConfig"),a=t("./TLMNUI"),r=t("./TLMNState"),c=t("./TLMNWinType"),h=t("./TLMNHandlerRequest"),l=t("./TLMNHandlerEffect"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),f=t("../../helper/Message");cc.Class({extends:n,properties:{cardPrefab:cc.Prefab,myCardsNode:cc.Node,tableCardsNode:cc.Node,recommenedToggle:cc.Toggle,TLMNUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_TLMN),this.sfsManager.setController(this),this.timeoutResult=null,this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.TLMNUI.playersNode,this.isRoomSolo()&&(this.playersNode=this.TLMNUI.playersSoloNode,this.TLMNUI.initSoloRoom()),this.isMoneyType||this.TLMNUI.disableAllPlaceHolder(),this.TLMNConstant=o,this.TLMNConfig=s,this.TLMNState=r,this.TLMNHandlerRequest=h,this.TLMNHandlerRequest.init(this),this.TLMNHandlerEffect=l,this.TLMNHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.TLMNHandlerRequest.onPublicMessage.bind(this.TLMNHandlerRequest),this.onRoomVarsUpdate=this.TLMNHandlerRequest.onRoomVarsUpdate.bind(this.TLMNHandlerRequest),this.onUserVarsUpdate=this.TLMNHandlerRequest.onUserVarsUpdate.bind(this.TLMNHandlerRequest),this.onResponse=this.TLMNHandlerRequest.onResponse.bind(this.TLMNHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){this.playersNode[o].getComponent("BasePlayer").setBetType(this.isMoneyType)}this.TLMNUI.hideAllPlayers(),this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("TLMNPlayer");t.BasePlayer=n,t.TLMNPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRequestLeftRoom(t.request_left_room),n.setRoomMaster(t.is_home),n.setPlayerName(t.nick_name),n.setBalance(t.balance),o.setIgnoreTurn(t.ignore),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.TLMNState.setState(e),this.TLMNState.isStop()?this.reset():this.TLMNState.isWaiting()?this.resumeStateWaiting(t):this.TLMNState.isPlaying()?this.resumeStatePlaying(t):this.TLMNState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.TLMNHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){this.TLMNHandlerEffect.handlePlayingPlayer(t),this.TLMNHandlerEffect.resumeCards(t),this.TLMNHandlerEffect.initLastRoundCards(t)},resumeStateFinish:function(t){this.TLMNHandlerEffect.resumeCards(t),this.TLMNHandlerEffect.initLastRoundCards(t),this.TLMNHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.TLMNHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&!this.isMoneyType&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&this.isMoneyType&&n.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.TLMNState.setWaiting(),this.GameCommon.hideWaitingNode(),this.TLMNHandlerEffect.startCountDownAllPlayers(t)):(this.TLMNState.setStop(),this.TLMNHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.cards.cards;this.TLMNState.setPlaying(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNHandlerEffect.dealCards(e),this.TLMNHandlerEffect.handlePlayerStart(t),this.TLMNHandlerEffect.handlePlayingPlayer(t)},handlePlay:function(t){this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNHandlerEffect.handlePlayedPlayer(t),this.TLMNHandlerEffect.handlePlayingPlayer(t)},handleIgnore:function(t){var e=t.data.is_new_round,i=t.data.is_end_game;e&&this.TLMNHandlerEffect.removeAllCardsInTable(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),i||this.TLMNHandlerEffect.handlerIgnoreTurn(t),this.TLMNHandlerEffect.handlePlayingPlayer(t),this.TLMNHandlerEffect.handleChangeMoney(t)},handleResult:function(t){var e=t.data.win_type;if(this.TLMNState.setFinish(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNUI.hideAllButtons(),e===c.WIN_TYPE_THANG_TRANG){var i=t.data.players_cards,n=this.getMyCardsByPlayersCards(i);this.TLMNHandlerEffect.dealCards(n),this.timeoutResult=setTimeout(function(){this.TLMNHandlerEffect.handleResult(t.data)}.bind(this),2e3)}else this.TLMNHandlerEffect.handlePlayedPlayer(t),this.TLMNHandlerEffect.handleResult(t.data);this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.TLMNState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.TLMNHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(f.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(f.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onPlayClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected(),e=[];for(var i in t)e.push(t[i].trueValue);var n={};n.data=e,this.sendRequest.send(o.PLAY,n)},onSortClick:function(){this.GameCommon.Audio.playClick(),this.TLMNHandlerEffect.sort()},onIgnoreTurnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.IGNORE)},onIgnoreSelectClick:function(){this.GameCommon.Audio.playClick();var t=this.myCardsNode.getChildren();for(var e in t)t[e].tlmnCardController.isSelected&&(t[e].tlmnCardController.selectCard(),this.TLMNUI.hideIgnoreSelectButton())},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getListCardsSelected:function(){var t=this.myCardsNode.getChildren(),e=[];for(var i in t)t[i].tlmnCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCards:function(t){var e=this.myCardsNode.getChildren(),i=[];for(var n in e)for(var o in t)if(e[n].trueValue===t[o]){i.push(e[n]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.TLMNHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.idPlaying=-1,this.TLMNUI.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].TLMNPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./TLMNConfig":"TLMNConfig","./TLMNConstant":"TLMNConstant","./TLMNHandlerEffect":"TLMNHandlerEffect","./TLMNHandlerRequest":"TLMNHandlerRequest","./TLMNState":"TLMNState","./TLMNUI":"TLMNUI","./TLMNWinType":"TLMNWinType"}],TaiXiuChainItem:[function(t,e,i){"use strict";cc._RF.push(e,"f7f7c1FkNFEi5RohANaTxTQ","TaiXiuChainItem");var n=t("../../../util/FormatUtil"),o=(t("../../../helper/Constant"),t("../../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,prefixNickNameLabel:cc.Label,nameLabel:cc.Label,chainLabel:cc.Label,totalBetLabel:cc.Label,startMatchGameIdLabel:cc.Label,endMatchGameIdLabel:cc.Label,prizeLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){if(t){this.noLabel.string=t.top||e+1,this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nameLabel.string=t.nick_name,this.chainLabel.string=t.chain,this.totalBetLabel.string=n.numberWithCommas(t.total_bet),this.startMatchGameIdLabel.string=t.start_match_game_id||t.start_math_game_id,this.endMatchGameIdLabel.string=t.end_match_game_id||t.end_math_game_id;var i=t.note;this.prizeLabel.string=i||n.numberWithCommas(t.prize);var s=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=s,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nameLabel.node.color=new cc.Color(255,244,141,255)}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TaiXiuChain:[function(t,e,i){"use strict";cc._RF.push(e,"52ec0qkKWNKYoNtzdwCloS/","TaiXiuChain");t("../../../helper/Constant");var n=t("../../../helper/Message"),o=t("../../../util/FormatUtil"),s=t("../tai-xiu/TaiXiuConstant");cc.Class({extends:cc.Component,properties:{contentTaiXiuNode:cc.Node,taiXiuChainItemPrefab:cc.Prefab,taiXiuContentNode:cc.Node,taiXiuRuleNode:cc.Node,taiXiuCurrentTopDayNode:cc.Node,taiXiuListChainNode:cc.Node,taiXiuListCurrentNode:cc.Node,taiXiuNextNode:cc.Node,taiXiuPreviousNode:cc.Node,taiXiuDateLabel:cc.Label,taiXiuchainWinButtonOnNode:cc.Node,taiXiuchainWinButtonOffNode:cc.Node,taiXiuchainLoseButtonOnNode:cc.Node,taiXiuchainLoseButtonOffNode:cc.Node,taiXiuchainWinButtonOnNode2:cc.Node,taiXiuchainWinButtonOffNode2:cc.Node,taiXiuchainLoseButtonOnNode2:cc.Node,taiXiuchainLoseButtonOffNode2:cc.Node,currentTopDayOnNode:cc.Node,currentTopDayOffNode:cc.Node,topDayButtonOnNode:cc.Node,topDayButtonOffNode:cc.Node,topMonthButtonOnNode:cc.Node,topMonthButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.reset(),this.loadData(),this.getCurrentTopChain(),this.onTaiXiuChainClick()},onDisable:function(){this.removeXhr()},getCurrentTopChain:function(){this.controller.sendRequest.sendNoPrefixToZone(s.CURRENT_TOP_CHAIN)},initTopDay:function(t){this.loadingNode.active=!1,this.currentDataTopDay=t,this.onCurrentTopDayClick()},initListTopDay:function(){if(this.taiXiuListCurrentNode.removeAllChildren(!0),this.currentDataTopDay)for(var t=this.currentDataTopDay.tai_xiu_top_chains,e=t.chain_lose_day,i=t.chain_win_day,n=this.taiXiuchainWinButtonOnNode.active?i:e,o=0;o<n.length;o++){var s=cc.instantiate(this.taiXiuChainItemPrefab);s.getComponent("TaiXiuChainItem").init(n[o],o),s.parent=this.taiXiuListCurrentNode}},loadData:function(){var t=this;if(this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.loadingNode.active=!0,this.xhr=this.controller.api.getChainTaiXiu(e,function(e){t.loadingNode.active=!1,t.data=t.modifyMonthDay(e.data),t.initData()},function(e){t.loadingNode.active=!1,t.controller.showDialogMessage(n.TAIXIU_CHAIN,e.msg)})}},modifyMonthDay:function(t){var e,i,n={chan_le_chain:{},tai_xiu_chain:{}};return e=(t=t.day)[0],i=t[2],n.tai_xiu_chain.day=e,n.tai_xiu_chain.month=i,n},initData:function(){if(this.data&&this.data.tai_xiu_chain){var t=this.data.tai_xiu_chain.day,e=this.data.tai_xiu_chain.month,i={};i=this.isTopDay()?t[0]:e,this.initListDataTaiXiu(i),i||this.hideDateNodeTaiXiu()}},initListDataTaiXiu:function(t){if(this.taiXiuListChainNode.removeAllChildren(!0),this.isTopDay()?this.showDateNodeTaiXiu():this.hideDateNodeTaiXiu(),t){for(var e=[],i=0;i<t.length;i++)this.isTaiXiuChainWin()?1==t[i].is_win&&e.push(t[i]):0==t[i].is_win&&e.push(t[i]);for(var n=e.length-1;n>=0;n--){var s=cc.instantiate(this.taiXiuChainItemPrefab);s.getComponent("TaiXiuChainItem").init(e[n],n),s.parent=this.taiXiuListChainNode,0===n&&(this.timeTaiXiu=e[n].created_at,this.taiXiuDateLabel.string=o.getStringOnlyDateByTimeStamp(this.timeTaiXiu/1e3-86400),this.isTopDay()&&this.initNextPreviousButtonTaiXiu())}}},onTaiXiuNextClick:function(){if(this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeTaiXiu){this.initListDataTaiXiu(t[e+1]);break}}},onTaiXiuPreviousClick:function(){if(this.data&&this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeTaiXiu){this.initListDataTaiXiu(t[e-1]);break}}},showDateNodeTaiXiu:function(){this.taiXiuNextNode.active=!0,this.taiXiuPreviousNode.active=!0,this.taiXiuDateLabel.node.active=!0},hideDateNodeTaiXiu:function(){this.taiXiuNextNode.active=!1,this.taiXiuPreviousNode.active=!1,this.taiXiuDateLabel.node.active=!1},isTopDay:function(){return this.topDayButtonOnNode.active},isTaiXiuChainWin:function(){return this.taiXiuchainWinButtonOnNode2.active},initNextPreviousButtonTaiXiu:function(){if(this.taiXiuNextNode.active=!0,this.taiXiuPreviousNode.active=!0,this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;t.length>0&&(this.timeTaiXiu===t[0][0].created_at&&(this.taiXiuPreviousNode.active=!1),this.timeTaiXiu===t[t.length-1][0].created_at&&(this.taiXiuNextNode.active=!1))}},onChainWinCurrentDayClick:function(){this.taiXiuchainWinButtonOnNode.active=!0,this.taiXiuchainWinButtonOffNode.active=!1,this.taiXiuchainLoseButtonOnNode.active=!1,this.taiXiuchainLoseButtonOffNode.active=!0,this.initListTopDay()},onChainLoseCurrentDayClick:function(){this.taiXiuchainWinButtonOnNode.active=!1,this.taiXiuchainWinButtonOffNode.active=!0,this.taiXiuchainLoseButtonOnNode.active=!0,this.taiXiuchainLoseButtonOffNode.active=!1,this.initListTopDay()},onChainWinClick2:function(){this.data&&(this.taiXiuchainWinButtonOnNode2.active=!0,this.taiXiuchainWinButtonOffNode2.active=!1,this.taiXiuchainLoseButtonOnNode2.active=!1,this.taiXiuchainLoseButtonOffNode2.active=!0,this.initData())},onChainLoseClick2:function(){this.data&&(this.taiXiuchainWinButtonOnNode2.active=!1,this.taiXiuchainWinButtonOffNode2.active=!0,this.taiXiuchainLoseButtonOnNode2.active=!0,this.taiXiuchainLoseButtonOffNode2.active=!1,this.initData())},onTaiXiuChainClick:function(){this.contentTaiXiuNode.active=!0},onCurrentTopDayClick:function(){this.showCurrentTopDayNode(),this.initListTopDay()},onTopDayClick:function(){this.data&&(this.showTopDayNode(),this.initData())},onTopMonthClick:function(){this.data&&(this.showTopMonthNode(),this.initData())},onRuleClick:function(){this.showRuleNode()},showCurrentTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.taiXiuCurrentTopDayNode.active=!0,this.currentTopDayOnNode.active=!0,this.currentTopDayOffNode.active=!1},showTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.showContentTopMonthDayNode(),this.topDayButtonOnNode.active=!0,this.topDayButtonOffNode.active=!1},showTopMonthNode:function(){this.hideAllButton(),this.hideAllContent(),this.showContentTopMonthDayNode(),this.topMonthButtonOnNode.active=!0,this.topMonthButtonOffNode.active=!1},showContentTopMonthDayNode:function(){this.taiXiuContentNode.active=!0},showRuleNode:function(){this.hideAllButton(),this.hideAllContent(),this.taiXiuRuleNode.active=!0,this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1},hideAllContent:function(){this.taiXiuContentNode.active=!1,this.taiXiuRuleNode.active=!1,this.taiXiuCurrentTopDayNode.active=!1},hideAllButton:function(){this.currentTopDayOnNode.active=!1,this.topDayButtonOnNode.active=!1,this.topMonthButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1,this.currentTopDayOffNode.active=!0,this.topDayButtonOffNode.active=!0,this.topMonthButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.data=null}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../tai-xiu/TaiXiuConstant":"TaiXiuConstant"}],TaiXiuChat:[function(t,e,i){"use strict";cc._RF.push(e,"24287Geh4tJ+Ybp0b62zVpQ","TaiXiuChat");t("../../../helper/Constant");var n=t("../../../util/BrowserUtil"),o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView,chatEditBox:cc.EditBox},init:function(t){this.TaiXiu=t},onLoad:function(){this.number=0},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(0),this.number++},initChat:function(t){this.chatScrollView.content.removeAllChildren(!0),this.instanceChat(t),this.scrollToBottom()},addChat:function(t){this.instanceChat(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChat:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.instanceChatItem(t[e]);else this.instanceChatItem(t)},instanceChatItem:function(t){var e=e=cc.instantiate(this.chatItemPrefab);e.getComponent("MiniGameChatItem").init(t),e.parent=this.chatScrollView.content},scrollToBottom:function(){this.number=0},onCloseClick:function(){this.TaiXiu.getTempData()[o.IS_SHOW_CHAT]=!this.node.active,this.node.active=!this.node.active},onSendClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(1==this.TaiXiu.getUser().status_value){if(""!==t.trim()){var e={message:t};this.TaiXiu.sendRequest.sendNoPrefixToZone(o.CHAT,e),this.chatEditBox.string=""}}else this.TaiXiu.showMessage("Vui l\xf2ng b\u1ea3o m\u1eadt t\xe0i kho\u1ea3n \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y")},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=150}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/BrowserUtil":"BrowserUtil","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuConstant:[function(t,e,i){"use strict";cc._RF.push(e,"de4d8Tzx0dDebFezsVpACh1","TaiXiuConstant");e.exports={TAI:1,XIU:0,CHAN:2,LE:3,MIN_TAI:11,NUMBER_HISTORY:18,NUMBER_DETAIL_ITEM:8,TIME_GET_FINISH:4,TOTAL_STATISTIC:17,MAX_NUM_STATISTIC:7,MAX_SUM_STATISTIC:18,DISTANCE_H_STATISTIC:30.8,DISTANCE_H_SUM:6.5,DISTANCE_W_STATISTIC:30.8,START_H_SUM:147.5,SIZE_SUM_CRILE:7,SIZE_STATISTIC_CRILE:4,DISTANCE_HISTORY_ITEM:21.5,MAX_COL:18,MAX_TAXIU:120,MAX_TAXIU_2:89,MAX_CHAT:120,DISTANCE_ECLIP_ITEM:17,DISTANCE_W_STATISTIC_2:21.5,DISTANCE_H_STATISTIC_2:19.5,REQUEST_START:"START",REQUEST_BALANCE_DOOR:"BALANCE_DOOR",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_CHANGE_STATE:"CHANGE_STATE",REQUEST_CHAT:"CHAT",REQUEST_HISTORY_DETAIL:"HISTORY_DETAIL",CURRENT_TOP_CHAIN_2:"CURRENT_TOP_CHAIN",GET_TOP_2:"GET_TOP",ADD_EVENT:"tai_xiu.ADD_EVENT",REMOVE_EVENT:"tai_xiu.REMOVE_EVENT",GET_STATE:"tai_xiu.GET_STATE",BET:"tai_xiu.BET",CHAT:"tai_xiu.CHAT",HISTORY_DETAIL:"tai_xiu.HISTORY_DETAIL",IS_SHOW:"tai_xiu_is_show",IS_SHOW_CHAT:"tai_xiu_is_show_chat",POSITION:"tai_xiu_position",IS_NAN:"tai_xiu_nan",CURRENT_TOP_CHAIN:"tai_xiu.CURRENT_TOP_CHAIN",GET_TOP:"tai_xiu.GET_TOP",GET_FINISH:"tai_xiu.FINISH"},cc._RF.pop()},{}],TaiXiuDetailItem:[function(t,e,i){"use strict";cc._RF.push(e,"2100fo8/etNDYeE9bNpW7jg","TaiXiuDetailItem");var n=t("../../../util/FormatUtil"),o=(t("../../../helper/Constant"),t("../../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,prefixNickNameLabel:cc.Label,nickNameLabel:cc.Label,balanceBetLabel:cc.Label,balanceReturnLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.data=t,this.timeLabel.string=n.getStringHourByTimeStamp(t.time),this.prefixNickNameLabel.string=o.getServerID(t.server_id),this.nickNameLabel.string=t.nick_name,this.balanceBetLabel.string=n.numberWithCommas(t.balance_bet),this.balanceReturnLabel.string=n.numberWithCommas(t.balance_return);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nickNameLabel.node.color=new cc.Color(255,244,141,255)}},onLoad:function(){}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TaiXiuDetail:[function(t,e,i){"use strict";cc._RF.push(e,"d1373M+vONBq6ueyKM/VUT4","TaiXiuDetail");var n=t("../tai-xiu/TaiXiuConstant"),o=t("../../../helper/Message"),s=t("../../../util/FormatUtil"),a=t("../../item/PaginationItem");cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,taiXiuNode:cc.Node,dice1Sprite:cc.Sprite,dice2Sprite:cc.Sprite,dice3Sprite:cc.Sprite,dicesSpriteFrame:[cc.SpriteFrame],nextNode:cc.Node,previousNode:cc.Node,matchLabel:cc.Label,taiAnimation:cc.Animation,xiuAnimation:cc.Animation,taiAnimationOff:cc.Animation,xiuAnimationOff:cc.Animation,taiXiuDetailItemPrefab:cc.Prefab,listTaiNode:cc.Node,listXiuNode:cc.Node,taiTotalBalanceBetLabel:cc.Label,taiTotalBalanceReturnLabel:cc.Label,xiuTotalBalanceBetLabel:cc.Label,xiuTotalBalanceReturnLabel:cc.Label,pageNode:cc.Node,pagePreviewPreview:a,pagePreView:a,pageNext:a,pageNextNext:a,listPageNumberItem:[a]},init:function(t){this.controller=t},onLoad:function(){!1!==this.isMoneyType&&(this.isMoneyType=!0),this.pool=new cc.NodePool;for(var t=0;t<20;t++)this.pool.put(cc.instantiate(this.taiXiuDetailItemPrefab));this.dialogForm=this.node.getComponent("DialogForm"),this.listPagination=[],this.sortBetListTai,this.sortBetListXiu,this.sortTimeListTai,this.sortTimeListXiu},onEnable:function(){this.onShowTaiXiuClick(),this.dataDices&&this.initDicesEffect(this.dataDices)},onDisable:function(){},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},handleHistoryDetail:function(t){this.data=t,this.initInfo()},onNextClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--)if(this.data.list_histories_match_game_id[t]===this.matchGameId){this.matchGameId=this.data.list_histories_match_game_id[t+1],this.showLoading();var e={match_game_id:this.matchGameId};this.controller.sendRequest.sendNoPrefixToZone(n.HISTORY_DETAIL,e);break}},onPreviousClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--)if(this.data.list_histories_match_game_id[t]===this.matchGameId){this.matchGameId=this.data.list_histories_match_game_id[t-1],this.showLoading();var e={match_game_id:this.matchGameId};this.controller.sendRequest.sendNoPrefixToZone(n.HISTORY_DETAIL,e);break}},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyButtonNode.active=t,this.goldButtonNode.active=!t,this.initInfo()},initInfo:function(){if(this.data){var t=this.data.history_detail;if(t){this.showContent();var e=t.match_game_id,i=t.time,n=t.dices,a=t.list_bets;this.matchLabel.string=String.format(o.TAIXIU_HISTORIES_DETAIL,e,s.getStringDateByTimeStamp(i)),this.initNextPreviousButton(e),this.initDicesSprite(n),this.initDicesEffect(n),this.initListBets(a)}}},initNextPreviousButton:function(t){this.nextNode.active=!0,this.previousNode.active=!0,this.data&&this.data.list_histories_match_game_id&&(this.data.list_histories_match_game_id[0]===t&&(this.previousNode.active=!1),this.data.list_histories_match_game_id[this.data.list_histories_match_game_id.length-1]===t&&(this.nextNode.active=!1))},initListBets:function(t){t=this.sortListBetByTimes(t),this.listTaiNode.parent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll(),this.listTaiNode.parent.parent.parent.getComponent(cc.ScrollView).scrollToTop();var e=0,i=0,o=0,a=0;for(var r in this.listBetTai=[],this.listBetXiu=[],this.sortBetListTai=null,this.sortBetListXiu=null,this.sortTimeListTai=null,this.sortTimeListXiu=null,t)(t[r].is_money&&this.isMoneyType||!t[r].is_money&&!this.isMoneyType)&&(t[r].type===n.TAI?this.listBetTai.push(t[r]):t[r].type===n.XIU&&this.listBetXiu.push(t[r]),t[r].type===n.TAI?(e+=t[r].balance_bet,i+=t[r].balance_return):t[r].type===n.XIU&&(o+=t[r].balance_bet,a+=t[r].balance_return));this.sortTimeListTai=this.listBetTai,this.sortTimeListXiu=this.listBetXiu,this.taiTotalBalanceBetLabel.string=s.numberWithCommas(e),this.taiTotalBalanceReturnLabel.string=s.numberWithCommas(i),this.xiuTotalBalanceBetLabel.string=s.numberWithCommas(o),this.xiuTotalBalanceReturnLabel.string=s.numberWithCommas(a),this.setPage(0)},onShowTaiXiuClick:function(){this.taiXiuNode.active=!0},onSortBetTaiClick:function(){this.sortBetListTai?(this.sortBetListTai.reverse(),this.listBetTai=this.sortBetListTai,this.setPage(this.page)):(this.sortBetListTai=this.sortListBetByBet(this.listBetTai),this.listBetTai=this.sortBetListTai,this.setPage(this.page))},onSortBetXiuClick:function(){this.sortBetListXiu?(this.sortBetListXiu.reverse(),this.listBetXiu=this.sortBetListXiu,this.setPage(this.page)):(this.sortBetListXiu=this.sortListBetByBet(this.listBetXiu),this.listBetXiu=this.sortBetListXiu,this.setPage(this.page))},onSortTimeTaiClick:function(){this.sortTimeListTai.reverse(),this.listBetTai=this.sortTimeListTai,this.setPage(this.page)},onSortTimeXiuClick:function(){this.sortTimeListXiu.reverse(),this.listBetXiu=this.sortTimeListXiu,this.setPage(this.page)},sortListBetByTimes:function(t){var e=t.slice();return e.sort(function(t,e){return t.time===e.time?0===t.balance_return&&0!==e.balance_return?-1:0===e.balance_return&&0!==t.balance_return?1:0===t.balance_return&&0===e.balance_return?0:e.balance_bet-e.balance_return-(t.balance_bet-t.balance_return):t.time-e.time}),e},sortListBetByBet:function(t){var e=t.slice();return e.sort(function(t,e){return e.balance_bet-t.balance_bet}),e},showDetail:function(t,e){this.setTypeRoom(e),this.matchGameId=t,this.showDialog(),this.showLoading();var i={match_game_id:t};this.controller.sendRequest.sendNoPrefixToZone(n.HISTORY_DETAIL,i)},showContent:function(){this.loadingNode.active=!1,this.contentNode.active=!0},showLoading:function(){this.loadingNode.active=!0,this.contentNode.active=!1},initDicesSprite:function(t){this.dice1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.dice2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.dice3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2])},getSpriteFrameByDice:function(t){return t>0&&t<7?this.dicesSpriteFrame[t-1]:this.dicesSpriteFrame[0]},initDicesEffect:function(t){this.dataDices=t;for(var e=0,i=0;i<t.length;i++)e+=t[i];e>=n.MIN_TAI?this.showTaiAnimationNode():this.showXiuAnimationNode()},putAllToPool:function(){if(this.pool){var t=this.listTaiNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n]);var o=this.listXiuNode.getChildren(),s=[];for(var a in o)s.push(o[a]);for(var r in s)this.pool.put(s[r])}},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.listBetTai&&this.listBetXiu&&(this.listBetTai.length>0||this.listBetXiu.length>0)?function(){t.showListContent(e);for(var i=parseInt(t.listBetTai.length/n.NUMBER_DETAIL_ITEM),o=parseInt(t.listBetXiu.length/n.NUMBER_DETAIL_ITEM),s=Math.max(i,o),a=0;a<t.listPageNumberItem.length;a++)t.listPageNumberItem[a].node.active=a<s;var r=t.listBetTai.length>t.listBetXiu.length?t.listBetTai.length:t.listBetXiu.length,c=i>o?i:o;if(c=c*n.NUMBER_DETAIL_ITEM===r?c-1:c,t.showNumberPagination(c),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",c),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var h=0,l=t.listPageNumberItem.length;h<l;h++)t.listPageNumberItem[h].init(h+1,h),t.listPageNumberItem[h].enable(),h===e&&t.listPageNumberItem[h].disable(),t.listPagination.push(t.listPageNumberItem[h]);else if(e+2>=c){var u=c;if(c>4)for(var d=t.listPageNumberItem.length-1;d>=0;d--)t.listPageNumberItem[d].init(u+1,u),t.listPageNumberItem[d].enable(),u===e&&t.listPageNumberItem[d].disable(),t.listPagination.push(t.listPageNumberItem[d]),u--;else{for(var m=0,f=t.listPageNumberItem.length;m<f;m++)t.listPageNumberItem[m].enable();t.listPageNumberItem[e].disable()}}else for(var p=-2,_=0,S=t.listPageNumberItem.length;_<S;_++)t.listPageNumberItem[_].init(e+p+1,e+p),t.listPageNumberItem[_].enable(),0===p&&t.listPageNumberItem[_].disable(),t.listPagination.push(t.listPageNumberItem[_]),p++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e>=c?(t.pagePreView.init("<",e-1),t.pageNext.init(">",c)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var g=t;if(!t.isEvent){var C=function(e){var i=t.listPagination[e].getComponent("PaginationItem").pageOffButtonNode;i.on(cc.Node.EventType.TOUCH_END,function(){var t=i.parent.getComponent("PaginationItem").getPage();g.setPage(t)},i)};for(var N in t.listPagination)C(N);t.isEvent=!0}}():(this.putAllToPool(),this.pageNode.active=!1)},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var n=0;n<this.listPageNumberItem.length;n++)this.listPageNumberItem[n].node.active=!0},showListContent:function(t){if(this.putAllToPool(),t*n.NUMBER_DETAIL_ITEM<this.listBetTai.length)for(var e=t*n.NUMBER_DETAIL_ITEM,i=e,o=e+n.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.listBetTai.length){var s=void 0;this.pool&&(s=this.pool.get()),s||(s=cc.instantiate(this.taiXiuDetailItemPrefab)),s.getComponent("TaiXiuDetailItem").init(this.listBetTai[i],i),s.parent=this.listTaiNode}if(t*n.NUMBER_DETAIL_ITEM<this.listBetXiu.length)for(var a=t*n.NUMBER_DETAIL_ITEM,r=a,c=a+n.NUMBER_DETAIL_ITEM;r<c;r++)if(r<this.listBetXiu.length){var h=void 0;this.pool&&(h=this.pool.get()),h||(h=cc.instantiate(this.taiXiuDetailItemPrefab)),h.getComponent("TaiXiuDetailItem").init(this.listBetXiu[r],r),h.parent=this.listXiuNode}},showTaiAnimationNode:function(){this.taiAnimation.node.active=!0,this.taiAnimationOff.node.active=!1,this.xiuAnimation.node.active=!1,this.xiuAnimationOff.node.active=!0},showXiuAnimationNode:function(){this.taiAnimation.node.active=!1,this.taiAnimationOff.node.active=!0,this.xiuAnimation.node.active=!0,this.xiuAnimationOff.node.active=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../item/PaginationItem":"PaginationItem","../tai-xiu/TaiXiuConstant":"TaiXiuConstant"}],TaiXiuDice:[function(t,e,i){"use strict";cc._RF.push(e,"1b3347UjyNMIbdubDOddH80","TaiXiuDice"),cc.Class({extends:cc.Component,properties:{dice1Sprite:cc.Sprite,dice2Sprite:cc.Sprite,dice3Sprite:cc.Sprite,dicesSpriteFrame:[cc.SpriteFrame],resultNode:cc.Node,resultLabel:cc.Label,diceSprite:cc.Sprite,diceSpriteFrame:cc.SpriteFrame,diceAnimation:cc.Animation,taiAnimation:cc.Animation,xiuAnimation:cc.Animation},init:function(t){this.TaiXiu=t},onLoad:function(){},show:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2],n=t.dice||t.dices,o=t.result;this.reset(),this.node.active=!0,this.diceSprite.node.active=!0,e?(this.showDices(!1),this.node.active&&this.diceAnimation.play(),this.node.runAction(cc.sequence(cc.delayTime(this.diceAnimation.defaultClip.duration),cc.callFunc(function(){this.reset(),this.showDices(!0),this.initDicesSprite(n),this.initResult(n),this.showEffectTaiXiuResult(o)},this)))):(this.showDices(!0),this.initDicesSprite(n),i||(this.resultNode.active=!1))},showEffectTaiXiuResult:function(t){var e=t.result,i=t.dices;this.taiAnimation.node.getComponent("ShowHideAnim").hideEffect(),this.xiuAnimation.node.getComponent("ShowHideAnim").hideEffect(),"tai"===e?this.taiAnimation.node.getComponent("ShowHideAnim").showEffect():"xiu"===e&&this.xiuAnimation.node.getComponent("ShowHideAnim").showEffect(),this.initResult(i)},hide:function(){this.node.stopAllActions(),this.diceAnimation.stop(),this.taiAnimation.node.getComponent("ShowHideAnim").hideEffect(),this.xiuAnimation.node.getComponent("ShowHideAnim").hideEffect(),this.showDices(!1),this.node.active=!1,this.diceSprite.node.active=!1},initDicesSprite:function(t){this.dice1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.dice2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.dice3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2])},initResult:function(t){if(t){var e=this.getSum(t);this.resultLabel.string=e,this.resultNode.active=!0}},getSum:function(t){var e=0;for(var i in t)e+=t[i];return e},getSpriteFrameByDice:function(t){return t>0&&t<7?this.dicesSpriteFrame[t-1]:this.dicesSpriteFrame[0]},showDices:function(t){this.dice1Sprite.node.active=t,this.dice2Sprite.node.active=t,this.dice3Sprite.node.active=t,this.resultNode.active=t},reset:function(){this.node.stopAllActions(),this.diceAnimation.stop(),this.diceSprite.spriteFrame=this.diceSpriteFrame}}),cc._RF.pop()},{}],TaiXiuHistoriesItem:[function(t,e,i){"use strict";cc._RF.push(e,"5b6f2STKMxBIpW/gsJ0Rxjz","TaiXiuHistoriesItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,doorLabel:cc.Label,resultLabel:cc.Label,betLabel:cc.Label,returnLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.match_game_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at);var i="";1==t.tai_xiu_type&&(i="T\xc0I"),0==t.tai_xiu_type&&(i="X\u1ec8U"),2==t.tai_xiu_type&&(i="CH\u1eb4N"),3==t.tai_xiu_type&&(i="L\u1eba"),this.doorLabel.string=i,this.betLabel.string=n.numberWithCommas(t.total_bet_amount),this.resultLabel.string=this.getResult(t.result),this.returnLabel.string=n.numberWithCommas(t.total_return_amount),this.getLabel.string=n.numberWithCommas(t.total_prize_amount+t.total_bet_amount);var o=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=o},onLoad:function(){},getResult:function(t){var e=JSON.parse(t),i=0;for(var n in e)i+=e[n];return t+" - "+i}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TaiXiuHistories:[function(t,e,i){"use strict";cc._RF.push(e,"1adf1R+ug5IyqC45J84nMtG","TaiXiuHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyTaiXiuItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick(),this.loadData()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!1},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!1},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryTaiXiu(e,function(e){t.data=e.data,t.convertData(),t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},convertData:function(){if(this.dataConvert={},this.dataConvert.is_tai_xiu=[],this.dataConvert.is_chan_le=[],this.data)for(var t=this.data[0],e=0,i=t.length;e<i;e++)0===t[e].tai_xiu_type||1===t[e].tai_xiu_type?this.dataConvert.is_tai_xiu.push(t[e]):this.dataConvert.is_chan_le.push(t[e])},initData:function(){if(this.showListNode(),this.dataConvert){var t=this.dataConvert.is_tai_xiu;for(var e in t){var i=cc.instantiate(this.historyTaiXiuItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("TaiXiuHistoriesItem").init(t[e],e)}}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],TaiXiuHistoryGame1:[function(t,e,i){"use strict";cc._RF.push(e,"f51b3Jt+s5BE5+mQDl8sZWK","TaiXiuHistoryGame1");var n=t("../../../util/FormatUtil"),o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{taiLabel:cc.Label,xiuLabel:cc.Label,historyLayoutNode:cc.Node,history2LayoutNode:cc.Node},init:function(t,e){this.data=e,this.TaiXiuHistoryGame=t,this.node.active&&this.initData(e)},onLoad:function(){},onEnable:function(){this.data&&this.initData(this.data)},initData:function(t){for(var e=0,i=0,s=this.historyLayoutNode.getChildren(),a=this.history2LayoutNode.getChildren(),r=0;r<s.length;r++)r<t.length?(s[r].active=!0,s[r].getComponent("TaiXiuHistoryItem2").init(t[r]),a[r].getComponent("TaiXiuHistoryItem").initData(t[r])):(s[r].active=!1,a[r].active=!1);for(var c=t.length-1;c>=0;c--){var h=t[c].dices,l=0;for(var u in h)l+=h[u];l>=o.MIN_TAI?e++:i++}this.taiLabel.string=n.numberWithCommas(e),this.xiuLabel.string=n.numberWithCommas(i)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryGame2:[function(t,e,i){"use strict";cc._RF.push(e,"b225eVxRYRAZaXeq1QG67kb","TaiXiuHistoryGame2");var n=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{graphicsNode:cc.Node},onLoad:function(){},onEnable:function(){this.data&&(this.initFirst(),this.initHistory(this.data))},init:function(t,e){this.data=e,this.TaiXiuHistoryGame=t,this.TaiXiuHistoryGame.node.active&&this.initHistory(e)},initFirst:function(){this.graphic||(this.graphic=this.graphicsNode.getComponent(cc.Graphics),this.sumDraw=!0,this.xs1Draw=!0,this.xs2Draw=!0,this.xs3Draw=!0,this.BLACK_COLOR=cc.Color.BLACK.toCSS(),this.WHILE_COLOR=cc.Color.WHITE.toCSS(),this.XS1_COLOR=cc.Color.YELLOW.toCSS()+"00",this.XS2_COLOR=cc.Color.RED.toCSS()+"00",this.XS3_COLOR=cc.Color.GREEN.toCSS()+"00")},initHistory:function(t){this.reset();var e=[];if(t.length>n.TOTAL_STATISTIC)for(var i=0;i<n.TOTAL_STATISTIC;i++)e.push(t[i]);else e=t;e=e.reverse(),this.drawSum(e),this.drawStatistic(e)},drawSum:function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(this.getPositionDrawSum(i+1,t[i].dices));this.draw(this.sumDraw,e,n.SIZE_SUM_CRILE)},drawStatistic:function(t){var e=this.getPositionStatistic(t,0,this.XS1_COLOR,cc.Color.YELLOW),i=this.getPositionStatistic(t,1,this.XS2_COLOR,cc.Color.RED),o=this.getPositionStatistic(t,2,this.XS3_COLOR,cc.Color.GREEN);this.draw(this.xs1Draw,e,n.SIZE_STATISTIC_CRILE),this.draw(this.xs2Draw,i,n.SIZE_STATISTIC_CRILE),this.draw(this.xs3Draw,o,n.SIZE_STATISTIC_CRILE)},getPositionDrawSum:function(t,e){var i=e[0]+e[1]+e[2],o=t*n.DISTANCE_W_STATISTIC_2,s=n.START_H_SUM+i*n.DISTANCE_H_SUM,a=i>=n.MIN_TAI?this.BLACK_COLOR:this.WHILE_COLOR;this.WHILE_COLOR;return{x:o,y:s,colorCrile:a,colorLine:cc.Color.WHITE}},getPositionStatistic:function(t,e,i,o){for(var s=[],a=0,r=t.length;a<r;a++){var c=t[a].dices,h=(a+1)*n.DISTANCE_W_STATISTIC_2,l=c[e]*n.DISTANCE_H_STATISTIC_2;s.push({x:h,y:l,colorCrile:i,colorLine:o})}return s},draw:function(t,e,i){if(t){for(var n=0,o=e.length;n<o;n++)0===n?this.graphic.moveTo(e[n].x,e[n].y):(this.graphic.lineTo(e[n].x,e[n].y),this.graphic.strokeColor=e[n].colorLine);this.graphic.stroke();for(var s=0,a=e.length;s<a;s++)this.graphic.circle(e[s].x,e[s].y,i),this.graphic.fillColor=cc.color().fromHEX(e[s].colorCrile),this.graphic.fill()}},onSumToggleClick:function(){this.sumDraw=!this.sumDraw,this.init(this.TaiXiuHistoryGame,this.data)},onXS1ToogleClick:function(){this.xs1Draw=!this.xs1Draw,this.init(this.TaiXiuHistoryGame,this.data)},onXS2ToogleClick:function(){this.xs2Draw=!this.xs2Draw,this.init(this.TaiXiuHistoryGame,this.data)},onXS3ToogleClick:function(){this.xs3Draw=!this.xs3Draw,this.init(this.TaiXiuHistoryGame,this.data)},reset:function(){this.initFirst(),this.graphic.clear()}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryGame:[function(t,e,i){"use strict";cc._RF.push(e,"792780g4wNPBYckn8J7xha9","TaiXiuHistoryGame");var n=t("./TaiXiuHistoryGame1"),o=t("./TaiXiuHistoryGame2");cc.Class({extends:cc.Component,properties:{TaiXiuHistoryGame1:n,TaiXiuHistoryGame2:o},onLoad:function(){},init:function(t){this.TaiXiuHistoryGame1.init(this,t),this.TaiXiuHistoryGame2.init(this,t)},onNextClick:function(){this.TaiXiuHistoryGame1.node.active?this.showHistoryGame2():this.showHistoryGame1()},onPreviousClick:function(){this.TaiXiuHistoryGame1.node.active?this.showHistoryGame2():this.showHistoryGame1()},showHistoryGame1:function(){this.TaiXiuHistoryGame1.node.active=!0,this.TaiXiuHistoryGame2.node.active=!1},showHistoryGame2:function(){this.TaiXiuHistoryGame1.node.active=!1,this.TaiXiuHistoryGame2.node.active=!0},onCloseClick:function(){this.node.active=!1}}),cc._RF.pop()},{"./TaiXiuHistoryGame1":"TaiXiuHistoryGame1","./TaiXiuHistoryGame2":"TaiXiuHistoryGame2"}],TaiXiuHistoryItem2:[function(t,e,i){"use strict";cc._RF.push(e,"af451w50RhHErjxt6tEnGc1","TaiXiuHistoryItem2");var n=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{taiLabel:cc.Label,xiuLabel:cc.Label},onLoad:function(){},init:function(t){this.data=t;var e=t.dices,i=0;for(var o in e)i+=e[o];this.taiLabel.string=i,this.xiuLabel.string=i,i>=n.MIN_TAI?(this.taiLabel.node.active=!0,this.xiuLabel.node.active=!1):(this.taiLabel.node.active=!1,this.xiuLabel.node.active=!0)}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"c2bf58gN+pLjrEZozeDlSXU","TaiXiuHistoryItem");var n=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{itemSprite:cc.Sprite,taiSpriteFrame:cc.SpriteFrame,xiuSpriteFrame:cc.SpriteFrame,animationNode:cc.Node},init:function(t){this.TaiXiu=t,this.TaiXiuHistory=t.TaiXiuHistory},onLoad:function(){},onDisable:function(){this.animationNode.getComponent(cc.Animation).stop()},initData:function(t){this.data=t;var e=t.dices;for(var i in this.sum=0,e)this.sum+=e[i];this.itemSprite.spriteFrame=this.sum>=n.MIN_TAI?this.taiSpriteFrame:this.xiuSpriteFrame,this.animationNode.y=0,this.animationNode.getComponent(cc.Animation).stop()},isTaiXiu:function(){return this.sum>=n.MIN_TAI},showSelectedNode:function(){this.animationNode.getComponent(cc.Animation).play()},hideSelectNode:function(){this.animationNode.getComponent(cc.Animation).stop()},getData:function(){return this.data},onClick:function(){this.TaiXiu&&this.TaiXiu.controller.MiniGame.TaiXiuDetail.showDetail(this.data.match_game_id,this.TaiXiu.isMoneyType)}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistory:[function(t,e,i){"use strict";cc._RF.push(e,"8e4e0/ba+xMFo0NiXSkJzEJ","TaiXiuHistory");var n=t("./TaiXiuConstant"),o=t("./TaiXiuHistoryItem");cc.Class({extends:cc.Component,properties:{historyItemPrefab:cc.Prefab,historyLayout:cc.Node,historyHintNode:cc.Node,historyHintLabel:cc.Label,listHistoryItem:[o]},init:function(t){for(var e in this.TaiXiu=t,this.listHistoryItem)this.listHistoryItem[e].init(t)},onLoad:function(){},initHistories:function(t){for(var e=t.length>n.NUMBER_HISTORY?n.NUMBER_HISTORY:t.length,i=0;i<this.listHistoryItem.length;i++)i<e?(this.listHistoryItem[i].node.active=!0,this.listHistoryItem[i].initData(t[i]),0==i&&this.listHistoryItem[i].showSelectedNode()):this.listHistoryItem[i].node.active=!1},showGameHint:function(t){t.getData()&&(this.historyHintNode.active=!0,this.historyHintLabel.string=t.getData().dices.join("-"),this.historyHintNode.x=t.node.x-this.historyLayout.width/2)},hideGameHint:function(){this.historyHintNode.active=!1,this.historyHintLabel.string=""}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant","./TaiXiuHistoryItem":"TaiXiuHistoryItem"}],TaiXiuNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"75c9fg6sT5M7YavsC7Uu+kt","TaiXiuNumberItem"),cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},init:function(t){this.TaiXiu=t},onLoad:function(){},onNumberClick:function(){var t=(this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue())+""+this.numberLabel.string;this.TaiXiu.isSelectTai?this.TaiXiu.setTai(t):this.TaiXiu.setXiu(t)},onBackClick:function(){var t=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),e=(t+="").slice(0,-1);this.TaiXiu.isSelectTai?this.TaiXiu.setTai(e):this.TaiXiu.setXiu(e)}}),cc._RF.pop()},{}],TaiXiuPlateMove:[function(t,e,i){"use strict";cc._RF.push(e,"a3b6eKfQ1NCFLhmtgBcjAom","TaiXiuPlateMove"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.TaiXiu=t,this.positionX=this.node.x,this.positionY=this.node.y},onLoad:function(){var t=this;this.onTouchMove=function(e){var i=e.touch.getDelta();t.node.x+=i.x,t.node.y+=i.y,t.getDistance()>135&&t.isHide&&(t.isHide=!1,t.TaiXiu.initResult()),e.stopPropagation()},this.addEventMove(),this.isHide=!0},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node)},reset:function(){this.node.x=this.positionX,this.node.y=this.positionY,this.isHide=!0},getDistance:function(){return Math.sqrt((this.node.x-this.positionX)*(this.node.x-this.positionX)+(this.node.y-this.positionY)*(this.node.y-this.positionY))}}),cc._RF.pop()},{}],TaiXiuPlate:[function(t,e,i){"use strict";cc._RF.push(e,"8ab39EYQwdE9q2N0BgnMjMv","TaiXiuPlate");var n=t("./TaiXiuPlateMove"),o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{plateRealNode:cc.Node,plateSprite:cc.Sprite,moneyPlateSpriteFrame:cc.SpriteFrame,goldPlateSpriteFrame:cc.SpriteFrame,nanButtonNode:cc.Node,nanDisalbeButtonNode:cc.Node,TaiXiuPlateMove:n},init:function(t){this.TaiXiu=t,this.TaiXiuPlateMove.init(t)},onLoad:function(){},onNanClick:function(){this.showNanDisableButton()},onNanDisableClick:function(){this.showNanButton()},showNanButton:function(){this.TaiXiu.getTempData()[o.IS_NAN]=!1,this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!0,this.TaiXiuPlateMove.node.active=!1,this.plateRealNode.active=!1},showNanDisableButton:function(){this.TaiXiu.getTempData()[o.IS_NAN]=!0,this.nanButtonNode.active=!0,this.nanDisalbeButtonNode.active=!1,this.TaiXiuPlateMove.node.active=!1,this.plateRealNode.active=!0},showPlateMove:function(){this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!1,this.TaiXiuPlateMove.node.active=!0,this.TaiXiuPlateMove.reset(),this.plateRealNode.active=!0},hidePlateRealNode:function(){this.plateRealNode.active=!1},isNan:function(){return this.TaiXiu.getTempData()[o.IS_NAN]},reset:function(){this.TaiXiu.getTempData()[o.IS_NAN]?(this.nanButtonNode.active=!0,this.nanDisalbeButtonNode.active=!1,this.plateRealNode.active=!0):(this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!0,this.plateRealNode.active=!0),this.TaiXiuPlateMove.node.active=!1,this.TaiXiuPlateMove.reset()},hideAll:function(){this.TaiXiu.getTempData()[o.IS_NAN]?(this.nanButtonNode.active=!0,this.nanDisalbeButtonNode.active=!1):(this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!0),this.TaiXiuPlateMove.node.active=!1}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant","./TaiXiuPlateMove":"TaiXiuPlateMove"}],TaiXiuQuickSelect:[function(t,e,i){"use strict";cc._RF.push(e,"0465ciBip1IIKMWo+eURJax","TaiXiuQuickSelect");var n=t("../../../helper/Config"),o=t("../../../helper/Message"),s=t("../../../object/RoomType"),a=t("../item/TaiXiuSelectItem"),r=t("../item/TaiXiuNumberItem"),c=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{selectNode:cc.Node,numberNode:cc.Node,selectButtonNode:cc.Node,numberButtonNode:cc.Node,listSelectItem:[a],listNumberItem:[r]},init:function(t){this.TaiXiu=t},onLoad:function(){this.initData()},onEnable:function(){this.TaiXiu.node.y<50&&(this.TaiXiu.node.y=50)},initData:function(){for(var t=0;t<this.listSelectItem.length;t++)this.listSelectItem[t].init(this.TaiXiu,n.TAI_XIU_LIST_SELECT[t]);for(var e=0;e<this.listNumberItem.length;e++)this.listNumberItem[e].init(this.TaiXiu)},onSelectClick:function(){this.selectNode.active=!0,this.numberNode.active=!1,this.selectButtonNode.active=!1,this.numberButtonNode.active=!0,this.TaiXiu.resetBetValue()},onNumberClick:function(){this.selectNode.active=!1,this.numberNode.active=!0,this.selectButtonNode.active=!0,this.numberButtonNode.active=!1,this.TaiXiu.resetBetValue()},onBetClick:function(){var t=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),e="";if(t&&(e=this.TaiXiu.isSelectTai?c.TAI:c.XIU),0!==t){var i={amount:t,type:e,room_type:this.TaiXiu.isMoneyType?s.MONEY_CODE:s.GOLD_CODE};this.TaiXiu.sendRequest.sendNoPrefixToZone(c.BET,i),this.onCloseClick()}else this.TaiXiu.showMessage(o.TAIXIU_YOU_NOT_BET)},onCloseClick:function(){this.node.active=!1,this.TaiXiu.resetBetValue(),this.TaiXiu.hideBetXiuNode(),this.TaiXiu.hideBetTaiNode()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../item/TaiXiuNumberItem":"TaiXiuNumberItem","../item/TaiXiuSelectItem":"TaiXiuSelectItem","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"e7cc0Yj4AlJdaS7p4z5o26Y","TaiXiuSelectItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label},init:function(t,e){this.TaiXiu=t,e?(this.value=e,this.nameLabel.string=n.nFormatter(e)):(this.nameLabel.string="ALL IN",this.is_all_in=!0)},onLoad:function(){},onClick:function(){var t=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),e=0;e=this.is_all_in?this.TaiXiu.getSFSMySelf().variables.money.value:t+this.value,this.TaiXiu.isSelectTai?this.TaiXiu.setTai(e):this.TaiXiu.setXiu(e)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TaiXiuState:[function(t,e,i){"use strict";cc._RF.push(e,"7f5e41p0NdKXYcBA/+MC+Q8","TaiXiuState");e.exports={currentState:null,BETTING:"BETTING",BALANCE_DOOR:"BALANCE_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setBalanceDoor:function(){this.currentState=this.BALANCE_DOOR},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isBalanceDoor:function(){return this.currentState===this.BALANCE_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],TaiXiuTime:[function(t,e,i){"use strict";cc._RF.push(e,"633497XfllIJKTB3z7KzLLZ","TaiXiuTime");var n=t("./TaiXiuState"),o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{taixiuTimeBetLabel:cc.Label,taixiuTimeFinishLabel:cc.Label},init:function(t){this.TaiXiu=t},onLoad:function(){},onDestroy:function(){clearInterval(this.timeInterval)},setTime:function(t){clearInterval(this.timeInterval),this.setTimeLabel(t)},initTimeTaiXiu:function(t){t&&(this.gameState=t.game_state,this.time=t.time_remain,this.setTimeLabel(this.time),this.gameState===n.BETTING?(this.taixiuTimeBetLabel.node.active=!0,this.taixiuTimeFinishLabel.node.active=!1):(this.taixiuTimeBetLabel.node.active=!1,this.taixiuTimeFinishLabel.node.active=!0),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval),this.TaiXiu&&this.TaiXiu.startTimeGetFinish()),this.setTimeLabel(this.time)}.bind(this),1e3))},setTimeLabel:function(t){var e=t;this.taixiuTimeBetLabel&&(this.taixiuTimeBetLabel.string=e),this.taixiuTimeFinishLabel&&(this.taixiuTimeFinishLabel.string=e)},setPositionBymoveByMiniGameCircleShow:function(t){t?this.node.setPosition(o.TAI_XIU_TIME_POSITION_X_BIG,o.TAI_XIU_TIME_POSITION_Y_BIG):this.node.setPosition(o.TAI_XIU_TIME_POSITION_X_SMALL,o.TAI_XIU_TIME_POSITION_Y_SMALL)},moveByMiniGameCircleShow:function(t){this.node.active?t?this.moveBig():this.moveSmall():this.setPositionBymoveByMiniGameCircleShow(t)},moveBig:function(){this.node.stopAllActions(),this.node.runAction(cc.moveTo(o.MINIGAME_TIME_SHOW,o.TAI_XIU_TIME_POSITION_X_BIG,o.TAI_XIU_TIME_POSITION_Y_BIG))},moveSmall:function(){this.node.stopAllActions(),this.node.runAction(cc.moveTo(o.MINIGAME_TIME_SHOW,o.TAI_XIU_TIME_POSITION_X_SMALL,o.TAI_XIU_TIME_POSITION_Y_SMALL))}}),cc._RF.pop()},{"../../../helper/Config":"Config","./TaiXiuState":"TaiXiuState"}],TaiXiu:[function(t,e,i){"use strict";cc._RF.push(e,"16159JdFwJDeJGPJin+vf75","TaiXiu");var n=t("../../../base/BaseController"),o=t("./TaiXiuState"),s=t("./TaiXiuConstant"),a=t("./TaiXiuDice"),r=t("./TaiXiuPlate"),c=t("./TaiXiuHistory"),h=t("./TaiXiuTime"),l=t("./TaiXiuQuickSelect"),u=t("./TaiXiuHistoryGame"),d=t("./TaiXiuChat"),m=t("../MiniGameResultTaiXiu"),f=t("../MiniGameResult"),p=t("../../../object/RoomType"),_=t("../../../util/FormatUtil"),S=t("../../../helper/Message"),g=t("../../../helper/Constant"),C=t("../../../helper/Config"),N=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,chainWinLabel:cc.Label,chainLoseLabel:cc.Label,currentChainWinLabel:cc.Label,currentChainLoseLabel:cc.Label,timeBettingLabel:cc.Label,timeBettingNode:cc.Node,timeFinishLabel:cc.Label,timeFinishNode:cc.Node,taiNumberPlayerLabel:cc.Label,taiTotalLabel:cc.Label,taiMyBetLabel:cc.Label,taiLabel:cc.Label,xiuNumberPlayerLabel:cc.Label,xiuTotalLabel:cc.Label,xiuMyBetLabel:cc.Label,xiuLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,timeEffectNode:cc.Node,timeEffect2Node:cc.Node,toastPrefab:cc.Prefab,TaiXiuDice:a,TaiXiuPlate:r,TaiXiuQuickSelect:l,TaiXiuHistory:c,TaiXiuTime:h,TaiXiuHistoryGame:u,TaiXiuChat:d,MiniGameResultTaiXiu:m,MiniGameResult:f},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.time=0,this.timeInterval=null,this.resultTimeout=null,this.isMoneyType=!0,this.timeOutGetFinish=null,this.dataFinish=[],this.TaiXiuState=o,this.TaiXiuDice.init(this),this.TaiXiuChat.init(this),this.TaiXiuPlate.init(this),this.TaiXiuHistory.init(this),this.TaiXiuQuickSelect.init(this),this.TaiXiuTime.init(this),this.setTypeRoom(this.isMoneyType),this.initData()},onEnable:function(){this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),clearInterval(this.timeInterval),clearTimeout(this.resultTimeout),clearTimeout(this.timeOutGetFinish),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){!1===this.getTempData()[s.IS_SHOW_CHAT]&&(this.TaiXiuChat.node.active=!1)},setShowTaiXiu:function(t){this.node.active=t,this.isShow=t,this.getTempData()[s.IS_SHOW]=this.isShow,this.TaiXiuTime.node.active=!t,t||this.sendRequest.sendNoPrefixToZone(s.GET_STATE,{}),this.controller.MiniGame.BonusEvent&&this.controller.MiniGame.BonusEvent.setShowTaiXiu(t)},setTimeLabel:function(t){var e=parseInt(t);this.TaiXiuState.isBetting()?(this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeBettingLabel&&(this.timeBettingLabel.string=e,e<=10?this.timeAnimation():this.timeDefault(),e<=30?(this.timeEffectNode.active=!0,this.timeEffect2Node.active=!1):(this.timeEffectNode.active=!1,this.timeEffect2Node.active=!0))):this.TaiXiuState.isFinish()&&(this.timeBettingNode.active=!1,this.timeFinishNode.active=!0,this.timeFinishLabel&&(this.timeFinishLabel.string=e),this.timeEffectNode.active=!1,this.timeEffect2Node.active=!1)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_START:this.handleStart(i);break;case s.REQUEST_BALANCE_DOOR:this.handleBalanceDoor(i);break;case s.REQUEST_FINISH:this.handleFinish(i);break;case s.REQUEST_UPDATE:this.handleUpdate(i);break;case s.REQUEST_CHANGE_STATE:this.handleChangeState(i);break;case s.REQUEST_CHAT:this.handleChat(i);break;case s.REQUEST_HISTORY_DETAIL:this.handleHistoryDetail(i);break;case s.REQUEST_MESSAGE:this.handleMessage(n);break;case s.CURRENT_TOP_CHAIN_2:this.controller.MiniGame.TaiXiuChain.initTopDay(i);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTaiXiu(i)}},handleInfo:function(t){this.dataBlanceDoor={};var e=t.game_state;this.match_game_id=t.match_game_id,this.TaiXiuState.setState(e),this.data=t,this.data.histories=this.data.histories.reverse(),this.initTime(),this.initChain(),this.initBetData(),this.initDices(!0),this.initHistories(),this.initChat(),this.initPlate(),this.idLabel.string=String.format(S.MINIGAME_ID,this.match_game_id)},handleStart:function(t){this.TaiXiuState.setBetting(),this.data=t,this.reset(),this.initTime(),this.match_game_id=t.match_game_id,this.idLabel.string=String.format(S.MINIGAME_ID,t.match_game_id)},handleBalanceDoor:function(t){this.TaiXiuState.setBalanceDoor(),this.data=t,this.initBalanceDoor(),this.startTimeGetFinish()},handleFinish:function(t){this.dataFinish.push(t),1===this.dataFinish.length&&(clearTimeout(this.timeOutGetFinish),this.TaiXiuState.setFinish(),this.data=t,this.histories||(this.histories=this.data.histories),this.histories.length>=s.NUMBER_HISTORY&&this.histories.pop(),this.histories.splice(0,0,{match_game_id:this.match_game_id,dices:this.data.dice||this.data.dices}),this.data.histories=this.histories,this.initTime(),this.initDices(!1),this.initResultByTime())},handleUpdate:function(t){this.data=t,this.initBetData()},handleChangeState:function(t){this.TaiXiuTime.initTimeTaiXiu(t)},handleChat:function(t){this.TaiXiuChat.addChat(t)},handleHistoryDetail:function(t){this.controller.MiniGame.TaiXiuDetail.handleHistoryDetail(t)},handleMessage:function(t){this.showMessage(t)},initTime:function(){this.data&&(this.time=this.data.time_remain,this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.data&&(this.data.time_remain=this.time,this.setTimeLabel(this.time))}.bind(this),1e3))},initChain:function(){if(this.data){var t=this.data.tai_xiu_chain_lose,e=this.data.tai_xiu_chain_win,i=this.data.tai_xiu_current_chain_win,n=this.data.tai_xiu_current_chain_lose;this.chainWinLabel.string=String.format(S.TAIXIU_CHAIN_WIN,i),this.chainLoseLabel.string=String.format(S.TAIXIU_CHAIN_LOSE,n),this.currentChainWinLabel.string=String.format(S.TAIXIU_CURRENT_CHAIN_WIN,e),this.currentChainLoseLabel.string=String.format(S.TAIXIU_CURRENT_CHAIN_LOSE,t)}},initBetData:function(){if(this.data){var t=this.data.tai_xiu_gold,e=this.data.tai_xiu_money;this.isMoneyType?this.initBetDataByData(e):this.initBetDataByData(t)}},initBetDataByData:function(t){var e=t.tai,i=t.xiu,n=e.total_players,o=e.total_bet,s=e.my_bet,a=i.total_players,r=i.total_bet,c=i.my_bet;this.taiTotalLabel.string=_.numberWithCommas(o),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(n)+")",this.taiMyBetLabel.string=_.numberWithCommas(s),this.xiuTotalLabel.string=_.numberWithCommas(r),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(a)+")",this.xiuMyBetLabel.string=_.numberWithCommas(c),this.initUpdateTotalBetEffect()},initUpdateTotalBetEffect:function(){this.taiTotalLabel.node.stopAllActions(!0),this.taiTotalLabel.node.scale=1,this.taiTotalLabel.node.runAction(cc.sequence(cc.scaleTo(.1,1.15),cc.scaleTo(.1,1))),this.xiuTotalLabel.node.stopAllActions(!0),this.xiuTotalLabel.node.scale=1,this.xiuTotalLabel.node.runAction(cc.sequence(cc.scaleTo(.1,1.15),cc.scaleTo(.1,1)))},initHistories:function(){this.data&&this.data.histories&&(this.histories=this.data.histories,this.TaiXiuHistory.initHistories(this.histories),this.TaiXiuHistoryGame.init(this.histories))},initChat:function(){this.data&&this.TaiXiuChat.initChat(this.data.chat)},initPlate:function(){this.TaiXiuState.isBetting()&&this.TaiXiuPlate.reset()},initDices:function(t){this.data&&(this.data.dice||this.data.dices?t?(this.data.dice=this.data.histories[0].dices,this.TaiXiuDice.show(this.data,!1,t),this.TaiXiuDice.showEffectTaiXiuResult(this.data),this.TaiXiuPlate.hideAll()):this.TaiXiuPlate.isNan()?(this.TaiXiuDice.show(this.data,!1,t),this.TaiXiuPlate.showPlateMove()):(this.TaiXiuDice.show(this.data,!0,t),this.TaiXiuPlate.hideAll()):this.TaiXiuDice.hide())},initResultByTime:function(){clearTimeout(this.resultTimeout);var t=this.TaiXiuPlate.isNan()?1e4:2e3;this.resultTimeout=setTimeout(function(){this.initResult()}.bind(this),t),this.TaiXiuPlate.hidePlateRealNode()},initResult:function(){if(clearTimeout(this.resultTimeout),this.data){var t=this.data;if(t&&this.TaiXiuState.isFinish()){var e=parseInt(t.tai_xiu_money_change),i=parseInt(t.tai_xiu_gold_change),n="tai"===t.result?"T\xe0i":"X\u1ec9u",o=this.isMoneyType?e:i;this.dataBlanceDoor&&o>0&&(o+=this.isMoneyType?this.dataBlanceDoor.tai_xiu_money_my_bet:this.dataBlanceDoor.tai_xiu_gold_my_bet),0!==parseFloat(o)&&this.MiniGameResult.show(o,n),this.TaiXiuPlate.hideAll(),this.TaiXiuDice.showEffectTaiXiuResult(t),this.initHistories(),this.initChain()}}},initBalanceDoor:function(){var t=this.data;if(this.dataBlanceDoor={},t){var e=parseInt(t.money_return),i=parseInt(t.gold_return),n=this.isMoneyType?e:i,o=t.tai_xiu_gold,s=t.tai_xiu_money,a=o.tai.my_bet?o.tai.my_bet:o.xiu.my_bet,r=s.tai.my_bet?s.tai.my_bet:s.xiu.my_bet;this.dataBlanceDoor.tai_xiu_gold_my_bet=a,this.dataBlanceDoor.tai_xiu_money_my_bet=r,this.TaiXiuTime.setTime(0),0!==parseFloat(n)?this.MiniGameResult.show(n,S.TAIXIU_BALANCE_DOOR):this.showMessage(S.TAIXIU_BALANCE_DOOR)}},startTimeGetFinish:function(){clearTimeout(this.timeOutGetFinish),this.timeOutGetFinish=setInterval(function(){this.sendRequest&&this.sendRequest.sendNoPrefixToZone(s.GET_FINISH),clearTimeout(this.timeOutGetFinish)}.bind(this),1e3*s.TIME_GET_FINISH)},onTaiClick:function(){this.TaiXiuQuickSelect.node.active?this.isSelectTai||(this.setXiu(0),this.hideBetXiuNode()):(this.setTai(0),this.setXiu(0),this.TaiXiuQuickSelect.node.active=!0),this.showBetTaiNode(),this.isSelectTai=!0},onXiuClick:function(){this.TaiXiuQuickSelect.node.active?this.isSelectTai&&(this.setTai(0),this.hideBetTaiNode()):(this.setTai(0),this.setXiu(0),this.TaiXiuQuickSelect.node.active=!0),this.showBetXiuNode(),this.isSelectTai=!1},onTaiXiuClick:function(){this.setShowTaiXiu(!this.isShow)},onEventChainClick:function(){this.controller.MiniGame.TaiXiuChain.showDialog()},onHistoryGameClick:function(){this.TaiXiuHistoryGame.node.active=!this.TaiXiuHistoryGame.node.active},onCloseClick:function(){this.setShowTaiXiu(!1)},onShowTaiXiuClick:function(){this.TaiXiuHistoryGame.showTaiXiuContentNode()},onBetClick:function(){var t=parseFloat(_.getOnlyNumberInString(this.taiLabel.string)),e=parseFloat(_.getOnlyNumberInString(this.xiuLabel.string));if(t&&e)this.showMessage(S.TAIXIU_YOU_ONLE_BET_A_DOOR);else if(t){var i={amount:t,type:s.TAI,room_type:this.isMoneyType?p.MONEY_CODE:p.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,i),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}else if(e){var n={amount:e,type:s.XIU,room_type:this.isMoneyType?p.MONEY_CODE:p.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,n),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}else this.showMessage(S.TAIXIU_YOU_NOT_BET)},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(g.TAI_XIU)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showTaiXiuHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(N.TAIXIU),this.controller.MiniGame.GameMiniRank.showDialog(),this.isMoneyType?this.controller.MiniGame.GameMiniRank.onMoneyClick():this.controller.MiniGame.GameMiniRank.onGoldClick()},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=C.MINIGAME_SCALE_TOAST,e.setPosition(C.MINIGAME_POSITION_TOAST_X,C.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initTaiXiuData(this.data),this.TaiXiuQuickSelect.node.active=!1},setTai:function(t){_.numberWithCommas(t).length<=C.TAI_XIU_MAX_LENGTH&&(this.taiLabel.string=_.numberWithCommas(t))},getTaiValue:function(){return parseInt(_.getOnlyNumberInString(this.taiLabel.string))||0},setXiu:function(t){_.numberWithCommas(t).length<=C.TAI_XIU_MAX_LENGTH&&(this.xiuLabel.string=_.numberWithCommas(t))},getXiuValue:function(){return parseInt(_.getOnlyNumberInString(this.xiuLabel.string))||0},initTaiXiuData:function(t){if(t){this.data=t;var e=this.isMoneyType?t.tai_xiu_money:t.tai_xiu_gold;if(e){this.time=t.time_remain;var i=e.tai.total_players,n=e.tai.total_bet,o=e.tai.my_bet,s=e.xiu.total_players,a=e.xiu.total_bet,r=e.xiu.my_bet;this.setTimeLabel(this.time),this.taiTotalLabel.string=_.numberWithCommas(n),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(i)+")",this.taiMyBetLabel.string=_.numberWithCommas(o),this.xiuTotalLabel.string=_.numberWithCommas(a),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(s)+")",this.xiuMyBetLabel.string=_.numberWithCommas(r)}}},resetBetValue:function(){this.taiLabel.string="",this.xiuLabel.string=""},timeDefault:function(){this.timeBettingLabel.node.getComponent(cc.Animation).stop(),this.timeBettingLabel.node.opacity=255,this.timeBettingLabel.node.color=new cc.Color(46,255,128,255),this.timeBettingLabel.node.scale=1},timeAnimation:function(){this.timeBettingLabel.node.getComponent(cc.Animation).play()},getTaiXiuData:function(){return this.data},showBetTaiNode:function(){},showBetXiuNode:function(){},hideBetTaiNode:function(){},hideBetXiuNode:function(){},getResultTaiXiu:function(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=t[i];return e>=s.MIN_TAI?"tai":"xiu"},reset:function(){this.setTimeLabel(0),this.timeDefault(),this.dataFinish=[],this.taiTotalLabel.string=_.numberWithCommas(0),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(0)+")",this.taiMyBetLabel.string=_.numberWithCommas(0),this.xiuTotalLabel.string=_.numberWithCommas(0),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(0)+")",this.xiuMyBetLabel.string=_.numberWithCommas(0),this.TaiXiuDice.hide(),this.MiniGameResultTaiXiu.reset(),this.MiniGameResult.reset(),this.TaiXiuPlate.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../MiniGameResultTaiXiu":"MiniGameResultTaiXiu","./TaiXiuChat":"TaiXiuChat","./TaiXiuConstant":"TaiXiuConstant","./TaiXiuDice":"TaiXiuDice","./TaiXiuHistory":"TaiXiuHistory","./TaiXiuHistoryGame":"TaiXiuHistoryGame","./TaiXiuPlate":"TaiXiuPlate","./TaiXiuQuickSelect":"TaiXiuQuickSelect","./TaiXiuState":"TaiXiuState","./TaiXiuTime":"TaiXiuTime"}],TanLocHistories:[function(t,e,i){"use strict";cc._RF.push(e,"13f97v42nlE7o0BW0vmdP08","TanLocHistories");t("../../../../helper/Message");var n=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,tanLocButtonNode:cc.Node,huLocButtonNode:cc.Node,historyTanLocItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.onMoneyClick(),this.loadDataHuLoc(),this.loadDataTanLoc(),this.onTanLocClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0},loadDataTanLoc:function(){var t=this;if(this.dataTanLoc)this.initData(this.dataTanLoc);else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.showLoadingNode(),this.xhr1=this.controller.api.logTanLoc(e,function(e){t.dataTanLoc=e.data,t.isRankTanLocType()&&t.initData(t.dataTanLoc)},function(t){})}},loadDataHuLoc:function(){var t=this;if(this.dataHuLoc)this.initData(this.dataHuLoc);else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.showLoadingNode(),this.xhr2=this.controller.api.logHuLoc(e,function(e){t.dataHuLoc=e.data,t.isRankTanLocType()||t.initData(t.dataHuLoc)},function(t){})}},initData:function(t){if(this.showListNode(),this.historyScrollView.content.removeAllChildren(),t)for(var e in t=n.deDuplicate(t)){var i=cc.instantiate(this.historyTanLocItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("TanLocHistoryItem").init(t[e],e)}},onTanLocClick:function(){this.hideAllButton(),this.huLocButtonNode.active=!0,this.initData(this.dataTanLoc)},onHuLocClick:function(){this.hideAllButton(),this.tanLocButtonNode.active=!0,this.initData(this.dataHuLoc)},hideAllButton:function(){this.tanLocButtonNode.active=!1,this.huLocButtonNode.active=!1},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},isRankTanLocType:function(){return this.tanLocButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr1&&(this.xhr1.abort(),this.xhr1=null),this.xhr2&&(this.xhr2.abort(),this.xhr2=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],TanLocHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a14f7KHksZHRrvbkW+9WvCy","TanLocHistoryItem");var n=t("../../../util/FormatUtil"),o=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,prefixNickNameLabel:cc.Label,nameLabel:cc.Label,amountLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(this.data=t,t){var i=t.time||t.created_at||t.createdAt;i>=1e10&&(i=parseInt(t.created_at/1e3)),this.timeLabel.string=n.getStringDateByTimeStamp(i),this.amountLabel.string=n.numberWithCommas(t.amount),this.prefixNickNameLabel.string=o.getServerID(t.server_id||t.serverId),this.nameLabel.string=t.nick_name||t.nickname;var s=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=s,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nameLabel.node.color=new cc.Color(255,244,141,255)}},onLoad:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TanLocRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"1792c56jatHHIopDkXpXi/D","TanLocRankItem");var n=t("../../../util/FormatUtil"),o=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,timeLabel:cc.Label,prefixNickNameLabel:cc.Label,nameLabel:cc.Label,amountLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(this.data=t,t){var i=t.time||t.created_at||t.createdAt;i>=1e10&&(i=parseInt(t.created_at/1e3)),this.noLabel.string=e+1,this.timeLabel.string=n.getStringDateByTimeStamp(i);var s=t.amount>0?t.amount:-t.amount;this.amountLabel.string=n.numberWithCommas(s),this.prefixNickNameLabel.string=o.getServerID(t.server_id||t.serverId),this.nameLabel.string=t.nick_name||t.nickname;var a=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=a,this.prefixNickNameLabel.node.color=new cc.Color(255,173,0,255),this.nameLabel.node.color=new cc.Color(255,244,141,255)}},onLoad:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TanLocState:[function(t,e,i){"use strict";cc._RF.push(e,"cea442v4K5HRp1u1qtNA6AT","TanLocState");e.exports={currentState:null,WAITTING:"WAITTING",REGISTER:"REGISTER",setState:function(t){this.currentState=t},setWaitting:function(){this.currentState=this.WAITTING},setRegister:function(){this.currentState=this.REGISTER},isWaitting:function(){return this.currentState===this.WAITTING},isRegister:function(){return this.currentState===this.REGISTER}},cc._RF.pop()},{}],TanLoc:[function(t,e,i){"use strict";cc._RF.push(e,"8f4acAPpVpCz56B2BNg0NmI","TanLoc");var n=t("../../../helper/Message"),o=(t("../MiniGameConstant"),t("./BonusConstant")),s=t("./TanLocState"),a=t("../../../util/FormatUtil"),r=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{tanLocSkeleton:sp.Skeleton,timeRutLocLabel:cc.Label,numberRutNode:cc.Node,numberRutLabel:cc.Label,bankLabel:cc.Label},init:function(t){this.BonusEvent=t},onLoad:function(){this.intervalTime=null,this.TanLocState=s},addEvent:function(){this.resetPhatLoc(),this.removeIntervalTime(),this.BonusEvent.sendRequest.sendNoPrefixToZone(o.TAN_LOC_ADD_EVENT)},removeEvent:function(){this.removeIntervalTime(),this.BonusEvent.sendRequest.sendNoPrefixToZone(o.TAN_LOC_REMOVE_EVENT)},handleRequest:function(t){if(t.status){var e=t.data.game_cmd,i=t.data.game_data,n=t.data.game_msg;switch(e){case o.INFO:this.handleInfo(i);break;case o.TAN_LOC:this.handleTanLoc(i);break;case o.RUT_LOC:this.handleRutLoc(i);break;case o.PHAT_LOC:this.handlePhatLoc(i);break;case o.PLAYER_RUT_LOC:this.handlePlayerRutLoc(i);break;case o.MESSAGE:this.handleMessage(n);break;case o.CHANGE_NUMBER_RUT_LOC:this.handleChangeNumberRutLoc(i);break;case o.GET_TOP_2:this.BonusEvent.controller.MiniGame.Event.EventTanLoc.initData(i)}}},handleInfo:function(t){this.dataTanLoc=t,this.TanLocState.setState(t.game_state);var e=t.number_rut_loc||0,i=t.bank||0;this.setValueBank(i),this.setValueNumberRutLoc(e),this.setBank,this.TanLocState.isRegister()?(this.resetRutLoc(),this.startIntervalTime(t.time)):this.resetPhatLoc()},handleTanLoc:function(t){var e={nick_name:"Th\xf4ng b\xe1o"},i=r.getServerID(t.server_id)+t.nick_name;e.msg=String.format(n.TAN_LOC_REGISTER,i,a.numberWithCommas(t.amount)),this.BonusEvent.controller.MiniGame.TaiXiu.TaiXiuChat.instanceChatItem(e),this.dataTanLoc.list_tan_loc.push(t);var o=t.bank||0;this.setValueBank(o)},handleRutLoc:function(t){this.TanLocState.setRegister(),this.resetRutLoc(),this.startIntervalTime(t.time||t.TIME)},handlePlayerRutLoc:function(t){var e=this.BonusEvent.getUser().nick_name;r.getServerIdByShowNickName(this.BonusEvent.getUser().show_nickname);if(t.nick_name===e){this.BonusEvent.showMessage(n.HU_LOC_REGISTER);var i=parseInt(this.numberRutLabel.string)-1;i=i>=0?i:0,this.setValueNumberRutLoc(i)}},handlePhatLoc:function(t){this.TanLocState.setWaitting(),this.resetPhatLoc();var e=this.getMoneyPhatLoc(t.list_phat_loc);if(e){var i=String.format(n.TAN_LOC_MESSAGE,a.numberWithCommas(e));this.BonusEvent.controller.showDialogMessage(n.NOTIFICATION_TITLE,i)}var o=t.bank||0;this.setValueBank(o)},handleChangeNumberRutLoc:function(t){var e=t.number_rut_loc||0;this.setValueNumberRutLoc(e)},handleMessage:function(t){this.BonusEvent.showMessage(t)},setValueNumberRutLoc:function(t){this.numberRutLabel.string=a.numberWithCommas(t)},setValueBank:function(t){this.bankLabel.string=a.numberWithCommas(t)},startIntervalTime:function(t){this.tanLocSkeleton.setAnimation(0,"animation",!0),this.removeIntervalTime(),this.timeRemain=t,this.timeRutLocLabel.string=a.numberToTime(this.timeRemain),this.intervalTime=setInterval(function(){this.timeRemain--,this.timeRemain>=0&&(this.timeRutLocLabel.string=a.numberToTime(this.timeRemain))}.bind(this),1e3)},onRutLocClick:function(){1==this.BonusEvent.getUser().status_value?this.TanLocState.isRegister()?this.BonusEvent.tanLocRutLoc():this.BonusEvent.showMessage("Ch\u01b0a ph\u1ea3i th\u1eddi gian xin r\xfat l\u1ed9c"):this.BonusEvent.showFormBonusMessage()},onTanLocClick:function(){this.BonusEvent.showFormBonusMoney()},onShowHideNumberRutNode:function(){this.numberRutNode.active=!this.numberRutNode.active},onTanLocRankClick:function(){this.BonusEvent.controller.MiniGame.Event.showDialog(),this.BonusEvent.controller.MiniGame.Event.onTanLocClick()},onTanLocHistory:function(){this.BonusEvent.controller.MiniGame.Event.showDialog(),this.BonusEvent.controller.MiniGame.Event.onRutLocClick()},removeIntervalTime:function(){clearInterval(this.intervalTime)},resetRutLoc:function(){this.timeRutLocLabel.node.active=!0},resetPhatLoc:function(){this.timeRutLocLabel.node.active=!1,this.tanLocSkeleton.clearTrack(0)},getMoneyPhatLoc:function(t){var e=this.BonusEvent.getUser().nick_name;r.getServerIdByShowNickName(this.BonusEvent.getUser().show_nickname);for(var i in t)if(e===t[i].nick_name)return t[i].amount;return 0}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","../MiniGameConstant":"MiniGameConstant","./BonusConstant":"BonusConstant","./TanLocState":"TanLocState"}],Toast:[function(t,e,i){"use strict";cc._RF.push(e,"99c39Jks9ZIfplJXMIlCr3g","Toast");var n=t("../helper/Config");cc.Class({extends:cc.Component,properties:{toastLabel:cc.Label},onLoad:function(){this.timeOutHideToast=null,this.timeOutActiveToast=null},onDestroy:function(){this.clearTimeOut()},showToast:function(t){this.clearTimeOut(),this.setMessage(t),this.node.active=!0,this.node.getComponent(cc.Animation).play("ShowToastAnimation"),this.timeOutHideToast=setTimeout(function(){this.hideToast()}.bind(this),1e3*n.TOAST_TIME_OUT)},hideToast:function(){this.node.active&&this.node.getComponent(cc.Animation).play("HideToastAnimation"),this.timeOutActiveToast=setTimeout(function(){this.node.active=!1,this.setMessage("")}.bind(this),100)},setMessage:function(t){this.toastLabel.string=t},clearTimeOut:function(){clearTimeout(this.timeOutHideToast),clearTimeout(this.timeOutActiveToast)}}),cc._RF.pop()},{"../helper/Config":"Config"}],Toggle:[function(t,e,i){"use strict";cc._RF.push(e,"04b58sGEXZCxbwlg/Ri/Rtb","Toggle");var n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{isOn:!0,toggleNode:cc.Node,toggleNodeDistance:17,toggleSprite:cc.Sprite,toggleOnSpriteFrame:cc.SpriteFrame,toggleOffSpriteFrame:cc.SpriteFrame,toggleBgSprite:cc.Sprite,toggleBgOnSpriteFrame:cc.SpriteFrame,toggleBgOffSpriteFrame:cc.SpriteFrame},onLoad:function(){},onClick:function(){this.toggleNode.stopAllActions(),this.isOn?(this.isOn=!1,this.toggleSprite.spriteFrame=this.toggleOffSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOffSpriteFrame,this.toggleNode.runAction(cc.moveTo(n.TOGGLE_TIME_ANIMATION,-this.toggleNodeDistance,-4))):(this.isOn=!0,this.toggleSprite.spriteFrame=this.toggleOnSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOnSpriteFrame,this.toggleNode.runAction(cc.moveTo(n.TOGGLE_TIME_ANIMATION,this.toggleNodeDistance,-4)))},setOn:function(){this.isOn=!0,this.toggleSprite.spriteFrame=this.toggleOnSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOnSpriteFrame,this.toggleNode.x=this.toggleNodeDistance},setOff:function(){this.isOn=!1,this.toggleSprite.spriteFrame=this.toggleOffSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOffSpriteFrame,this.toggleNode.x=-this.toggleNodeDistance},isChecked:function(){return this.isOn}}),cc._RF.pop()},{"../../helper/Config":"Config"}],Track:[function(t,e,i){"use strict";cc._RF.push(e,"29c5bJMlp5H7IcDbfjfl7gr","Track");var n={addTrackCompleteRegistration:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","CompleteRegistration")},addTrackPurchase:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","Purchase",{value:0,currency:"USD"})},addTrackLead:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","Lead")}};e.exports=n,cc._RF.pop()},{}],TransferAgent:[function(t,e,i){"use strict";cc._RF.push(e,"860ddt7+lVCOISjpygGpwEH","TransferAgent"),cc.Class({extends:cc.Component,properties:{agentItemPrefab:cc.Prefab,listAgentScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){this.listAgentScrollView.content.removeAllChildren(!0),this.GameCenter.shuffleListAgent();var t=this.GameCenter.getListAgent(),e=0;if(t)for(var i=0;i<t.length;i++)if(0===t[i].type){var n=cc.instantiate(this.agentItemPrefab);n.getComponent("AgentItem").init(this.GameCenter,e,t[i]),n.parent=this.listAgentScrollView.content,this.nickNameSelected===t[i].nick_name&&n.getComponent("AgentItem").showBgNode(),e++}},showData:function(t){var e=!1;this.nickNameSelected=t;for(var i=this.listAgentScrollView.content.getChildren(),n=0;n<i.length;n++){i[n].getComponent("AgentItem").data.nick_name===t?(i[n].getComponent("AgentItem").showBgNode(),e=!0):i[n].getComponent("AgentItem").hideBgNode()}e?this.GameCenter.GameRecharge.Transfer.TransferContent.showTick():this.GameCenter.GameRecharge.Transfer.TransferContent.hideTick()},checkIsAgent:function(t){var e=this.GameCenter.getListAgent();if(e)for(var i=0;i<e.length;i++)if(t===e[i].nick_name)return!0;return!1},hideAllBgAgent:function(){for(var t=this.listAgentScrollView.content.getChildren(),e=0;e<t.length;e++)t[e].getComponent("AgentItem").hideBgNode()}}),cc._RF.pop()},{}],TransferContent:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"55048JpUl9HroKSkZDJMts9","TransferContent");var s=t("../../../../util/FormatUtil"),a=t("../../../../helper/Constant"),r=t("../../../../helper/Message");cc.Class((o(n={extends:cc.Component,properties:{nicknameEditBox:cc.EditBox,reNicknameEditBox:cc.EditBox,valueEditBox:cc.EditBox,noteEditBox:cc.EditBox,otpEditBox:cc.EditBox,moneyLabel:cc.Label,moneyNeedLabel:cc.Label,rateAgentLabel:cc.Label,ratePlayerLabel:cc.Label,smsButtonNode:cc.Node,otpButtonNode:cc.Node,tickNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.TransferAgent=this.GameCenter.GameRecharge.Transfer.TransferAgent},onLoad:function(){this.editboxs=[this.nicknameEditBox,this.reNicknameEditBox,this.valueEditBox,this.noteEditBox],this.clear()},onEnable:function(){this.initData()},initData:function(){var t=this.GameCenter.getConfig().agent_transter_fee;this.rateAgentLabel.string=100*t+"%";var e=this.GameCenter.getConfig().player_transter_fee;this.ratePlayerLabel.string=100*e+"%",this.moneyNeedLabel.string=0,this.initMoney()},initMoney:function(){this.moneyLabel.string=s.numberWithCommas(this.GameCenter.getMoney())},onConfirmClick:function(){var t=this.nicknameEditBox.string,e=this.reNicknameEditBox.string,i=parseInt(s.getOnlyNumberInString(this.valueEditBox.string)),n=this.noteEditBox.string,o=this.otpEditBox.string;this.checkAllEditboxNotEmpty()?t===e?i>0?this.transfer(t,i,n,o):this.GameCenter.showDialogMessage(r.TRANSFER_TITLE,r.VALUE_LARGER_ZERO):this.GameCenter.showDialogMessage(r.TRANSFER_TITLE,r.RE_NICKNAME_NOT_CORRECT):this.GameCenter.showDialogMessage(r.TRANSFER_TITLE,r.MISSING_INFO)},onOTPClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getGeneralConfig(),e="";if(t){var i=t.OTP_FORGOT_PASS;if(i){var n=i.content,o=i.service_number,s=n.replace(r.RECHARGE_SMS_TENDANGNHAP,this.GameCenter.getUser().username);if(s=encodeURIComponent(s.trim()),this.GameCenter.isAndroid()?e=r.RECHARGE_SMS_ANDROID:this.GameCenter.isIOS()&&(e=r.RECHARGE_SMS_IOS),e){var a=String.format(e,o,s);cc.sys.openURL(a)}}}},onGetOtpClick:function(){this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_GET_OTP)}},"onOTPClick",function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1}),o(n,"onSMSClick",function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0}),o(n,"checkAllEditboxNotEmpty",function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0}),o(n,"transfer",function(t,e,i,n){this.GameCenter.showProcessingNode();var o={to_nickname:t,amount:e,reason:i,type_card:this.selectedCard,otp:n};this.GameCenter.sendRequest.sendToZone(a.REQUEST_TRANSFER,o)}),o(n,"onMoneyChange",function(){var t=this.valueEditBox.string,e=s.numberWithCommas(s.getOnlyNumberInString(t));this.valueEditBox.string=e;var i=this.nicknameEditBox.string,n=this.GameCenter.getConfig().player_transter_fee;this.TransferAgent.checkIsAgent(i)&&(n=this.GameCenter.getConfig().agent_transter_fee);var o=parseInt(s.getOnlyNumberInString(this.valueEditBox.string));o*=1-parseFloat(n),this.moneyNeedLabel.string=s.numberWithCommas(o)}),o(n,"onNickNameChange",function(){this.TransferAgent.showData(this.nicknameEditBox.string),this.onMoneyChange()}),o(n,"showData",function(t){this.nicknameEditBox.string=t,this.reNicknameEditBox.string=t,this.TransferAgent.showData(t),this.onMoneyChange()}),o(n,"showTick",function(){this.tickNode.active=!0}),o(n,"hideTick",function(){this.tickNode.active=!1}),o(n,"clear",function(){this.nicknameEditBox.string="",this.reNicknameEditBox.string="",this.valueEditBox.string="",this.noteEditBox.string="",this.initData(),this.hideTick()}),n)),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],Transfer:[function(t,e,i){"use strict";cc._RF.push(e,"d4b3dGPryJFmIG36138rDlS","Transfer");var n=t("./tranfser/TransferAgent"),o=t("./tranfser/TransferContent");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,TransferAgent:n,TransferContent:o},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.TransferAgent.init(t),this.TransferContent.init(t)},onLoad:function(){},onEnable:function(){},onDisable:function(){},onBackClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1}}),cc._RF.pop()},{"./tranfser/TransferAgent":"TransferAgent","./tranfser/TransferContent":"TransferContent"}],TrenDuoiCard:[function(t,e,i){"use strict";cc._RF.push(e,"a6c798zoYNB/5yKohhgQmWt","TrenDuoiCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],TrenDuoiConstant:[function(t,e,i){"use strict";cc._RF.push(e,"aedc7R91fhMRLoC3Y5JIxWl","TrenDuoiConstant");e.exports={ADD_EVENT:"hilo.ADD_EVENT",REMOVE_EVENT:"hilo.REMOVE_EVENT",REQUEST_START:"hilo.START",REQUEST_CHOOSE:"hilo.CHOOSE",REQUEST_NEW_GAME:"hilo.NEW_GAME",PLAYER_INFO:"PLAYER_INFO",INFO:"INFO",RESULT:"RESULT",FINISH:"FINISH",MESSAGE:"MESSAGE",IS_SHOW:"tren_duoi_is_show",POSITION:"tren_duoi_position",BET_VALUE:"tren_duoi_bet_value",BET_1K:1e3,BET_5K:5e3,BET_10k:1e4,BET_50k:5e4,BET_100k:1e5,BET_500k:5e5,MONEY_TYPE:"tren_duoi_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"hilo.GET_TOP"},cc._RF.pop()},{}],TrenDuoiHistories:[function(t,e,i){"use strict";cc._RF.push(e,"d8b170hwuBNmor3sAZphQ0X","TrenDuoiHistories"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyTrenDuoiItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryTrenDuoi(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(Message.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyTrenDuoiItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("TrenDuoiHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{}],TrenDuoiHistoryCardItem:[function(t,e,i){"use strict";cc._RF.push(e,"9c8b1+2usJO2p68FYtOFtP4","TrenDuoiHistoryCardItem"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t){this.card=t,this.node.getComponent(cc.Label).string=this.getResultByTrueValue(t)},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=" "+(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e),t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e+" "}}),cc._RF.pop()},{}],TrenDuoiHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"6d4ec+pcVVHboRaC+1Rryar","TrenDuoiHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResultBySlotData(t.slot_data),this.getLabel.string=n.numberWithCommas(t.total_prize_value);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResultBySlotData:function(t){t=JSON.parse(t);var e="";for(var i in t){e+=" ",e+=this.getResultByTrueValue(t[i])}return e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TrenDuoiReel:[function(t,e,i){"use strict";cc._RF.push(e,"21d1a9uG0FHP7rr4pU66Bpk","TrenDuoiReel");var n=t("./TrenDuoiCard"),o=(t("../MiniGameConstant"),t("../../../util/RandomUtil")),s=t("../../../helper/Config"),a=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t){this.TrenDuoi=t,this.TrenDuoiUI=t.TrenDuoiUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.trueValue=null,this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.cardPrefab);this.pool.put(e)}this.randomCard()},spin:function(t,e,i,n){this.reset(),this.TrenDuoi.setSpining(!0),this.setCard(this.trueValue),this.trueValue=t,n||this.TrenDuoi.setPlaying(i.status);for(var o=1;o<e;o++){var r=t;o!=e-1&&(r=this.getRandomTrueValue());var c=this.instanceCard(r);c.setPosition(0,o*s.TRENDUOI_DISTANCE_TWO_CARD),c.parent=this.node}var h=(e-1)*s.TRENDUOI_DISTANCE_TWO_CARD*this.node.scaleY,l=h/s.TRENDUOI_SPEED_SPIN_CARD,u=cc.moveTo(l,this.node.x,-h).easing(cc.easeInOut(3)),d=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),i&&this.TrenDuoi.node.active&&(n?(this.TrenDuoi.numberAt++,this.TrenDuoiUI.showNumberAt(this.TrenDuoi.numberAt),this.TrenDuoi.addHistoryCardNode(i.card)):(this.TrenDuoi.setPlaying(i.status),i.status?(this.TrenDuoi.checkAt(i.card)&&this.TrenDuoi.numberAt++,this.TrenDuoiUI.showNumberAt(this.TrenDuoi.numberAt),this.TrenDuoi.initBalance(i),this.TrenDuoi.initTime(i),this.TrenDuoi.addHistoryCardNode(i.card)):this.TrenDuoi.showMessage(a.TRENDUOI_LOSE)))},this),m=cc.delayTime(s.TRENDUOI_DELAY_SPIN),f=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),n?(this.TrenDuoi.setPlaying(!1),this.TrenDuoiUI.showJackPot(i.amount,this.TrenDuoi.isMoneyType),this.TrenDuoi.reset()):i.status||this.TrenDuoi.reset()},this);this.node.runAction(cc.sequence(u,d,m,f))},getRandomTrueValue:function(){return 100*o.getRandomInt(2,14)+o.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t;var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("CardController"),o=new n(t);return i.init(o),i.reveal(!0),e.scale=s.TRENDUOI_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./TrenDuoiCard":"TrenDuoiCard"}],TrenDuoiUI:[function(t,e,i){"use strict";cc._RF.push(e,"9de13ntGNlPwomOqgxq1lP5","TrenDuoiUI");t("./TrenDuoiConstant");var n=t("./TrenDuoiReel"),o=(t("./TrenDuoiCard"),t("../../../util/FormatUtil")),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1OnLabel:cc.Label,bet1OffLabel:cc.Label,bet2OnLabel:cc.Label,bet2OffLabel:cc.Label,bet3OnLabel:cc.Label,bet3OffLabel:cc.Label,bet4OnLabel:cc.Label,bet4OffLabel:cc.Label,bet5OnLabel:cc.Label,bet5OffLabel:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOnButton4Node:cc.Node,betOffButton4Node:cc.Node,betOnButton5Node:cc.Node,betOffButton5Node:cc.Node,highButtonNode:cc.Node,lowButtonNode:cc.Node,atsNode:[cc.Node],playNode:cc.Node,cardNode:cc.Node,TrenDuoiReel:n,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setBetMoney:function(){var t=a.TRENDUOI_LIST_BET_MONEY;this.setBetGoldByList(t[1],t[2],t[3],t[4],t[5])},setBetGold:function(){var t=a.TRENDUOI_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2],t[3],t[4])},setBetGoldByList:function(t,e,i,n,s){this.bet1OnLabel.string=o.nFormatter(t),this.bet1OffLabel.string=o.nFormatter(t),this.bet2OnLabel.string=o.nFormatter(e),this.bet2OffLabel.string=o.nFormatter(e),this.bet3OnLabel.string=o.nFormatter(i),this.bet3OffLabel.string=o.nFormatter(i),this.bet4OnLabel.string=o.nFormatter(n),this.bet4OffLabel.string=o.nFormatter(n),this.bet5OnLabel.string=o.nFormatter(s),this.bet5OffLabel.string=o.nFormatter(s)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet4Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOnButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet5Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOnButton5Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1,this.betOnButton4Node.active=!1,this.betOffButton4Node.active=!1,this.betOnButton5Node.active=!1,this.betOffButton5Node.active=!1},showNumberAt:function(t){for(var e=0;e<this.atsNode.length;e++)this.atsNode[e].active=e<t},spinCard:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.cardNode.active=!0,this.playNode.active=!1,this.TrenDuoiReel.spin(t,a.TRENDUOI_NUMBER_CARDS_SPIN,e,i)},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},showPlayNode:function(){this.cardNode.stopAllActions(),this.cardNode.active=!1,this.playNode.active=!0},showCardNode:function(){this.cardNode.active=!0,this.playNode.active=!1},showHighButton:function(){this.highButtonNode.active=!0},showHighDisable:function(){this.highButtonNode.active=!1},showLowButton:function(){this.lowButtonNode.active=!0},showLowDisable:function(){this.lowButtonNode.active=!1},reset:function(){this.showNumberAt(3),this.showPlayNode(),this.showHighButton(),this.showLowButton()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","./TrenDuoiCard":"TrenDuoiCard","./TrenDuoiConstant":"TrenDuoiConstant","./TrenDuoiReel":"TrenDuoiReel"}],TrenDuoi:[function(t,e,i){"use strict";cc._RF.push(e,"54272eaJb9MpZioCRBUea7v","TrenDuoi");var n=t("../../../base/BaseController"),o=t("./TrenDuoiConstant"),s=t("./TrenDuoiUI"),a=t("./TrenDuoiReel"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../item/MiniGameXPer"),l=t("../../../helper/Config"),u=t("../../../helper/Constant"),d=t("../../../helper/Message"),m=t("../../../object/RoomType"),f=t("../../../util/FormatUtil"),p=t("../MiniGameConstant");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,balanceLabel:cc.Label,highBalanceLabel:cc.Label,lowBalanceLabel:cc.Label,timeLabel:cc.Label,historyCardItemPrefab:cc.Prefab,historyCardNode:cc.Node,JackpotItem:c,MiniGameXPer:h,toastPrefab:cc.Prefab,TrenDuoiUI:s,TrenDuoiReel:a,MiniGameResult:r},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.isMoneyType=!0,this.betOrder=0,this.numberAt=0,this.playing=!1,this.spining=!1,this.TrenDuoiReel.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onDestroy:function(){clearInterval(this.timeInterval)},onEnable:function(){this.initTempData(),this.sendRequest.sendNoPrefixToZone(o.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(o.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[o.MONEY_TYPE]===o.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){switch(this.getTempData()[o.BET_VALUE]){case o.BET_1K:this.setBet1();break;case o.BET_10k:this.setBet2();break;case o.BET_50k:this.setBet3();break;case o.BET_100k:this.setBet4();break;case o.BET_500k:this.setBet5();break;default:this.setBet1()}},initSaveData:function(){var t=cc.sys.localStorage.getItem(o.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case o.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i);break;case o.PLAYER_INFO:this.handlePlayerInfo(i);break;case o.INFO:this.handleInfo(i);break;case o.RESULT:this.handleResult(i);break;case o.FINISH:this.handleFinish(i);break;case o.MESSAGE:this.handleMessage(n)}},handlePlayerInfo:function(t){this.setSendSpin(!1),this.data=t,this.initDefaultBalanceJackpot(),this.initLastData()},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleResult:function(t){this.setSendSpin(!1),this.isPlaying()||this.TrenDuoiUI.showNumberAt(0),this.initSpinId(t),this.TrenDuoiUI.spinCard(t.card,t,!1)},handleFinish:function(t){this.setSendSpin(!1),t.win_type===p.WIN_TYPE_JACKPOT?this.TrenDuoiUI.spinCard(t.card,t,!0):this.reset()},handleMessage:function(t){this.setSendSpin(!1),this.showMessage(t)},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(o.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(u.TREN_DUOI)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showTrenDuoiHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(p.TREN_DUOI),this.controller.MiniGame.GameMiniRank.showDialog(),this.isMoneyType?this.controller.MiniGame.GameMiniRank.onMoneyClick():this.controller.MiniGame.GameMiniRank.onGoldClick()},onCloseClick:function(){this.setShowTrenDuoi(!1)},onGoldClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_MONEY_TYPE):(this.isMoneyType?this.betOrder--:this.betOrder++,this.setTypeRoom(!this.isMoneyType))},onMoneyClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_MONEY_TYPE):(this.isMoneyType?this.betOrder--:this.betOrder++,this.setTypeRoom(!this.isMoneyType))},onBet1ButtonClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=this.isMoneyType?1:0;var t=this.isMoneyType?o.BET_5K:o.BET_1K;this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet1Button(),this.getTempData()[o.BET_VALUE]=t},onBet2ButtonClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=this.isMoneyType?2:1,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet2Button(),this.getTempData()[o.BET_VALUE]=o.BET_10k},onBet3ButtonClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=this.isMoneyType?3:2,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet3Button(),this.getTempData()[o.BET_VALUE]=o.BET_50k},onBet4ButtonClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_BET):this.setBet4()},setBet4:function(){this.betOrder=this.isMoneyType?4:3,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet4Button(),this.getTempData()[o.BET_VALUE]=o.BET_100k},onBet5ButtonClick:function(){this.isPlaying()?this.showMessage(d.PLAYING_NOT_CHANGE_BET):this.setBet5()},setBet5:function(){this.betOrder=this.isMoneyType?5:4,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet5Button(),this.getTempData()[o.BET_VALUE]=o.BET_500k},onHighClick:function(){if(!this.isSendSpin())if(this.setSendSpin(!0),this.isPlaying()){this.sendRequest.sendNoPrefixToZone(o.REQUEST_CHOOSE,{choose_value:1}),this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable()}else this.showMessage(d.TRENDUOI_CLICK_PLAY)},onLowClick:function(){if(!this.isSendSpin())if(this.setSendSpin(!0),this.isPlaying()){this.sendRequest.sendNoPrefixToZone(o.REQUEST_CHOOSE,{choose_value:0}),this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable()}else this.showMessage(d.TRENDUOI_CLICK_PLAY)},onPlayClick:function(){this.play()},play:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(o.REQUEST_START,t),this.MiniGameResult.reset()}},onNewGameClick:function(){this.isSpining()?this.showMessage(d.TRENDUOI_STOP_SPINING):this.isPlaying()?this.isSendSpin()||(this.setSendSpin(!0),this.sendRequest.sendNoPrefixToZone(o.REQUEST_NEW_GAME)):this.showMessage(d.TRENDUOI_CLICK_PLAY)},onTrenDuoiClick:function(){this.setShowTrenDuoi(!this.isShow)},setShowTrenDuoi:function(t){this.node.active=t,this.isShow=t,this.getTempData()[o.IS_SHOW]=t},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[6]?e[6]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},initDefaultBalanceJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]),this.balanceLabel.string=f.numberWithCommas(l.TRENDUOI_LIST_BET_MONEY[this.betOrder]);var i=e[6]?e[6]:null;this.MiniGameXPer&&i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.balanceLabel.string=f.numberWithCommas(l.TRENDUOI_LIST_BET_GOLD[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},initLastData:function(){if(this.data){var t=this.data.player_info;if(t&&t.amount){var e=void 0;this.TrenDuoiUI.showCardNode(),this.TrenDuoiReel.setCard(t.card),t.money_type==m.MONEY_CODE?(this.setTypeRoom(!0),e=l.TRENDUOI_LIST_BET_MONEY):(this.setTypeRoom(!1),e=l.TRENDUOI_LIST_BET_GOLD);for(var i=0;i<e.length;i++)if(e[i]===t.spin_fee){switch(i){case 0:this.setBet1();break;case 1:this.setBet2();break;case 2:this.setBet3();break;case 3:this.setBet4();break;case 4:this.setBet5()}break}this.initBalance(t),this.initNumberAt(t),this.initTime(t),this.initSpinId(t),this.initHistoryCards(t),this.playing=!0}else this.reset()}},initBalance:function(t){this.balanceLabel.string=f.numberWithCommas(t.total_prize_amount),null!==t.prize_up?(this.highBalanceLabel.string=f.numberWithCommas(t.prize_up),t.prize_up>0&&this.TrenDuoiUI.showHighButton()):(this.highBalanceLabel.string=f.numberWithCommas(0),this.TrenDuoiUI.showHighDisable()),null!==t.prize_down?(this.lowBalanceLabel.string=f.numberWithCommas(t.prize_down),t.prize_down>0&&this.TrenDuoiUI.showLowButton()):(this.lowBalanceLabel.string=f.numberWithCommas(0),this.TrenDuoiUI.showLowDisable()),t.total_prize_amount>0&&this.MiniGameResult.show(t.total_prize_amount)},initNumberAt:function(t){var e=t.cards;this.numberAt=0;for(var i=0;i<e.length;i++)this.checkAt(e[i])&&this.numberAt++;this.TrenDuoiUI.showNumberAt(this.numberAt)},initSpinId:function(t){this.idLabel.string=String.format(d.MINIGAME_ID,t.spin_id)},initHistoryCards:function(t){this.historyCardNode.removeAllChildren(!0);for(var e=t.cards,i=0;i<e.length;i++)this.addHistoryCardNode(e[i])},addHistoryCardNode:function(t){this.historyCardNode.active=!0;var e=cc.instantiate(this.historyCardItemPrefab);e.getComponent("TrenDuoiHistoryCardItem").init(t),e.parent=this.historyCardNode},initTime:function(t){this.time=t.remain_time,this.time||(this.time=0),this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.data&&(this.data.remain_time=this.time,this.setTimeLabel(this.time))}.bind(this),1e3)},setTimeLabel:function(t){var e=f.numberToTime(t);this.timeLabel.string=e},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=l.MINIGAME_SCALE_TOAST,e.setPosition(l.MINIGAME_POSITION_TOAST_X,l.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?o.MONEY_TYPE_MONEY:o.MONEY_TYPE_GOLD;this.getTempData()[o.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?l.TRENDUOI_LIST_BET_MONEY:l.TRENDUOI_LIST_BET_GOLD)[this.betOrder]},setPlaying:function(t){this.playing=t},isPlaying:function(){return this.playing},setSpining:function(t){this.spining=t},isSpining:function(){return this.spining},getNumberAt:function(){return this.numberAt},checkAt:function(t){return 14===parseInt(t/100)},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},reset:function(){this.highBalanceLabel.string="",this.lowBalanceLabel.string="",this.numberAt=0,this.playing=!1,this.spining=!1,this.balanceLabel.string=f.numberWithCommas(this.getCurrentBet()),clearInterval(this.timeInterval),this.setTimeLabel(0),this.historyCardNode.removeAllChildren(),this.historyCardNode.active=!1,this.MiniGameResult.reset(),this.TrenDuoiUI.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./TrenDuoiConstant":"TrenDuoiConstant","./TrenDuoiReel":"TrenDuoiReel","./TrenDuoiUI":"TrenDuoiUI"}],TutorialItem:[function(t,e,i){"use strict";cc._RF.push(e,"01fd29bClpN15/nE6BfFmba","TutorialItem"),cc.Class({extends:cc.Component,properties:{gameNameOnLabel:cc.Label,gameNameOffLabel:cc.Label,tutorialOnNode:cc.Node,tutorialOffNode:cc.Node},init:function(t,e){this.Tutorial=t,this.data=e,this.gameNameOnLabel.string=this.getGameName(),this.gameNameOffLabel.string=this.getGameName()},onLoad:function(){},select:function(t){this.tutorialOnNode.active=t,this.tutorialOffNode.active=!t},onClick:function(){this.Tutorial.unSelectAll(),this.select(!0),this.Tutorial.initDataSelect(this.data)},getShortName:function(){return this.data.short_name},getGameName:function(){return this.data.game_name||this.data.name},getHelp:function(){return this.data.help||this.data.value}}),cc._RF.pop()},{}],Tutorial:[function(t,e,i){"use strict";cc._RF.push(e,"3fa81ewTvNP26WdCU/2HF1Y","Tutorial");var n=t("../../base/BaseController"),o=t("../../helper/Constant");cc.Class({extends:n,properties:{tutorialGameItemPrefab:cc.Prefab,listGameScrollView:cc.ScrollView,titleLabel:cc.Label,contentScrollView:cc.ScrollView,contentRichText:cc.RichText},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.listGameTutorial=[],this.initData()},initData:function(){this.listGameScrollView.content.removeAllChildren(!0);var t=this.getGeneralConfig();if(t){var e=t.GUIDE;for(var i in e)if(this.checkShowGuide(e[i])){e[i].short_name===o.TLMN&&(e[i].game_name="TLMN \u0110\u1ebfm L\xe1");var n=cc.instantiate(this.tutorialGameItemPrefab);n.parent=this.listGameScrollView.content;var s=n.getComponent("TutorialItem");s.init(this,e[i]),this.listGameTutorial.push(s)}}},checkShowGuide:function(t){switch(t.short_name){case o.BA_CAY:case o.TAI_XIU:case o.TLMN:case o.POKER:case o.DIAMOND:case o.PHOM:case o.TREN_DUOI:case o.BOM:case o.WILD:case o.LUCK_WHEEL:case o.MINI_POKER:case o.MINI_BACAY:case o.MINIGAME_LOTTERY:case o.BAU_CUA:return!0;default:return!1}},initDataSelect:function(t){t.short_name===o.TLMNSOLO&&(t.game_name="Ti\u1ebfn L\xean Mi\u1ec1n Nam Solo"),t.short_name===o.TLMN&&(t.game_name="Ti\u1ebfn L\xean Mi\u1ec1n Nam \u0110\u1ebfm L\xe1"),this.setTitle(t.game_name||t.name),this.setContent(t.help||t.value)},setTitle:function(t){this.titleLabel.string=t},setContent:function(t){t||(t=""),this.contentRichText.string=t,this.contentScrollView.stopAutoScroll(),this.contentScrollView.scrollToTop()},showTutorialByGameName:function(t){for(var e in this.listGameTutorial)if(this.listGameTutorial[e].getShortName()===t){this.listGameTutorial[e].onClick(!0);break}},unSelectAll:function(){for(var t in this.listGameTutorial)this.listGameTutorial[t].select(!1)},onCloseClick:function(){this.node.active=!1},showDialog:function(){this.node.active=!0},hideDialog:function(){this.node.active=!1}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant"}],UpdateAvatar:[function(t,e,i){"use strict";cc._RF.push(e,"0237eUzm0xEOItFwmCafyQh","UpdateAvatar");var n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{avatarItemPrefab:cc.Prefab,listAvatarNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.listAvatar=[],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.listAvatarNode.removeAllChildren(!0),this.getListAvatars()},getListAvatars:function(){var t=this.GameCenter.getConfig().list_avatar;this.initAvatars(t)},initAvatars:function(t){this.listAvatar=[];var e=this.listAvatarNode,i=this.GameCenter.getUser().avatar;for(var n in t){var o=cc.instantiate(this.avatarItemPrefab);e.addChild(o);var s=o.getComponent("AvatarItem");s.init(this.GameCenter,t[n]),i===t[n].content&&s.selectAvatar(!0),this.listAvatar.push(s)}},onConfirmClick:function(){if(this.GameCenter.Audio.playClick(),this.getSelectedAvatar()){var t=this.getSelectedAvatar().avatar;this.updateAvatar(t)}},getSelectedAvatar:function(){for(var t in this.listAvatar)if(this.listAvatar[t].isSelected())return this.listAvatar[t];return null},clearSelected:function(){for(var t in this.listAvatar)this.listAvatar[t].selectAvatar(!1)},updateAvatar:function(t){var e=this;this.GameCenter.showProcessingNode();var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),avatar_id:t.id};this.GameCenter.api.updateAvatar(i,function(i){e.GameCenter.hideProcessingNode(),e.GameCenter.getUser().avatar=t.content,e.GameCenter.GameCenterUI.hideUpdateAvatarFormNode(),e.GameCenter.GameInfo.InfoAccount.loadUserInfo(),e.GameCenter.Header.HeaderAccount.loadUserInfo()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.UPDATE_AVATAR_TITLE,t.msg)})}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],UpdateNickname:[function(t,e,i){"use strict";cc._RF.push(e,"1506fnY6fxCnIsQjayL2y3K","UpdateNickname");var n=t("../../../helper/Message"),o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{nicknameEditBox:cc.EditBox},init:function(t){this.Login=t,this.LoginUI=t.LoginUI},onLoad:function(){},onEnable:function(){this.clear()},onConfirmClick:function(){this.Login.Audio.playClick(),this.updateNickname()},updateNickname:function(){this.Login.showProcessingNode();var t=this.nicknameEditBox.string,e=this.Login.getUser().username;t?t===e?(this.Login.hideProcessingNode(),this.Login.showDialogMessage(n.SET_NICKNAME_TITLE,n.NICKNAME_DIFFERENT_USERNAME)):this.updateNickName(t):(this.Login.hideProcessingNode(),this.Login.showDialogMessage(n.SET_NICKNAME_TITLE,n.SET_NICKNAME_NICKNAME_NOT_EMPTY))},updateNickName:function(t){var e=this,i={token:this.Login.getToken(),user_id:this.Login.getUserId(),nick_name:t};this.Login.showProcessingNode(),this.Login.api.updateNickname(i,function(i){var n=e.Login.getUser();n.nick_name=t,n.show_nickname=o.SERVER_ID_1_NAME+t,e.Login.connectSFS()},function(t){e.Login.hideProcessingNode(),e.Login.showDialogMessage(n.SET_NICKNAME_TITLE,t.msg)})},clear:function(){this.nicknameEditBox.string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"f16c6JoQyRF4K6Dg5F6k4k3","Util");var n=t("../helper/Constant"),o=t("../object/RoomType"),s={getVipByMoney:function(t){t=parseInt(t);for(var e=n.VIPS,i=e.length-1;i>=0;i--)if(t>e[i])return i+1;return 0},getShortNameTelcoByName:function(t){var e=cc.V.config.telco;if(e)for(var i in e)if(e[i].name===t)return e[i].short_name;return t},getShortNameRechargeProviderByName:function(t){var e=cc.V.config.recharge_provider;if(e)for(var i in e)if(e[i].name===t)return e[i].short_name;return t},getNameTelcoByShortName:function(t){var e=cc.V.config.telco;if(e)for(var i in e)if(e[i].short_name===t)return e[i].name;return t},getGameConfigByRoomName:function(t){for(var e=cc.V.config.list_game,i=0,n=e.length;i<n;i++)if(t===e[i].short_name)return e[i];return null},getGameNameByRoomName:function(t){for(var e=cc.V.config.list_game,i=0,n=e.length;i<n;i++)if(t===e[i].short_name)return e[i].game_name;return""},getRoomTypeByRoomTypeCode:function(t){switch(t+""){case o.MONEY_CODE:return n.MONEY_NAME;case o.GOLD_CODE:return n.GOLD_NAME;default:return""}},getServerID:function(t){return t===n.SERVER_ID_1?n.SERVER_ID_1_NAME:t===n.SERVER_ID_2?n.SERVER_ID_2_NAME:""},checkTimeStartByDate:function(t){if(t){var e=new Date(t).getTime();return!((new Date).getTime()-e<0)}return!1},isLobbyRoom:function(t){return t===n.LOBBY||-1!==t.indexOf(n.LOBBY+"_")},isLobbyGame:function(t){return!this.isLobbySlot(t)&&!this.isLobbySlot2(t)&&!this.isLobbySlot3(t)&&!this.isLobbySlot4(t)&&!this.isLobbyRoom(t)&&t.indexOf(n.LOBBY)>-1},isLobbyShottingFish:function(t){return t===n.SHOOTING_FISH+"_LOBBY"},isLobbyShottingFish2:function(t){return-1!==t.indexOf(n.SHOOTING_FISH)},isLobbySlot:function(t){return t===n.ZOOMBIES+"_LOBBY"},isLobbySlot2:function(t){return t===n.ONE001+"_LOBBY"},isLobbySlot3:function(t){return t===n.DRAGON+"_LOBBY"},isLobbySlot4:function(t){return t===n.CLASSIC1+"_LOBBY"},clearArray:function(t){for(;t.length>0;)t.pop()},getGameNameByShortName:function(t){switch(t){case n.BA_CAY:return n.BA_CAY_NAME;case n.XOC_DIA:return n.XOC_DIA_NAME;case n.POKER:return n.POKER_NAME;case n.TLMN:return n.TLMN_NAME;case n.LIENG:return n.LIENG_NAME;case n.MAU_BINH:return n.MAU_BINH_NAME;case n.SAM:return n.SAM_NAME;case n.SAMSOLO:return n.SAMSOLO_NAME;case n.PHOM:return n.PHOM_NAME;case n.CHAN:return n.CHAN_NAME;case n.XITO:return n.XITO_NAME;case n.TAI_XIU:return n.TAI_XIU_NAME;case n.MINI_POKER:return n.MINI_POKER_NAME;case n.MINI_BACAY:return n.MINI_BACAY_NAME;case n.TREN_DUOI:return n.TREN_DUOI_NAME;case n.DIAMOND:return n.DIAMOND_NAME;case n.ZOOMBIES:return n.ZOOMBIES_NAME;case n.ONE001:return n.ONE001_NAME;case n.DRAGON:return n.DRAGON_NAME;case n.CLASSIC1:return n.CLASSIC1_NAME;case n.DIAMOND_2:return n.DIAMOND_2_NAME;case n.MINIGAME_LOTTERY:return n.MINIGAME_LOTTERY_NAME;case n.BAU_CUA:return n.BAU_CUA_NAME;case n.WILD:return n.WILD_NAME;case n.BOM:return n.BOM_NAME;case n.DRAGON_TIGER:return n.DRAGON_TIGER_NAME;default:return n.game_name}},getServerIdByShowNickName:function(t){if(t){if(-1!=t.indexOf(n.SERVER_ID_1_NAME.trim()))return n.SERVER_ID_1;if(-1!=t.indexOf(n.SERVER_ID_2_NAME.trim()))return n.SERVER_ID_2}return 1}};e.exports=s,cc._RF.pop()},{"../helper/Constant":"Constant","../object/RoomType":"RoomType"}],VipAccount:[function(t,e,i){"use strict";cc._RF.push(e,"7f9c6Z/LmpPtbUBqbkmG1y8","VipAccount");var n=t("../../../../helper/Constant"),o=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{vipIconSprite:cc.Sprite,vipNameLabel:cc.Label,myPointLabel:cc.Label,nextPointLabel:cc.Label,prizeLabel:cc.Label,contentScrolView:cc.ScrollView,vipItemPrefab:cc.Prefab,listVipSprite:[cc.SpriteFrame]},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initInfo()},initInfo:function(){var t=this.GameCenter.getConfig().vip,e=this.GameCenter.getVipPoint();if(t&&e){this.contentScrolView.content.removeAllChildren();for(var i=e.value,n=0,s=t.length;n<s;n++){var a=cc.instantiate(this.vipItemPrefab);a.getComponent("VipItem").init(t[n],i,n),this.contentScrolView.content.addChild(a)}var r=this.getVipPointData(t,i);this.vipIconSprite.spriteFrame=r.sprite,this.vipNameLabel.string=r.vip_name,this.myPointLabel.string=o.numberWithCommas(parseInt(i)),this.nextPointLabel.string=o.numberWithCommas(parseInt(r.next_point)),this.prizeLabel.string=o.numberWithCommas(parseInt(r.total_prize))}},getVipPointData:function(t,e){for(var i=0,o=0,s=0,a=t.length;s<a;s++)t[s].from_money<=e&&(i=s,o+=t.prize);return{sprite:this.listVipSprite[i],vip_name:t[i].name+" - "+n.VIP_POINT[i],total_prize:o,next_point:i<t.length-1?t[i+1].from_money:t[i].from_money}}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../util/FormatUtil":"FormatUtil"}],VipItem:[function(t,e,i){"use strict";cc._RF.push(e,"508a9meUk1NxJVThPhWzPIY","VipItem");var n=t("../../helper/Constant"),o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,vipIconSprite:cc.Sprite,vipLabel:cc.Label,vipNameLabel:cc.Label,pointLabel:cc.Label,prizeLabel:cc.Label,successNode:cc.Node,vipSpriteFrame:[cc.SpriteFrame],onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2];if(t){this.vipIconSprite.spriteFrame=this.vipSpriteFrame[i],this.vipIconSprite.sizeMode=cc.Sprite.SizeMode.RAW,this.vipLabel.string=t.name,this.vipNameLabel.string=n.VIP_POINT[i],this.pointLabel.string=o.numberWithCommas(parseInt(t.from_money)),this.prizeLabel.string=o.numberWithCommas(parseInt(t.prize));var s=e>=t.from_money;this.successNode.active=s;var a=i%2==0?this.onBgSpriteFrame:this.offSpriteFrame;a&&(this.bgSprite.spriteFrame=a)}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/FormatUtil":"FormatUtil"}],VipSpriteManager:[function(t,e,i){"use strict";cc._RF.push(e,"4712f7yPgtGRpclI3WhU8IH","VipSpriteManager");var n=t("../util/Util");cc.Class({extends:cc.Component,properties:{vipsSpriteFrame:[cc.SpriteFrame]},onLoad:function(){},getVipSpriteFrameByMoney:function(t){var e=n.getVipByMoney(t);return this.getVipSpriteFrameByVip(e)},getVipSpriteFrameByVip:function(t){return this.vipsSpriteFrame[t]}}),cc._RF.pop()},{"../util/Util":"Util"}],WildConstant:[function(t,e,i){"use strict";cc._RF.push(e,"4275abZGBRNIIJFRf9kic76","WildConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"wild.ADD_EVENT",REMOVE_EVENT:"wild.REMOVE_EVENT",SPIN:"wild.SPIN",IS_SHOW:"wild_is_show",POSITION:"wild_position",LIST_LINES:"wild_list",IS_AUTO_SPIN:"wild_auto_spin",BET_VALUE:"wild_bet_value",SPEED_SPIN:"wild_speed_spin",BET_100:1e3,BET_1k:1e4,BET_10k:1e5,NUMBER_ITEM_IN_REEL:3,MONEY_TYPE:"wild_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"wild.GET_TOP",MINIGAME_CONFIG_ID:53,WILD_LIST_ICON_1:["A","B","C","D","E","F","G"],WILD_LIST_ICON_2:["X1","X2","X3"],WILD_ICON_X1:"X1",WILD_ICON_X2:"X2",WILD_ICON_X3:"X3",LIST_SPEED_SPIN:[1,3],LIST_AUTO_SPIN:[10,50,100,200,500,1e3]},cc._RF.pop()},{}],WildHistories:[function(t,e,i){"use strict";cc._RF.push(e,"32395/mmxNO+o0LeP6CfwHY","WildHistories");var n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyWildItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryWild(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyWildItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("WildHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],WildHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"7dabaUrFCRO5qYi2Naeyx+T","WildHistoryItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=n.getStringDateByTimeStamp(t.created_at),this.betLabel.string=n.numberWithCommas(t.total_bet_value),this.getLabel.string=n.numberWithCommas(t.total_prize_value),this.resultLabel.string=this.getResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){if(!t)return"0 d\xf2ng";"]"===t[t.leng-1]&&"]"===t[t.leng-2]&&(t=t.substring(0,x.length-1));try{return(t=JSON.parse(t)).length+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],WildItem:[function(t,e,i){"use strict";cc._RF.push(e,"849ffW95hZO8I5Os0oVXFNq","WildItem"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,x1SpriteNode:cc.Node,x2SpriteNode:cc.Node,x3SpriteNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0;break;case"X1":this.x1SpriteNode.active=!0;break;case"X2":this.x2SpriteNode.active=!0;break;case"X3":this.x3SpriteNode.active=!0}},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1,this.x1SpriteNode.active=!1,this.x2SpriteNode.active=!1,this.x3SpriteNode.active=!1}}),cc._RF.pop()},{}],WildReel2:[function(t,e,i){"use strict";cc._RF.push(e,"68e98AqCxNCKbAy0SNDHfyD","WildReel2");var n=t("../../../util/RandomUtil"),o=t("../../../helper/Config"),s=(t("../MiniGameConstant"),t("./WildConstant"));cc.Class({extends:cc.Component,properties:{wildItemPrefab:cc.Prefab},init:function(t){this.Wild=t,this.WildUI=t.WildUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.wildItemPrefab);this.pool.put(e)}this.randomChips(!0)},spin:function(t,e,i,n){this.reset(),this.setChips(this.chips),this.chips=t;for(var s=1;s<e;s++){var a=this.getRandomChip();s===e-1&&(a=t[0]),s===e-2&&(a=t[1]),s===e-3&&(a=t[2]);var r=this.instanceChip(a);r.setPosition(0,(s+1)*o.WILD_DISTANCE_TWO_CHIPS_2),r.parent=this.node}var c=(e-1)*o.WILD_DISTANCE_TWO_CHIPS_2,h=c/o.WILD_SPEED_SPIN_CARD/this.Wild.getSpeedSpin(),l=cc.moveTo(h,this.node.x,-c).easing(cc.easeInOut(3)),u=cc.callFunc(function(){this.setChips(t),i&&this.WildUI.setMoneyTotalPrize(n)},this),d=this.Wild.getSpeedSpin()>1?cc.delayTime(0):cc.delayTime(o.WILD_DELAY_SPIN_REEL_2),m=cc.callFunc(function(){this.Wild.spinReelsXper()},this);this.node.runAction(cc.sequence(l,u,d,m))},randomChips:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[],i=0;i<o.WILD_NUMBER_REELS;i++){var n=void 0;n=t?s.WILD_LIST_ICON_2[0]:this.getRandomChip(),e.push(n)}this.reset(),this.setChips(e)},getRandomChip:function(){var t=n.getRandomInt(0,s.WILD_LIST_ICON_2.length-1);return s.WILD_LIST_ICON_2[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*o.WILD_DISTANCE_TWO_CHIPS_2),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.wildItemPrefab)),e.getComponent("WildItem").init(t),e.scale=o.WILD_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./WildConstant":"WildConstant"}],WildReel:[function(t,e,i){"use strict";cc._RF.push(e,"45f7dAsCu9NCKuERMVcmDWb","WildReel");var n=t("../../../util/RandomUtil"),o=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./WildConstant");cc.Class({extends:cc.Component,properties:{wildItemPrefab:cc.Prefab},init:function(t){this.Wild=t,this.WildUI=t.WildUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.wildItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,n,a,r,c,h){this.reset(),this.setChips(this.chips),this.chips=t;for(var l=1;l<e;l++){var u=this.getRandomChip();l===e-1&&(u=t[0]),l===e-2&&(u=t[1]),l===e-3&&(u=t[2]);var d=this.instanceChip(u);d.setPosition(0,(l+1)*o.WILD_DISTANCE_TWO_CHIPS),d.parent=this.node}var m=(e-1)*o.WILD_DISTANCE_TWO_CHIPS,f=m/o.WILD_SPEED_SPIN_CARD/this.Wild.getSpeedSpin(),p=cc.moveTo(f,this.node.x,-m).easing(cc.easeInOut(3)),_=cc.callFunc(function(){this.setChips(t),i&&this.Wild.node.active?a===s.WIN_TYPE_JACKPOT||c?this.WildUI.showJackPot(h,r):(this.WildUI.setMoneyTotalPrize(0),n&&this.WildUI.setMoneyTotalPrize(n)):i&&(a===s.WIN_TYPE_JACKPOT||c)&&(this.Wild.node.active=!0,this.WildUI.showJackPot(h,r))},this),S=void 0;S=this.Wild.node.active?cc.delayTime(o.WILD_DELAY_SPIN/this.Wild.getSpeedSpin()):cc.delayTime(o.WILD_DELAY_SPIN);var g=cc.callFunc(function(){i&&this.Wild.node.active?this.Wild.spinReelsXper():i&&!this.Wild.node.active&&(this.Wild.isAutoSpin()?this.Wild.spin():this.Wild.onStopAutoSpinClick())},this);this.node.runAction(cc.sequence(p,_,S,g))},randomChips:function(){for(var t=[],e=0;e<o.WILD_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=n.getRandomInt(0,a.WILD_LIST_ICON_1.length-1);return a.WILD_LIST_ICON_1[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*o.WILD_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.wildItemPrefab)),e.getComponent("WildItem").init(t),e.scale=o.WILD_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var n in e)this.pool.put(e[n])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./WildConstant":"WildConstant"}],WildSelectAutoSpinItem:[function(t,e,i){"use strict";cc._RF.push(e,"18f91PqUn9CnKpZDPHFe3Vz","WildSelectAutoSpinItem");var n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberAutoSpinLabel:cc.Label},onLoad:function(){},init:function(t,e){this.WildSelectAutoSpin=t,this.numberAutoSpin=e,this.numberAutoSpinLabel.string=n.numberWithCommas(e)},onClick:function(){this.WildSelectAutoSpin.onItemClick(this.numberAutoSpin)},reset:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],WildSelectAutoSpin:[function(t,e,i){"use strict";cc._RF.push(e,"5c71esct51IgqcfgnP8wylu","WildSelectAutoSpin");var n=t("./WildSelectAutoSpinItem"),o=t("./WildConstant");cc.Class({extends:cc.Component,properties:{listAutoSpinItem:[n]},init:function(t){this.Wild=t},onLoad:function(){for(var t in o.LIST_AUTO_SPIN)this.listAutoSpinItem[t]&&this.listAutoSpinItem[t].init(this,o.LIST_AUTO_SPIN[t])},onItemClick:function(t){this.Wild.selectNewAutoSpin(t),this.node.active=!1}}),cc._RF.pop()},{"./WildConstant":"WildConstant","./WildSelectAutoSpinItem":"WildSelectAutoSpinItem"}],WildUI:[function(t,e,i){"use strict";cc._RF.push(e,"fde45mepLRDzb8Vouv7m9xt","WildUI");var n=t("../../../util/FormatUtil"),o=t("../../../helper/Config"),s=t("../item/JackpotItem");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,autoSpinLabel:cc.Label,speedSpinLabel:cc.Label,totalPrizeJackpotItem:s,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setMoneyTotalPrize:function(t){0==t?this.totalPrizeJackpotItem.setMoneyWithoutAnimation(0):this.totalPrizeJackpotItem.setMoneyWithStartNumberZero(t)},setNumberAutoSpin:function(t){this.autoSpinLabel.string=t},setSpeedSpin:function(t){t=t>1?2:t,this.speedSpinLabel.string="x"+t},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=o.WILD_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=o.WILD_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=n.nFormatter(t),this.bet2Label.string=n.nFormatter(e),this.bet3Label.string=n.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../item/JackpotItem":"JackpotItem"}],Wild:[function(t,e,i){"use strict";cc._RF.push(e,"8e05csP/DpB/4mPqVZjEUAE","Wild");var n=t("../../../base/BaseController"),o=t("./WildUI"),s=t("./WildConstant"),a=t("./WildReel"),r=t("./WildReel2"),c=t("./WildSelectAutoSpin"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../item/MiniGameXPer"),d=t("../../../helper/Config"),m=t("../../../helper/Constant"),f=t("../../../helper/Message"),p=t("../../../object/RoomType"),_=t("../MiniGameConstant"),S=t("../../../util/RandomUtil");cc.Class({extends:n,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,MiniGameXPer:u,toastPrefab:cc.Prefab,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,reels:[a],reels2:[r],WildSelectAutoSpin:c,WildUI:o,MiniGameResult:h},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=1,this.intervalSpin=null,this.WildSelectAutoSpin.init(this),this.reels)this.reels[t].init(this);for(var e in this.reels2)this.reels2[e].init(this);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT),this.initMiniGameSpinFree(this.getUser().minigame_free)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[s.MONEY_TYPE]===s.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initSaveData:function(){var t=cc.sys.localStorage.getItem(s.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initTempData:function(){var t=this.getTempData(),e=this.getUser(),i=t[s.IS_AUTO_SPIN],n=t[s.BET_VALUE],o=t[s.SPEED_SPIN],a=e.wild_free;switch(i?(this.setAutoSpin(i),this.showStopAutoSpinNode(),clearTimeout(this.timeOutSpin),this.timeOutSpin=setTimeout(function(){this.spin()}.bind(this),1500)):this.setAutoSpin(0),o?this.setSpeedSPin(o):this.setSpeedSPin(s.LIST_SPEED_SPIN[0]),n){case s.BET_100:this.setBet1();break;case s.BET_1k:this.setBet2();break;case s.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,a)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationWild(!0,e):this.MiniGameCircleNotification.initShowNotificationWild(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationWild(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,n=t[e].quantity;i===s.MINIGAME_CONFIG_ID&&(n>0?this.WildUI.showMiniGameSpinFree(n):this.WildUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,n=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_SPIN:this.handleSpin(i);break;case s.REQUEST_MESSAGE:this.handleMessage(n);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,n=t.total_prize_value,o=t.win_type,s=t.spin_id,a=t.is_jackpot;this.idLabel.string=String.format(f.MINIGAME_ID,s),this.reels2[0].randomChips(!0),this.spinReels(i,n,e,o,!0,a),this.minusAutoSpin()},spinReels:function(t,e,i,n,o,a){this.listDataReelXper=[],this.totalPrizeWithoutXper=0;var r=this.getDataDisplay(s.WILD_LIST_ICON_1,t[0]),c=this.getDataDisplay(s.WILD_LIST_ICON_1,t[1]),h=this.getDataDisplay(s.WILD_LIST_ICON_1,t[2]),l=t[3],u=t[4],m=t[5];l&&this.listDataReelXper.push(l),u&&this.listDataReelXper.push(u),m&&this.listDataReelXper.push(m),this.totalPrizeWithoutXper=this.getMoneyPrizeWithoutXper(e),this.reels[0].spin(r,d.WILD_NUMBER_CHIP_SPIN),this.reels[1].spin(c,d.WILD_NUMBER_CHIP_SPIN+3),this.reels[2].spin(h,d.WILD_NUMBER_CHIP_SPIN+6,!0,this.totalPrizeWithoutXper,n,o,a,e)},spinReelsXper:function(){if(this.listDataReelXper&&this.listDataReelXper.length>0){var t=this.listDataReelXper.splice(0,1)[0],e=this.getXperBySlotData(t);this.totalPrizeWithoutXper=this.totalPrizeWithoutXper*e;var i=this.getDataDisplay(s.WILD_LIST_ICON_2,t);this.reels2[0].spin(i,d.WILD_NUMBER_CHIP_SPIN,!0,this.totalPrizeWithoutXper)}else this.isAutoSpin()?this.spin():this.onStopAutoSpinClick()},getMoneyPrizeWithoutXper:function(t){if(this.listDataReelXper&&this.listDataReelXper.length>0){var e=1;for(var i in this.listDataReelXper)this.listDataReelXper[i]===s.WILD_ICON_X1&&(e*=1),this.listDataReelXper[i]===s.WILD_ICON_X2&&(e*=2),this.listDataReelXper[i]===s.WILD_ICON_X3&&(e*=3);t=parseInt(t/e)}return t},getXperBySlotData:function(t){var e=1;switch(t){case s.WILD_ICON_X1:e=1;break;case s.WILD_ICON_X2:e=2;break;case s.WILD_ICON_X3:e=3}return e},onAutoSpinClick:function(){this.WildSelectAutoSpin.node.active=!this.WildSelectAutoSpin.node.active},selectNewAutoSpin:function(t){this.setAutoSpin(t),this.showStopAutoSpinNode(),this.isSpinning()||this.spin()},showStopAutoSpinNode:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1},onStopAutoSpinClick:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.setAutoSpin(0)},onSpeedSpinClick:function(){for(var t=this.getSpeedSpin(),e=s.LIST_SPEED_SPIN,i=0,n=e.length;i<n;i++)t==e[i]&&(i===e.length-1?this.setSpeedSPin(e[0]):this.setSpeedSPin(e[i+1]))},onSpinClick:function(){this.isSpinning()||this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:p.MONEY_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(s.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(m.WILD)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showWildHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(_.WILD),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowWild(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.WildUI.enableBet1Button(),this.getTempData()[s.BET_VALUE]=s.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.WildUI.enableBet2Button(),this.getTempData()[s.BET_VALUE]=s.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(f.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.WildUI.enableBet3Button(),this.getTempData()[s.BET_VALUE]=s.BET_10k},setSpeedSPin:function(t){this.speed_spin=t,this.WildUI.setSpeedSpin(t),this.getTempData()[s.SPEED_SPIN]=t},getSpeedSpin:function(){return this.speed_spin},minusAutoSpin:function(){this.auto_spin&&this.auto_spin>0?(this.auto_spin--,this.setAutoSpin(this.auto_spin)):this.setAutoSpin(0)},setAutoSpin:function(t){this.auto_spin=t,this.WildUI.setNumberAutoSpin(t),this.getTempData()[s.IS_AUTO_SPIN]=t},getAutoSpin:function(){return this.auto_spin},onWildClick:function(){this.setShowWild(!this.node.active)},setShowWild:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().wild_free;cc.sys.localStorage.setItem(s.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),2e3*d.WILD_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=d.MINIGAME_SCALE_TOAST,e.setPosition(d.MINIGAME_POSITION_TOAST_X,d.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.WildUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?s.MONEY_TYPE_MONEY:s.MONEY_TYPE_GOLD;this.getTempData()[s.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?d.WILD_LIST_BET_MONEY:d.WILD_LIST_BET_GOLD)[this.betOrder]},getDataDisplay:function(t,e){for(var i=[],n=0,o=s.NUMBER_ITEM_IN_REEL;n<o;n++)if(1===n)i.push(e);else{var a=S.getRandomInt(0,t.length-1);i.push(t[a])}return i},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0||cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels2[0].node)>0},isAutoSpin:function(){return this.auto_spin>0},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},reset:function(){clearTimeout(this.timeOutSpin),this.MiniGameResult.reset()},dataTest1:function(){var t={bonus_prize:0,is_jackpot:!1,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X2",t.slot_data[4]="X3",t.spin_id="9",t.total_prize_value=18e3,t.win_type=1,t},dataTest2:function(){var t={bonus_prize:0,is_jackpot:!1,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X1",t.slot_data[4]="X3",t.slot_data[5]="X2",t.spin_id="9",t.total_prize_value=9e3,t.win_type=1,t},dataTest3Jackpot:function(){var t={bonus_prize:0,is_jackpot:!0,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X1",t.slot_data[4]="X3",t.spin_id="9",t.total_prize_value=9e3,t.win_type=4,t}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./WildConstant":"WildConstant","./WildReel":"WildReel","./WildReel2":"WildReel2","./WildSelectAutoSpin":"WildSelectAutoSpin","./WildUI":"WildUI"}],WinEffect:[function(t,e,i){"use strict";cc._RF.push(e,"3283difYeZDUZ37b3qklXZq","WinEffect");var n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{textLabel:cc.Label},onLoad:function(){},show:function(t){this.textLabel.string=t,this.node.opacity=0,this.node.scale=1.5,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeIn(.1)),cc.delayTime(n.WIN_EFFECT_TIME_OUT),cc.spawn(cc.scaleTo(.1,1.5),cc.fadeOut(.1)),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}}),cc._RF.pop()},{"../../helper/Config":"Config"}],XiToBetState:[function(t,e,i){"use strict";cc._RF.push(e,"d8b59lxQppPiJEUs+czF8EE","XiToBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],XiToCard:[function(t,e,i){"use strict";cc._RF.push(e,"8f4dbduF+JBeYnO4x+MH6jz","XiToCard");var n=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),o="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return o[this.point]}},suitName:{get:function(){return n[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],XiToConfig:[function(t,e,i){"use strict";cc._RF.push(e,"9d880Tm0IxPVbe5caJWbt5q","XiToConfig");e.exports={NUMBER_CARDS_EACH_PLAYERS:2,NUMBER_CARDS_TABLE:5,NUMBER_PLAYERS:6,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CARDS_DEALDER_X:0,POSITION_CARDS_DEALDER_Y:150,SCALE_CARD_DEALDER:.7,SCALE_CARD_IN_TABLE:1.25,POSITION_CARD_1_X:-80,POSITION_CARD_2_X:80,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_RESULT_X:185,POSITION_PLAYER_RESULT_Y:-75},cc._RF.pop()},{}],XiToConstant:[function(t,e,i){"use strict";cc._RF.push(e,"930da2ykfdPiZDgNBWAmo7o","XiToConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",SELECT_CARD_HIDE:"SELECT_CARD_HIDE",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",PREFLOP:"PREFLOP",FLOP:"FLOP",TURN:"TURN",RIVER:"RIVER",FOLD:"FOLD",CHECK:"CHECK",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",REQUEST_SELECT_CARD_HIDE:"REQUEST_SELECT_CARD_HIDE",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],XiToGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"123010ZTXZI8Y47tARvq5/i","XiToGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",THUNG_PHA_SANH:"THUNG_PHA_SANH",TU_QUY:"TU_QUY",CU_LU:"CU_LU",THUNG:"THUNG",SANH:"SANH",SAM:"SAM",THU:"THU",DOI:"DOI",BAI_CAO:"BAI_CAO"},cc._RF.pop()},{}],XiToHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"aff4f3sZn1Mk7vEUIFp2uDF","XiToHandlerEffect");var n=t("./XiToConfig"),o=t("./XiToBetState"),s=t("../../helper/Message"),a={init:function(t){this.XiTo=t,this.XiToUI=t.XiToUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].XiToPlayer.showCards(t,!0):this.listPlayers[e].XiToPlayer.showBackCards(!0)},startGame:function(t){var e=t.data.cards;this.XiToUI.hideAllButtons(),this.XiTo.myPlayer.XiToPlayer.showCards(e),this.XiTo.XiToSelectCard.showCards(e)},playerSelectCard:function(t){var e=t.data.card,i=t.data.user_id,n=this.XiTo.getPlayerByUserId(i);n&&(n.isItMe?(this.XiTo.XiToSelectCard.node.active=!1,this.XiTo.myPlayer.XiToPlayer.selectCard(e)):(n.XiToPlayer.showBackCards(!0),n.XiToPlayer.addCard(e)))},addCard:function(t){var e=t.data.cards;for(var i in e){var n=this.XiTo.getPlayerByUserId(e[i].user_id);n&&n.XiToPlayer.addCard(e[i].card)}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;this.XiToUI.showTotalChip(e);for(var i=0,n=this.listPlayers.length;i<n;i++)this.listPlayers[i].XiToPlayer.moveToCenterTable()},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.XiTo.chipPrefab);e.parent=this.XiTo.gameNode,e.setPosition(n.POSITION_CENTER_MONEY_X,n.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.XiTo.isMoneyType),e.runAction(cc.sequence(cc.moveTo(n.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.XiToUI.showTotalChip(0)},handlePlayingPlayer:function(t){this.stopCountDownAllPlayers();var e=t.data.playing_player||t.data,i=e.user_id,n=e.balance,o=e.min_bet,s=this.XiTo.getPlayerByUserId(i);s&&(s.isItMe?(this.XiToUI.showAllButtons(),this.displayButtons(n,o),o>0?this.GameCommon.setMinMaxBetForm(o,n):this.GameCommon.setMinMaxBetForm(this.XiTo.minBet,n)):this.XiToUI.hideAllButtons(),this.XiTo.startCountDownPlayer(s,t.time_remain,t.time))},showResult:function(t){var e=t.data.players;for(var i in this.GameCommon.BetForm.hideDialog(!1),this.XiToUI.hideAllButtons(),e){var n=e[i].money_change,o=e[i].user_id,s=e[i].cards,a=e[i].type,r=this.XiTo.getPlayerByUserId(o);r&&(r.BasePlayer.showChangeBalance(n,!0),r.XiToPlayer.isFold()||r.BasePlayer.showEffectByChangeBalance(n),r.XiToPlayer.showEffectByGroupCardsType(a),r.isItMe&&n>0&&this.GameCommon.Audio.playWin(),s&&r.XiToPlayer.showCards(s),n>0&&this.XiToUI.getTotalChip()>0&&this.showEffectWinCenterBalance(r))}},displayButtons:function(t,e){this.XiToUI.showAllButtons(),this.XiToUI.setAllInLabelValue(0),this.XiToUI.setCallLabelValue(0),e>0?(this.XiToUI.hideCheckButton(),this.XiToUI.setCallLabelValue(e)):this.XiToUI.hideCallButton(),e>=t?(this.XiToUI.hideCallButton(),this.XiToUI.hideRaiseButton(),this.XiToUI.hideCheckButton(),this.XiToUI.setAllInLabelValue(t)):this.XiToUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].XiToPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===s.XITO_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===o.CHECK?t.XiToPlayer.showEffectCheck():e===o.ALL_IN?t.XiToPlayer.showEffectAllIn():e===o.FOLD&&t.XiToPlayer.showEffectFold()},setRoomMasterPlayer:function(t){this.clearRoomMasterAllPlayers();var e=this.XiTo.getPlayerByUserId(t);e&&e.BasePlayer.setRoomMaster(!0)},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()}};e.exports=a,cc._RF.pop()},{"../../helper/Message":"Message","./XiToBetState":"XiToBetState","./XiToConfig":"XiToConfig"}],XiToHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"56647HcsMpFx71sAh1PZE/P","XiToHandlerRequest");var n=t("./XiToConstant"),o=t("../../helper/Constant"),s={XiTo:null,init:function(t){this.XiTo=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.XiTo.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.BALANCE:this.XiTo.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.COUNT_DOWN:this.XiTo.handleCountDown(e);break;case n.START_GAME:this.XiTo.handleStartGame(e);break;case n.SELECT_CARD_HIDE:this.XiTo.handleSelectCardHide(e);break;case n.PLAYER_PLAY:this.XiTo.handlePlayerPlay(e);break;case n.BET:this.XiTo.handlePlayerBet(e);break;case n.FLOP:this.XiTo.handlePlayerFlop(e);break;case n.TURN:this.XiTo.handlePlayerTurn(e);break;case n.RIVER:this.XiTo.handlePlayerRiver(e);break;case n.FOLD:this.XiTo.handlePlayerFold(e);break;case n.CHECK:this.XiTo.handlePlayerCheck(e);break;case n.BUY_IN:this.XiTo.handlePlayerBuyIn(e);break;case n.RESULT:this.XiTo.handleResult(e);break;case n.PLAYERS_LEFT_ROOM:this.XiTo.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.XiTo.handlePlayersRequestLeftRoom(e);break;case n.ADD_PLAYER:this.XiTo.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.XiTo.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./XiToConstant":"XiToConstant"}],XiToPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"e4baaG1th9Mzbt4TmakxIZP","XiToPlayer");var n=t("./XiToConfig"),o=t("./XiToGroupCardsType"),s=t("./XiToCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var o=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=n.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(o),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,n.TIME_SHOW_CARDS,n.DISTANCE_TWO_CARDS*i,0,n.SCALE_CARD)):(r.reveal(!0),a.setPosition(n.DISTANCE_TWO_CARDS*i,0))}},selectCard:function(t){var e=this.cardsNode.getChildren();for(var i in e)t===e[i].trueValue?e[i].getComponent("CardController").hideDarkEffect():e[i].getComponent("CardController").showDarkEffect()},selectCard2:function(t){var e=this.cardsNode.getChildren();for(var i in e)t===e[i].trueValue?e[i].getComponent("CardController").showDarkEffect():e[i].getComponent("CardController").hideDarkEffect()},addCard:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new s(t),o=cc.instantiate(this.cardPrefab);o.trueValue=t,o.scale=n.SCALE_CARD;var a=o.getComponent("CardController");a.init(i),o.setPosition(n.DISTANCE_TWO_CARDS*this.cardsNode.getChildren().length,0),e?a.revealWithAnimationFlip(!0,n.TIME_SHOW_CARDS):a.reveal(!0),o.parent=this.cardsNode},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);var e=cc.instantiate(this.cardBackPrefab);e.parent=this.cardsNode,e.scale=n.SCALE_CARD,t?(e.setPosition(0,0),e.runAction(cc.moveTo(n.TIME_SHOW_CARDS,0,0))):e.setPosition(0,0)},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=n.POSITION_CENTER_MONEY_X-this.node.x,i=n.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(.5,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.XITO_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case o.THUNG_PHA_SANH:e=a.XITO_THUNG_PHA_SANH;break;case o.TU_QUY:e=a.XITO_TU_QUY;break;case o.CU_LU:e=a.XITO_CU_LU;break;case o.THUNG:e=a.XITO_THUNG;break;case o.SANH:e=a.XITO_SANH;break;case o.SAM:e=a.XITO_SAM;break;case o.THU:e=a.XITO_THU;break;case o.DOI:e=a.XITO_DOI;break;case o.BAI_CAO:e=a.XITO_BAI_CAO}e&&this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(n.POSITION_PLAYER_RESULT_X,n.POSITION_PLAYER_RESULT_Y))},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./XiToCard":"XiToCard","./XiToConfig":"XiToConfig","./XiToGroupCardsType":"XiToGroupCardsType"}],XiToSelectCard:[function(t,e,i){"use strict";cc._RF.push(e,"b2dc8JL51RE5KUnpnM039w/","XiToSelectCard");var n=t("../XiToCard"),o=t("../XiToConfig"),s=t("../XiToConstant");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardsNode:cc.Node},init:function(t){this.XiTo=t},onLoad:function(){},showCards:function(t){this.cardsNode.removeAllChildren(!0),this.node.active=!0;var e=this.instanceCard(t[0]),i=this.instanceCard(t[1]);e.x=o.POSITION_CARD_1_X,i.x=o.POSITION_CARD_2_X},onDisable:function(){this.cardsNode.removeAllChildren(!0)},instanceCard:function(t){var e=this,i=cc.instantiate(this.cardPrefab);i.scale=o.SCALE_CARD_IN_TABLE,i.trueValue=t,i.parent=this.cardsNode;var a=i.getComponent("CardController"),r=new n(t);return a.init(r),i.cardController=a,i.on(cc.Node.EventType.TOUCH_END,function(){var t={card:this.trueValue};e.XiTo.sendRequest.send(s.REQUEST_SELECT_CARD_HIDE,t)},i),i}}),cc._RF.pop()},{"../XiToCard":"XiToCard","../XiToConfig":"XiToConfig","../XiToConstant":"XiToConstant"}],XiToState:[function(t,e,i){"use strict";cc._RF.push(e,"ed471CvZR1AdK/tAfJ/1KFl","XiToState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.XiTo=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.XiTo.GameCommon.showBuyInButton():this.XiTo.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],XiToUI:[function(t,e,i){"use strict";cc._RF.push(e,"9b3aanF0klPNJzi9toi9+pq","XiToUI");var n=t("../../util/FormatUtil"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,selectCardsNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.totalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?n.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.totalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_CALL,n.numberWithCommas(t)):o.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(o.LIENG_BET_TEXT,o.LIENG_ALL_IN,n.numberWithCommas(t)):o.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.totalChip=0,this.hideTotalChip(),this.hideAllButtons()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],XiTo:[function(t,e,i){"use strict";cc._RF.push(e,"79bf1tZpdNCIqPqL/27mBur","XiTo");var n=t("../../base/BaseController"),o=t("./XiToConstant"),s=t("./XiToConfig"),a=t("./XiToUI"),r=t("./XiToState"),c=t("./XiToHandlerRequest"),h=t("./XiToHandlerEffect"),l=t("./XiToBetState"),u=t("./other/XiToSelectCard"),d=t("../../prefab/GameCommon"),m=t("../../helper/Constant"),f=t("../../helper/Message"),p=t("../../object/RoomType");cc.Class({extends:n,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,XiToSelectCard:u,XiToUI:a,GameCommon:d},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_XITO),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==p.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.XiToUI.playersNode,this.isMoneyType||this.XiToUI.disableAllPlaceHolder(),this.XiToConstant=o,this.XiToConfig=s,this.XiToState=r,this.XiToState.init(this),this.XiToHandlerRequest=c,this.XiToHandlerRequest.init(this),this.XiToHandlerEffect=h,this.XiToHandlerEffect.init(this),this.XiToSelectCard.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.XiToHandlerRequest.onPublicMessage.bind(this.XiToHandlerRequest),this.onRoomVarsUpdate=this.XiToHandlerRequest.onRoomVarsUpdate.bind(this.XiToHandlerRequest),this.onUserVarsUpdate=this.XiToHandlerRequest.onUserVarsUpdate.bind(this.XiToHandlerRequest),this.onResponse=this.XiToHandlerRequest.onResponse.bind(this.XiToHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.active=!1}this.initMyPositionByListPlayers(e,n),this.initMyPositionByListPlayers(i,n),this.initPlayersByListPlayers(e),this.initPlayersByListPlayers(i)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer"),o=t.node.getComponent("XiToPlayer");t.BasePlayer=n,t.XiToPlayer=o,n.reset(),o.reset(),n.setAvatar(t.avatar),n.setRoomMaster(!1),n.setRequestLeftRoom(t.request_left_room),n.setPlayerName(t.nick_name),n.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.XiToState.setState(e),this.XiToState.isStop()?this.reset():this.XiToState.isWaiting()?this.resumeStateWaiting(t):this.XiToState.isPlaying()?this.resumeStatePlaying(t):this.XiToState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.XiToHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.bet_amount,n=t.data.turn_state;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=e[s].cards,l=e[s].card_hide,u=this.getPlayerByUserId(a);if(u)if(r>0&&u.BasePlayer.showBetNodeWithoutAnimation(r),this.XiToHandlerEffect.setPlayerStatusByBetState(u,c),u.isItMe)this.myPlayer.XiToPlayer.showCards(h,!1),l?this.myPlayer.XiToPlayer.selectCard2(l):this.XiToSelectCard.showCards(h);else for(var d in u.XiToPlayer.showBackCards(!1),h)u.XiToPlayer.addCard(h[d],!1)}this.XiToUI.showTotalChip(i),n===o.PREFLOP?this.XiToHandlerEffect.startCountDownAllPlayers(t):this.XiToHandlerEffect.handlePlayingPlayer(t)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.bet_amount;for(var n in e){var o=e[n].user_id,s=e[n].bet_amount,a=e[n].bet_state,r=e[n].money_change,c=e[n].cards,h=e[n].type,l=this.getPlayerByUserId(o);l&&(s>0&&l.BasePlayer.showBetNodeWithoutAnimation(s),l.BasePlayer.showChangeBalance(r),l.BasePlayer.showEffectByChangeBalance(r),this.XiToHandlerEffect.setPlayerStatusByBetState(l,a),c&&c.length>0&&l.XiToPlayer.showCards(c,!1),l.XiToPlayer.showEffectByGroupCardsType(h))}this.XiToUI.showTotalChip(i),this.XiToUI.hideAllButtons()},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.XiToHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,n=this.getPlayerByUserId(e);n&&n.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.XiToState.setWaiting(),this.GameCommon.hideWaitingNode(),this.XiToHandlerEffect.startCountDownAllPlayers(t)):(this.XiToState.setStop(),this.XiToHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){this.XiToState.setPlaying(),this.XiToHandlerEffect.startGame(t),this.XiToHandlerEffect.startCountDownAllPlayers(t)},handleSelectCardHide:function(t){this.XiToHandlerEffect.playerSelectCard(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.handlePlayingPlayer(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount_round,n=t.data.is_all_in,o=this.getPlayerByUserId(e);o&&(o.BasePlayer.hideText(),o.BasePlayer.showChangeBalance(-i),i>0&&o.BasePlayer.showBetNode(i),n&&o.XiToPlayer.showEffectAllIn()),this.XiToHandlerEffect.stopCountDownAllPlayers()},handlePlayerFlop:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerTurn:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerRiver:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.XiToPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.XiToPlayer.showEffectCheck()},handleResult:function(t){this.XiToState.setFinish(),this.XiToHandlerEffect.stopCountDownAllPlayers(),this.XiToHandlerEffect.resetPlayerNameAllPlayers(),this.XiToHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.XiToState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.XiToHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(f.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(f.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(o.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(o.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(o.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.XiToUI.reset(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].XiToPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./XiToBetState":"XiToBetState","./XiToConfig":"XiToConfig","./XiToConstant":"XiToConstant","./XiToHandlerEffect":"XiToHandlerEffect","./XiToHandlerRequest":"XiToHandlerRequest","./XiToState":"XiToState","./XiToUI":"XiToUI","./other/XiToSelectCard":"XiToSelectCard"}],XocDiaChip:[function(t,e,i){"use strict";cc._RF.push(e,"7e5beqxukdL0al5xDBKtKs0","XocDiaChip");var n=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{chipSprite:cc.Sprite,chipSpriteFrames:[cc.SpriteFrame]},init:function(t,e){this.chip=t;var i=this.getSpriteFrameByChip(t,e);i&&(this.chipSprite.spriteFrame=i)},onLoad:function(){},getSpriteFrameByChip:function(t,e){var i=n.X_MY_CHIPS;for(var o in i)if(i[o]*e===t)return this.chipSpriteFrames[o];return null}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig"}],XocDiaConfig:[function(t,e,i){"use strict";cc._RF.push(e,"6bac7dV3iBPxZVXbUe52E3x","XocDiaConfig");e.exports={MAX_PLAYERS:9,NUMBER_ROWS:6,NUMBER_COLS:29,NUMBER_CELL_SMALL_1:80,NUMBER_CELL_SMALL_2:36,X_MY_CHIPS:[1,5,20,50,100],TIME_SELECT_CHIP:.15,TIME_MOVE_CHIP:.35,TIME_RETURN_CHIP:.5,TIME_SHAKE_PLATE:.05,TIME_SHOW_COIN:2.5,TIME_MOVE_MY_CHIP:.2,TIME_DELAY_AFTER_SHOW_RESULT:1,SCALE_CHIP_IN_DOOR:.5,SCALE_SELECT_CHIP:1.3,POSITION_MASTER_DEFAULT_X:0,POSITION_MASTER_DEFAULT_Y:235,DISTANCE_SHAKE_PLATE:15,DISTANCE_MOVE_BOWL_X:60,DISTANCE_MOVE_BOWL_Y:-60,DISTANCE_MOVE_UP_MY_CHIP:25},cc._RF.pop()},{}],XocDiaConstant:[function(t,e,i){"use strict";cc._RF.push(e,"0babd7T4mpIL7WWS2ND+xIL","XocDiaConstant");e.exports={DOOR_ID_EVEN:2,DOOR_ID_ODD:1,DOOR_ID_4_GREEN_0_RED:4,DOOR_ID_3_GREEN_1_RED:13,DOOR_ID_1_GREEN_3_RED:31,DOOR_ID_0_GREEN_4_RED:40,ROOM_INFO:"ROOM_INFO",COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",STATISTIC:"STATISTIC",CHANGE_HOME:"CHANGE_HOME",UPDATE_LIST_HOSTS:"UPDATE_LIST_HOSTS",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",BET_DOOR:"BET_DOOR",RESULT:"RESULT",BALANCE_DOOR:"BALANCE_DOOR",SELL_DOOR_STATE:"SELL_DOOR_STATE",SELL_DOOR:"SELL_DOOR",BUY_DOOR:"BUY_DOOR",ADD_PLAYER:"ADD_PLAYER",REQUEST_BET_DOOR:"REQUEST_BET_DOOR",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_REGISTER_HOME:"REQUEST_REGISTER_HOME",REQUEST_IGNORE_HOME:"REQUEST_IGNORE_HOME",REQUEST_BUY_DOOR:"REQUEST_BUY_DOOR",REQUEST_SELL_DOOR:"REQUEST_SELL_DOOR"},cc._RF.pop()},{}],XocDiaDoorState:[function(t,e,i){"use strict";cc._RF.push(e,"7fb82EykDBG5qsbNgj3lkfa","XocDiaDoorState");e.exports={NO:"NO",BUY:"BUY",SELL:"SELL"},cc._RF.pop()},{}],XocDiaDoor:[function(t,e,i){"use strict";cc._RF.push(e,"965b1QdySlGjKD9T9oaRj6o","XocDiaDoor");var n=t("../XocDiaConstant"),o=t("../../../util/FormatUtil"),s=t("../../../util/RandomUtil"),a=t("../../../util/BrowserUtil"),r=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bgNormalSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame,betButtonNode:cc.Node,buyButtonNode:cc.Node,sellButtonNode:cc.Node,chipsNode:cc.Node,totalChipLabel:cc.Label,myChipLabel:cc.Label,winNode:cc.Node},init:function(t,e){this.XocDia=t,this.GameCommon=t.GameCommon,this.XocDiaMyChip=t.XocDiaMyChip,this.doorId=e},onLoad:function(){var t=this;this.onMouseEnter=function(){t.initBgSprite()},this.onMouseLeave=function(){t.bgSprite.spriteFrame=t.bgNormalSpriteFrame,a.showCursorAuto()},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},initBgSprite:function(){this.isCanBet()?(this.bgSprite.spriteFrame=this.bgHoverSpriteFrame,a.showCursorPointer()):(this.bgSprite.spriteFrame=this.bgNormalSpriteFrame,a.showCursorAuto())},setTotalChip:function(t){this.totalChipLabel.string=o.numberWithCommas(t)},setMyChip:function(t){this.myChipLabel.string=o.numberWithCommas(t)},setBetStatus:function(){this.showbetButtonNode(),this.hidebuyButtonNode(),this.hidesellButtonNode()},setBuyStatus:function(){this.showbuyButtonNode(),this.hidebetButtonNode(),this.hidesellButtonNode()},setSellStatus:function(){this.showsellButtonNode(),this.hidebuyButtonNode(),this.hidebetButtonNode()},isCanBetAndShowMessage:function(){if(this.XocDia.XocDiaState.isBetting()){var t=this.XocDia.myPlayer.is_home,e=!!this.XocDia.getHomePlayer();if(t)this.XocDia.showToast(r.XOC_DIA_HOST_NOT_BET);else if(e||this.doorId===n.DOOR_ID_ODD||this.doorId===n.DOOR_ID_EVEN||this.XocDia.showToast(r.XOC_DIA_NOT_BET_NO_HOST),e||this.doorId===n.DOOR_ID_ODD||this.doorId===n.DOOR_ID_EVEN)return!0}return!1},isCanBet:function(){if(this.XocDia.XocDiaState.isBetting()){var t=this.XocDia.myPlayer.is_home,e=!!this.XocDia.getHomePlayer();if(!t&&(e||this.doorId===n.DOOR_ID_ODD||this.doorId===n.DOOR_ID_EVEN))return!0}return!1},onClick:function(){this.GameCommon.Audio.playClick(),this.isCanBetAndShowMessage()&&this.betDoor()},onBetClick:function(){this.GameCommon.Audio.playClick(),this.betDoor()},onBuyClick:function(){this.GameCommon.Audio.playClick(),this.buyDoor()},onSellClick:function(){this.GameCommon.Audio.playClick(),this.sellDoor()},betDoor:function(){var t={amount:this.XocDiaMyChip.getChipSelected(),door_id:this.doorId};this.XocDia.sendRequest.send(n.REQUEST_BET_DOOR,t)},sellDoor:function(){var t={door_id:this.doorId};this.XocDia.sendRequest.send(n.REQUEST_SELL_DOOR,t)},buyDoor:function(){var t={door_id:this.doorId};this.XocDia.sendRequest.send(n.REQUEST_BUY_DOOR,t)},hideAllButtons:function(){this.hidebetButtonNode(),this.hidesellButtonNode(),this.hidebuyButtonNode()},showWinNode:function(){this.winNode.active=!0},hideWinNode:function(){this.winNode.active=!1},showbetButtonNode:function(){this.betButtonNode.active=!0},hidebetButtonNode:function(){this.betButtonNode.active=!1},showbuyButtonNode:function(){this.buyButtonNode.active=!0},hidebuyButtonNode:function(){this.buyButtonNode.active=!1},showsellButtonNode:function(){this.sellButtonNode.active=!0},hidesellButtonNode:function(){this.sellButtonNode.active=!1},getRandomPositionInChipsNode:function(){var t=s.getRandom(-this.chipsNode.width/2,this.chipsNode.width/2),e=s.getRandom(-this.chipsNode.height/2,this.chipsNode.height/2);return new cc.Vec2(t,e)},reset:function(){this.setTotalChip(0),this.setMyChip(0),this.chipsNode.removeAllChildren(!0),this.hidebetButtonNode(),this.hidebuyButtonNode(),this.hidesellButtonNode(),this.hideWinNode()},putChipInPool:function(t){for(var e=this.chipsNode.children,i=0;i<e.length;++i)t.put(e[i])}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","../XocDiaConstant":"XocDiaConstant"}],XocDiaHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"872c2aNY75HFJ45i/fHRrJh","XocDiaHandlerEffect");var n=t("./XocDiaConfig"),o={init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.timeoutReturnChip=null,this.timeoutShowEffectResult=null,this.poolChip=new cc.NodePool;for(var e=0;e<20;e++){var i=cc.instantiate(this.XocDia.chipPrefab);this.poolChip.put(i)}},showEffectBetDoor:function(t){var e=t.data.amount,i=t.data.user_id,n=t.data.door_id,o=t.data.amount_bet,s=t.data.my_bet_door,a=this.XocDia.getDoorByDoorId(n),r=this.XocDia.getPlayerByUserId(i);r&&a&&(r.isItMe&&a.setMyChip(s),a.setTotalChip(o),r.BasePlayer.showChangeBalance(-e),this.playerBetChip(r,e,a))},playerBetChip:function(t,e,i){var o=this.initNewChipByAmountBet(e);o.setPosition(this.getPlayerPositionNodeSpaceOfDoor(t,i)),o.parent=i.chipsNode;var s=i.getRandomPositionInChipsNode();o.runAction(cc.sequence(cc.moveTo(n.TIME_MOVE_CHIP,s.x,s.y),cc.callFunc(function(){},this)))},showEffectBalanceDoor:function(t){for(var e=this,i=t.data.players,o=function(t,o){var s=e.XocDia.getPlayerByUserId(i[t].user_id),a=e.XocDia.getDoorByDoorId(i[t].door_id),r=i[t].amount,c=i[t].remain_bet_door;if(s&&a&&r>0){a.setTotalChip(c),0===r&&a.chipsNode.removeAllChildren(!0),s.isItMe&&a.setMyChip(i[t].my_bet_door);for(var h=0;h<5;h++)e.createChipAndReturnPlayer(s,a);e.timeoutReturnChip=setTimeout(function(){s.BasePlayer.showChangeBalance(r)},1e3*n.TIME_RETURN_CHIP)}},s=0,a=i.length;s<a;s++)o(s)},createChipAndReturnPlayer:function(t,e){var i=this.initNewChipByAmountBet(this.XocDia.minBet);i.setPosition(e.getRandomPositionInChipsNode()),i.parent=e.chipsNode;var o=this.getPlayerPositionNodeSpaceOfDoor(t,e);i.runAction(cc.sequence(cc.moveTo(n.TIME_RETURN_CHIP,o.x,o.y),cc.callFunc(function(){this.poolChip.put(i)},this)))},showEffectResult:function(t){var e=t.data.players,i=t.data.coins,o=t.data.histories,s=t.data.last_match_game_id,a=i.number_green_coins;this.XocDia.XocDiaPlate.shakePlateByNumberGreenCoins(a),this.timeoutShowEffectResult=setTimeout(function(){this.showEffectBetControllerWin(a),this.showEffectWinCoin(e),this.XocDia.XocDiaHistory.initHistories(o,s)}.bind(this),1e3*(this.XocDia.XocDiaPlate.duration+n.TIME_SHOW_COIN))},showEffectBetControllerWin:function(t){var e=this.XocDia.getDoorByNumberGreenCoin(t),i=this.XocDia.getRatioDoorByNumberGreenCoin(t);e&&e.showWinNode(),i&&i.showWinNode()},showEffectWinCoin:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e].user_id,o=t[e].change_balance,s=this.XocDia.getPlayerByUserId(n);s&&(s.BasePlayer.showChangeBalance(o),s.BasePlayer.showEffectByChangeBalance(o),s.isItMe&&o>0&&this.GameCommon.Audio.playWin())}},initNewChipByAmountBet:function(t){var e=this.poolChip.get();e||(e=cc.instantiate(this.XocDia.chipPrefab));var i=this.XocDia.getIndexByAmountBet(t);return e.getComponent("Chip").init(i),e.scale=n.SCALE_CHIP_IN_DOOR,e},getPlayerPositionNodeSpaceOfDoor:function(t,e){var i=e.node.getPosition(),n=t.node.getPosition(),o=e.chipsNode.getPosition();return new cc.Vec2(n.x-i.x-o.x,n.y-i.y-o.y)},checkShowHostButton:function(){var t=this.XocDia.getHomePlayer();t?(this.XocDiaUI.hideRegisterHostButton(),t.isItMe?this.XocDiaUI.showRestHostButton():this.XocDiaUI.hideRestHostButton()):(this.XocDiaUI.showRegisterHostButton(),this.XocDiaUI.hideRestHostButton())},setAllDoorToStatusNo:function(){this.XocDia.evenDoor.hideAllButtons(),this.XocDia.oddDoor.hideAllButtons(),this.XocDia.green4Red0Door.hideAllButtons(),this.XocDia.green0Red4Door.hideAllButtons(),this.XocDia.green3Red1Door.hideAllButtons(),this.XocDia.green1Red3Door.hideAllButtons()},setAllDoorToStatusBet:function(t){this.XocDia.evenDoor.setBetStatus(),this.XocDia.oddDoor.setBetStatus(),t&&(this.XocDia.green4Red0Door.setBetStatus(),this.XocDia.green0Red4Door.setBetStatus(),this.XocDia.green3Red1Door.setBetStatus(),this.XocDia.green1Red3Door.setBetStatus())},setAllDoorToStatusBuy:function(){this.XocDia.evenDoor.setBuyStatus(),this.XocDia.oddDoor.setBuyStatus(),this.XocDia.green4Red0Door.setBuyStatus(),this.XocDia.green0Red4Door.setBuyStatus(),this.XocDia.green3Red1Door.setBuyStatus(),this.XocDia.green1Red3Door.setBuyStatus()},setAllDoorToStatusSell:function(){this.XocDia.evenDoor.setSellStatus(),this.XocDia.oddDoor.setSellStatus(),this.XocDia.green4Red0Door.setSellStatus(),this.XocDia.green0Red4Door.setSellStatus(),this.XocDia.green3Red1Door.setSellStatus(),this.XocDia.green1Red3Door.setSellStatus()},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var n in this.listPlayers)this.listPlayers[n].is_player&&this.listPlayers[n].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutReturnChip),clearTimeout(this.timeoutShowEffectResult)}};e.exports=o,cc._RF.pop()},{"./XocDiaConfig":"XocDiaConfig"}],XocDiaHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"d3253Wyq1hCwJVwgOTDjt7O","XocDiaHandlerRequest");var n=t("./XocDiaConstant"),o=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.XocDia.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var n in i)switch(i[n]){case o.GOLD:this.XocDia.initGold(e);break;case o.MONEY:this.XocDia.initMoney(e);break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case o.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case n.ROOM_INFO:break;case n.COUNT_DOWN:this.XocDia.handleCountDown(e);break;case n.START_GAME:this.XocDia.handleStartGame(e);break;case n.CHANGE_HOME:this.XocDia.handleChangeHome(e);break;case n.UPDATE_LIST_HOSTS:this.XocDia.handleUpdateListHosts(e);break;case n.PLAYERS_LEFT_ROOM:this.XocDia.handlePlayersLeftRoom(e);break;case n.PLAYERS_REQUEST_LEFT_ROOM:this.XocDia.handlePlayersRequestLeftRoom(e);break;case n.REQUEST_REGISTER_HOME:break;case n.BET_DOOR:this.XocDia.handlePlayerBetDoor(e);break;case n.BALANCE_DOOR:this.XocDia.handleBalanceDoor(e);break;case n.SELL_DOOR_STATE:this.XocDia.handleSellDoorState(e);break;case n.SELL_DOOR:this.XocDia.handleSellDoor(e);break;case n.BUY_DOOR:this.XocDia.handleBuyDoor(e);break;case n.RESULT:this.XocDia.handleResult(e);break;case n.ADD_PLAYER:this.XocDia.handleAddPlayer(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else s===n.REQUEST_REGISTER_HOME&&this.XocDiaUI.showRegisterHostButton(),this.XocDia.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./XocDiaConstant":"XocDiaConstant"}],XocDiaHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"b5d3d7iE6RD46o6kRBhmoho","XocDiaHistoryItem"),cc.Class({extends:cc.Component,properties:{chanNode:cc.Node,leNode:cc.Node,chanLabel:cc.Label,leLabel:cc.Label},onLoad:function(){},showByNumberWhiteCoin:function(t){this.reset(),this.chanLabel.string=t,this.leLabel.string=t,t%2==0?this.chanNode.active=!0:this.leNode.active=!0},showScaleAnimation:function(){},hideScaleAnimation:function(){},reset:function(){this.chanNode.active=!1,this.leNode.active=!1}}),cc._RF.pop()},{}],XocDiaHistory:[function(t,e,i){"use strict";cc._RF.push(e,"72694caLzZOqI3JtpL8AhcA","XocDiaHistory");var n=t("./XocDiaConfig"),o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,chanLabel:cc.Label,leLabel:cc.Label,white4Label:cc.Label,white0Label:cc.Label,white3Label:cc.Label,white1Label:cc.Label,bigNode:cc.Node,bigNodeLayout:cc.Node,small1NodeLayout:cc.Node,small2NodeLayout:cc.Node},init:function(t){for(var e in this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.listChildrenBigNode=this.bigNodeLayout.getChildren(),this.listChildrenSmall1Node=this.small1NodeLayout.getChildren(),this.listChildrenSmall2Node=this.small2NodeLayout.getChildren(),this.listComponentBig=[],this.listComponentSmall1=[],this.listComponentSmall2=[],this.listChildrenBigNode)this.listComponentBig.push(this.listChildrenBigNode[e].getComponent("XocDiaHistoryItem"));for(var i in this.listChildrenSmall1Node)this.listComponentSmall1.push(this.listChildrenSmall1Node[i].getComponent("XocDiaHistoryItem"));for(var o in this.listChildrenSmall2Node)this.listComponentSmall2.push(this.listChildrenSmall2Node[o].getComponent("XocDiaHistoryItem"));this.numberCols=n.NUMBER_COLS,this.numberRows=n.NUMBER_ROWS},onLoad:function(){},initHistories:function(t,e){this.reset(),this.initHistoriesBig(t);var i=[];for(var n in t)for(var s in t[n])i.push(t[n][s]);this.initHistoriesSmall1(i),this.initHistoriesSmall2(i),this.initInfoLabel(i),this.idLabel.string=String.format(o.XOC_DIA_ID,e)},initHistoriesBig:function(t){if(this.listComponentBig){for(var e=-1,i=0,n=t.length;i<n;i++)for(var o=0,s=t[i].length;o<s;o++)this.listComponentBig[i*this.numberRows+o].showByNumberWhiteCoin(t[i][o]),this.listComponentBig[i*this.numberRows+o].hideScaleAnimation(),e=i*this.numberRows+o;-1!==e&&this.listComponentBig[e].showScaleAnimation()}},initHistoriesSmall1:function(t){if(this.listComponentSmall1){for(var e=-1,i=t.length>n.NUMBER_CELL_SMALL_1?t.length-n.NUMBER_CELL_SMALL_1:0,o=i;o<t.length;o++)this.listComponentSmall1[o-i].showByNumberWhiteCoin(t[o]),this.listComponentSmall1[o-i].hideScaleAnimation(),e=o-i;-1!==e&&this.listComponentSmall1[e].showScaleAnimation()}},initHistoriesSmall2:function(t){if(this.listComponentSmall2){for(var e=-1,i=t.length>n.NUMBER_CELL_SMALL_2?t.length-n.NUMBER_CELL_SMALL_2:0,o=i;o<t.length;o++)this.listComponentSmall2[o-i].showByNumberWhiteCoin(t[o]),this.listComponentSmall2[o-i].hideScaleAnimation(),e=o-i;-1!==e&&this.listComponentSmall2[e].showScaleAnimation()}},initInfoLabel:function(t){var e=0,i=0,n=0,o=0,s=0,a=0;for(var r in t)switch(t[r]%2==0?++e:++i,t[r]){case 0:++o;break;case 1:++s;break;case 3:++a;break;case 4:++n}this.chanLabel.string=e,this.leLabel.string=i,this.white0Label.string=o,this.white1Label.string=a,this.white3Label.string=s,this.white4Label.string=n},onHistoryClick:function(){this.bigNode.active=!this.bigNode.active},onCloseClick:function(){this.bigNode.active=!1},reset:function(){if(this.listComponentBig)for(var t in this.listComponentBig)this.listComponentBig[t].reset();if(this.listComponentSmall1)for(var e in this.listComponentSmall1)this.listComponentSmall1[e].reset();if(this.listComponentSmall2)for(var i in this.listComponentSmall2)this.listComponentSmall2[i].reset()}}),cc._RF.pop()},{"../../helper/Message":"Message","./XocDiaConfig":"XocDiaConfig"}],XocDiaHostState:[function(t,e,i){"use strict";cc._RF.push(e,"bafd5oGXLlFj4NN2VteAPq5","XocDiaHostState");e.exports={NO:"NO",WAITING:"WAITING",IGNORE:"IGNORE",HOME:"HOME"},cc._RF.pop()},{}],XocDiaMyChipItem:[function(t,e,i){"use strict";cc._RF.push(e,"fea37opCW9K/6/EYhRmH2Y3","XocDiaMyChipItem");var n=t("../XocDiaConfig"),o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chipLabel:cc.Label},init:function(t,e){this.XocDiaMyChip=t,this.chip=e,this.chipLabel.string=o.nFormatter(e,1),this.isSelected=!1,this._initScale=this.node.scale},onLoad:function(){},onClick:function(){this.XocDiaMyChip.reset(),this.select(!this.isSelected)},select:function(t){this.isSelected=t,this.node.stopAllActions(),t?this.node.runAction(cc.scaleTo(n.TIME_SELECT_CHIP,n.SCALE_SELECT_CHIP)):this.node.runAction(cc.scaleTo(n.TIME_SELECT_CHIP,this._initScale))},selectWithoutAnimation:function(t){this.isSelected=t,this.node.scale=t?n.SCALE_SELECT_CHIP:this._initScale}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../XocDiaConfig":"XocDiaConfig"}],XocDiaMyChip:[function(t,e,i){"use strict";cc._RF.push(e,"ab729/Bw7hIopKLOpIBsM46","XocDiaMyChip");var n=t("../item/XocDiaMyChipItem"),o=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{myChipItems:[n]},init:function(t){this.XocDia=t,this.minBet=this.XocDia.minBet},onLoad:function(){for(var t in this.myChipItems)this.myChipItems[t].init(this,o.X_MY_CHIPS[t]*this.minBet),0==t&&this.myChipItems[t].selectWithoutAnimation(!0)},getChipSelected:function(){for(var t in this.myChipItems)if(this.myChipItems[t].isSelected)return this.myChipItems[t].chip;return 0},reset:function(){for(var t in this.myChipItems)this.myChipItems[t].isSelected&&this.myChipItems[t].select(!1)}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig","../item/XocDiaMyChipItem":"XocDiaMyChipItem"}],XocDiaPlate:[function(t,e,i){"use strict";cc._RF.push(e,"b55b8iCHBROA5xyOEvTdAEZ","XocDiaPlate");var n=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{bowlNode:cc.Node,xocNode:cc.Node,listCoin:[cc.Sprite],redSpriteFrame:cc.SpriteFrame,greenSpriteFrame:cc.SpriteFrame},init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI},onLoad:function(){this.isOnLoad=!0,this.animation=this.xocNode.getComponent(cc.Animation),this.duration=this.animation.defaultClip.duration,this.bowlInitX=this.bowlNode.x,this.bowlInitY=this.bowlNode.y,this.timeEachShake=n.TIME_SHAKE_PLATE,this.timeShowCoin=n.TIME_SHOW_COIN,this.distanceMoveBowlX=n.DISTANCE_MOVE_BOWL_X,this.distanceMoveBowlY=n.DISTANCE_MOVE_BOWL_Y},onDisable:function(){clearTimeout(this.timeoutHideXoc)},shakePlateByNumberGreenCoins:function(t){this.reset();for(var e=0,i=this.listCoin.length;e<i;e++)this.listCoin[e].spriteFrame=e<t?this.redSpriteFrame:this.greenSpriteFrame;this.xocNode.active=!0,this.xocNode.getComponent(cc.Animation).play(),clearTimeout(this.timeoutHideXoc),this.timeoutHideXoc=setTimeout(function(){this.xocNode.active=!1,this.bowlNode.runAction(cc.moveBy(this.timeShowCoin,this.distanceMoveBowlX,this.distanceMoveBowlY))}.bind(this),1e3*this.duration)},shakePlateByNumberGreenCoinsNoAnimation:function(t){this.reset();for(var e=0,i=this.listCoin.length;e<i;e++)this.listCoin[e].spriteFrame=e<t?this.greenSpriteFrame:this.redSpriteFrame;this.isOnLoad?this.bowlNode.setPosition(this.bowlInitX+this.distanceMoveBowlX,this.bowlInitY+this.distanceMoveBowlY):this.bowlNode.setPosition(n.DISTANCE_MOVE_BOWL_X+1,n.DISTANCE_MOVE_BOWL_Y-1)},reset:function(){this.isOnLoad&&(this.bowlNode.stopAllActions(),this.bowlNode.setPosition(this.bowlInitX,this.bowlInitY),this.bowlNode.setPosition(1,-1),this.xocNode.active=!1)}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig"}],XocDiaRegisterHostForm:[function(t,e,i){"use strict";cc._RF.push(e,"3b80bPr3I1EJ40oO7+V3lUZ","XocDiaRegisterHostForm");var n=t("../XocDiaHostState"),o=t("../../../helper/Message");t("../../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.XocDia=t},properties:{listNode:cc.Node,registerItemPrefab:cc.Prefab},initListHost:function(t){this.listNode.removeAllChildren(!0);for(var e=0,i=t.length;e<i;e++){this.createRegisterItem(t[e],e).parent=this.listNode}},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},createRegisterItem:function(t,e){var i=e+1,n=t.nick_name,o=t.host_state,s=this.getMessageStatusByHostState(o),a=cc.instantiate(this.registerItemPrefab);return a.getComponent("XocDiaRegisterItem").init(i,n,s),a},getMessageStatusByHostState:function(t){switch(t){case n.WAITING:return o.XOC_DIA_REGISTER_FORM_MESSAGE_WAITING;case n.IGNORE:return o.XOC_DIA_REGISTER_FORM_MESSAGE_IGNORE;case n.HOME:return o.XOC_DIA_REGISTER_FORM_MESSAGE_HOME;default:return""}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../XocDiaHostState":"XocDiaHostState"}],XocDiaRegisterItem:[function(t,e,i){"use strict";cc._RF.push(e,"514aaDw+iZLbr6cuB99Pzgn","XocDiaRegisterItem"),cc.Class({extends:cc.Component,properties:{noLabel:cc.Label,playerLabel:cc.Label,statusLabel:cc.Label},onLoad:function(){},init:function(t,e,i){this.noLabel.string=t,this.playerLabel.string=e,this.statusLabel.string=i}}),cc._RF.pop()},{}],XocDiaState:[function(t,e,i){"use strict";cc._RF.push(e,"6bf98k38tpPZpLsiSEbENCD","XocDiaState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",BETTING:"BETTING",SELL_DOOR:"SELL_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setBetting:function(){this.currentState=this.BETTING},setSellDoor:function(){this.currentState=this.SELL_DOOR},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isBetting:function(){return this.currentState===this.BETTING},isSellDoor:function(){return this.currentState===this.SELL_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],XocDiaUI:[function(t,e,i){"use strict";cc._RF.push(e,"97feeCWR8dGzIagWQwHqjNb","XocDiaUI"),cc.Class({extends:cc.Component,properties:{registerHostButtonNode:cc.Node,restHostButtonNode:cc.Node,registerHostNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){this.registerHostDialogForm=this.registerHostNode.getComponent("DialogForm")},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showRegisterForm:function(){this.registerHostDialogForm.showDialog()},hideRegisterForm:function(){this.registerHostDialogForm.hideDialog()},showRegisterHostButton:function(){this.registerHostButtonNode.active=!0},hideRegisterHostButton:function(){this.registerHostButtonNode.active=!1},showRestHostButton:function(){this.restHostButtonNode.active=!0},hideRestHostButton:function(){this.restHostButtonNode.active=!1},reset:function(){this.hideRegisterHostButton(),this.hideRestHostButton()}}),cc._RF.pop()},{}],XocDia:[function(t,e,i){"use strict";cc._RF.push(e,"f6bb9qvxVlHvpxfUCt/0tHZ","XocDia");var n=t("../../base/BaseController"),o=t("./XocDiaConstant"),s=t("./XocDiaConfig"),a=t("./XocDiaUI"),r=t("./XocDiaState"),c=t("./XocDiaHistory"),h=t("./XocDiaDoorState"),l=t("./item/XocDiaDoor"),u=t("./XocDiaHandlerRequest"),d=t("./XocDiaHandlerEffect"),m=t("./form/XocDiaRegisterHostForm"),f=t("./other/XocDiaPlate"),p=t("./other/XocDiaMyChip"),_=t("../../prefab/GameCommon"),S=t("../../helper/Constant"),g=t("../../helper/Message"),C=t("../../object/RoomType"),N=t("../../util/RandomUtil");cc.Class({extends:n,properties:{chipPrefab:cc.Prefab,evenDoor:l,oddDoor:l,green4Red0Door:l,green0Red4Door:l,green3Red1Door:l,green1Red3Door:l,XocDiaUI:a,XocDiaPlate:f,XocDiaMyChip:p,XocDiaRegisterHostForm:m,XocDiaHistory:c,GameCommon:_},onLoad:function(){this._super(),this.setSceneName(S.SCENE_GAME_XOCDIA),this.sfsManager.setController(this),this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[S.MIN_BET].value),this.roomType=parseInt(this.room.variables[S.ROOM_TYPE].value),this.isMoneyType=this.roomType==C.MONEY_CODE,this.playersNode=this.XocDiaUI.playersNode,this.isMoneyType||this.XocDiaUI.disableAllPlaceHolder(),this.XocDiaConstant=o,this.XocDiaConfig=s,this.XocDiaState=r,this.XocDiaHandlerRequest=u,this.XocDiaHandlerRequest.init(this),this.XocDiaHandlerEffect=d,this.XocDiaHandlerEffect.init(this),this.XocDiaHistory.init(this),this.XocDiaPlate.init(this),this.XocDiaMyChip.init(this),this.GameCommon.init(this),this.evenDoor.init(this,o.DOOR_ID_EVEN),this.oddDoor.init(this,o.DOOR_ID_ODD),this.green4Red0Door.init(this,o.DOOR_ID_4_GREEN_0_RED),this.green0Red4Door.init(this,o.DOOR_ID_0_GREEN_4_RED),this.green3Red1Door.init(this,o.DOOR_ID_3_GREEN_1_RED),this.green1Red3Door.init(this,o.DOOR_ID_1_GREEN_3_RED),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.XocDiaHandlerRequest.onPublicMessage.bind(this.XocDiaHandlerRequest),this.onRoomVarsUpdate=this.XocDiaHandlerRequest.onRoomVarsUpdate.bind(this.XocDiaHandlerRequest),this.onUserVarsUpdate=this.XocDiaHandlerRequest.onUserVarsUpdate.bind(this.XocDiaHandlerRequest),this.onResponse=this.XocDiaHandlerRequest.onResponse.bind(this.XocDiaHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this.getRoomInfo(),e=t.data.players,i=t.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var o in this.playersNode){var s=this.playersNode[o];s.getComponent("BasePlayer").setBetType(this.isMoneyType),s.active=!1}this.initPlayersByListPlayers(e,n),this.initPlayersByListPlayers(i,n)},initPlayersByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i]):t[i].isItMe=!1,this.initPlayer(t[i])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.isItMe?0:this.getRandomPosition();t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var n=t.node.getComponent("BasePlayer");t.BasePlayer=n,n.reset(),n.setAvatar(t.avatar),n.setRequestLeftRoom(t.request_left_room),n.setRoomMaster(t.is_home),n.setPlayerName(t.nick_name),n.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state,i=t.data.histories||t.data.statistic.histories,n=t.data.last_match_game_id;this.XocDiaState.setState(e),this.XocDiaHistory.initHistories(i,n),this.XocDiaState.isStop()?this.reset():this.XocDiaState.isWaiting()?this.resumeStateWaiting(t):this.XocDiaState.isBetting()?this.resumeStateBetting(t):this.XocDiaState.isSellDoor()?this.resumeStateSellDoor(t):this.XocDiaState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.getHomePlayer()||this.XocDiaUI.showRegisterHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateBetting:function(t){for(var e=t.data.doors,i=0,n=e.length;i<n;i++){var o=e[i],s=o.door_id,a=o.amount,r=o.my_bet_door;this.setDoorAmount(s,a,r)}!this.myPlayer.is_home&&this.myPlayer.is_player&&this.XocDiaHandlerEffect.setAllDoorToStatusBet(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateSellDoor:function(t){for(var e=t.data.doors,i=0,n=e.length;i<n;i++){var o=e[i],s=o.door_id,a=o.amount,r=o.door_state,c=o.my_bet_door;this.setDoorAmount(s,a,c),this.setDoorState(s,r)}this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateFinish:function(t){for(var e=t.data.doors,i=t.data.statistic.coins,n=t.data.statistic.players,o=i.number_green_coins,s=0,a=e.length;s<a;s++){var r=e[s],c=r.door_id,h=r.amount,l=r.win,u=r.my_bet_door;this.setDoorAmount(c,h,u),this.setDoorState(c,l)}for(var d in n){var m=this.getPlayerByUserId(n[d].user_id);if(m){var f=n[d].change_balance;m.BasePlayer.showChangeBalance(f),m.BasePlayer.showEffectByChangeBalance(f)}}this.XocDiaPlate.shakePlateByNumberGreenCoinsNoAnimation(o),this.XocDiaHandlerEffect.showEffectBetControllerWin(o),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.XocDiaHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,n=this.getPlayerByUserId(e);n&&!this.isMoneyType&&n.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,n=this.getPlayerByUserId(e);n&&this.isMoneyType&&n.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.XocDiaState.setWaiting(),this.GameCommon.hideWaitingNode(),this.XocDiaHandlerEffect.checkShowHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)):(this.XocDiaState.setStop(),this.XocDiaHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){this.XocDiaState.setBetting(),this.XocDiaUI.hideRegisterHostButton(),this.XocDiaUI.hideRestHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},handlePlayerBetDoor:function(t){this.XocDiaHandlerEffect.showEffectBetDoor(t)},handleBalanceDoor:function(t){this.XocDiaHandlerEffect.showEffectBalanceDoor(t)},handleSellDoorState:function(t){this.XocDiaState.setSellDoor(),this.XocDiaHandlerEffect.setAllDoorToStatusNo(),this.myPlayer.is_home&&this.XocDiaHandlerEffect.setAllDoorToStatusSell(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},handleSellDoor:function(t){var e=t.data.door_id,i=this.getDoorByDoorId(e);i&&(this.myPlayer.is_home?i.hideAllButtons():i.setBuyStatus())},handleBuyDoor:function(t){var e=t.data.door_id,i=this.getDoorByDoorId(e);i&&i.hideAllButtons()},handleChangeHome:function(t){var e=t.data.user_id_last_home,i=t.data.user_id_new_home,n=this.getPlayerByUserId(e),o=this.getPlayerByUserId(i);n&&(n.is_home=!1,n.BasePlayer.setRoomMaster(!1)),o?(o.is_home=!0,o.BasePlayer.setRoomMaster(!0),this.XocDiaUI.hideRegisterHostButton(),o.isItMe&&this.XocDiaUI.showRestHostButton()):this.XocDiaUI.showRegisterHostButton()},handleUpdateListHosts:function(t){var e=t.data.list_hosts;this.XocDiaRegisterHostForm.initListHost(e)},handleResult:function(t){this.XocDiaState.setFinish(),this.XocDiaHandlerEffect.stopCountDownAllPlayers(),this.XocDiaHandlerEffect.setAllDoorToStatusNo(),this.XocDiaHandlerEffect.showEffectResult(t),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.XocDiaState.isWaiting()){var i=this.getFirstPlayer();if(i){var n=i.BasePlayer.getRemainTimeCountDown(),o=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,n,o,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.XocDiaHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,n=t.data.players;for(var o in n){var s=this.getPlayerByUserId(n[o]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(g.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(g.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,n=e.variables.user_id.value,o=this.getPlayerByUserId(n);o&&o.BasePlayer.showChat(i)},onHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.showRegisterForm()},onRegisterHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.hideRegisterHostButton(),this.sendRequest.send(o.REQUEST_REGISTER_HOME)},onRestHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.hideRestHostButton(),this.sendRequest.send(o.REQUEST_IGNORE_HOME)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},getIndexByAmountBet:function(t){var e=t/this.minBet,i=0;for(var n in s.X_MY_CHIPS)s.X_MY_CHIPS[n]===e&&(i=n);return i},getDoorByDoorId:function(t){switch(t){case o.DOOR_ID_EVEN:return this.evenDoor;case o.DOOR_ID_ODD:return this.oddDoor;case o.DOOR_ID_0_GREEN_4_RED:return this.green0Red4Door;case o.DOOR_ID_4_GREEN_0_RED:return this.green4Red0Door;case o.DOOR_ID_1_GREEN_3_RED:return this.green1Red3Door;case o.DOOR_ID_3_GREEN_1_RED:return this.green3Red1Door;default:return null}},setDoorAmount:function(t,e,i){var n=this.getDoorByDoorId(t);n&&(n.setTotalChip(e),n.setMyChip(i))},setDoorState:function(t,e){var i=this.getDoorByDoorId(t);i&&(this.myPlayer.is_home?e===h.NO&&i.setSellStatus():this.myPlayer.is_player&&e===h.SELL&&i.setBuyStatus())},setWinDoor:function(t,e){var i=this.getDoorByDoorId(t);i&&(e?i.showWinNode():i.hideWinNode())},getDoorByNumberGreenCoin:function(t){switch(t){case 0:case 2:case 4:return this.evenDoor;case 1:case 3:return this.oddDoor}},getRatioDoorByNumberGreenCoin:function(t){switch(t){case 4:return this.green4Red0Door;case 3:return this.green3Red1Door;case 1:return this.green1Red3Door;case 0:return this.green0Red4Door;default:return null}},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(N.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},getHomePlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_home)return this.listPlayers[t];return null},startCountDownPlayer:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,n)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.XocDiaHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.clearAllTimeout(),this.evenDoor.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.oddDoor.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green4Red0Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green0Red4Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green3Red1Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green1Red3Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.evenDoor.reset(),this.oddDoor.reset(),this.green4Red0Door.reset(),this.green0Red4Door.reset(),this.green3Red1Door.reset(),this.green1Red3Door.reset(),this.XocDiaPlate.reset(),this.XocDiaUI.reset(),this.listPlayers)this.listPlayers[t].BasePlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","../../util/RandomUtil":"RandomUtil","./XocDiaConfig":"XocDiaConfig","./XocDiaConstant":"XocDiaConstant","./XocDiaDoorState":"XocDiaDoorState","./XocDiaHandlerEffect":"XocDiaHandlerEffect","./XocDiaHandlerRequest":"XocDiaHandlerRequest","./XocDiaHistory":"XocDiaHistory","./XocDiaState":"XocDiaState","./XocDiaUI":"XocDiaUI","./form/XocDiaRegisterHostForm":"XocDiaRegisterHostForm","./item/XocDiaDoor":"XocDiaDoor","./other/XocDiaMyChip":"XocDiaMyChip","./other/XocDiaPlate":"XocDiaPlate"}],md5:[function(t,e,i){"use strict";cc._RF.push(e,"037d0e5P/xJ8ppr16Jjl7Vv","md5");e.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,n,o,s,a;return o=2147483648&t,s=2147483648&e,a=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(n=1073741824&e)?2147483648^a^o^s:i|n?1073741824&a?3221225472^a^o^s:1073741824^a^o^s:a^o^s}function n(t,e,i){return t&e|~t&i}function o(t,e,i){return t&i|e&~i}function s(t,e,i){return t^e^i}function a(t,e,i){return e^(t|~i)}function r(t,o,s,a,r,c,h){return i(e(t=i(t,i(i(n(o,s,a),r),h)),c),o)}function c(t,n,s,a,r,c,h){return i(e(t=i(t,i(i(o(n,s,a),r),h)),c),n)}function h(t,n,o,a,r,c,h){return i(e(t=i(t,i(i(s(n,o,a),r),h)),c),n)}function l(t,n,o,s,r,c,h){return i(e(t=i(t,i(i(a(n,o,s),r),h)),c),n)}function u(t){var e="",i="",n=void 0;for(n=0;n<=3;n++)e+=(i="0"+(t>>>8*n&255).toString(16)).substr(i.length-2,2);return e}var d=Array(),m=void 0,f=void 0,p=void 0,_=void 0,S=void 0,g=void 0,C=void 0,N=void 0,E=void 0;for(d=function(t){for(var e=void 0,i=t.length,n=i+8,o=16*((n-n%64)/64+1),s=Array(o-1),a=0,r=0;r<i;)a=r%4*8,s[e=(r-r%4)/4]=s[e]|t.charCodeAt(r)<<a,r++;return a=r%4*8,s[e=(r-r%4)/4]=s[e]|128<<a,s[o-2]=i<<3,s[o-1]=i>>>29,s}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),g=1732584193,C=4023233417,N=2562383102,E=271733878,m=0;m<d.length;m+=16)f=g,p=C,_=N,S=E,C=l(C=l(C=l(C=l(C=h(C=h(C=h(C=h(C=c(C=c(C=c(C=c(C=r(C=r(C=r(C=r(C,N=r(N,E=r(E,g=r(g,C,N,E,d[m+0],7,3614090360),C,N,d[m+1],12,3905402710),g,C,d[m+2],17,606105819),E,g,d[m+3],22,3250441966),N=r(N,E=r(E,g=r(g,C,N,E,d[m+4],7,4118548399),C,N,d[m+5],12,1200080426),g,C,d[m+6],17,2821735955),E,g,d[m+7],22,4249261313),N=r(N,E=r(E,g=r(g,C,N,E,d[m+8],7,1770035416),C,N,d[m+9],12,2336552879),g,C,d[m+10],17,4294925233),E,g,d[m+11],22,2304563134),N=r(N,E=r(E,g=r(g,C,N,E,d[m+12],7,1804603682),C,N,d[m+13],12,4254626195),g,C,d[m+14],17,2792965006),E,g,d[m+15],22,1236535329),N=c(N,E=c(E,g=c(g,C,N,E,d[m+1],5,4129170786),C,N,d[m+6],9,3225465664),g,C,d[m+11],14,643717713),E,g,d[m+0],20,3921069994),N=c(N,E=c(E,g=c(g,C,N,E,d[m+5],5,3593408605),C,N,d[m+10],9,38016083),g,C,d[m+15],14,3634488961),E,g,d[m+4],20,3889429448),N=c(N,E=c(E,g=c(g,C,N,E,d[m+9],5,568446438),C,N,d[m+14],9,3275163606),g,C,d[m+3],14,4107603335),E,g,d[m+8],20,1163531501),N=c(N,E=c(E,g=c(g,C,N,E,d[m+13],5,2850285829),C,N,d[m+2],9,4243563512),g,C,d[m+7],14,1735328473),E,g,d[m+12],20,2368359562),N=h(N,E=h(E,g=h(g,C,N,E,d[m+5],4,4294588738),C,N,d[m+8],11,2272392833),g,C,d[m+11],16,1839030562),E,g,d[m+14],23,4259657740),N=h(N,E=h(E,g=h(g,C,N,E,d[m+1],4,2763975236),C,N,d[m+4],11,1272893353),g,C,d[m+7],16,4139469664),E,g,d[m+10],23,3200236656),N=h(N,E=h(E,g=h(g,C,N,E,d[m+13],4,681279174),C,N,d[m+0],11,3936430074),g,C,d[m+3],16,3572445317),E,g,d[m+6],23,76029189),N=h(N,E=h(E,g=h(g,C,N,E,d[m+9],4,3654602809),C,N,d[m+12],11,3873151461),g,C,d[m+15],16,530742520),E,g,d[m+2],23,3299628645),N=l(N,E=l(E,g=l(g,C,N,E,d[m+0],6,4096336452),C,N,d[m+7],10,1126891415),g,C,d[m+14],15,2878612391),E,g,d[m+5],21,4237533241),N=l(N,E=l(E,g=l(g,C,N,E,d[m+12],6,1700485571),C,N,d[m+3],10,2399980690),g,C,d[m+10],15,4293915773),E,g,d[m+1],21,2240044497),N=l(N,E=l(E,g=l(g,C,N,E,d[m+8],6,1873313359),C,N,d[m+15],10,4264355552),g,C,d[m+6],15,2734768916),E,g,d[m+13],21,1309151649),N=l(N,E=l(E,g=l(g,C,N,E,d[m+4],6,4149444226),C,N,d[m+11],10,3174756917),g,C,d[m+2],15,718787259),E,g,d[m+9],21,3951481745),g=i(g,f),C=i(C,p),N=i(N,_),E=i(E,S);return(u(g)+u(C)+u(N)+u(E)).toLowerCase()},cc._RF.pop()},{}],test:[function(t,e,i){"use strict";cc._RF.push(e,"4de4f6R6DdCbJdfwj0ffHvv","test"),cc.Class({extends:cc.Component,properties:{labelNode1:cc.Node,labelNode2:cc.Node,labelNode3:cc.Node},start:function(){cc.test=this}}),cc._RF.pop()},{}]},{},["test","API","APIConstant","BaseController","BaseScene","Config","Constant","FireFishConfig","Message","SFS2X_API_JS","md5","Audio","AudioFireFish","Capcha","Card","CompareType","Music","RoomType","VipSpriteManager","BaseBullet","BaseFish","Bullet","Fish","Gun","GunChoise","MyPlayerHover","PlasticityPositionType","Score","FormulaBezier","FormulaCurve","FormulaDirect","GameCommon","News","Toast","Invite","LogOut","Recharge","Setting","Tutorial","RechargeGoldForm","RechargeMoneyForm","RechargeSMSForm","ChangeBalance","WinEffect","AgentItem","AgentItem2","AvatarItem","AwardButtonItem","AwardCardRateItem","AwardHistoryItem","CardGameValueItem","ChatGameItem","ChatItem","EmotionItem","FFRankItem","FFRoomItem","FriendItem","FriendTopItem","MailItem","NewsItem","PaginationItem","PlayHistoryItem","PlayerOnlineItem","QuestNotificationItem","QuickChatItem","RankItem","RechargeCardItem","RechargeGoldHistoryItem","RechargeHistoryItem","RoomItem","SMSItem","SafeQuickSelectItem","SlotGameIconItem","SmallBannerItem","TutorialItem","VipItem","DiamondEventItem","HistoryEvent","RankEventItem","MiniGame","MiniGameCircle","MiniGameCircleNotification","MiniGameConstant","MiniGameResult","MiniGameResultTaiXiu","BauCua","BauCuaBet","BauCuaConfig","BauCuaConstant","BauCuaHistory","BauCuaPlate","BauCuaState","BauCuaTime","BauCuaUI","Bom","BomConstant","BomLine","BomReel","BomReel2","BomSelectForm","BomUI","BonusConfig","BonusConstant","BonusEvent","BonusMessage","BonusMoney","HuLoc","HuLocState","TanLoc","TanLocState","BonusEventMoneyItem","Diamond","DiamondConstant","DiamondLine","DiamondReel","DiamondSelectForm","DiamondUI","BauCuaRank","Event","GameMiniHistory","GameMiniRank","GameMiniRankTanLoc","TaiXiuChain","TaiXiuDetail","EventCenter","EventHuLoc","EventLuckyWheel","EventTaiXiu","EventTanLoc","EventTop","EventHuLocHistory","EventHuLocRank","EventTaiXiuItem","EventTopItem","EventTaiXiuRank","EventTaiXiuRule","EventRutLocRank","EventTanLocRank","EventTopRank","EventTopRule","BauCuaHistories","BomHistories","DiamondHistories","MiniBaCayHistories","MiniGameLotteryHistories","MiniPokerHistories","TaiXiuHistories","TanLocHistories","TrenDuoiHistories","WildHistories","BauCuaBetItem","BauCuaHistoryGameItem","BauCuaHistoryItem","BauCuaItem","BauCuaNumberItem","BomHistoryItem","BomItem","DiamondHistoryItem","DiamondItem","DiamondNumberLineItem","DiamondSelectItem","GameMiniJackpotItem","GameMiniRankItem","JackpotItem","LuckyWheelItem","MiniGameChatItem","MiniGameLotteryBetItem","MiniGameLotteryBoardItem","MiniGameLotteryHistoryItem","MiniGameLotteryNumberItem","MiniGameLotterySelectItem","MiniGameXPer","MiniPokerHistoryItem","TaiXiuChainItem","TaiXiuDetailItem","TaiXiuHistoriesItem","TaiXiuNumberItem","TaiXiuSelectItem","TanLocHistoryItem","TanLocRankItem","TrenDuoiHistoryCardItem","TrenDuoiHistoryItem","WildHistoryItem","WildItem","Jackpot","JackpotConstant","JackpotEffect","JackpotXPer","LuckyWheel","LuckyWheelConfig","LuckyWheelConstant","MiniBaCay","MiniBaCayCard","MiniBaCayConstant","MiniBaCayReel","MiniBaCayReels","MiniBaCayUI","MiniPoker","MiniPokerCard","MiniPokerConstant","MiniPokerReel","MiniPokerReels","MiniPokerUI","MiniGameLottery","MiniGameLotteryBets","MiniGameLotteryBoard","MiniGameLotteryChat","MiniGameLotteryConstant","MiniGameLotteryQuickSelect","MiniGameLotteryResults","MiniGameLotteryState","MiniGameLotteryTime","MiniGameLotteryUI","MiniGameLotteryContentDauDuoi","MiniGameLotteryContentDe","MiniGameLotteryContentHu","MiniGameLotteryContentLo","MiniGameLotteryContentXien","TaiXiu","TaiXiuChat","TaiXiuConstant","TaiXiuDice","TaiXiuHistory","TaiXiuHistoryGame","TaiXiuHistoryGame1","TaiXiuHistoryGame2","TaiXiuHistoryItem","TaiXiuHistoryItem2","TaiXiuPlate","TaiXiuPlateMove","TaiXiuQuickSelect","TaiXiuState","TaiXiuTime","TrenDuoi","TrenDuoiCard","TrenDuoiConstant","TrenDuoiReel","TrenDuoiUI","Wild","WildConstant","WildReel","WildReel2","WildSelectAutoSpin","WildSelectAutoSpinItem","WildUI","Balance","CardController","Chip","ScrollBottom","BasePlayer","Slot2BonusItem","Slot2ChatItem","Slot2HistoryItem","Slot2Item","Slot2Jackpot2Item","Slot2JackpotItem","Slot2MiniGameItem","Slot2RankItem","Slot3BonusItem","Slot3HistoryItem","Slot3Item","Slot3Jackpot2Item","Slot3JackpotItem","Slot3MiniGameItem","Slot3Rank2Item","Slot3RankItem","Slot4BonusItem","Slot4HistoryItem","Slot4Item","Slot4MiniGameItem","Slot4RankItem","SlotBonusItem","SlotCardItem","SlotHistoryItem","SlotItem","SlotJackpotItem","SlotRankItem","BaCay","BaCayCard","BaCayConfig","BaCayConstant","BaCayHandlerEffect","BaCayHandlerRequest","BaCayPlayer","BaCayPrivateBetState","BaCayState","BaCayUI","BaCayBetChicken","GameCenter","GameCenterHandlerRequest","GameCenterUI","GameInfo","GameList","GameRecharge","GameRoom","Footer","Agent","Bonus","ChangePassword","ChangePasswordSuccess","ConfirmRemoveMail","ConfirmSecurity","Friend","GiftCode","JoinRoomError","OtpFirstAccount","PlayerInvite","UpdateAvatar","FriendAward","FriendCenter","FriendList","FriendTop","Header","HeaderAccount","HeaderAccountUI","HeaderLogin","InfoAccount","InfoHistory","InfoMail","InfoSercurity","VipAccount","InfoAwardHistory","InfoPlayGoldHistory","InfoPlayMoneyHistory","InfoRechargeGoldHistory","InfoRechargeMoneyHistory","InfoGame","InfoSercurityAccount","InfoSercurityLogin","InfoSercurityActivePhone","InfoSercurityInfo","InfoSercurityUpdate","Chat","ChatEvent","GameListAll","GameListBetting","GameListCardGame","GameListEvent","GameSlot","Online","Room","SmallBanner","AwardButtonCard","AwardCard","RechargeButtonCard","RechargeGold","RechargeIAP","RechargeMoney","RechargeSMS","Safe","Transfer","TransferAgent","TransferContent","FireFish","FireFishBulletManager","FireFishCenter","FireFishConstant","FireFishFormulaManager","FireFishGame","FireFishUI","FishManager","FFEvent","FFRank","FFTutorial","RechargeMessage","FFRankLuck","FFRankMegaPrize","FFRankMiss","FireFishBasePlayer","FireFishMyPlayer","FireFishOtherPlayer","FFGameCardsList","FFLockFish","FireFishHeader","FireFishMegaPrize","Lieng","LiengBetState","LiengCard","LiengConfig","LiengConstant","LiengGroupCardsType","LiengHandlerEffect","LiengHandlerRequest","LiengPlayer","LiengState","LiengUI","MauBinh","MauBinhCard","MauBinhConfig","MauBinhConstant","MauBinhGroupCardsType","MauBinhHandlerEffect","MauBinhHandlerRequest","MauBinhPlayer","MauBinhState","MauBinhUI","MauBinhUtil","MauBinhWinType","MauBinhCardController","MauBinhMove","Phom","PhomCard","PhomConfig","PhomConstant","PhomHandlerEffect","PhomHandlerRequest","PhomPlayer","PhomState","PhomUI","PhomUtil","PhomWinType","PhomCardController","Poker","PokerBetState","PokerCard","PokerConfig","PokerConstant","PokerGroupCardsType","PokerHandlerEffect","PokerHandlerRequest","PokerPlayer","PokerState","PokerUI","Sam","SamCard","SamConfig","SamConstant","SamGroupCardsType","SamHandlerEffect","SamHandlerRequest","SamPlayer","SamRecommend","SamState","SamUI","SamUtil","SamWinType","SamCardController","Slot2","Slot2Bonus","Slot2Constant","Slot2Control","Slot2Effect","Slot2HandlerRequest","Slot2Header","Slot2Label","Slot2Lines","Slot2Reel","Slot2Reels","Slot2SelectLine","Slot2State","Slot2UI","Slot2X","Slot2AutoSpinSetting","Slot2BonusResult","Slot2Chat","Slot2History","Slot2JackpotForm","Slot2Rank","Slot2Tutorial","Slot2NumberLineItem","Slot2SelectNumberLineItem","Slot3","Slot3Bonus","Slot3Constant","Slot3Control","Slot3Effect","Slot3Footer","Slot3HandlerRequest","Slot3Header","Slot3Label","Slot3Lines","Slot3Reel","Slot3Reels","Slot3SelectLine","Slot3State","Slot3UI","Slot3X","Slot3AutoSpinSetting","Slot3BonusResult","Slot3History","Slot3JackpotForm","Slot3Rank2","Slot3NumberLineItem","Slot3SelectNumberLineItem","Slot4","Slot4Bonus","Slot4Constant","Slot4Control","Slot4Effect","Slot4HandlerRequest","Slot4Header","Slot4Label","Slot4Lines","Slot4Reel","Slot4Reels","Slot4State","Slot4UI","Slot4X","Slot4AutoSpinSetting","Slot4BonusResult","Slot4Form","Slot4History","Slot4Rank","Slot4SelectLine","Slot4NumberLineItem","Slot4SelectNumberLineItem","Slot","SlotBonus","SlotConstant","SlotEffect","SlotHandlerRequest","SlotLabel","SlotLines","SlotPoint","SlotReel","SlotReels","SlotSelectLine","SlotState","SlotUI","SlotX","SlotAutoSpinSetting","SlotGameOver","SlotHelp","SlotHistory","SlotRank","SlotTutorial","SlotNumberLineItem","SlotSelectNumberLineItem","TLMN","TLMNCard","TLMNConfig","TLMNConstant","TLMNGroupCardsType","TLMNHandlerEffect","TLMNHandlerRequest","TLMNPlayer","TLMNRecommend","TLMNState","TLMNThangTrangType","TLMNThoiType","TLMNUI","TLMNUtil","TLMNWinType","TLMNCardController","XiTo","XiToBetState","XiToCard","XiToConfig","XiToConstant","XiToGroupCardsType","XiToHandlerEffect","XiToHandlerRequest","XiToPlayer","XiToState","XiToUI","XiToSelectCard","XocDia","XocDiaConfig","XocDiaConstant","XocDiaDoorState","XocDiaHandlerEffect","XocDiaHandlerRequest","XocDiaHistory","XocDiaHostState","XocDiaState","XocDiaUI","XocDiaRegisterHostForm","XocDiaChip","XocDiaDoor","XocDiaHistoryItem","XocDiaMyChipItem","XocDiaRegisterItem","XocDiaMyChip","XocDiaPlate","Login","LoginUI","ForgetPasswordEmail","ForgetPasswordPhone","OTPLogin","UpdateNickname","LoginLogin","LoginMenu","LoginRegister","HotUpdate","Splash","SFSManager","SFSSendRequest","Processing","ShowHideAnim","Button","BetForm","BuyInForm","DialogForm","DialogMessage","DropDownList","DropDownList2","DropDownListItem","FormMove","Toggle","BrowserUtil","CardUtil","FormatUtil","NodeUtil","RandomUtil","Track","Util"]);